function Gae(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var V_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ln(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var HM={exports:{}},T0={},WM={exports:{}},Mn={};var PF;function qae(){if(PF)return Mn;PF=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),d=Symbol.iterator;function h(q){return q===null||typeof q!="object"?null:(q=d&&q[d]||q["@@iterator"],typeof q=="function"?q:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,x={};function v(q,Q,ie){this.props=q,this.context=Q,this.refs=x,this.updater=ie||m}v.prototype.isReactComponent={},v.prototype.setState=function(q,Q){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,Q,"setState")},v.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function _(){}_.prototype=v.prototype;function E(q,Q,ie){this.props=q,this.context=Q,this.refs=x,this.updater=ie||m}var T=E.prototype=new _;T.constructor=E,b(T,v.prototype),T.isPureReactComponent=!0;var A=Array.isArray,P=Object.prototype.hasOwnProperty,R={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function L(q,Q,ie){var ce,ye={},Ce=null,he=null;if(Q!=null)for(ce in Q.ref!==void 0&&(he=Q.ref),Q.key!==void 0&&(Ce=""+Q.key),Q)P.call(Q,ce)&&!N.hasOwnProperty(ce)&&(ye[ce]=Q[ce]);var De=arguments.length-2;if(De===1)ye.children=ie;else if(1<De){for(var be=Array(De),_e=0;_e<De;_e++)be[_e]=arguments[_e+2];ye.children=be}if(q&&q.defaultProps)for(ce in De=q.defaultProps,De)ye[ce]===void 0&&(ye[ce]=De[ce]);return{$$typeof:t,type:q,key:Ce,ref:he,props:ye,_owner:R.current}}function I(q,Q){return{$$typeof:t,type:q.type,key:Q,ref:q.ref,props:q.props,_owner:q._owner}}function j(q){return typeof q=="object"&&q!==null&&q.$$typeof===t}function B(q){var Q={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(ie){return Q[ie]})}var H=/\/+/g;function J(q,Q){return typeof q=="object"&&q!==null&&q.key!=null?B(""+q.key):Q.toString(36)}function G(q,Q,ie,ce,ye){var Ce=typeof q;(Ce==="undefined"||Ce==="boolean")&&(q=null);var he=!1;if(q===null)he=!0;else switch(Ce){case"string":case"number":he=!0;break;case"object":switch(q.$$typeof){case t:case e:he=!0}}if(he)return he=q,ye=ye(he),q=ce===""?"."+J(he,0):ce,A(ye)?(ie="",q!=null&&(ie=q.replace(H,"$&/")+"/"),G(ye,Q,ie,"",function(_e){return _e})):ye!=null&&(j(ye)&&(ye=I(ye,ie+(!ye.key||he&&he.key===ye.key?"":(""+ye.key).replace(H,"$&/")+"/")+q)),Q.push(ye)),1;if(he=0,ce=ce===""?".":ce+":",A(q))for(var De=0;De<q.length;De++){Ce=q[De];var be=ce+J(Ce,De);he+=G(Ce,Q,ie,be,ye)}else if(be=h(q),typeof be=="function")for(q=be.call(q),De=0;!(Ce=q.next()).done;)Ce=Ce.value,be=ce+J(Ce,De++),he+=G(Ce,Q,ie,be,ye);else if(Ce==="object")throw Q=String(q),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return he}function W(q,Q,ie){if(q==null)return q;var ce=[],ye=0;return G(q,ce,"","",function(Ce){return Q.call(ie,Ce,ye++)}),ce}function K(q){if(q._status===-1){var Q=q._result;Q=Q(),Q.then(function(ie){(q._status===0||q._status===-1)&&(q._status=1,q._result=ie)},function(ie){(q._status===0||q._status===-1)&&(q._status=2,q._result=ie)}),q._status===-1&&(q._status=0,q._result=Q)}if(q._status===1)return q._result.default;throw q._result}var te={current:null},z={transition:null},V={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:z,ReactCurrentOwner:R};function X(){throw Error("act(...) is not supported in production builds of React.")}return Mn.Children={map:W,forEach:function(q,Q,ie){W(q,function(){Q.apply(this,arguments)},ie)},count:function(q){var Q=0;return W(q,function(){Q++}),Q},toArray:function(q){return W(q,function(Q){return Q})||[]},only:function(q){if(!j(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},Mn.Component=v,Mn.Fragment=n,Mn.Profiler=i,Mn.PureComponent=E,Mn.StrictMode=r,Mn.Suspense=l,Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,Mn.act=X,Mn.cloneElement=function(q,Q,ie){if(q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+q+".");var ce=b({},q.props),ye=q.key,Ce=q.ref,he=q._owner;if(Q!=null){if(Q.ref!==void 0&&(Ce=Q.ref,he=R.current),Q.key!==void 0&&(ye=""+Q.key),q.type&&q.type.defaultProps)var De=q.type.defaultProps;for(be in Q)P.call(Q,be)&&!N.hasOwnProperty(be)&&(ce[be]=Q[be]===void 0&&De!==void 0?De[be]:Q[be])}var be=arguments.length-2;if(be===1)ce.children=ie;else if(1<be){De=Array(be);for(var _e=0;_e<be;_e++)De[_e]=arguments[_e+2];ce.children=De}return{$$typeof:t,type:q.type,key:ye,ref:Ce,props:ce,_owner:he}},Mn.createContext=function(q){return q={$$typeof:a,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},q.Provider={$$typeof:s,_context:q},q.Consumer=q},Mn.createElement=L,Mn.createFactory=function(q){var Q=L.bind(null,q);return Q.type=q,Q},Mn.createRef=function(){return{current:null}},Mn.forwardRef=function(q){return{$$typeof:o,render:q}},Mn.isValidElement=j,Mn.lazy=function(q){return{$$typeof:u,_payload:{_status:-1,_result:q},_init:K}},Mn.memo=function(q,Q){return{$$typeof:c,type:q,compare:Q===void 0?null:Q}},Mn.startTransition=function(q){var Q=z.transition;z.transition={};try{q()}finally{z.transition=Q}},Mn.unstable_act=X,Mn.useCallback=function(q,Q){return te.current.useCallback(q,Q)},Mn.useContext=function(q){return te.current.useContext(q)},Mn.useDebugValue=function(){},Mn.useDeferredValue=function(q){return te.current.useDeferredValue(q)},Mn.useEffect=function(q,Q){return te.current.useEffect(q,Q)},Mn.useId=function(){return te.current.useId()},Mn.useImperativeHandle=function(q,Q,ie){return te.current.useImperativeHandle(q,Q,ie)},Mn.useInsertionEffect=function(q,Q){return te.current.useInsertionEffect(q,Q)},Mn.useLayoutEffect=function(q,Q){return te.current.useLayoutEffect(q,Q)},Mn.useMemo=function(q,Q){return te.current.useMemo(q,Q)},Mn.useReducer=function(q,Q,ie){return te.current.useReducer(q,Q,ie)},Mn.useRef=function(q){return te.current.useRef(q)},Mn.useState=function(q){return te.current.useState(q)},Mn.useSyncExternalStore=function(q,Q,ie){return te.current.useSyncExternalStore(q,Q,ie)},Mn.useTransition=function(){return te.current.useTransition()},Mn.version="18.3.1",Mn}var CF;function lw(){return CF||(CF=1,WM.exports=qae()),WM.exports}var RF;function Kae(){if(RF)return T0;RF=1;var t=lw(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(o,l,c){var u,d={},h=null,m=null;c!==void 0&&(h=""+c),l.key!==void 0&&(h=""+l.key),l.ref!==void 0&&(m=l.ref);for(u in l)r.call(l,u)&&!s.hasOwnProperty(u)&&(d[u]=l[u]);if(o&&o.defaultProps)for(u in l=o.defaultProps,l)d[u]===void 0&&(d[u]=l[u]);return{$$typeof:e,type:o,key:h,ref:m,props:d,_owner:i.current}}return T0.Fragment=n,T0.jsx=a,T0.jsxs=a,T0}var OF;function Xae(){return OF||(OF=1,HM.exports=Kae()),HM.exports}var p=Xae(),H_={},GM={exports:{}},ua={},qM={exports:{}},KM={};var NF;function Yae(){return NF||(NF=1,(function(t){function e(z,V){var X=z.length;z.push(V);e:for(;0<X;){var q=X-1>>>1,Q=z[q];if(0<i(Q,V))z[q]=V,z[X]=Q,X=q;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var V=z[0],X=z.pop();if(X!==V){z[0]=X;e:for(var q=0,Q=z.length,ie=Q>>>1;q<ie;){var ce=2*(q+1)-1,ye=z[ce],Ce=ce+1,he=z[Ce];if(0>i(ye,X))Ce<Q&&0>i(he,ye)?(z[q]=he,z[Ce]=X,q=Ce):(z[q]=ye,z[ce]=X,q=ce);else if(Ce<Q&&0>i(he,X))z[q]=he,z[Ce]=X,q=Ce;else break e}}return V}function i(z,V){var X=z.sortIndex-V.sortIndex;return X!==0?X:z.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,m=!1,b=!1,x=!1,v=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(z){for(var V=n(c);V!==null;){if(V.callback===null)r(c);else if(V.startTime<=z)r(c),V.sortIndex=V.expirationTime,e(l,V);else break;V=n(c)}}function A(z){if(x=!1,T(z),!b)if(n(l)!==null)b=!0,K(P);else{var V=n(c);V!==null&&te(A,V.startTime-z)}}function P(z,V){b=!1,x&&(x=!1,_(L),L=-1),m=!0;var X=h;try{for(T(V),d=n(l);d!==null&&(!(d.expirationTime>V)||z&&!B());){var q=d.callback;if(typeof q=="function"){d.callback=null,h=d.priorityLevel;var Q=q(d.expirationTime<=V);V=t.unstable_now(),typeof Q=="function"?d.callback=Q:d===n(l)&&r(l),T(V)}else r(l);d=n(l)}if(d!==null)var ie=!0;else{var ce=n(c);ce!==null&&te(A,ce.startTime-V),ie=!1}return ie}finally{d=null,h=X,m=!1}}var R=!1,N=null,L=-1,I=5,j=-1;function B(){return!(t.unstable_now()-j<I)}function H(){if(N!==null){var z=t.unstable_now();j=z;var V=!0;try{V=N(!0,z)}finally{V?J():(R=!1,N=null)}}else R=!1}var J;if(typeof E=="function")J=function(){E(H)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,W=G.port2;G.port1.onmessage=H,J=function(){W.postMessage(null)}}else J=function(){v(H,0)};function K(z){N=z,R||(R=!0,J())}function te(z,V){L=v(function(){z(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){b||m||(b=!0,K(P))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(h){case 1:case 2:case 3:var V=3;break;default:V=h}var X=h;h=V;try{return z()}finally{h=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,V){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var X=h;h=z;try{return V()}finally{h=X}},t.unstable_scheduleCallback=function(z,V,X){var q=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?q+X:q):X=q,z){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=X+Q,z={id:u++,callback:V,priorityLevel:z,startTime:X,expirationTime:Q,sortIndex:-1},X>q?(z.sortIndex=X,e(c,z),n(l)===null&&z===n(c)&&(x?(_(L),L=-1):x=!0,te(A,X-q))):(z.sortIndex=Q,e(l,z),b||m||(b=!0,K(P))),z},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(z){var V=h;return function(){var X=h;h=V;try{return z.apply(this,arguments)}finally{h=X}}}})(KM)),KM}var IF;function Jae(){return IF||(IF=1,qM.exports=Yae()),qM.exports}var kF;function Qae(){if(kF)return ua;kF=1;var t=lw(),e=Jae();function n(f){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+f,S=1;S<arguments.length;S++)g+="&args[]="+encodeURIComponent(arguments[S]);return"Minified React error #"+f+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(f,g){a(f,g),a(f+"Capture",g)}function a(f,g){for(i[f]=g,f=0;f<g.length;f++)r.add(g[f])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},d={};function h(f){return l.call(d,f)?!0:l.call(u,f)?!1:c.test(f)?d[f]=!0:(u[f]=!0,!1)}function m(f,g,S,O){if(S!==null&&S.type===0)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return O?!1:S!==null?!S.acceptsBooleans:(f=f.toLowerCase().slice(0,5),f!=="data-"&&f!=="aria-");default:return!1}}function b(f,g,S,O){if(g===null||typeof g>"u"||m(f,g,S,O))return!0;if(O)return!1;if(S!==null)switch(S.type){case 3:return!g;case 4:return g===!1;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}function x(f,g,S,O,D,F,Y){this.acceptsBooleans=g===2||g===3||g===4,this.attributeName=O,this.attributeNamespace=D,this.mustUseProperty=S,this.propertyName=f,this.type=g,this.sanitizeURL=F,this.removeEmptyString=Y}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(f){v[f]=new x(f,0,!1,f,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(f){var g=f[0];v[g]=new x(g,1,!1,f[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(f){v[f]=new x(f,2,!1,f.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(f){v[f]=new x(f,2,!1,f,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(f){v[f]=new x(f,3,!1,f.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(f){v[f]=new x(f,3,!0,f,null,!1,!1)}),["capture","download"].forEach(function(f){v[f]=new x(f,4,!1,f,null,!1,!1)}),["cols","rows","size","span"].forEach(function(f){v[f]=new x(f,6,!1,f,null,!1,!1)}),["rowSpan","start"].forEach(function(f){v[f]=new x(f,5,!1,f.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function E(f){return f[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(f){var g=f.replace(_,E);v[g]=new x(g,1,!1,f,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(f){var g=f.replace(_,E);v[g]=new x(g,1,!1,f,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(f){var g=f.replace(_,E);v[g]=new x(g,1,!1,f,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(f){v[f]=new x(f,1,!1,f.toLowerCase(),null,!1,!1)}),v.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(f){v[f]=new x(f,1,!1,f.toLowerCase(),null,!0,!0)});function T(f,g,S,O){var D=v.hasOwnProperty(g)?v[g]:null;(D!==null?D.type!==0:O||!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(b(g,S,D,O)&&(S=null),O||D===null?h(g)&&(S===null?f.removeAttribute(g):f.setAttribute(g,""+S)):D.mustUseProperty?f[D.propertyName]=S===null?D.type===3?!1:"":S:(g=D.attributeName,O=D.attributeNamespace,S===null?f.removeAttribute(g):(D=D.type,S=D===3||D===4&&S===!0?"":""+S,O?f.setAttributeNS(O,g,S):f.setAttribute(g,S))))}var A=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),R=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),B=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),z=Symbol.iterator;function V(f){return f===null||typeof f!="object"?null:(f=z&&f[z]||f["@@iterator"],typeof f=="function"?f:null)}var X=Object.assign,q;function Q(f){if(q===void 0)try{throw Error()}catch(S){var g=S.stack.trim().match(/\n( *(at )?)/);q=g&&g[1]||""}return`
`+q+f}var ie=!1;function ce(f,g){if(!f||ie)return"";ie=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(Oe){var O=Oe}Reflect.construct(f,[],g)}else{try{g.call()}catch(Oe){O=Oe}f.call(g.prototype)}else{try{throw Error()}catch(Oe){O=Oe}f()}}catch(Oe){if(Oe&&O&&typeof Oe.stack=="string"){for(var D=Oe.stack.split(`
`),F=O.stack.split(`
`),Y=D.length-1,le=F.length-1;1<=Y&&0<=le&&D[Y]!==F[le];)le--;for(;1<=Y&&0<=le;Y--,le--)if(D[Y]!==F[le]){if(Y!==1||le!==1)do if(Y--,le--,0>le||D[Y]!==F[le]){var fe=`
`+D[Y].replace(" at new "," at ");return f.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",f.displayName)),fe}while(1<=Y&&0<=le);break}}}finally{ie=!1,Error.prepareStackTrace=S}return(f=f?f.displayName||f.name:"")?Q(f):""}function ye(f){switch(f.tag){case 5:return Q(f.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return f=ce(f.type,!1),f;case 11:return f=ce(f.type.render,!1),f;case 1:return f=ce(f.type,!0),f;default:return""}}function Ce(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case N:return"Fragment";case R:return"Portal";case I:return"Profiler";case L:return"StrictMode";case J:return"Suspense";case G:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case B:return(f.displayName||"Context")+".Consumer";case j:return(f._context.displayName||"Context")+".Provider";case H:var g=f.render;return f=f.displayName,f||(f=g.displayName||g.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case W:return g=f.displayName||null,g!==null?g:Ce(f.type)||"Memo";case K:g=f._payload,f=f._init;try{return Ce(f(g))}catch{}}return null}function he(f){var g=f.type;switch(f.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=g.render,f=f.displayName||f.name||"",g.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(g);case 8:return g===L?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function De(f){switch(typeof f){case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function be(f){var g=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function _e(f){var g=be(f)?"checked":"value",S=Object.getOwnPropertyDescriptor(f.constructor.prototype,g),O=""+f[g];if(!f.hasOwnProperty(g)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var D=S.get,F=S.set;return Object.defineProperty(f,g,{configurable:!0,get:function(){return D.call(this)},set:function(Y){O=""+Y,F.call(this,Y)}}),Object.defineProperty(f,g,{enumerable:S.enumerable}),{getValue:function(){return O},setValue:function(Y){O=""+Y},stopTracking:function(){f._valueTracker=null,delete f[g]}}}}function Ee(f){f._valueTracker||(f._valueTracker=_e(f))}function ee(f){if(!f)return!1;var g=f._valueTracker;if(!g)return!0;var S=g.getValue(),O="";return f&&(O=be(f)?f.checked?"true":"false":f.value),f=O,f!==S?(g.setValue(f),!0):!1}function Me(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}function xe(f,g){var S=g.checked;return X({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:S??f._wrapperState.initialChecked})}function Le(f,g){var S=g.defaultValue==null?"":g.defaultValue,O=g.checked!=null?g.checked:g.defaultChecked;S=De(g.value!=null?g.value:S),f._wrapperState={initialChecked:O,initialValue:S,controlled:g.type==="checkbox"||g.type==="radio"?g.checked!=null:g.value!=null}}function Pe(f,g){g=g.checked,g!=null&&T(f,"checked",g,!1)}function tt(f,g){Pe(f,g);var S=De(g.value),O=g.type;if(S!=null)O==="number"?(S===0&&f.value===""||f.value!=S)&&(f.value=""+S):f.value!==""+S&&(f.value=""+S);else if(O==="submit"||O==="reset"){f.removeAttribute("value");return}g.hasOwnProperty("value")?re(f,g.type,S):g.hasOwnProperty("defaultValue")&&re(f,g.type,De(g.defaultValue)),g.checked==null&&g.defaultChecked!=null&&(f.defaultChecked=!!g.defaultChecked)}function Ze(f,g,S){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var O=g.type;if(!(O!=="submit"&&O!=="reset"||g.value!==void 0&&g.value!==null))return;g=""+f._wrapperState.initialValue,S||g===f.value||(f.value=g),f.defaultValue=g}S=f.name,S!==""&&(f.name=""),f.defaultChecked=!!f._wrapperState.initialChecked,S!==""&&(f.name=S)}function re(f,g,S){(g!=="number"||Me(f.ownerDocument)!==f)&&(S==null?f.defaultValue=""+f._wrapperState.initialValue:f.defaultValue!==""+S&&(f.defaultValue=""+S))}var Z=Array.isArray;function ge(f,g,S,O){if(f=f.options,g){g={};for(var D=0;D<S.length;D++)g["$"+S[D]]=!0;for(S=0;S<f.length;S++)D=g.hasOwnProperty("$"+f[S].value),f[S].selected!==D&&(f[S].selected=D),D&&O&&(f[S].defaultSelected=!0)}else{for(S=""+De(S),g=null,D=0;D<f.length;D++){if(f[D].value===S){f[D].selected=!0,O&&(f[D].defaultSelected=!0);return}g!==null||f[D].disabled||(g=f[D])}g!==null&&(g.selected=!0)}}function $e(f,g){if(g.dangerouslySetInnerHTML!=null)throw Error(n(91));return X({},g,{value:void 0,defaultValue:void 0,children:""+f._wrapperState.initialValue})}function Be(f,g){var S=g.value;if(S==null){if(S=g.children,g=g.defaultValue,S!=null){if(g!=null)throw Error(n(92));if(Z(S)){if(1<S.length)throw Error(n(93));S=S[0]}g=S}g==null&&(g=""),S=g}f._wrapperState={initialValue:De(S)}}function Fe(f,g){var S=De(g.value),O=De(g.defaultValue);S!=null&&(S=""+S,S!==f.value&&(f.value=S),g.defaultValue==null&&f.defaultValue!==S&&(f.defaultValue=S)),O!=null&&(f.defaultValue=""+O)}function mt(f){var g=f.textContent;g===f._wrapperState.initialValue&&g!==""&&g!==null&&(f.value=g)}function Xe(f){switch(f){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function it(f,g){return f==null||f==="http://www.w3.org/1999/xhtml"?Xe(g):f==="http://www.w3.org/2000/svg"&&g==="foreignObject"?"http://www.w3.org/1999/xhtml":f}var Nt,Xt=(function(f){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(g,S,O,D){MSApp.execUnsafeLocalFunction(function(){return f(g,S,O,D)})}:f})(function(f,g){if(f.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in f)f.innerHTML=g;else{for(Nt=Nt||document.createElement("div"),Nt.innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=Nt.firstChild;f.firstChild;)f.removeChild(f.firstChild);for(;g.firstChild;)f.appendChild(g.firstChild)}});function He(f,g){if(g){var S=f.firstChild;if(S&&S===f.lastChild&&S.nodeType===3){S.nodeValue=g;return}}f.textContent=g}var hn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},un=["Webkit","ms","Moz","O"];Object.keys(hn).forEach(function(f){un.forEach(function(g){g=g+f.charAt(0).toUpperCase()+f.substring(1),hn[g]=hn[f]})});function $t(f,g,S){return g==null||typeof g=="boolean"||g===""?"":S||typeof g!="number"||g===0||hn.hasOwnProperty(f)&&hn[f]?(""+g).trim():g+"px"}function Tt(f,g){f=f.style;for(var S in g)if(g.hasOwnProperty(S)){var O=S.indexOf("--")===0,D=$t(S,g[S],O);S==="float"&&(S="cssFloat"),O?f.setProperty(S,D):f[S]=D}}var gt=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ue(f,g){if(g){if(gt[f]&&(g.children!=null||g.dangerouslySetInnerHTML!=null))throw Error(n(137,f));if(g.dangerouslySetInnerHTML!=null){if(g.children!=null)throw Error(n(60));if(typeof g.dangerouslySetInnerHTML!="object"||!("__html"in g.dangerouslySetInnerHTML))throw Error(n(61))}if(g.style!=null&&typeof g.style!="object")throw Error(n(62))}}function Ve(f,g){if(f.indexOf("-")===-1)return typeof g.is=="string";switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ft=null;function dt(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var Ge=null,de=null,Qe=null;function st(f){if(f=Lo(f)){if(typeof Ge!="function")throw Error(n(280));var g=f.stateNode;g&&(g=Sm(g),Ge(f.stateNode,f.type,g))}}function zt(f){de?Qe?Qe.push(f):Qe=[f]:de=f}function We(){if(de){var f=de,g=Qe;if(Qe=de=null,st(f),g)for(f=0;f<g.length;f++)st(g[f])}}function xt(f,g){return f(g)}function Ot(){}var mn=!1;function An(f,g,S){if(mn)return f(g,S);mn=!0;try{return xt(f,g,S)}finally{mn=!1,(de!==null||Qe!==null)&&(Ot(),We())}}function rn(f,g){var S=f.stateNode;if(S===null)return null;var O=Sm(S);if(O===null)return null;S=O[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(O=!O.disabled)||(f=f.type,O=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!O;break e;default:f=!1}if(f)return null;if(S&&typeof S!="function")throw Error(n(231,g,typeof S));return S}var Hn=!1;if(o)try{var Fn={};Object.defineProperty(Fn,"passive",{get:function(){Hn=!0}}),window.addEventListener("test",Fn,Fn),window.removeEventListener("test",Fn,Fn)}catch{Hn=!1}function us(f,g,S,O,D,F,Y,le,fe){var Oe=Array.prototype.slice.call(arguments,3);try{g.apply(S,Oe)}catch(Ke){this.onError(Ke)}}var Ao=!1,Mo=null,xa=!1,Cl=null,$p={onError:function(f){Ao=!0,Mo=f}};function Vp(f,g,S,O,D,F,Y,le,fe){Ao=!1,Mo=null,us.apply($p,arguments)}function Ry(f,g,S,O,D,F,Y,le,fe){if(Vp.apply(this,arguments),Ao){if(Ao){var Oe=Mo;Ao=!1,Mo=null}else throw Error(n(198));xa||(xa=!0,Cl=Oe)}}function Po(f){var g=f,S=f;if(f.alternate)for(;g.return;)g=g.return;else{f=g;do g=f,(g.flags&4098)!==0&&(S=g.return),f=g.return;while(f)}return g.tag===3?S:null}function Hp(f){if(f.tag===13){var g=f.memoizedState;if(g===null&&(f=f.alternate,f!==null&&(g=f.memoizedState)),g!==null)return g.dehydrated}return null}function se(f){if(Po(f)!==f)throw Error(n(188))}function we(f){var g=f.alternate;if(!g){if(g=Po(f),g===null)throw Error(n(188));return g!==f?null:f}for(var S=f,O=g;;){var D=S.return;if(D===null)break;var F=D.alternate;if(F===null){if(O=D.return,O!==null){S=O;continue}break}if(D.child===F.child){for(F=D.child;F;){if(F===S)return se(D),f;if(F===O)return se(D),g;F=F.sibling}throw Error(n(188))}if(S.return!==O.return)S=D,O=F;else{for(var Y=!1,le=D.child;le;){if(le===S){Y=!0,S=D,O=F;break}if(le===O){Y=!0,O=D,S=F;break}le=le.sibling}if(!Y){for(le=F.child;le;){if(le===S){Y=!0,S=F,O=D;break}if(le===O){Y=!0,O=F,S=D;break}le=le.sibling}if(!Y)throw Error(n(189))}}if(S.alternate!==O)throw Error(n(190))}if(S.tag!==3)throw Error(n(188));return S.stateNode.current===S?f:g}function Ne(f){return f=we(f),f!==null?Ie(f):null}function Ie(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var g=Ie(f);if(g!==null)return g;f=f.sibling}return null}var Re=e.unstable_scheduleCallback,vt=e.unstable_cancelCallback,Ft=e.unstable_shouldYield,Wt=e.unstable_requestPaint,yt=e.unstable_now,on=e.unstable_getCurrentPriorityLevel,Yt=e.unstable_ImmediatePriority,sn=e.unstable_UserBlockingPriority,Yn=e.unstable_NormalPriority,mi=e.unstable_LowPriority,Jn=e.unstable_IdlePriority,Mr=null,Lt=null;function Et(f){if(Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(Mr,f,void 0,(f.current.flags&128)===128)}catch{}}var br=Math.clz32?Math.clz32:Ka,yn=Math.log,wr=Math.LN2;function Ka(f){return f>>>=0,f===0?32:31-(yn(f)/wr|0)|0}var qi=64,Pr=4194304;function nr(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function Os(f,g){var S=f.pendingLanes;if(S===0)return 0;var O=0,D=f.suspendedLanes,F=f.pingedLanes,Y=S&268435455;if(Y!==0){var le=Y&~D;le!==0?O=nr(le):(F&=Y,F!==0&&(O=nr(F)))}else Y=S&~D,Y!==0?O=nr(Y):F!==0&&(O=nr(F));if(O===0)return 0;if(g!==0&&g!==O&&(g&D)===0&&(D=O&-O,F=g&-g,D>=F||D===16&&(F&4194240)!==0))return g;if((O&4)!==0&&(O|=S&16),g=f.entangledLanes,g!==0)for(f=f.entanglements,g&=O;0<g;)S=31-br(g),D=1<<S,O|=f[S],g&=~D;return O}function Uu(f,g){switch(f){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gi(f,g){for(var S=f.suspendedLanes,O=f.pingedLanes,D=f.expirationTimes,F=f.pendingLanes;0<F;){var Y=31-br(F),le=1<<Y,fe=D[Y];fe===-1?((le&S)===0||(le&O)!==0)&&(D[Y]=Uu(le,g)):fe<=g&&(f.expiredLanes|=le),F&=~le}}function Rl(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function ds(){var f=qi;return qi<<=1,(qi&4194240)===0&&(qi=64),f}function Fu(f){for(var g=[],S=0;31>S;S++)g.push(f);return g}function _f(f,g,S){f.pendingLanes|=g,g!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,g=31-br(g),f[g]=S}function pM(f,g){var S=f.pendingLanes&~g;f.pendingLanes=g,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=g,f.mutableReadLanes&=g,f.entangledLanes&=g,g=f.entanglements;var O=f.eventTimes;for(f=f.expirationTimes;0<S;){var D=31-br(S),F=1<<D;g[D]=0,O[D]=-1,f[D]=-1,S&=~F}}function Bu(f,g){var S=f.entangledLanes|=g;for(f=f.entanglements;S;){var O=31-br(S),D=1<<O;D&g|f[O]&g&&(f[O]|=g),S&=~D}}var Rn=0;function zu(f){return f&=-f,1<f?4<f?(f&268435455)!==0?16:536870912:4:1}var Sf,Oy,Jw,Wp,Gp,pc=!1,qp=[],Xa=null,xn=null,Co=null,mc=new Map,$u=new Map,Ol=[],mM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kr(f,g){switch(f){case"focusin":case"focusout":Xa=null;break;case"dragenter":case"dragleave":xn=null;break;case"mouseover":case"mouseout":Co=null;break;case"pointerover":case"pointerout":mc.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":$u.delete(g.pointerId)}}function gc(f,g,S,O,D,F){return f===null||f.nativeEvent!==F?(f={blockedOn:g,domEventName:S,eventSystemFlags:O,nativeEvent:F,targetContainers:[D]},g!==null&&(g=Lo(g),g!==null&&Oy(g)),f):(f.eventSystemFlags|=O,g=f.targetContainers,D!==null&&g.indexOf(D)===-1&&g.push(D),f)}function gM(f,g,S,O,D){switch(g){case"focusin":return Xa=gc(Xa,f,g,S,O,D),!0;case"dragenter":return xn=gc(xn,f,g,S,O,D),!0;case"mouseover":return Co=gc(Co,f,g,S,O,D),!0;case"pointerover":var F=D.pointerId;return mc.set(F,gc(mc.get(F)||null,f,g,S,O,D)),!0;case"gotpointercapture":return F=D.pointerId,$u.set(F,gc($u.get(F)||null,f,g,S,O,D)),!0}return!1}function Kp(f){var g=Ul(f.target);if(g!==null){var S=Po(g);if(S!==null){if(g=S.tag,g===13){if(g=Hp(S),g!==null){f.blockedOn=g,Gp(f.priority,function(){Jw(S)});return}}else if(g===3&&S.stateNode.current.memoizedState.isDehydrated){f.blockedOn=S.tag===3?S.stateNode.containerInfo:null;return}}}f.blockedOn=null}function Xp(f){if(f.blockedOn!==null)return!1;for(var g=f.targetContainers;0<g.length;){var S=ea(f.domEventName,f.eventSystemFlags,g[0],f.nativeEvent);if(S===null){S=f.nativeEvent;var O=new S.constructor(S.type,S);ft=O,S.target.dispatchEvent(O),ft=null}else return g=Lo(S),g!==null&&Oy(g),f.blockedOn=S,!1;g.shift()}return!0}function Ef(f,g,S){Xp(f)&&S.delete(g)}function Ya(){pc=!1,Xa!==null&&Xp(Xa)&&(Xa=null),xn!==null&&Xp(xn)&&(xn=null),Co!==null&&Xp(Co)&&(Co=null),mc.forEach(Ef),$u.forEach(Ef)}function Tf(f,g){f.blockedOn===g&&(f.blockedOn=null,pc||(pc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ya)))}function Af(f){function g(D){return Tf(D,f)}if(0<qp.length){Tf(qp[0],f);for(var S=1;S<qp.length;S++){var O=qp[S];O.blockedOn===f&&(O.blockedOn=null)}}for(Xa!==null&&Tf(Xa,f),xn!==null&&Tf(xn,f),Co!==null&&Tf(Co,f),mc.forEach(g),$u.forEach(g),S=0;S<Ol.length;S++)O=Ol[S],O.blockedOn===f&&(O.blockedOn=null);for(;0<Ol.length&&(S=Ol[0],S.blockedOn===null);)Kp(S),S.blockedOn===null&&Ol.shift()}var Ki=A.ReactCurrentBatchConfig,Zs=!0;function Yp(f,g,S,O){var D=Rn,F=Ki.transition;Ki.transition=null;try{Rn=1,Jp(f,g,S,O)}finally{Rn=D,Ki.transition=F}}function Ny(f,g,S,O){var D=Rn,F=Ki.transition;Ki.transition=null;try{Rn=4,Jp(f,g,S,O)}finally{Rn=D,Ki.transition=F}}function Jp(f,g,S,O){if(Zs){var D=ea(f,g,S,O);if(D===null)vm(f,g,O,Qp,S),Kr(f,O);else if(gM(D,f,g,S,O))O.stopPropagation();else if(Kr(f,O),g&4&&-1<mM.indexOf(f)){for(;D!==null;){var F=Lo(D);if(F!==null&&Sf(F),F=ea(f,g,S,O),F===null&&vm(f,g,O,Qp,S),F===D)break;D=F}D!==null&&O.stopPropagation()}else vm(f,g,O,null,S)}}var Qp=null;function ea(f,g,S,O){if(Qp=null,f=dt(O),f=Ul(f),f!==null)if(g=Po(f),g===null)f=null;else if(S=g.tag,S===13){if(f=Hp(g),f!==null)return f;f=null}else if(S===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;f=null}else g!==f&&(f=null);return Qp=f,null}function Qw(f){switch(f){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(on()){case Yt:return 1;case sn:return 4;case Yn:case mi:return 16;case Jn:return 536870912;default:return 16}default:return 16}}var ba=null,Iy=null,fs=null;function Mf(){if(fs)return fs;var f,g=Iy,S=g.length,O,D="value"in ba?ba.value:ba.textContent,F=D.length;for(f=0;f<S&&g[f]===D[f];f++);var Y=S-f;for(O=1;O<=Y&&g[S-O]===D[F-O];O++);return fs=D.slice(f,1<O?1-O:void 0)}function vc(f){var g=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&g===13&&(f=13)):f=g,f===10&&(f=13),32<=f||f===13?f:0}function Ro(){return!0}function Zp(){return!1}function Xi(f){function g(S,O,D,F,Y){this._reactName=S,this._targetInst=D,this.type=O,this.nativeEvent=F,this.target=Y,this.currentTarget=null;for(var le in f)f.hasOwnProperty(le)&&(S=f[le],this[le]=S?S(F):F[le]);return this.isDefaultPrevented=(F.defaultPrevented!=null?F.defaultPrevented:F.returnValue===!1)?Ro:Zp,this.isPropagationStopped=Zp,this}return X(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var S=this.nativeEvent;S&&(S.preventDefault?S.preventDefault():typeof S.returnValue!="unknown"&&(S.returnValue=!1),this.isDefaultPrevented=Ro)},stopPropagation:function(){var S=this.nativeEvent;S&&(S.stopPropagation?S.stopPropagation():typeof S.cancelBubble!="unknown"&&(S.cancelBubble=!0),this.isPropagationStopped=Ro)},persist:function(){},isPersistent:Ro}),g}var yc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pf=Xi(yc),xc=X({},yc,{view:0,detail:0}),Vu=Xi(xc),hs,ta,na,Hu=X({},xc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Il,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==na&&(na&&f.type==="mousemove"?(hs=f.screenX-na.screenX,ta=f.screenY-na.screenY):ta=hs=0,na=f),hs)},movementY:function(f){return"movementY"in f?f.movementY:ta}}),ky=Xi(Hu),Oo=X({},Hu,{dataTransfer:0}),Nl=Xi(Oo),em=X({},xc,{relatedTarget:0}),tm=Xi(em),nm=X({},yc,{animationName:0,elapsedTime:0,pseudoElement:0}),Zw=Xi(nm),e_=X({},yc,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),Dy=Xi(e_),rm=X({},yc,{data:0}),jy=Xi(rm),t_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},n_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ly={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wu(f){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(f):(f=Ly[f])?!!g[f]:!1}function Il(){return Wu}var im=X({},xc,{key:function(f){if(f.key){var g=t_[f.key]||f.key;if(g!=="Unidentified")return g}return f.type==="keypress"?(f=vc(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?n_[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Il,charCode:function(f){return f.type==="keypress"?vc(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?vc(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),sm=Xi(im),ra=X({},Hu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ns=Xi(ra),bc=X({},xc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Il}),No=Xi(bc),Io=X({},yc,{propertyName:0,elapsedTime:0,pseudoElement:0}),wc=Xi(Io),r_=X({},Hu,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),Uy=Xi(r_),Fy=[9,13,27,32],Yi=o&&"CompositionEvent"in window,vi=null;o&&"documentMode"in document&&(vi=document.documentMode);var lr=o&&"TextEvent"in window&&!vi,Gu=o&&(!Yi||vi&&8<vi&&11>=vi),ia=" ",By=!1;function zy(f,g){switch(f){case"keyup":return Fy.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function am(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var kl=!1;function i_(f,g){switch(f){case"compositionend":return am(g);case"keypress":return g.which!==32?null:(By=!0,ia);case"textInput":return f=g.data,f===ia&&By?null:f;default:return null}}function Cf(f,g){if(kl)return f==="compositionend"||!Yi&&zy(f,g)?(f=Mf(),fs=Iy=ba=null,kl=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return Gu&&g.locale!=="ko"?null:g.data;default:return null}}var qu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function om(f){var g=f&&f.nodeName&&f.nodeName.toLowerCase();return g==="input"?!!qu[f.type]:g==="textarea"}function Ku(f,g,S,O){zt(O),g=ym(g,"onChange"),0<g.length&&(S=new Pf("onChange","change",null,S,O),f.push({event:S,listeners:g}))}var Dl=null,Xu=null;function s_(f){Zu(f,0)}function ko(f){var g=Cr(f);if(ee(g))return f}function a_(f,g){if(f==="change")return g}var Yu=!1;if(o){var ps;if(o){var _c="oninput"in document;if(!_c){var Sc=document.createElement("div");Sc.setAttribute("oninput","return;"),_c=typeof Sc.oninput=="function"}ps=_c}else ps=!1;Yu=ps&&(!document.documentMode||9<document.documentMode)}function wa(){Dl&&(Dl.detachEvent("onpropertychange",lm),Xu=Dl=null)}function lm(f){if(f.propertyName==="value"&&ko(Xu)){var g=[];Ku(g,Xu,f,dt(f)),An(s_,g)}}function Ju(f,g,S){f==="focusin"?(wa(),Dl=g,Xu=S,Dl.attachEvent("onpropertychange",lm)):f==="focusout"&&wa()}function o_(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return ko(Xu)}function $y(f,g){if(f==="click")return ko(g)}function mr(f,g){if(f==="input"||f==="change")return ko(g)}function cm(f,g){return f===g&&(f!==0||1/f===1/g)||f!==f&&g!==g}var Is=typeof Object.is=="function"?Object.is:cm;function Ec(f,g){if(Is(f,g))return!0;if(typeof f!="object"||f===null||typeof g!="object"||g===null)return!1;var S=Object.keys(f),O=Object.keys(g);if(S.length!==O.length)return!1;for(O=0;O<S.length;O++){var D=S[O];if(!l.call(g,D)||!Is(f[D],g[D]))return!1}return!0}function Rf(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function ks(f,g){var S=Rf(f);f=0;for(var O;S;){if(S.nodeType===3){if(O=f+S.textContent.length,f<=g&&O>=g)return{node:S,offset:g-f};f=O}e:{for(;S;){if(S.nextSibling){S=S.nextSibling;break e}S=S.parentNode}S=void 0}S=Rf(S)}}function Tc(f,g){return f&&g?f===g?!0:f&&f.nodeType===3?!1:g&&g.nodeType===3?Tc(f,g.parentNode):"contains"in f?f.contains(g):f.compareDocumentPosition?!!(f.compareDocumentPosition(g)&16):!1:!1}function gr(){for(var f=window,g=Me();g instanceof f.HTMLIFrameElement;){try{var S=typeof g.contentWindow.location.href=="string"}catch{S=!1}if(S)f=g.contentWindow;else break;g=Me(f.document)}return g}function ni(f){var g=f&&f.nodeName&&f.nodeName.toLowerCase();return g&&(g==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||g==="textarea"||f.contentEditable==="true")}function ri(f){var g=gr(),S=f.focusedElem,O=f.selectionRange;if(g!==S&&S&&S.ownerDocument&&Tc(S.ownerDocument.documentElement,S)){if(O!==null&&ni(S)){if(g=O.start,f=O.end,f===void 0&&(f=g),"selectionStart"in S)S.selectionStart=g,S.selectionEnd=Math.min(f,S.value.length);else if(f=(g=S.ownerDocument||document)&&g.defaultView||window,f.getSelection){f=f.getSelection();var D=S.textContent.length,F=Math.min(O.start,D);O=O.end===void 0?F:Math.min(O.end,D),!f.extend&&F>O&&(D=O,O=F,F=D),D=ks(S,F);var Y=ks(S,O);D&&Y&&(f.rangeCount!==1||f.anchorNode!==D.node||f.anchorOffset!==D.offset||f.focusNode!==Y.node||f.focusOffset!==Y.offset)&&(g=g.createRange(),g.setStart(D.node,D.offset),f.removeAllRanges(),F>O?(f.addRange(g),f.extend(Y.node,Y.offset)):(g.setEnd(Y.node,Y.offset),f.addRange(g)))}}for(g=[],f=S;f=f.parentNode;)f.nodeType===1&&g.push({element:f,left:f.scrollLeft,top:f.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<g.length;S++)f=g[S],f.element.scrollLeft=f.left,f.element.scrollTop=f.top}}var um=o&&"documentMode"in document&&11>=document.documentMode,Ja=null,Ac=null,Of=null,ii=!1;function dm(f,g,S){var O=S.window===S?S.document:S.nodeType===9?S:S.ownerDocument;ii||Ja==null||Ja!==Me(O)||(O=Ja,"selectionStart"in O&&ni(O)?O={start:O.selectionStart,end:O.selectionEnd}:(O=(O.ownerDocument&&O.ownerDocument.defaultView||window).getSelection(),O={anchorNode:O.anchorNode,anchorOffset:O.anchorOffset,focusNode:O.focusNode,focusOffset:O.focusOffset}),Of&&Ec(Of,O)||(Of=O,O=ym(Ac,"onSelect"),0<O.length&&(g=new Pf("onSelect","select",null,g,S),f.push({event:g,listeners:O}),g.target=Ja)))}function Qu(f,g){var S={};return S[f.toLowerCase()]=g.toLowerCase(),S["Webkit"+f]="webkit"+g,S["Moz"+f]="moz"+g,S}var jl={animationend:Qu("Animation","AnimationEnd"),animationiteration:Qu("Animation","AnimationIteration"),animationstart:Qu("Animation","AnimationStart"),transitionend:Qu("Transition","TransitionEnd")},_a={},Sa={};o&&(Sa=document.createElement("div").style,"AnimationEvent"in window||(delete jl.animationend.animation,delete jl.animationiteration.animation,delete jl.animationstart.animation),"TransitionEvent"in window||delete jl.transitionend.transition);function Qa(f){if(_a[f])return _a[f];if(!jl[f])return f;var g=jl[f],S;for(S in g)if(g.hasOwnProperty(S)&&S in Sa)return _a[f]=g[S];return f}var Nf=Qa("animationend"),If=Qa("animationiteration"),Vy=Qa("animationstart"),Hy=Qa("transitionend"),Wy=new Map,Gy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Do(f,g){Wy.set(f,g),s(g,[f])}for(var fm=0;fm<Gy.length;fm++){var kf=Gy[fm],Df=kf.toLowerCase(),l_=kf[0].toUpperCase()+kf.slice(1);Do(Df,"on"+l_)}Do(Nf,"onAnimationEnd"),Do(If,"onAnimationIteration"),Do(Vy,"onAnimationStart"),Do("dblclick","onDoubleClick"),Do("focusin","onFocus"),Do("focusout","onBlur"),Do(Hy,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ll));function pm(f,g,S){var O=f.type||"unknown-event";f.currentTarget=S,Ry(O,g,void 0,f),f.currentTarget=null}function Zu(f,g){g=(g&4)!==0;for(var S=0;S<f.length;S++){var O=f[S],D=O.event;O=O.listeners;e:{var F=void 0;if(g)for(var Y=O.length-1;0<=Y;Y--){var le=O[Y],fe=le.instance,Oe=le.currentTarget;if(le=le.listener,fe!==F&&D.isPropagationStopped())break e;pm(D,le,Oe),F=fe}else for(Y=0;Y<O.length;Y++){if(le=O[Y],fe=le.instance,Oe=le.currentTarget,le=le.listener,fe!==F&&D.isPropagationStopped())break e;pm(D,le,Oe),F=fe}}}if(xa)throw f=Cl,xa=!1,Cl=null,f}function Qn(f,g){var S=g[Cc];S===void 0&&(S=g[Cc]=new Set);var O=f+"__bubble";S.has(O)||(gm(g,f,2,!1),S.add(O))}function mm(f,g,S){var O=0;g&&(O|=4),gm(S,f,O,g)}var jf="_reactListening"+Math.random().toString(36).slice(2);function ed(f){if(!f[jf]){f[jf]=!0,r.forEach(function(S){S!=="selectionchange"&&(hm.has(S)||mm(S,!1,f),mm(S,!0,f))});var g=f.nodeType===9?f:f.ownerDocument;g===null||g[jf]||(g[jf]=!0,mm("selectionchange",!1,g))}}function gm(f,g,S,O){switch(Qw(g)){case 1:var D=Yp;break;case 4:D=Ny;break;default:D=Jp}S=D.bind(null,g,S,f),D=void 0,!Hn||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(D=!0),O?D!==void 0?f.addEventListener(g,S,{capture:!0,passive:D}):f.addEventListener(g,S,!0):D!==void 0?f.addEventListener(g,S,{passive:D}):f.addEventListener(g,S,!1)}function vm(f,g,S,O,D){var F=O;if((g&1)===0&&(g&2)===0&&O!==null)e:for(;;){if(O===null)return;var Y=O.tag;if(Y===3||Y===4){var le=O.stateNode.containerInfo;if(le===D||le.nodeType===8&&le.parentNode===D)break;if(Y===4)for(Y=O.return;Y!==null;){var fe=Y.tag;if((fe===3||fe===4)&&(fe=Y.stateNode.containerInfo,fe===D||fe.nodeType===8&&fe.parentNode===D))return;Y=Y.return}for(;le!==null;){if(Y=Ul(le),Y===null)return;if(fe=Y.tag,fe===5||fe===6){O=F=Y;continue e}le=le.parentNode}}O=O.return}An(function(){var Oe=F,Ke=dt(S),Ye=[];e:{var qe=Wy.get(f);if(qe!==void 0){var bt=Pf,Ct=f;switch(f){case"keypress":if(vc(S)===0)break e;case"keydown":case"keyup":bt=sm;break;case"focusin":Ct="focus",bt=tm;break;case"focusout":Ct="blur",bt=tm;break;case"beforeblur":case"afterblur":bt=tm;break;case"click":if(S.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":bt=ky;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":bt=Nl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":bt=No;break;case Nf:case If:case Vy:bt=Zw;break;case Hy:bt=wc;break;case"scroll":bt=Vu;break;case"wheel":bt=Uy;break;case"copy":case"cut":case"paste":bt=Dy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":bt=Ns}var It=(g&4)!==0,Yr=!It&&f==="scroll",Se=It?qe!==null?qe+"Capture":null:qe;It=[];for(var pe=Oe,Te;pe!==null;){Te=pe;var rt=Te.stateNode;if(Te.tag===5&&rt!==null&&(Te=rt,Se!==null&&(rt=rn(pe,Se),rt!=null&&It.push(td(pe,rt,Te)))),Yr)break;pe=pe.return}0<It.length&&(qe=new bt(qe,Ct,null,S,Ke),Ye.push({event:qe,listeners:It}))}}if((g&7)===0){e:{if(qe=f==="mouseover"||f==="pointerover",bt=f==="mouseout"||f==="pointerout",qe&&S!==ft&&(Ct=S.relatedTarget||S.fromElement)&&(Ul(Ct)||Ct[Ds]))break e;if((bt||qe)&&(qe=Ke.window===Ke?Ke:(qe=Ke.ownerDocument)?qe.defaultView||qe.parentWindow:window,bt?(Ct=S.relatedTarget||S.toElement,bt=Oe,Ct=Ct?Ul(Ct):null,Ct!==null&&(Yr=Po(Ct),Ct!==Yr||Ct.tag!==5&&Ct.tag!==6)&&(Ct=null)):(bt=null,Ct=Oe),bt!==Ct)){if(It=ky,rt="onMouseLeave",Se="onMouseEnter",pe="mouse",(f==="pointerout"||f==="pointerover")&&(It=Ns,rt="onPointerLeave",Se="onPointerEnter",pe="pointer"),Yr=bt==null?qe:Cr(bt),Te=Ct==null?qe:Cr(Ct),qe=new It(rt,pe+"leave",bt,S,Ke),qe.target=Yr,qe.relatedTarget=Te,rt=null,Ul(Ke)===Oe&&(It=new It(Se,pe+"enter",Ct,S,Ke),It.target=Te,It.relatedTarget=Yr,rt=It),Yr=rt,bt&&Ct)t:{for(It=bt,Se=Ct,pe=0,Te=It;Te;Te=Mc(Te))pe++;for(Te=0,rt=Se;rt;rt=Mc(rt))Te++;for(;0<pe-Te;)It=Mc(It),pe--;for(;0<Te-pe;)Se=Mc(Se),Te--;for(;pe--;){if(It===Se||Se!==null&&It===Se.alternate)break t;It=Mc(It),Se=Mc(Se)}It=null}else It=null;bt!==null&&c_(Ye,qe,bt,It,!1),Ct!==null&&Yr!==null&&c_(Ye,Yr,Ct,It,!0)}}e:{if(qe=Oe?Cr(Oe):window,bt=qe.nodeName&&qe.nodeName.toLowerCase(),bt==="select"||bt==="input"&&qe.type==="file")var Ut=a_;else if(om(qe))if(Yu)Ut=mr;else{Ut=o_;var Gt=Ju}else(bt=qe.nodeName)&&bt.toLowerCase()==="input"&&(qe.type==="checkbox"||qe.type==="radio")&&(Ut=$y);if(Ut&&(Ut=Ut(f,Oe))){Ku(Ye,Ut,S,Ke);break e}Gt&&Gt(f,qe,Oe),f==="focusout"&&(Gt=qe._wrapperState)&&Gt.controlled&&qe.type==="number"&&re(qe,"number",qe.value)}switch(Gt=Oe?Cr(Oe):window,f){case"focusin":(om(Gt)||Gt.contentEditable==="true")&&(Ja=Gt,Ac=Oe,Of=null);break;case"focusout":Of=Ac=Ja=null;break;case"mousedown":ii=!0;break;case"contextmenu":case"mouseup":case"dragend":ii=!1,dm(Ye,S,Ke);break;case"selectionchange":if(um)break;case"keydown":case"keyup":dm(Ye,S,Ke)}var qt;if(Yi)e:{switch(f){case"compositionstart":var ln="onCompositionStart";break e;case"compositionend":ln="onCompositionEnd";break e;case"compositionupdate":ln="onCompositionUpdate";break e}ln=void 0}else kl?zy(f,S)&&(ln="onCompositionEnd"):f==="keydown"&&S.keyCode===229&&(ln="onCompositionStart");ln&&(Gu&&S.locale!=="ko"&&(kl||ln!=="onCompositionStart"?ln==="onCompositionEnd"&&kl&&(qt=Mf()):(ba=Ke,Iy="value"in ba?ba.value:ba.textContent,kl=!0)),Gt=ym(Oe,ln),0<Gt.length&&(ln=new jy(ln,f,null,S,Ke),Ye.push({event:ln,listeners:Gt}),qt?ln.data=qt:(qt=am(S),qt!==null&&(ln.data=qt)))),(qt=lr?i_(f,S):Cf(f,S))&&(Oe=ym(Oe,"onBeforeInput"),0<Oe.length&&(Ke=new jy("onBeforeInput","beforeinput",null,S,Ke),Ye.push({event:Ke,listeners:Oe}),Ke.data=qt))}Zu(Ye,g)})}function td(f,g,S){return{instance:f,listener:g,currentTarget:S}}function ym(f,g){for(var S=g+"Capture",O=[];f!==null;){var D=f,F=D.stateNode;D.tag===5&&F!==null&&(D=F,F=rn(f,S),F!=null&&O.unshift(td(f,F,D)),F=rn(f,g),F!=null&&O.push(td(f,F,D))),f=f.return}return O}function Mc(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5);return f||null}function c_(f,g,S,O,D){for(var F=g._reactName,Y=[];S!==null&&S!==O;){var le=S,fe=le.alternate,Oe=le.stateNode;if(fe!==null&&fe===O)break;le.tag===5&&Oe!==null&&(le=Oe,D?(fe=rn(S,F),fe!=null&&Y.unshift(td(S,fe,le))):D||(fe=rn(S,F),fe!=null&&Y.push(td(S,fe,le)))),S=S.return}Y.length!==0&&f.push({event:g,listeners:Y})}var vM=/\r\n?/g,u_=/\u0000|\uFFFD/g;function qy(f){return(typeof f=="string"?f:""+f).replace(vM,`
`).replace(u_,"")}function Lf(f,g,S){if(g=qy(g),qy(f)!==g&&S)throw Error(n(425))}function Uf(){}var nd=null,Ky=null;function Xy(f,g){return f==="textarea"||f==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var Yy=typeof setTimeout=="function"?setTimeout:void 0,Jy=typeof clearTimeout=="function"?clearTimeout:void 0,xm=typeof Promise=="function"?Promise:void 0,yM=typeof queueMicrotask=="function"?queueMicrotask:typeof xm<"u"?function(f){return xm.resolve(null).then(f).catch(d_)}:Yy;function d_(f){setTimeout(function(){throw f})}function bm(f,g){var S=g,O=0;do{var D=S.nextSibling;if(f.removeChild(S),D&&D.nodeType===8)if(S=D.data,S==="/$"){if(O===0){f.removeChild(D),Af(g);return}O--}else S!=="$"&&S!=="$?"&&S!=="$!"||O++;S=D}while(S);Af(g)}function jo(f){for(;f!=null;f=f.nextSibling){var g=f.nodeType;if(g===1||g===3)break;if(g===8){if(g=f.data,g==="$"||g==="$!"||g==="$?")break;if(g==="/$")return null}}return f}function Qy(f){f=f.previousSibling;for(var g=0;f;){if(f.nodeType===8){var S=f.data;if(S==="$"||S==="$!"||S==="$?"){if(g===0)return f;g--}else S==="/$"&&g++}f=f.previousSibling}return null}var Pc=Math.random().toString(36).slice(2),Xr="__reactFiber$"+Pc,rd="__reactProps$"+Pc,Ds="__reactContainer$"+Pc,Cc="__reactEvents$"+Pc,wm="__reactListeners$"+Pc,_m="__reactHandles$"+Pc;function Ul(f){var g=f[Xr];if(g)return g;for(var S=f.parentNode;S;){if(g=S[Ds]||S[Xr]){if(S=g.alternate,g.child!==null||S!==null&&S.child!==null)for(f=Qy(f);f!==null;){if(S=f[Xr])return S;f=Qy(f)}return g}f=S,S=f.parentNode}return null}function Lo(f){return f=f[Xr]||f[Ds],!f||f.tag!==5&&f.tag!==6&&f.tag!==13&&f.tag!==3?null:f}function Cr(f){if(f.tag===5||f.tag===6)return f.stateNode;throw Error(n(33))}function Sm(f){return f[rd]||null}var Zy=[],si=-1;function _r(f){return{current:f}}function Zn(f){0>si||(f.current=Zy[si],Zy[si]=null,si--)}function Wn(f,g){si++,Zy[si]=f.current,f.current=g}var Uo={},yi=_r(Uo),Ji=_r(!1),Fo=Uo;function Rc(f,g){var S=f.type.contextTypes;if(!S)return Uo;var O=f.stateNode;if(O&&O.__reactInternalMemoizedUnmaskedChildContext===g)return O.__reactInternalMemoizedMaskedChildContext;var D={},F;for(F in S)D[F]=g[F];return O&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=g,f.__reactInternalMemoizedMaskedChildContext=D),D}function Di(f){return f=f.childContextTypes,f!=null}function Ff(){Zn(Ji),Zn(yi)}function e0(f,g,S){if(yi.current!==Uo)throw Error(n(168));Wn(yi,g),Wn(Ji,S)}function Bf(f,g,S){var O=f.stateNode;if(g=g.childContextTypes,typeof O.getChildContext!="function")return S;O=O.getChildContext();for(var D in O)if(!(D in g))throw Error(n(108,he(f)||"Unknown",D));return X({},S,O)}function Oc(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||Uo,Fo=yi.current,Wn(yi,f),Wn(Ji,Ji.current),!0}function t0(f,g,S){var O=f.stateNode;if(!O)throw Error(n(169));S?(f=Bf(f,g,Fo),O.__reactInternalMemoizedMergedChildContext=f,Zn(Ji),Zn(yi),Wn(yi,f)):Zn(Ji),Wn(Ji,S)}var Ea=null,zf=!1,Em=!1;function $f(f){Ea===null?Ea=[f]:Ea.push(f)}function f_(f){zf=!0,$f(f)}function Za(){if(!Em&&Ea!==null){Em=!0;var f=0,g=Rn;try{var S=Ea;for(Rn=1;f<S.length;f++){var O=S[f];do O=O(!0);while(O!==null)}Ea=null,zf=!1}catch(D){throw Ea!==null&&(Ea=Ea.slice(f+1)),Re(Yt,Za),D}finally{Rn=g,Em=!1}}return null}var Nc=[],ms=0,Tm=null,Am=0,Qi=[],ai=0,Ic=null,lt=1,sa="";function Bo(f,g){Nc[ms++]=Am,Nc[ms++]=Tm,Tm=f,Am=g}function n0(f,g,S){Qi[ai++]=lt,Qi[ai++]=sa,Qi[ai++]=Ic,Ic=f;var O=lt;f=sa;var D=32-br(O)-1;O&=~(1<<D),S+=1;var F=32-br(g)+D;if(30<F){var Y=D-D%5;F=(O&(1<<Y)-1).toString(32),O>>=Y,D-=Y,lt=1<<32-br(g)+D|S<<D|O,sa=F+f}else lt=1<<F|S<<D|O,sa=f}function r0(f){f.return!==null&&(Bo(f,1),n0(f,1,0))}function zo(f){for(;f===Tm;)Tm=Nc[--ms],Nc[ms]=null,Am=Nc[--ms],Nc[ms]=null;for(;f===Ic;)Ic=Qi[--ai],Qi[ai]=null,sa=Qi[--ai],Qi[ai]=null,lt=Qi[--ai],Qi[ai]=null}var xi=null,Zi=null,rr=!1,aa=null;function i0(f,g){var S=io(5,null,null,0);S.elementType="DELETED",S.stateNode=g,S.return=f,g=f.deletions,g===null?(f.deletions=[S],f.flags|=16):g.push(S)}function s0(f,g){switch(f.tag){case 5:var S=f.type;return g=g.nodeType!==1||S.toLowerCase()!==g.nodeName.toLowerCase()?null:g,g!==null?(f.stateNode=g,xi=f,Zi=jo(g.firstChild),!0):!1;case 6:return g=f.pendingProps===""||g.nodeType!==3?null:g,g!==null?(f.stateNode=g,xi=f,Zi=null,!0):!1;case 13:return g=g.nodeType!==8?null:g,g!==null?(S=Ic!==null?{id:lt,overflow:sa}:null,f.memoizedState={dehydrated:g,treeContext:S,retryLane:1073741824},S=io(18,null,null,0),S.stateNode=g,S.return=f,f.child=S,xi=f,Zi=null,!0):!1;default:return!1}}function Mm(f){return(f.mode&1)!==0&&(f.flags&128)===0}function Pm(f){if(rr){var g=Zi;if(g){var S=g;if(!s0(f,g)){if(Mm(f))throw Error(n(418));g=jo(S.nextSibling);var O=xi;g&&s0(f,g)?i0(O,S):(f.flags=f.flags&-4097|2,rr=!1,xi=f)}}else{if(Mm(f))throw Error(n(418));f.flags=f.flags&-4097|2,rr=!1,xi=f}}}function Cm(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;xi=f}function id(f){if(f!==xi)return!1;if(!rr)return Cm(f),rr=!0,!1;var g;if((g=f.tag!==3)&&!(g=f.tag!==5)&&(g=f.type,g=g!=="head"&&g!=="body"&&!Xy(f.type,f.memoizedProps)),g&&(g=Zi)){if(Mm(f))throw a0(),Error(n(418));for(;g;)i0(f,g),g=jo(g.nextSibling)}if(Cm(f),f.tag===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));e:{for(f=f.nextSibling,g=0;f;){if(f.nodeType===8){var S=f.data;if(S==="/$"){if(g===0){Zi=jo(f.nextSibling);break e}g--}else S!=="$"&&S!=="$!"&&S!=="$?"||g++}f=f.nextSibling}Zi=null}}else Zi=xi?jo(f.stateNode.nextSibling):null;return!0}function a0(){for(var f=Zi;f;)f=jo(f.nextSibling)}function Fl(){Zi=xi=null,rr=!1}function sd(f){aa===null?aa=[f]:aa.push(f)}var xM=A.ReactCurrentBatchConfig;function Vf(f,g,S){if(f=S.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(S._owner){if(S=S._owner,S){if(S.tag!==1)throw Error(n(309));var O=S.stateNode}if(!O)throw Error(n(147,f));var D=O,F=""+f;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===F?g.ref:(g=function(Y){var le=D.refs;Y===null?delete le[F]:le[F]=Y},g._stringRef=F,g)}if(typeof f!="string")throw Error(n(284));if(!S._owner)throw Error(n(290,f))}return f}function Hf(f,g){throw f=Object.prototype.toString.call(g),Error(n(31,f==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":f))}function o0(f){var g=f._init;return g(f._payload)}function l0(f){function g(Se,pe){if(f){var Te=Se.deletions;Te===null?(Se.deletions=[pe],Se.flags|=16):Te.push(pe)}}function S(Se,pe){if(!f)return null;for(;pe!==null;)g(Se,pe),pe=pe.sibling;return null}function O(Se,pe){for(Se=new Map;pe!==null;)pe.key!==null?Se.set(pe.key,pe):Se.set(pe.index,pe),pe=pe.sibling;return Se}function D(Se,pe){return Se=gd(Se,pe),Se.index=0,Se.sibling=null,Se}function F(Se,pe,Te){return Se.index=Te,f?(Te=Se.alternate,Te!==null?(Te=Te.index,Te<pe?(Se.flags|=2,pe):Te):(Se.flags|=2,pe)):(Se.flags|=1048576,pe)}function Y(Se){return f&&Se.alternate===null&&(Se.flags|=2),Se}function le(Se,pe,Te,rt){return pe===null||pe.tag!==6?(pe=UM(Te,Se.mode,rt),pe.return=Se,pe):(pe=D(pe,Te),pe.return=Se,pe)}function fe(Se,pe,Te,rt){var Ut=Te.type;return Ut===N?Ke(Se,pe,Te.props.children,rt,Te.key):pe!==null&&(pe.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===K&&o0(Ut)===pe.type)?(rt=D(pe,Te.props),rt.ref=Vf(Se,pe,Te),rt.return=Se,rt):(rt=D_(Te.type,Te.key,Te.props,null,Se.mode,rt),rt.ref=Vf(Se,pe,Te),rt.return=Se,rt)}function Oe(Se,pe,Te,rt){return pe===null||pe.tag!==4||pe.stateNode.containerInfo!==Te.containerInfo||pe.stateNode.implementation!==Te.implementation?(pe=FM(Te,Se.mode,rt),pe.return=Se,pe):(pe=D(pe,Te.children||[]),pe.return=Se,pe)}function Ke(Se,pe,Te,rt,Ut){return pe===null||pe.tag!==7?(pe=oh(Te,Se.mode,rt,Ut),pe.return=Se,pe):(pe=D(pe,Te),pe.return=Se,pe)}function Ye(Se,pe,Te){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return pe=UM(""+pe,Se.mode,Te),pe.return=Se,pe;if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case P:return Te=D_(pe.type,pe.key,pe.props,null,Se.mode,Te),Te.ref=Vf(Se,null,pe),Te.return=Se,Te;case R:return pe=FM(pe,Se.mode,Te),pe.return=Se,pe;case K:var rt=pe._init;return Ye(Se,rt(pe._payload),Te)}if(Z(pe)||V(pe))return pe=oh(pe,Se.mode,Te,null),pe.return=Se,pe;Hf(Se,pe)}return null}function qe(Se,pe,Te,rt){var Ut=pe!==null?pe.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number")return Ut!==null?null:le(Se,pe,""+Te,rt);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case P:return Te.key===Ut?fe(Se,pe,Te,rt):null;case R:return Te.key===Ut?Oe(Se,pe,Te,rt):null;case K:return Ut=Te._init,qe(Se,pe,Ut(Te._payload),rt)}if(Z(Te)||V(Te))return Ut!==null?null:Ke(Se,pe,Te,rt,null);Hf(Se,Te)}return null}function bt(Se,pe,Te,rt,Ut){if(typeof rt=="string"&&rt!==""||typeof rt=="number")return Se=Se.get(Te)||null,le(pe,Se,""+rt,Ut);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case P:return Se=Se.get(rt.key===null?Te:rt.key)||null,fe(pe,Se,rt,Ut);case R:return Se=Se.get(rt.key===null?Te:rt.key)||null,Oe(pe,Se,rt,Ut);case K:var Gt=rt._init;return bt(Se,pe,Te,Gt(rt._payload),Ut)}if(Z(rt)||V(rt))return Se=Se.get(Te)||null,Ke(pe,Se,rt,Ut,null);Hf(pe,rt)}return null}function Ct(Se,pe,Te,rt){for(var Ut=null,Gt=null,qt=pe,ln=pe=0,Fi=null;qt!==null&&ln<Te.length;ln++){qt.index>ln?(Fi=qt,qt=null):Fi=qt.sibling;var kn=qe(Se,qt,Te[ln],rt);if(kn===null){qt===null&&(qt=Fi);break}f&&qt&&kn.alternate===null&&g(Se,qt),pe=F(kn,pe,ln),Gt===null?Ut=kn:Gt.sibling=kn,Gt=kn,qt=Fi}if(ln===Te.length)return S(Se,qt),rr&&Bo(Se,ln),Ut;if(qt===null){for(;ln<Te.length;ln++)qt=Ye(Se,Te[ln],rt),qt!==null&&(pe=F(qt,pe,ln),Gt===null?Ut=qt:Gt.sibling=qt,Gt=qt);return rr&&Bo(Se,ln),Ut}for(qt=O(Se,qt);ln<Te.length;ln++)Fi=bt(qt,Se,ln,Te[ln],rt),Fi!==null&&(f&&Fi.alternate!==null&&qt.delete(Fi.key===null?ln:Fi.key),pe=F(Fi,pe,ln),Gt===null?Ut=Fi:Gt.sibling=Fi,Gt=Fi);return f&&qt.forEach(function(vd){return g(Se,vd)}),rr&&Bo(Se,ln),Ut}function It(Se,pe,Te,rt){var Ut=V(Te);if(typeof Ut!="function")throw Error(n(150));if(Te=Ut.call(Te),Te==null)throw Error(n(151));for(var Gt=Ut=null,qt=pe,ln=pe=0,Fi=null,kn=Te.next();qt!==null&&!kn.done;ln++,kn=Te.next()){qt.index>ln?(Fi=qt,qt=null):Fi=qt.sibling;var vd=qe(Se,qt,kn.value,rt);if(vd===null){qt===null&&(qt=Fi);break}f&&qt&&vd.alternate===null&&g(Se,qt),pe=F(vd,pe,ln),Gt===null?Ut=vd:Gt.sibling=vd,Gt=vd,qt=Fi}if(kn.done)return S(Se,qt),rr&&Bo(Se,ln),Ut;if(qt===null){for(;!kn.done;ln++,kn=Te.next())kn=Ye(Se,kn.value,rt),kn!==null&&(pe=F(kn,pe,ln),Gt===null?Ut=kn:Gt.sibling=kn,Gt=kn);return rr&&Bo(Se,ln),Ut}for(qt=O(Se,qt);!kn.done;ln++,kn=Te.next())kn=bt(qt,Se,ln,kn.value,rt),kn!==null&&(f&&kn.alternate!==null&&qt.delete(kn.key===null?ln:kn.key),pe=F(kn,pe,ln),Gt===null?Ut=kn:Gt.sibling=kn,Gt=kn);return f&&qt.forEach(function(Wae){return g(Se,Wae)}),rr&&Bo(Se,ln),Ut}function Yr(Se,pe,Te,rt){if(typeof Te=="object"&&Te!==null&&Te.type===N&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case P:e:{for(var Ut=Te.key,Gt=pe;Gt!==null;){if(Gt.key===Ut){if(Ut=Te.type,Ut===N){if(Gt.tag===7){S(Se,Gt.sibling),pe=D(Gt,Te.props.children),pe.return=Se,Se=pe;break e}}else if(Gt.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===K&&o0(Ut)===Gt.type){S(Se,Gt.sibling),pe=D(Gt,Te.props),pe.ref=Vf(Se,Gt,Te),pe.return=Se,Se=pe;break e}S(Se,Gt);break}else g(Se,Gt);Gt=Gt.sibling}Te.type===N?(pe=oh(Te.props.children,Se.mode,rt,Te.key),pe.return=Se,Se=pe):(rt=D_(Te.type,Te.key,Te.props,null,Se.mode,rt),rt.ref=Vf(Se,pe,Te),rt.return=Se,Se=rt)}return Y(Se);case R:e:{for(Gt=Te.key;pe!==null;){if(pe.key===Gt)if(pe.tag===4&&pe.stateNode.containerInfo===Te.containerInfo&&pe.stateNode.implementation===Te.implementation){S(Se,pe.sibling),pe=D(pe,Te.children||[]),pe.return=Se,Se=pe;break e}else{S(Se,pe);break}else g(Se,pe);pe=pe.sibling}pe=FM(Te,Se.mode,rt),pe.return=Se,Se=pe}return Y(Se);case K:return Gt=Te._init,Yr(Se,pe,Gt(Te._payload),rt)}if(Z(Te))return Ct(Se,pe,Te,rt);if(V(Te))return It(Se,pe,Te,rt);Hf(Se,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"?(Te=""+Te,pe!==null&&pe.tag===6?(S(Se,pe.sibling),pe=D(pe,Te),pe.return=Se,Se=pe):(S(Se,pe),pe=UM(Te,Se.mode,rt),pe.return=Se,Se=pe),Y(Se)):S(Se,pe)}return Yr}var kc=l0(!0),Wf=l0(!1),Dc=_r(null),jc=null,$o=null,ad=null;function Lc(){ad=$o=jc=null}function Gf(f){var g=Dc.current;Zn(Dc),f._currentValue=g}function qf(f,g,S){for(;f!==null;){var O=f.alternate;if((f.childLanes&g)!==g?(f.childLanes|=g,O!==null&&(O.childLanes|=g)):O!==null&&(O.childLanes&g)!==g&&(O.childLanes|=g),f===S)break;f=f.return}}function Bl(f,g){jc=f,ad=$o=null,f=f.dependencies,f!==null&&f.firstContext!==null&&((f.lanes&g)!==0&&(vn=!0),f.firstContext=null)}function js(f){var g=f._currentValue;if(ad!==f)if(f={context:f,memoizedValue:g,next:null},$o===null){if(jc===null)throw Error(n(308));$o=f,jc.dependencies={lanes:0,firstContext:f}}else $o=$o.next=f;return g}var Vo=null;function c0(f){Vo===null?Vo=[f]:Vo.push(f)}function Kf(f,g,S,O){var D=g.interleaved;return D===null?(S.next=S,c0(g)):(S.next=D.next,D.next=S),g.interleaved=S,Ta(f,O)}function Ta(f,g){f.lanes|=g;var S=f.alternate;for(S!==null&&(S.lanes|=g),S=f,f=f.return;f!==null;)f.childLanes|=g,S=f.alternate,S!==null&&(S.childLanes|=g),S=f,f=f.return;return S.tag===3?S.stateNode:null}var Bn=!1;function gn(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rr(f,g){f=f.updateQueue,g.updateQueue===f&&(g.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function zn(f,g){return{eventTime:f,lane:g,tag:0,payload:null,callback:null,next:null}}function cr(f,g,S){var O=f.updateQueue;if(O===null)return null;if(O=O.shared,(Nn&2)!==0){var D=O.pending;return D===null?g.next=g:(g.next=D.next,D.next=g),O.pending=g,Ta(f,S)}return D=O.interleaved,D===null?(g.next=g,c0(O)):(g.next=D.next,D.next=g),O.interleaved=g,Ta(f,S)}function ji(f,g,S){if(g=g.updateQueue,g!==null&&(g=g.shared,(S&4194240)!==0)){var O=g.lanes;O&=f.pendingLanes,S|=O,g.lanes=S,Bu(f,S)}}function Uc(f,g){var S=f.updateQueue,O=f.alternate;if(O!==null&&(O=O.updateQueue,S===O)){var D=null,F=null;if(S=S.firstBaseUpdate,S!==null){do{var Y={eventTime:S.eventTime,lane:S.lane,tag:S.tag,payload:S.payload,callback:S.callback,next:null};F===null?D=F=Y:F=F.next=Y,S=S.next}while(S!==null);F===null?D=F=g:F=F.next=g}else D=F=g;S={baseState:O.baseState,firstBaseUpdate:D,lastBaseUpdate:F,shared:O.shared,effects:O.effects},f.updateQueue=S;return}f=S.lastBaseUpdate,f===null?S.firstBaseUpdate=g:f.next=g,S.lastBaseUpdate=g}function Sr(f,g,S,O){var D=f.updateQueue;Bn=!1;var F=D.firstBaseUpdate,Y=D.lastBaseUpdate,le=D.shared.pending;if(le!==null){D.shared.pending=null;var fe=le,Oe=fe.next;fe.next=null,Y===null?F=Oe:Y.next=Oe,Y=fe;var Ke=f.alternate;Ke!==null&&(Ke=Ke.updateQueue,le=Ke.lastBaseUpdate,le!==Y&&(le===null?Ke.firstBaseUpdate=Oe:le.next=Oe,Ke.lastBaseUpdate=fe))}if(F!==null){var Ye=D.baseState;Y=0,Ke=Oe=fe=null,le=F;do{var qe=le.lane,bt=le.eventTime;if((O&qe)===qe){Ke!==null&&(Ke=Ke.next={eventTime:bt,lane:0,tag:le.tag,payload:le.payload,callback:le.callback,next:null});e:{var Ct=f,It=le;switch(qe=g,bt=S,It.tag){case 1:if(Ct=It.payload,typeof Ct=="function"){Ye=Ct.call(bt,Ye,qe);break e}Ye=Ct;break e;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=It.payload,qe=typeof Ct=="function"?Ct.call(bt,Ye,qe):Ct,qe==null)break e;Ye=X({},Ye,qe);break e;case 2:Bn=!0}}le.callback!==null&&le.lane!==0&&(f.flags|=64,qe=D.effects,qe===null?D.effects=[le]:qe.push(le))}else bt={eventTime:bt,lane:qe,tag:le.tag,payload:le.payload,callback:le.callback,next:null},Ke===null?(Oe=Ke=bt,fe=Ye):Ke=Ke.next=bt,Y|=qe;if(le=le.next,le===null){if(le=D.shared.pending,le===null)break;qe=le,le=qe.next,qe.next=null,D.lastBaseUpdate=qe,D.shared.pending=null}}while(!0);if(Ke===null&&(fe=Ye),D.baseState=fe,D.firstBaseUpdate=Oe,D.lastBaseUpdate=Ke,g=D.shared.interleaved,g!==null){D=g;do Y|=D.lane,D=D.next;while(D!==g)}else F===null&&(D.shared.lanes=0);rh|=Y,f.lanes=Y,f.memoizedState=Ye}}function od(f,g,S){if(f=g.effects,g.effects=null,f!==null)for(g=0;g<f.length;g++){var O=f[g],D=O.callback;if(D!==null){if(O.callback=null,O=S,typeof D!="function")throw Error(n(191,D));D.call(O)}}}var eo={},Ls=_r(eo),Fc=_r(eo),Ho=_r(eo);function Lr(f){if(f===eo)throw Error(n(174));return f}function Xf(f,g){switch(Wn(Ho,g),Wn(Fc,f),Wn(Ls,eo),f=g.nodeType,f){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:it(null,"");break;default:f=f===8?g.parentNode:g,g=f.namespaceURI||null,f=f.tagName,g=it(g,f)}Zn(Ls),Wn(Ls,g)}function zl(){Zn(Ls),Zn(Fc),Zn(Ho)}function Bc(f){Lr(Ho.current);var g=Lr(Ls.current),S=it(g,f.type);g!==S&&(Wn(Fc,f),Wn(Ls,S))}function ld(f){Fc.current===f&&(Zn(Ls),Zn(Fc))}var ir=_r(0);function Aa(f){for(var g=f;g!==null;){if(g.tag===13){var S=g.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||S.data==="$?"||S.data==="$!"))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===f)break;for(;g.sibling===null;){if(g.return===null||g.return===f)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var cd=[];function to(){for(var f=0;f<cd.length;f++)cd[f]._workInProgressVersionPrimary=null;cd.length=0}var zc=A.ReactCurrentDispatcher,$c=A.ReactCurrentBatchConfig,Wo=0,er=null,Er=null,On=null,Ma=!1,Li=!1,$l=0,gs=0;function bi(){throw Error(n(321))}function Yf(f,g){if(g===null)return!1;for(var S=0;S<g.length&&S<f.length;S++)if(!Is(f[S],g[S]))return!1;return!0}function Jf(f,g,S,O,D,F){if(Wo=F,er=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,zc.current=f===null||f.memoizedState===null?x_:b_,f=S(O,D),Li){F=0;do{if(Li=!1,$l=0,25<=F)throw Error(n(301));F+=1,On=Er=null,g.updateQueue=null,zc.current=w_,f=S(O,D)}while(Li)}if(zc.current=jm,g=Er!==null&&Er.next!==null,Wo=0,On=Er=er=null,Ma=!1,g)throw Error(n(300));return f}function u0(){var f=$l!==0;return $l=0,f}function wi(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return On===null?er.memoizedState=On=f:On=On.next=f,On}function Us(){if(Er===null){var f=er.alternate;f=f!==null?f.memoizedState:null}else f=Er.next;var g=On===null?er.memoizedState:On.next;if(g!==null)On=g,Er=f;else{if(f===null)throw Error(n(310));Er=f,f={memoizedState:Er.memoizedState,baseState:Er.baseState,baseQueue:Er.baseQueue,queue:Er.queue,next:null},On===null?er.memoizedState=On=f:On=On.next=f}return On}function ud(f,g){return typeof g=="function"?g(f):g}function Qf(f){var g=Us(),S=g.queue;if(S===null)throw Error(n(311));S.lastRenderedReducer=f;var O=Er,D=O.baseQueue,F=S.pending;if(F!==null){if(D!==null){var Y=D.next;D.next=F.next,F.next=Y}O.baseQueue=D=F,S.pending=null}if(D!==null){F=D.next,O=O.baseState;var le=Y=null,fe=null,Oe=F;do{var Ke=Oe.lane;if((Wo&Ke)===Ke)fe!==null&&(fe=fe.next={lane:0,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null}),O=Oe.hasEagerState?Oe.eagerState:f(O,Oe.action);else{var Ye={lane:Ke,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null};fe===null?(le=fe=Ye,Y=O):fe=fe.next=Ye,er.lanes|=Ke,rh|=Ke}Oe=Oe.next}while(Oe!==null&&Oe!==F);fe===null?Y=O:fe.next=le,Is(O,g.memoizedState)||(vn=!0),g.memoizedState=O,g.baseState=Y,g.baseQueue=fe,S.lastRenderedState=O}if(f=S.interleaved,f!==null){D=f;do F=D.lane,er.lanes|=F,rh|=F,D=D.next;while(D!==f)}else D===null&&(S.lanes=0);return[g.memoizedState,S.dispatch]}function Go(f){var g=Us(),S=g.queue;if(S===null)throw Error(n(311));S.lastRenderedReducer=f;var O=S.dispatch,D=S.pending,F=g.memoizedState;if(D!==null){S.pending=null;var Y=D=D.next;do F=f(F,Y.action),Y=Y.next;while(Y!==D);Is(F,g.memoizedState)||(vn=!0),g.memoizedState=F,g.baseQueue===null&&(g.baseState=F),S.lastRenderedState=F}return[F,O]}function d0(){}function f0(f,g){var S=er,O=Us(),D=g(),F=!Is(O.memoizedState,D);if(F&&(O.memoizedState=D,vn=!0),O=O.queue,m0(h_.bind(null,S,O,f),[f]),O.getSnapshot!==g||F||On!==null&&On.memoizedState.tag&1){if(S.flags|=2048,Pa(9,Zf.bind(null,S,O,D,g),void 0,null),Ui===null)throw Error(n(349));(Wo&30)!==0||Rm(S,g,D)}return D}function Rm(f,g,S){f.flags|=16384,f={getSnapshot:g,value:S},g=er.updateQueue,g===null?(g={lastEffect:null,stores:null},er.updateQueue=g,g.stores=[f]):(S=g.stores,S===null?g.stores=[f]:S.push(f))}function Zf(f,g,S,O){g.value=S,g.getSnapshot=O,p_(g)&&h0(f)}function h_(f,g,S){return S(function(){p_(g)&&h0(f)})}function p_(f){var g=f.getSnapshot;f=f.value;try{var S=g();return!Is(f,S)}catch{return!0}}function h0(f){var g=Ta(f,1);g!==null&&Jo(g,f,1,-1)}function p0(f){var g=wi();return typeof f=="function"&&(f=f()),g.memoizedState=g.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ud,lastRenderedState:f},g.queue=f,f=f.dispatch=Vc.bind(null,er,f),[g.memoizedState,f]}function Pa(f,g,S,O){return f={tag:f,create:g,destroy:S,deps:O,next:null},g=er.updateQueue,g===null?(g={lastEffect:null,stores:null},er.updateQueue=g,g.lastEffect=f.next=f):(S=g.lastEffect,S===null?g.lastEffect=f.next=f:(O=S.next,S.next=f,f.next=O,g.lastEffect=f)),f}function m_(){return Us().memoizedState}function no(f,g,S,O){var D=wi();er.flags|=f,D.memoizedState=Pa(1|g,S,void 0,O===void 0?null:O)}function eh(f,g,S,O){var D=Us();O=O===void 0?null:O;var F=void 0;if(Er!==null){var Y=Er.memoizedState;if(F=Y.destroy,O!==null&&Yf(O,Y.deps)){D.memoizedState=Pa(g,S,F,O);return}}er.flags|=f,D.memoizedState=Pa(1|g,S,F,O)}function es(f,g){return no(8390656,8,f,g)}function m0(f,g){return eh(2048,8,f,g)}function g0(f,g){return eh(4,2,f,g)}function g_(f,g){return eh(4,4,f,g)}function v_(f,g){if(typeof g=="function")return f=f(),g(f),function(){g(null)};if(g!=null)return f=f(),g.current=f,function(){g.current=null}}function v0(f,g,S){return S=S!=null?S.concat([f]):null,eh(4,4,v_.bind(null,g,f),S)}function Om(){}function y_(f,g){var S=Us();g=g===void 0?null:g;var O=S.memoizedState;return O!==null&&g!==null&&Yf(g,O[1])?O[0]:(S.memoizedState=[f,g],f)}function Fs(f,g){var S=Us();g=g===void 0?null:g;var O=S.memoizedState;return O!==null&&g!==null&&Yf(g,O[1])?O[0]:(f=f(),S.memoizedState=[f,g],f)}function Nm(f,g,S){return(Wo&21)===0?(f.baseState&&(f.baseState=!1,vn=!0),f.memoizedState=S):(Is(S,g)||(S=ds(),er.lanes|=S,rh|=S,f.baseState=!0),g)}function bM(f,g){var S=Rn;Rn=S!==0&&4>S?S:4,f(!0);var O=$c.transition;$c.transition={};try{f(!1),g()}finally{Rn=S,$c.transition=O}}function qo(){return Us().memoizedState}function Im(f,g,S){var O=pd(f);if(S={lane:O,action:S,hasEagerState:!1,eagerState:null,next:null},th(f))km(g,S);else if(S=Kf(f,g,S,O),S!==null){var D=zs();Jo(S,f,O,D),Dm(S,g,O)}}function Vc(f,g,S){var O=pd(f),D={lane:O,action:S,hasEagerState:!1,eagerState:null,next:null};if(th(f))km(g,D);else{var F=f.alternate;if(f.lanes===0&&(F===null||F.lanes===0)&&(F=g.lastRenderedReducer,F!==null))try{var Y=g.lastRenderedState,le=F(Y,S);if(D.hasEagerState=!0,D.eagerState=le,Is(le,Y)){var fe=g.interleaved;fe===null?(D.next=D,c0(g)):(D.next=fe.next,fe.next=D),g.interleaved=D;return}}catch{}S=Kf(f,g,D,O),S!==null&&(D=zs(),Jo(S,f,O,D),Dm(S,g,O))}}function th(f){var g=f.alternate;return f===er||g!==null&&g===er}function km(f,g){Li=Ma=!0;var S=f.pending;S===null?g.next=g:(g.next=S.next,S.next=g),f.pending=g}function Dm(f,g,S){if((S&4194240)!==0){var O=g.lanes;O&=f.pendingLanes,S|=O,g.lanes=S,Bu(f,S)}}var jm={readContext:js,useCallback:bi,useContext:bi,useEffect:bi,useImperativeHandle:bi,useInsertionEffect:bi,useLayoutEffect:bi,useMemo:bi,useReducer:bi,useRef:bi,useState:bi,useDebugValue:bi,useDeferredValue:bi,useTransition:bi,useMutableSource:bi,useSyncExternalStore:bi,useId:bi,unstable_isNewReconciler:!1},x_={readContext:js,useCallback:function(f,g){return wi().memoizedState=[f,g===void 0?null:g],f},useContext:js,useEffect:es,useImperativeHandle:function(f,g,S){return S=S!=null?S.concat([f]):null,no(4194308,4,v_.bind(null,g,f),S)},useLayoutEffect:function(f,g){return no(4194308,4,f,g)},useInsertionEffect:function(f,g){return no(4,2,f,g)},useMemo:function(f,g){var S=wi();return g=g===void 0?null:g,f=f(),S.memoizedState=[f,g],f},useReducer:function(f,g,S){var O=wi();return g=S!==void 0?S(g):g,O.memoizedState=O.baseState=g,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:g},O.queue=f,f=f.dispatch=Im.bind(null,er,f),[O.memoizedState,f]},useRef:function(f){var g=wi();return f={current:f},g.memoizedState=f},useState:p0,useDebugValue:Om,useDeferredValue:function(f){return wi().memoizedState=f},useTransition:function(){var f=p0(!1),g=f[0];return f=bM.bind(null,f[1]),wi().memoizedState=f,[g,f]},useMutableSource:function(){},useSyncExternalStore:function(f,g,S){var O=er,D=wi();if(rr){if(S===void 0)throw Error(n(407));S=S()}else{if(S=g(),Ui===null)throw Error(n(349));(Wo&30)!==0||Rm(O,g,S)}D.memoizedState=S;var F={value:S,getSnapshot:g};return D.queue=F,es(h_.bind(null,O,F,f),[f]),O.flags|=2048,Pa(9,Zf.bind(null,O,F,S,g),void 0,null),S},useId:function(){var f=wi(),g=Ui.identifierPrefix;if(rr){var S=sa,O=lt;S=(O&~(1<<32-br(O)-1)).toString(32)+S,g=":"+g+"R"+S,S=$l++,0<S&&(g+="H"+S.toString(32)),g+=":"}else S=gs++,g=":"+g+"r"+S.toString(32)+":";return f.memoizedState=g},unstable_isNewReconciler:!1},b_={readContext:js,useCallback:y_,useContext:js,useEffect:m0,useImperativeHandle:v0,useInsertionEffect:g0,useLayoutEffect:g_,useMemo:Fs,useReducer:Qf,useRef:m_,useState:function(){return Qf(ud)},useDebugValue:Om,useDeferredValue:function(f){var g=Us();return Nm(g,Er.memoizedState,f)},useTransition:function(){var f=Qf(ud)[0],g=Us().memoizedState;return[f,g]},useMutableSource:d0,useSyncExternalStore:f0,useId:qo,unstable_isNewReconciler:!1},w_={readContext:js,useCallback:y_,useContext:js,useEffect:m0,useImperativeHandle:v0,useInsertionEffect:g0,useLayoutEffect:g_,useMemo:Fs,useReducer:Go,useRef:m_,useState:function(){return Go(ud)},useDebugValue:Om,useDeferredValue:function(f){var g=Us();return Er===null?g.memoizedState=f:Nm(g,Er.memoizedState,f)},useTransition:function(){var f=Go(ud)[0],g=Us().memoizedState;return[f,g]},useMutableSource:d0,useSyncExternalStore:f0,useId:qo,unstable_isNewReconciler:!1};function oa(f,g){if(f&&f.defaultProps){g=X({},g),f=f.defaultProps;for(var S in f)g[S]===void 0&&(g[S]=f[S]);return g}return g}function nh(f,g,S,O){g=f.memoizedState,S=S(O,g),S=S==null?g:X({},g,S),f.memoizedState=S,f.lanes===0&&(f.updateQueue.baseState=S)}var Lm={isMounted:function(f){return(f=f._reactInternals)?Po(f)===f:!1},enqueueSetState:function(f,g,S){f=f._reactInternals;var O=zs(),D=pd(f),F=zn(O,D);F.payload=g,S!=null&&(F.callback=S),g=cr(f,F,D),g!==null&&(Jo(g,f,D,O),ji(g,f,D))},enqueueReplaceState:function(f,g,S){f=f._reactInternals;var O=zs(),D=pd(f),F=zn(O,D);F.tag=1,F.payload=g,S!=null&&(F.callback=S),g=cr(f,F,D),g!==null&&(Jo(g,f,D,O),ji(g,f,D))},enqueueForceUpdate:function(f,g){f=f._reactInternals;var S=zs(),O=pd(f),D=zn(S,O);D.tag=2,g!=null&&(D.callback=g),g=cr(f,D,O),g!==null&&(Jo(g,f,O,S),ji(g,f,O))}};function __(f,g,S,O,D,F,Y){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(O,F,Y):g.prototype&&g.prototype.isPureReactComponent?!Ec(S,O)||!Ec(D,F):!0}function y(f,g,S){var O=!1,D=Uo,F=g.contextType;return typeof F=="object"&&F!==null?F=js(F):(D=Di(g)?Fo:yi.current,O=g.contextTypes,F=(O=O!=null)?Rc(f,D):Uo),g=new g(S,F),f.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Lm,f.stateNode=g,g._reactInternals=f,O&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=D,f.__reactInternalMemoizedMaskedChildContext=F),g}function w(f,g,S,O){f=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(S,O),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(S,O),g.state!==f&&Lm.enqueueReplaceState(g,g.state,null)}function C(f,g,S,O){var D=f.stateNode;D.props=S,D.state=f.memoizedState,D.refs={},gn(f);var F=g.contextType;typeof F=="object"&&F!==null?D.context=js(F):(F=Di(g)?Fo:yi.current,D.context=Rc(f,F)),D.state=f.memoizedState,F=g.getDerivedStateFromProps,typeof F=="function"&&(nh(f,g,F,S),D.state=f.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(g=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),g!==D.state&&Lm.enqueueReplaceState(D,D.state,null),Sr(f,S,D,O),D.state=f.memoizedState),typeof D.componentDidMount=="function"&&(f.flags|=4194308)}function k(f,g){try{var S="",O=g;do S+=ye(O),O=O.return;while(O);var D=S}catch(F){D=`
Error generating stack: `+F.message+`
`+F.stack}return{value:f,source:g,stack:D,digest:null}}function U(f,g,S){return{value:f,source:null,stack:S??null,digest:g??null}}function $(f,g){try{console.error(g.value)}catch(S){setTimeout(function(){throw S})}}var oe=typeof WeakMap=="function"?WeakMap:Map;function me(f,g,S){S=zn(-1,S),S.tag=3,S.payload={element:null};var O=g.value;return S.callback=function(){C_||(C_=!0,RM=O),$(f,g)},S}function je(f,g,S){S=zn(-1,S),S.tag=3;var O=f.type.getDerivedStateFromError;if(typeof O=="function"){var D=g.value;S.payload=function(){return O(D)},S.callback=function(){$(f,g)}}var F=f.stateNode;return F!==null&&typeof F.componentDidCatch=="function"&&(S.callback=function(){$(f,g),typeof O!="function"&&(fd===null?fd=new Set([this]):fd.add(this));var Y=g.stack;this.componentDidCatch(g.value,{componentStack:Y!==null?Y:""})}),S}function nt(f,g,S){var O=f.pingCache;if(O===null){O=f.pingCache=new oe;var D=new Set;O.set(g,D)}else D=O.get(g),D===void 0&&(D=new Set,O.set(g,D));D.has(S)||(D.add(S),f=kae.bind(null,f,g,S),g.then(f,f))}function _t(f){do{var g;if((g=f.tag===13)&&(g=f.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return f;f=f.return}while(f!==null);return null}function dn(f,g,S,O,D){return(f.mode&1)===0?(f===g?f.flags|=65536:(f.flags|=128,S.flags|=131072,S.flags&=-52805,S.tag===1&&(S.alternate===null?S.tag=17:(g=zn(-1,1),g.tag=2,cr(S,g,1))),S.lanes|=1),f):(f.flags|=65536,f.lanes=D,f)}var Vt=A.ReactCurrentOwner,vn=!1;function pt(f,g,S,O){g.child=f===null?Wf(g,null,S,O):kc(g,f.child,S,O)}function _i(f,g,S,O,D){S=S.render;var F=g.ref;return Bl(g,D),O=Jf(f,g,S,O,F,D),S=u0(),f!==null&&!vn?(g.updateQueue=f.updateQueue,g.flags&=-2053,f.lanes&=~D,Hc(f,g,D)):(rr&&S&&r0(g),g.flags|=1,pt(f,g,O,D),g.child)}function Bs(f,g,S,O,D){if(f===null){var F=S.type;return typeof F=="function"&&!LM(F)&&F.defaultProps===void 0&&S.compare===null&&S.defaultProps===void 0?(g.tag=15,g.type=F,Ae(f,g,F,O,D)):(f=D_(S.type,null,O,g,g.mode,D),f.ref=g.ref,f.return=g,g.child=f)}if(F=f.child,(f.lanes&D)===0){var Y=F.memoizedProps;if(S=S.compare,S=S!==null?S:Ec,S(Y,O)&&f.ref===g.ref)return Hc(f,g,D)}return g.flags|=1,f=gd(F,O),f.ref=g.ref,f.return=g,g.child=f}function Ae(f,g,S,O,D){if(f!==null){var F=f.memoizedProps;if(Ec(F,O)&&f.ref===g.ref)if(vn=!1,g.pendingProps=O=F,(f.lanes&D)!==0)(f.flags&131072)!==0&&(vn=!0);else return g.lanes=f.lanes,Hc(f,g,D)}return ht(f,g,S,O,D)}function ve(f,g,S){var O=g.pendingProps,D=O.children,F=f!==null?f.memoizedState:null;if(O.mode==="hidden")if((g.mode&1)===0)g.memoizedState={baseLanes:0,cachePool:null,transitions:null},Wn(Fm,Ca),Ca|=S;else{if((S&1073741824)===0)return f=F!==null?F.baseLanes|S:S,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:f,cachePool:null,transitions:null},g.updateQueue=null,Wn(Fm,Ca),Ca|=f,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},O=F!==null?F.baseLanes:S,Wn(Fm,Ca),Ca|=O}else F!==null?(O=F.baseLanes|S,g.memoizedState=null):O=S,Wn(Fm,Ca),Ca|=O;return pt(f,g,D,S),g.child}function ke(f,g){var S=g.ref;(f===null&&S!==null||f!==null&&f.ref!==S)&&(g.flags|=512,g.flags|=2097152)}function ht(f,g,S,O,D){var F=Di(S)?Fo:yi.current;return F=Rc(g,F),Bl(g,D),S=Jf(f,g,S,O,F,D),O=u0(),f!==null&&!vn?(g.updateQueue=f.updateQueue,g.flags&=-2053,f.lanes&=~D,Hc(f,g,D)):(rr&&O&&r0(g),g.flags|=1,pt(f,g,S,D),g.child)}function Dt(f,g,S,O,D){if(Di(S)){var F=!0;Oc(g)}else F=!1;if(Bl(g,D),g.stateNode===null)E_(f,g),y(g,S,O),C(g,S,O,D),O=!0;else if(f===null){var Y=g.stateNode,le=g.memoizedProps;Y.props=le;var fe=Y.context,Oe=S.contextType;typeof Oe=="object"&&Oe!==null?Oe=js(Oe):(Oe=Di(S)?Fo:yi.current,Oe=Rc(g,Oe));var Ke=S.getDerivedStateFromProps,Ye=typeof Ke=="function"||typeof Y.getSnapshotBeforeUpdate=="function";Ye||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(le!==O||fe!==Oe)&&w(g,Y,O,Oe),Bn=!1;var qe=g.memoizedState;Y.state=qe,Sr(g,O,Y,D),fe=g.memoizedState,le!==O||qe!==fe||Ji.current||Bn?(typeof Ke=="function"&&(nh(g,S,Ke,O),fe=g.memoizedState),(le=Bn||__(g,S,le,O,qe,fe,Oe))?(Ye||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount()),typeof Y.componentDidMount=="function"&&(g.flags|=4194308)):(typeof Y.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=O,g.memoizedState=fe),Y.props=O,Y.state=fe,Y.context=Oe,O=le):(typeof Y.componentDidMount=="function"&&(g.flags|=4194308),O=!1)}else{Y=g.stateNode,Rr(f,g),le=g.memoizedProps,Oe=g.type===g.elementType?le:oa(g.type,le),Y.props=Oe,Ye=g.pendingProps,qe=Y.context,fe=S.contextType,typeof fe=="object"&&fe!==null?fe=js(fe):(fe=Di(S)?Fo:yi.current,fe=Rc(g,fe));var bt=S.getDerivedStateFromProps;(Ke=typeof bt=="function"||typeof Y.getSnapshotBeforeUpdate=="function")||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(le!==Ye||qe!==fe)&&w(g,Y,O,fe),Bn=!1,qe=g.memoizedState,Y.state=qe,Sr(g,O,Y,D);var Ct=g.memoizedState;le!==Ye||qe!==Ct||Ji.current||Bn?(typeof bt=="function"&&(nh(g,S,bt,O),Ct=g.memoizedState),(Oe=Bn||__(g,S,Oe,O,qe,Ct,fe)||!1)?(Ke||typeof Y.UNSAFE_componentWillUpdate!="function"&&typeof Y.componentWillUpdate!="function"||(typeof Y.componentWillUpdate=="function"&&Y.componentWillUpdate(O,Ct,fe),typeof Y.UNSAFE_componentWillUpdate=="function"&&Y.UNSAFE_componentWillUpdate(O,Ct,fe)),typeof Y.componentDidUpdate=="function"&&(g.flags|=4),typeof Y.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof Y.componentDidUpdate!="function"||le===f.memoizedProps&&qe===f.memoizedState||(g.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||le===f.memoizedProps&&qe===f.memoizedState||(g.flags|=1024),g.memoizedProps=O,g.memoizedState=Ct),Y.props=O,Y.state=Ct,Y.context=fe,O=Oe):(typeof Y.componentDidUpdate!="function"||le===f.memoizedProps&&qe===f.memoizedState||(g.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||le===f.memoizedProps&&qe===f.memoizedState||(g.flags|=1024),O=!1)}return pn(f,g,S,O,F,D)}function pn(f,g,S,O,D,F){ke(f,g);var Y=(g.flags&128)!==0;if(!O&&!Y)return D&&t0(g,S,!1),Hc(f,g,F);O=g.stateNode,Vt.current=g;var le=Y&&typeof S.getDerivedStateFromError!="function"?null:O.render();return g.flags|=1,f!==null&&Y?(g.child=kc(g,f.child,null,F),g.child=kc(g,null,le,F)):pt(f,g,le,F),g.memoizedState=O.state,D&&t0(g,S,!0),g.child}function fn(f){var g=f.stateNode;g.pendingContext?e0(f,g.pendingContext,g.pendingContext!==g.context):g.context&&e0(f,g.context,!1),Xf(f,g.containerInfo)}function Cn(f,g,S,O,D){return Fl(),sd(D),g.flags|=256,pt(f,g,S,O),g.child}var Ur={dehydrated:null,treeContext:null,retryLane:0};function Pn(f){return{baseLanes:f,cachePool:null,transitions:null}}function Ko(f,g,S){var O=g.pendingProps,D=ir.current,F=!1,Y=(g.flags&128)!==0,le;if((le=Y)||(le=f!==null&&f.memoizedState===null?!1:(D&2)!==0),le?(F=!0,g.flags&=-129):(f===null||f.memoizedState!==null)&&(D|=1),Wn(ir,D&1),f===null)return Pm(g),f=g.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?((g.mode&1)===0?g.lanes=1:f.data==="$!"?g.lanes=8:g.lanes=1073741824,null):(Y=O.children,f=O.fallback,F?(O=g.mode,F=g.child,Y={mode:"hidden",children:Y},(O&1)===0&&F!==null?(F.childLanes=0,F.pendingProps=Y):F=j_(Y,O,0,null),f=oh(f,O,S,null),F.return=g,f.return=g,F.sibling=f,g.child=F,g.child.memoizedState=Pn(S),g.memoizedState=Ur,f):y0(g,Y));if(D=f.memoizedState,D!==null&&(le=D.dehydrated,le!==null))return _ae(f,g,Y,O,le,D,S);if(F){F=O.fallback,Y=g.mode,D=f.child,le=D.sibling;var fe={mode:"hidden",children:O.children};return(Y&1)===0&&g.child!==D?(O=g.child,O.childLanes=0,O.pendingProps=fe,g.deletions=null):(O=gd(D,fe),O.subtreeFlags=D.subtreeFlags&14680064),le!==null?F=gd(le,F):(F=oh(F,Y,S,null),F.flags|=2),F.return=g,O.return=g,O.sibling=F,g.child=O,O=F,F=g.child,Y=f.child.memoizedState,Y=Y===null?Pn(S):{baseLanes:Y.baseLanes|S,cachePool:null,transitions:Y.transitions},F.memoizedState=Y,F.childLanes=f.childLanes&~S,g.memoizedState=Ur,O}return F=f.child,f=F.sibling,O=gd(F,{mode:"visible",children:O.children}),(g.mode&1)===0&&(O.lanes=S),O.return=g,O.sibling=null,f!==null&&(S=g.deletions,S===null?(g.deletions=[f],g.flags|=16):S.push(f)),g.child=O,g.memoizedState=null,O}function y0(f,g){return g=j_({mode:"visible",children:g},f.mode,0,null),g.return=f,f.child=g}function S_(f,g,S,O){return O!==null&&sd(O),kc(g,f.child,null,S),f=y0(g,g.pendingProps.children),f.flags|=2,g.memoizedState=null,f}function _ae(f,g,S,O,D,F,Y){if(S)return g.flags&256?(g.flags&=-257,O=U(Error(n(422))),S_(f,g,Y,O)):g.memoizedState!==null?(g.child=f.child,g.flags|=128,null):(F=O.fallback,D=g.mode,O=j_({mode:"visible",children:O.children},D,0,null),F=oh(F,D,Y,null),F.flags|=2,O.return=g,F.return=g,O.sibling=F,g.child=O,(g.mode&1)!==0&&kc(g,f.child,null,Y),g.child.memoizedState=Pn(Y),g.memoizedState=Ur,F);if((g.mode&1)===0)return S_(f,g,Y,null);if(D.data==="$!"){if(O=D.nextSibling&&D.nextSibling.dataset,O)var le=O.dgst;return O=le,F=Error(n(419)),O=U(F,O,void 0),S_(f,g,Y,O)}if(le=(Y&f.childLanes)!==0,vn||le){if(O=Ui,O!==null){switch(Y&-Y){case 4:D=2;break;case 16:D=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:D=32;break;case 536870912:D=268435456;break;default:D=0}D=(D&(O.suspendedLanes|Y))!==0?0:D,D!==0&&D!==F.retryLane&&(F.retryLane=D,Ta(f,D),Jo(O,f,D,-1))}return jM(),O=U(Error(n(421))),S_(f,g,Y,O)}return D.data==="$?"?(g.flags|=128,g.child=f.child,g=Dae.bind(null,f),D._reactRetry=g,null):(f=F.treeContext,Zi=jo(D.nextSibling),xi=g,rr=!0,aa=null,f!==null&&(Qi[ai++]=lt,Qi[ai++]=sa,Qi[ai++]=Ic,lt=f.id,sa=f.overflow,Ic=g),g=y0(g,O.children),g.flags|=4096,g)}function JU(f,g,S){f.lanes|=g;var O=f.alternate;O!==null&&(O.lanes|=g),qf(f.return,g,S)}function wM(f,g,S,O,D){var F=f.memoizedState;F===null?f.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:O,tail:S,tailMode:D}:(F.isBackwards=g,F.rendering=null,F.renderingStartTime=0,F.last=O,F.tail=S,F.tailMode=D)}function QU(f,g,S){var O=g.pendingProps,D=O.revealOrder,F=O.tail;if(pt(f,g,O.children,S),O=ir.current,(O&2)!==0)O=O&1|2,g.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=g.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&JU(f,S,g);else if(f.tag===19)JU(f,S,g);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===g)break e;for(;f.sibling===null;){if(f.return===null||f.return===g)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}O&=1}if(Wn(ir,O),(g.mode&1)===0)g.memoizedState=null;else switch(D){case"forwards":for(S=g.child,D=null;S!==null;)f=S.alternate,f!==null&&Aa(f)===null&&(D=S),S=S.sibling;S=D,S===null?(D=g.child,g.child=null):(D=S.sibling,S.sibling=null),wM(g,!1,D,S,F);break;case"backwards":for(S=null,D=g.child,g.child=null;D!==null;){if(f=D.alternate,f!==null&&Aa(f)===null){g.child=D;break}f=D.sibling,D.sibling=S,S=D,D=f}wM(g,!0,S,null,F);break;case"together":wM(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function E_(f,g){(g.mode&1)===0&&f!==null&&(f.alternate=null,g.alternate=null,g.flags|=2)}function Hc(f,g,S){if(f!==null&&(g.dependencies=f.dependencies),rh|=g.lanes,(S&g.childLanes)===0)return null;if(f!==null&&g.child!==f.child)throw Error(n(153));if(g.child!==null){for(f=g.child,S=gd(f,f.pendingProps),g.child=S,S.return=g;f.sibling!==null;)f=f.sibling,S=S.sibling=gd(f,f.pendingProps),S.return=g;S.sibling=null}return g.child}function Sae(f,g,S){switch(g.tag){case 3:fn(g),Fl();break;case 5:Bc(g);break;case 1:Di(g.type)&&Oc(g);break;case 4:Xf(g,g.stateNode.containerInfo);break;case 10:var O=g.type._context,D=g.memoizedProps.value;Wn(Dc,O._currentValue),O._currentValue=D;break;case 13:if(O=g.memoizedState,O!==null)return O.dehydrated!==null?(Wn(ir,ir.current&1),g.flags|=128,null):(S&g.child.childLanes)!==0?Ko(f,g,S):(Wn(ir,ir.current&1),f=Hc(f,g,S),f!==null?f.sibling:null);Wn(ir,ir.current&1);break;case 19:if(O=(S&g.childLanes)!==0,(f.flags&128)!==0){if(O)return QU(f,g,S);g.flags|=128}if(D=g.memoizedState,D!==null&&(D.rendering=null,D.tail=null,D.lastEffect=null),Wn(ir,ir.current),O)break;return null;case 22:case 23:return g.lanes=0,ve(f,g,S)}return Hc(f,g,S)}var ZU,_M,eF,tF;ZU=function(f,g){for(var S=g.child;S!==null;){if(S.tag===5||S.tag===6)f.appendChild(S.stateNode);else if(S.tag!==4&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===g)break;for(;S.sibling===null;){if(S.return===null||S.return===g)return;S=S.return}S.sibling.return=S.return,S=S.sibling}},_M=function(){},eF=function(f,g,S,O){var D=f.memoizedProps;if(D!==O){f=g.stateNode,Lr(Ls.current);var F=null;switch(S){case"input":D=xe(f,D),O=xe(f,O),F=[];break;case"select":D=X({},D,{value:void 0}),O=X({},O,{value:void 0}),F=[];break;case"textarea":D=$e(f,D),O=$e(f,O),F=[];break;default:typeof D.onClick!="function"&&typeof O.onClick=="function"&&(f.onclick=Uf)}ue(S,O);var Y;S=null;for(Oe in D)if(!O.hasOwnProperty(Oe)&&D.hasOwnProperty(Oe)&&D[Oe]!=null)if(Oe==="style"){var le=D[Oe];for(Y in le)le.hasOwnProperty(Y)&&(S||(S={}),S[Y]="")}else Oe!=="dangerouslySetInnerHTML"&&Oe!=="children"&&Oe!=="suppressContentEditableWarning"&&Oe!=="suppressHydrationWarning"&&Oe!=="autoFocus"&&(i.hasOwnProperty(Oe)?F||(F=[]):(F=F||[]).push(Oe,null));for(Oe in O){var fe=O[Oe];if(le=D?.[Oe],O.hasOwnProperty(Oe)&&fe!==le&&(fe!=null||le!=null))if(Oe==="style")if(le){for(Y in le)!le.hasOwnProperty(Y)||fe&&fe.hasOwnProperty(Y)||(S||(S={}),S[Y]="");for(Y in fe)fe.hasOwnProperty(Y)&&le[Y]!==fe[Y]&&(S||(S={}),S[Y]=fe[Y])}else S||(F||(F=[]),F.push(Oe,S)),S=fe;else Oe==="dangerouslySetInnerHTML"?(fe=fe?fe.__html:void 0,le=le?le.__html:void 0,fe!=null&&le!==fe&&(F=F||[]).push(Oe,fe)):Oe==="children"?typeof fe!="string"&&typeof fe!="number"||(F=F||[]).push(Oe,""+fe):Oe!=="suppressContentEditableWarning"&&Oe!=="suppressHydrationWarning"&&(i.hasOwnProperty(Oe)?(fe!=null&&Oe==="onScroll"&&Qn("scroll",f),F||le===fe||(F=[])):(F=F||[]).push(Oe,fe))}S&&(F=F||[]).push("style",S);var Oe=F;(g.updateQueue=Oe)&&(g.flags|=4)}},tF=function(f,g,S,O){S!==O&&(g.flags|=4)};function x0(f,g){if(!rr)switch(f.tailMode){case"hidden":g=f.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?f.tail=null:S.sibling=null;break;case"collapsed":S=f.tail;for(var O=null;S!==null;)S.alternate!==null&&(O=S),S=S.sibling;O===null?g||f.tail===null?f.tail=null:f.tail.sibling=null:O.sibling=null}}function vs(f){var g=f.alternate!==null&&f.alternate.child===f.child,S=0,O=0;if(g)for(var D=f.child;D!==null;)S|=D.lanes|D.childLanes,O|=D.subtreeFlags&14680064,O|=D.flags&14680064,D.return=f,D=D.sibling;else for(D=f.child;D!==null;)S|=D.lanes|D.childLanes,O|=D.subtreeFlags,O|=D.flags,D.return=f,D=D.sibling;return f.subtreeFlags|=O,f.childLanes=S,g}function Eae(f,g,S){var O=g.pendingProps;switch(zo(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vs(g),null;case 1:return Di(g.type)&&Ff(),vs(g),null;case 3:return O=g.stateNode,zl(),Zn(Ji),Zn(yi),to(),O.pendingContext&&(O.context=O.pendingContext,O.pendingContext=null),(f===null||f.child===null)&&(id(g)?g.flags|=4:f===null||f.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,aa!==null&&(IM(aa),aa=null))),_M(f,g),vs(g),null;case 5:ld(g);var D=Lr(Ho.current);if(S=g.type,f!==null&&g.stateNode!=null)eF(f,g,S,O,D),f.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!O){if(g.stateNode===null)throw Error(n(166));return vs(g),null}if(f=Lr(Ls.current),id(g)){O=g.stateNode,S=g.type;var F=g.memoizedProps;switch(O[Xr]=g,O[rd]=F,f=(g.mode&1)!==0,S){case"dialog":Qn("cancel",O),Qn("close",O);break;case"iframe":case"object":case"embed":Qn("load",O);break;case"video":case"audio":for(D=0;D<Ll.length;D++)Qn(Ll[D],O);break;case"source":Qn("error",O);break;case"img":case"image":case"link":Qn("error",O),Qn("load",O);break;case"details":Qn("toggle",O);break;case"input":Le(O,F),Qn("invalid",O);break;case"select":O._wrapperState={wasMultiple:!!F.multiple},Qn("invalid",O);break;case"textarea":Be(O,F),Qn("invalid",O)}ue(S,F),D=null;for(var Y in F)if(F.hasOwnProperty(Y)){var le=F[Y];Y==="children"?typeof le=="string"?O.textContent!==le&&(F.suppressHydrationWarning!==!0&&Lf(O.textContent,le,f),D=["children",le]):typeof le=="number"&&O.textContent!==""+le&&(F.suppressHydrationWarning!==!0&&Lf(O.textContent,le,f),D=["children",""+le]):i.hasOwnProperty(Y)&&le!=null&&Y==="onScroll"&&Qn("scroll",O)}switch(S){case"input":Ee(O),Ze(O,F,!0);break;case"textarea":Ee(O),mt(O);break;case"select":case"option":break;default:typeof F.onClick=="function"&&(O.onclick=Uf)}O=D,g.updateQueue=O,O!==null&&(g.flags|=4)}else{Y=D.nodeType===9?D:D.ownerDocument,f==="http://www.w3.org/1999/xhtml"&&(f=Xe(S)),f==="http://www.w3.org/1999/xhtml"?S==="script"?(f=Y.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild)):typeof O.is=="string"?f=Y.createElement(S,{is:O.is}):(f=Y.createElement(S),S==="select"&&(Y=f,O.multiple?Y.multiple=!0:O.size&&(Y.size=O.size))):f=Y.createElementNS(f,S),f[Xr]=g,f[rd]=O,ZU(f,g,!1,!1),g.stateNode=f;e:{switch(Y=Ve(S,O),S){case"dialog":Qn("cancel",f),Qn("close",f),D=O;break;case"iframe":case"object":case"embed":Qn("load",f),D=O;break;case"video":case"audio":for(D=0;D<Ll.length;D++)Qn(Ll[D],f);D=O;break;case"source":Qn("error",f),D=O;break;case"img":case"image":case"link":Qn("error",f),Qn("load",f),D=O;break;case"details":Qn("toggle",f),D=O;break;case"input":Le(f,O),D=xe(f,O),Qn("invalid",f);break;case"option":D=O;break;case"select":f._wrapperState={wasMultiple:!!O.multiple},D=X({},O,{value:void 0}),Qn("invalid",f);break;case"textarea":Be(f,O),D=$e(f,O),Qn("invalid",f);break;default:D=O}ue(S,D),le=D;for(F in le)if(le.hasOwnProperty(F)){var fe=le[F];F==="style"?Tt(f,fe):F==="dangerouslySetInnerHTML"?(fe=fe?fe.__html:void 0,fe!=null&&Xt(f,fe)):F==="children"?typeof fe=="string"?(S!=="textarea"||fe!=="")&&He(f,fe):typeof fe=="number"&&He(f,""+fe):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(i.hasOwnProperty(F)?fe!=null&&F==="onScroll"&&Qn("scroll",f):fe!=null&&T(f,F,fe,Y))}switch(S){case"input":Ee(f),Ze(f,O,!1);break;case"textarea":Ee(f),mt(f);break;case"option":O.value!=null&&f.setAttribute("value",""+De(O.value));break;case"select":f.multiple=!!O.multiple,F=O.value,F!=null?ge(f,!!O.multiple,F,!1):O.defaultValue!=null&&ge(f,!!O.multiple,O.defaultValue,!0);break;default:typeof D.onClick=="function"&&(f.onclick=Uf)}switch(S){case"button":case"input":case"select":case"textarea":O=!!O.autoFocus;break e;case"img":O=!0;break e;default:O=!1}}O&&(g.flags|=4)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return vs(g),null;case 6:if(f&&g.stateNode!=null)tF(f,g,f.memoizedProps,O);else{if(typeof O!="string"&&g.stateNode===null)throw Error(n(166));if(S=Lr(Ho.current),Lr(Ls.current),id(g)){if(O=g.stateNode,S=g.memoizedProps,O[Xr]=g,(F=O.nodeValue!==S)&&(f=xi,f!==null))switch(f.tag){case 3:Lf(O.nodeValue,S,(f.mode&1)!==0);break;case 5:f.memoizedProps.suppressHydrationWarning!==!0&&Lf(O.nodeValue,S,(f.mode&1)!==0)}F&&(g.flags|=4)}else O=(S.nodeType===9?S:S.ownerDocument).createTextNode(O),O[Xr]=g,g.stateNode=O}return vs(g),null;case 13:if(Zn(ir),O=g.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(rr&&Zi!==null&&(g.mode&1)!==0&&(g.flags&128)===0)a0(),Fl(),g.flags|=98560,F=!1;else if(F=id(g),O!==null&&O.dehydrated!==null){if(f===null){if(!F)throw Error(n(318));if(F=g.memoizedState,F=F!==null?F.dehydrated:null,!F)throw Error(n(317));F[Xr]=g}else Fl(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;vs(g),F=!1}else aa!==null&&(IM(aa),aa=null),F=!0;if(!F)return g.flags&65536?g:null}return(g.flags&128)!==0?(g.lanes=S,g):(O=O!==null,O!==(f!==null&&f.memoizedState!==null)&&O&&(g.child.flags|=8192,(g.mode&1)!==0&&(f===null||(ir.current&1)!==0?Si===0&&(Si=3):jM())),g.updateQueue!==null&&(g.flags|=4),vs(g),null);case 4:return zl(),_M(f,g),f===null&&ed(g.stateNode.containerInfo),vs(g),null;case 10:return Gf(g.type._context),vs(g),null;case 17:return Di(g.type)&&Ff(),vs(g),null;case 19:if(Zn(ir),F=g.memoizedState,F===null)return vs(g),null;if(O=(g.flags&128)!==0,Y=F.rendering,Y===null)if(O)x0(F,!1);else{if(Si!==0||f!==null&&(f.flags&128)!==0)for(f=g.child;f!==null;){if(Y=Aa(f),Y!==null){for(g.flags|=128,x0(F,!1),O=Y.updateQueue,O!==null&&(g.updateQueue=O,g.flags|=4),g.subtreeFlags=0,O=S,S=g.child;S!==null;)F=S,f=O,F.flags&=14680066,Y=F.alternate,Y===null?(F.childLanes=0,F.lanes=f,F.child=null,F.subtreeFlags=0,F.memoizedProps=null,F.memoizedState=null,F.updateQueue=null,F.dependencies=null,F.stateNode=null):(F.childLanes=Y.childLanes,F.lanes=Y.lanes,F.child=Y.child,F.subtreeFlags=0,F.deletions=null,F.memoizedProps=Y.memoizedProps,F.memoizedState=Y.memoizedState,F.updateQueue=Y.updateQueue,F.type=Y.type,f=Y.dependencies,F.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),S=S.sibling;return Wn(ir,ir.current&1|2),g.child}f=f.sibling}F.tail!==null&&yt()>Bm&&(g.flags|=128,O=!0,x0(F,!1),g.lanes=4194304)}else{if(!O)if(f=Aa(Y),f!==null){if(g.flags|=128,O=!0,S=f.updateQueue,S!==null&&(g.updateQueue=S,g.flags|=4),x0(F,!0),F.tail===null&&F.tailMode==="hidden"&&!Y.alternate&&!rr)return vs(g),null}else 2*yt()-F.renderingStartTime>Bm&&S!==1073741824&&(g.flags|=128,O=!0,x0(F,!1),g.lanes=4194304);F.isBackwards?(Y.sibling=g.child,g.child=Y):(S=F.last,S!==null?S.sibling=Y:g.child=Y,F.last=Y)}return F.tail!==null?(g=F.tail,F.rendering=g,F.tail=g.sibling,F.renderingStartTime=yt(),g.sibling=null,S=ir.current,Wn(ir,O?S&1|2:S&1),g):(vs(g),null);case 22:case 23:return DM(),O=g.memoizedState!==null,f!==null&&f.memoizedState!==null!==O&&(g.flags|=8192),O&&(g.mode&1)!==0?(Ca&1073741824)!==0&&(vs(g),g.subtreeFlags&6&&(g.flags|=8192)):vs(g),null;case 24:return null;case 25:return null}throw Error(n(156,g.tag))}function Tae(f,g){switch(zo(g),g.tag){case 1:return Di(g.type)&&Ff(),f=g.flags,f&65536?(g.flags=f&-65537|128,g):null;case 3:return zl(),Zn(Ji),Zn(yi),to(),f=g.flags,(f&65536)!==0&&(f&128)===0?(g.flags=f&-65537|128,g):null;case 5:return ld(g),null;case 13:if(Zn(ir),f=g.memoizedState,f!==null&&f.dehydrated!==null){if(g.alternate===null)throw Error(n(340));Fl()}return f=g.flags,f&65536?(g.flags=f&-65537|128,g):null;case 19:return Zn(ir),null;case 4:return zl(),null;case 10:return Gf(g.type._context),null;case 22:case 23:return DM(),null;case 24:return null;default:return null}}var T_=!1,ys=!1,Aae=typeof WeakSet=="function"?WeakSet:Set,At=null;function Um(f,g){var S=f.ref;if(S!==null)if(typeof S=="function")try{S(null)}catch(O){Fr(f,g,O)}else S.current=null}function SM(f,g,S){try{S()}catch(O){Fr(f,g,O)}}var nF=!1;function Mae(f,g){if(nd=Zs,f=gr(),ni(f)){if("selectionStart"in f)var S={start:f.selectionStart,end:f.selectionEnd};else e:{S=(S=f.ownerDocument)&&S.defaultView||window;var O=S.getSelection&&S.getSelection();if(O&&O.rangeCount!==0){S=O.anchorNode;var D=O.anchorOffset,F=O.focusNode;O=O.focusOffset;try{S.nodeType,F.nodeType}catch{S=null;break e}var Y=0,le=-1,fe=-1,Oe=0,Ke=0,Ye=f,qe=null;t:for(;;){for(var bt;Ye!==S||D!==0&&Ye.nodeType!==3||(le=Y+D),Ye!==F||O!==0&&Ye.nodeType!==3||(fe=Y+O),Ye.nodeType===3&&(Y+=Ye.nodeValue.length),(bt=Ye.firstChild)!==null;)qe=Ye,Ye=bt;for(;;){if(Ye===f)break t;if(qe===S&&++Oe===D&&(le=Y),qe===F&&++Ke===O&&(fe=Y),(bt=Ye.nextSibling)!==null)break;Ye=qe,qe=Ye.parentNode}Ye=bt}S=le===-1||fe===-1?null:{start:le,end:fe}}else S=null}S=S||{start:0,end:0}}else S=null;for(Ky={focusedElem:f,selectionRange:S},Zs=!1,At=g;At!==null;)if(g=At,f=g.child,(g.subtreeFlags&1028)!==0&&f!==null)f.return=g,At=f;else for(;At!==null;){g=At;try{var Ct=g.alternate;if((g.flags&1024)!==0)switch(g.tag){case 0:case 11:case 15:break;case 1:if(Ct!==null){var It=Ct.memoizedProps,Yr=Ct.memoizedState,Se=g.stateNode,pe=Se.getSnapshotBeforeUpdate(g.elementType===g.type?It:oa(g.type,It),Yr);Se.__reactInternalSnapshotBeforeUpdate=pe}break;case 3:var Te=g.stateNode.containerInfo;Te.nodeType===1?Te.textContent="":Te.nodeType===9&&Te.documentElement&&Te.removeChild(Te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(rt){Fr(g,g.return,rt)}if(f=g.sibling,f!==null){f.return=g.return,At=f;break}At=g.return}return Ct=nF,nF=!1,Ct}function b0(f,g,S){var O=g.updateQueue;if(O=O!==null?O.lastEffect:null,O!==null){var D=O=O.next;do{if((D.tag&f)===f){var F=D.destroy;D.destroy=void 0,F!==void 0&&SM(g,S,F)}D=D.next}while(D!==O)}}function A_(f,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var S=g=g.next;do{if((S.tag&f)===f){var O=S.create;S.destroy=O()}S=S.next}while(S!==g)}}function EM(f){var g=f.ref;if(g!==null){var S=f.stateNode;f.tag,f=S,typeof g=="function"?g(f):g.current=f}}function rF(f){var g=f.alternate;g!==null&&(f.alternate=null,rF(g)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(g=f.stateNode,g!==null&&(delete g[Xr],delete g[rd],delete g[Cc],delete g[wm],delete g[_m])),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function iF(f){return f.tag===5||f.tag===3||f.tag===4}function sF(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||iF(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function TM(f,g,S){var O=f.tag;if(O===5||O===6)f=f.stateNode,g?S.nodeType===8?S.parentNode.insertBefore(f,g):S.insertBefore(f,g):(S.nodeType===8?(g=S.parentNode,g.insertBefore(f,S)):(g=S,g.appendChild(f)),S=S._reactRootContainer,S!=null||g.onclick!==null||(g.onclick=Uf));else if(O!==4&&(f=f.child,f!==null))for(TM(f,g,S),f=f.sibling;f!==null;)TM(f,g,S),f=f.sibling}function AM(f,g,S){var O=f.tag;if(O===5||O===6)f=f.stateNode,g?S.insertBefore(f,g):S.appendChild(f);else if(O!==4&&(f=f.child,f!==null))for(AM(f,g,S),f=f.sibling;f!==null;)AM(f,g,S),f=f.sibling}var ts=null,Xo=!1;function dd(f,g,S){for(S=S.child;S!==null;)aF(f,g,S),S=S.sibling}function aF(f,g,S){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(Mr,S)}catch{}switch(S.tag){case 5:ys||Um(S,g);case 6:var O=ts,D=Xo;ts=null,dd(f,g,S),ts=O,Xo=D,ts!==null&&(Xo?(f=ts,S=S.stateNode,f.nodeType===8?f.parentNode.removeChild(S):f.removeChild(S)):ts.removeChild(S.stateNode));break;case 18:ts!==null&&(Xo?(f=ts,S=S.stateNode,f.nodeType===8?bm(f.parentNode,S):f.nodeType===1&&bm(f,S),Af(f)):bm(ts,S.stateNode));break;case 4:O=ts,D=Xo,ts=S.stateNode.containerInfo,Xo=!0,dd(f,g,S),ts=O,Xo=D;break;case 0:case 11:case 14:case 15:if(!ys&&(O=S.updateQueue,O!==null&&(O=O.lastEffect,O!==null))){D=O=O.next;do{var F=D,Y=F.destroy;F=F.tag,Y!==void 0&&((F&2)!==0||(F&4)!==0)&&SM(S,g,Y),D=D.next}while(D!==O)}dd(f,g,S);break;case 1:if(!ys&&(Um(S,g),O=S.stateNode,typeof O.componentWillUnmount=="function"))try{O.props=S.memoizedProps,O.state=S.memoizedState,O.componentWillUnmount()}catch(le){Fr(S,g,le)}dd(f,g,S);break;case 21:dd(f,g,S);break;case 22:S.mode&1?(ys=(O=ys)||S.memoizedState!==null,dd(f,g,S),ys=O):dd(f,g,S);break;default:dd(f,g,S)}}function oF(f){var g=f.updateQueue;if(g!==null){f.updateQueue=null;var S=f.stateNode;S===null&&(S=f.stateNode=new Aae),g.forEach(function(O){var D=jae.bind(null,f,O);S.has(O)||(S.add(O),O.then(D,D))})}}function Yo(f,g){var S=g.deletions;if(S!==null)for(var O=0;O<S.length;O++){var D=S[O];try{var F=f,Y=g,le=Y;e:for(;le!==null;){switch(le.tag){case 5:ts=le.stateNode,Xo=!1;break e;case 3:ts=le.stateNode.containerInfo,Xo=!0;break e;case 4:ts=le.stateNode.containerInfo,Xo=!0;break e}le=le.return}if(ts===null)throw Error(n(160));aF(F,Y,D),ts=null,Xo=!1;var fe=D.alternate;fe!==null&&(fe.return=null),D.return=null}catch(Oe){Fr(D,g,Oe)}}if(g.subtreeFlags&12854)for(g=g.child;g!==null;)lF(g,f),g=g.sibling}function lF(f,g){var S=f.alternate,O=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:if(Yo(g,f),Vl(f),O&4){try{b0(3,f,f.return),A_(3,f)}catch(It){Fr(f,f.return,It)}try{b0(5,f,f.return)}catch(It){Fr(f,f.return,It)}}break;case 1:Yo(g,f),Vl(f),O&512&&S!==null&&Um(S,S.return);break;case 5:if(Yo(g,f),Vl(f),O&512&&S!==null&&Um(S,S.return),f.flags&32){var D=f.stateNode;try{He(D,"")}catch(It){Fr(f,f.return,It)}}if(O&4&&(D=f.stateNode,D!=null)){var F=f.memoizedProps,Y=S!==null?S.memoizedProps:F,le=f.type,fe=f.updateQueue;if(f.updateQueue=null,fe!==null)try{le==="input"&&F.type==="radio"&&F.name!=null&&Pe(D,F),Ve(le,Y);var Oe=Ve(le,F);for(Y=0;Y<fe.length;Y+=2){var Ke=fe[Y],Ye=fe[Y+1];Ke==="style"?Tt(D,Ye):Ke==="dangerouslySetInnerHTML"?Xt(D,Ye):Ke==="children"?He(D,Ye):T(D,Ke,Ye,Oe)}switch(le){case"input":tt(D,F);break;case"textarea":Fe(D,F);break;case"select":var qe=D._wrapperState.wasMultiple;D._wrapperState.wasMultiple=!!F.multiple;var bt=F.value;bt!=null?ge(D,!!F.multiple,bt,!1):qe!==!!F.multiple&&(F.defaultValue!=null?ge(D,!!F.multiple,F.defaultValue,!0):ge(D,!!F.multiple,F.multiple?[]:"",!1))}D[rd]=F}catch(It){Fr(f,f.return,It)}}break;case 6:if(Yo(g,f),Vl(f),O&4){if(f.stateNode===null)throw Error(n(162));D=f.stateNode,F=f.memoizedProps;try{D.nodeValue=F}catch(It){Fr(f,f.return,It)}}break;case 3:if(Yo(g,f),Vl(f),O&4&&S!==null&&S.memoizedState.isDehydrated)try{Af(g.containerInfo)}catch(It){Fr(f,f.return,It)}break;case 4:Yo(g,f),Vl(f);break;case 13:Yo(g,f),Vl(f),D=f.child,D.flags&8192&&(F=D.memoizedState!==null,D.stateNode.isHidden=F,!F||D.alternate!==null&&D.alternate.memoizedState!==null||(CM=yt())),O&4&&oF(f);break;case 22:if(Ke=S!==null&&S.memoizedState!==null,f.mode&1?(ys=(Oe=ys)||Ke,Yo(g,f),ys=Oe):Yo(g,f),Vl(f),O&8192){if(Oe=f.memoizedState!==null,(f.stateNode.isHidden=Oe)&&!Ke&&(f.mode&1)!==0)for(At=f,Ke=f.child;Ke!==null;){for(Ye=At=Ke;At!==null;){switch(qe=At,bt=qe.child,qe.tag){case 0:case 11:case 14:case 15:b0(4,qe,qe.return);break;case 1:Um(qe,qe.return);var Ct=qe.stateNode;if(typeof Ct.componentWillUnmount=="function"){O=qe,S=qe.return;try{g=O,Ct.props=g.memoizedProps,Ct.state=g.memoizedState,Ct.componentWillUnmount()}catch(It){Fr(O,S,It)}}break;case 5:Um(qe,qe.return);break;case 22:if(qe.memoizedState!==null){dF(Ye);continue}}bt!==null?(bt.return=qe,At=bt):dF(Ye)}Ke=Ke.sibling}e:for(Ke=null,Ye=f;;){if(Ye.tag===5){if(Ke===null){Ke=Ye;try{D=Ye.stateNode,Oe?(F=D.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none"):(le=Ye.stateNode,fe=Ye.memoizedProps.style,Y=fe!=null&&fe.hasOwnProperty("display")?fe.display:null,le.style.display=$t("display",Y))}catch(It){Fr(f,f.return,It)}}}else if(Ye.tag===6){if(Ke===null)try{Ye.stateNode.nodeValue=Oe?"":Ye.memoizedProps}catch(It){Fr(f,f.return,It)}}else if((Ye.tag!==22&&Ye.tag!==23||Ye.memoizedState===null||Ye===f)&&Ye.child!==null){Ye.child.return=Ye,Ye=Ye.child;continue}if(Ye===f)break e;for(;Ye.sibling===null;){if(Ye.return===null||Ye.return===f)break e;Ke===Ye&&(Ke=null),Ye=Ye.return}Ke===Ye&&(Ke=null),Ye.sibling.return=Ye.return,Ye=Ye.sibling}}break;case 19:Yo(g,f),Vl(f),O&4&&oF(f);break;case 21:break;default:Yo(g,f),Vl(f)}}function Vl(f){var g=f.flags;if(g&2){try{e:{for(var S=f.return;S!==null;){if(iF(S)){var O=S;break e}S=S.return}throw Error(n(160))}switch(O.tag){case 5:var D=O.stateNode;O.flags&32&&(He(D,""),O.flags&=-33);var F=sF(f);AM(f,F,D);break;case 3:case 4:var Y=O.stateNode.containerInfo,le=sF(f);TM(f,le,Y);break;default:throw Error(n(161))}}catch(fe){Fr(f,f.return,fe)}f.flags&=-3}g&4096&&(f.flags&=-4097)}function Pae(f,g,S){At=f,cF(f)}function cF(f,g,S){for(var O=(f.mode&1)!==0;At!==null;){var D=At,F=D.child;if(D.tag===22&&O){var Y=D.memoizedState!==null||T_;if(!Y){var le=D.alternate,fe=le!==null&&le.memoizedState!==null||ys;le=T_;var Oe=ys;if(T_=Y,(ys=fe)&&!Oe)for(At=D;At!==null;)Y=At,fe=Y.child,Y.tag===22&&Y.memoizedState!==null?fF(D):fe!==null?(fe.return=Y,At=fe):fF(D);for(;F!==null;)At=F,cF(F),F=F.sibling;At=D,T_=le,ys=Oe}uF(f)}else(D.subtreeFlags&8772)!==0&&F!==null?(F.return=D,At=F):uF(f)}}function uF(f){for(;At!==null;){var g=At;if((g.flags&8772)!==0){var S=g.alternate;try{if((g.flags&8772)!==0)switch(g.tag){case 0:case 11:case 15:ys||A_(5,g);break;case 1:var O=g.stateNode;if(g.flags&4&&!ys)if(S===null)O.componentDidMount();else{var D=g.elementType===g.type?S.memoizedProps:oa(g.type,S.memoizedProps);O.componentDidUpdate(D,S.memoizedState,O.__reactInternalSnapshotBeforeUpdate)}var F=g.updateQueue;F!==null&&od(g,F,O);break;case 3:var Y=g.updateQueue;if(Y!==null){if(S=null,g.child!==null)switch(g.child.tag){case 5:S=g.child.stateNode;break;case 1:S=g.child.stateNode}od(g,Y,S)}break;case 5:var le=g.stateNode;if(S===null&&g.flags&4){S=le;var fe=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":fe.autoFocus&&S.focus();break;case"img":fe.src&&(S.src=fe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(g.memoizedState===null){var Oe=g.alternate;if(Oe!==null){var Ke=Oe.memoizedState;if(Ke!==null){var Ye=Ke.dehydrated;Ye!==null&&Af(Ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}ys||g.flags&512&&EM(g)}catch(qe){Fr(g,g.return,qe)}}if(g===f){At=null;break}if(S=g.sibling,S!==null){S.return=g.return,At=S;break}At=g.return}}function dF(f){for(;At!==null;){var g=At;if(g===f){At=null;break}var S=g.sibling;if(S!==null){S.return=g.return,At=S;break}At=g.return}}function fF(f){for(;At!==null;){var g=At;try{switch(g.tag){case 0:case 11:case 15:var S=g.return;try{A_(4,g)}catch(fe){Fr(g,S,fe)}break;case 1:var O=g.stateNode;if(typeof O.componentDidMount=="function"){var D=g.return;try{O.componentDidMount()}catch(fe){Fr(g,D,fe)}}var F=g.return;try{EM(g)}catch(fe){Fr(g,F,fe)}break;case 5:var Y=g.return;try{EM(g)}catch(fe){Fr(g,Y,fe)}}}catch(fe){Fr(g,g.return,fe)}if(g===f){At=null;break}var le=g.sibling;if(le!==null){le.return=g.return,At=le;break}At=g.return}}var Cae=Math.ceil,M_=A.ReactCurrentDispatcher,MM=A.ReactCurrentOwner,ro=A.ReactCurrentBatchConfig,Nn=0,Ui=null,oi=null,ns=0,Ca=0,Fm=_r(0),Si=0,w0=null,rh=0,P_=0,PM=0,_0=null,la=null,CM=0,Bm=1/0,Wc=null,C_=!1,RM=null,fd=null,R_=!1,hd=null,O_=0,S0=0,OM=null,N_=-1,I_=0;function zs(){return(Nn&6)!==0?yt():N_!==-1?N_:N_=yt()}function pd(f){return(f.mode&1)===0?1:(Nn&2)!==0&&ns!==0?ns&-ns:xM.transition!==null?(I_===0&&(I_=ds()),I_):(f=Rn,f!==0||(f=window.event,f=f===void 0?16:Qw(f.type)),f)}function Jo(f,g,S,O){if(50<S0)throw S0=0,OM=null,Error(n(185));_f(f,S,O),((Nn&2)===0||f!==Ui)&&(f===Ui&&((Nn&2)===0&&(P_|=S),Si===4&&md(f,ns)),ca(f,O),S===1&&Nn===0&&(g.mode&1)===0&&(Bm=yt()+500,zf&&Za()))}function ca(f,g){var S=f.callbackNode;gi(f,g);var O=Os(f,f===Ui?ns:0);if(O===0)S!==null&&vt(S),f.callbackNode=null,f.callbackPriority=0;else if(g=O&-O,f.callbackPriority!==g){if(S!=null&&vt(S),g===1)f.tag===0?f_(pF.bind(null,f)):$f(pF.bind(null,f)),yM(function(){(Nn&6)===0&&Za()}),S=null;else{switch(zu(O)){case 1:S=Yt;break;case 4:S=sn;break;case 16:S=Yn;break;case 536870912:S=Jn;break;default:S=Yn}S=_F(S,hF.bind(null,f))}f.callbackPriority=g,f.callbackNode=S}}function hF(f,g){if(N_=-1,I_=0,(Nn&6)!==0)throw Error(n(327));var S=f.callbackNode;if(zm()&&f.callbackNode!==S)return null;var O=Os(f,f===Ui?ns:0);if(O===0)return null;if((O&30)!==0||(O&f.expiredLanes)!==0||g)g=k_(f,O);else{g=O;var D=Nn;Nn|=2;var F=gF();(Ui!==f||ns!==g)&&(Wc=null,Bm=yt()+500,sh(f,g));do try{Nae();break}catch(le){mF(f,le)}while(!0);Lc(),M_.current=F,Nn=D,oi!==null?g=0:(Ui=null,ns=0,g=Si)}if(g!==0){if(g===2&&(D=Rl(f),D!==0&&(O=D,g=NM(f,D))),g===1)throw S=w0,sh(f,0),md(f,O),ca(f,yt()),S;if(g===6)md(f,O);else{if(D=f.current.alternate,(O&30)===0&&!Rae(D)&&(g=k_(f,O),g===2&&(F=Rl(f),F!==0&&(O=F,g=NM(f,F))),g===1))throw S=w0,sh(f,0),md(f,O),ca(f,yt()),S;switch(f.finishedWork=D,f.finishedLanes=O,g){case 0:case 1:throw Error(n(345));case 2:ah(f,la,Wc);break;case 3:if(md(f,O),(O&130023424)===O&&(g=CM+500-yt(),10<g)){if(Os(f,0)!==0)break;if(D=f.suspendedLanes,(D&O)!==O){zs(),f.pingedLanes|=f.suspendedLanes&D;break}f.timeoutHandle=Yy(ah.bind(null,f,la,Wc),g);break}ah(f,la,Wc);break;case 4:if(md(f,O),(O&4194240)===O)break;for(g=f.eventTimes,D=-1;0<O;){var Y=31-br(O);F=1<<Y,Y=g[Y],Y>D&&(D=Y),O&=~F}if(O=D,O=yt()-O,O=(120>O?120:480>O?480:1080>O?1080:1920>O?1920:3e3>O?3e3:4320>O?4320:1960*Cae(O/1960))-O,10<O){f.timeoutHandle=Yy(ah.bind(null,f,la,Wc),O);break}ah(f,la,Wc);break;case 5:ah(f,la,Wc);break;default:throw Error(n(329))}}}return ca(f,yt()),f.callbackNode===S?hF.bind(null,f):null}function NM(f,g){var S=_0;return f.current.memoizedState.isDehydrated&&(sh(f,g).flags|=256),f=k_(f,g),f!==2&&(g=la,la=S,g!==null&&IM(g)),f}function IM(f){la===null?la=f:la.push.apply(la,f)}function Rae(f){for(var g=f;;){if(g.flags&16384){var S=g.updateQueue;if(S!==null&&(S=S.stores,S!==null))for(var O=0;O<S.length;O++){var D=S[O],F=D.getSnapshot;D=D.value;try{if(!Is(F(),D))return!1}catch{return!1}}}if(S=g.child,g.subtreeFlags&16384&&S!==null)S.return=g,g=S;else{if(g===f)break;for(;g.sibling===null;){if(g.return===null||g.return===f)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function md(f,g){for(g&=~PM,g&=~P_,f.suspendedLanes|=g,f.pingedLanes&=~g,f=f.expirationTimes;0<g;){var S=31-br(g),O=1<<S;f[S]=-1,g&=~O}}function pF(f){if((Nn&6)!==0)throw Error(n(327));zm();var g=Os(f,0);if((g&1)===0)return ca(f,yt()),null;var S=k_(f,g);if(f.tag!==0&&S===2){var O=Rl(f);O!==0&&(g=O,S=NM(f,O))}if(S===1)throw S=w0,sh(f,0),md(f,g),ca(f,yt()),S;if(S===6)throw Error(n(345));return f.finishedWork=f.current.alternate,f.finishedLanes=g,ah(f,la,Wc),ca(f,yt()),null}function kM(f,g){var S=Nn;Nn|=1;try{return f(g)}finally{Nn=S,Nn===0&&(Bm=yt()+500,zf&&Za())}}function ih(f){hd!==null&&hd.tag===0&&(Nn&6)===0&&zm();var g=Nn;Nn|=1;var S=ro.transition,O=Rn;try{if(ro.transition=null,Rn=1,f)return f()}finally{Rn=O,ro.transition=S,Nn=g,(Nn&6)===0&&Za()}}function DM(){Ca=Fm.current,Zn(Fm)}function sh(f,g){f.finishedWork=null,f.finishedLanes=0;var S=f.timeoutHandle;if(S!==-1&&(f.timeoutHandle=-1,Jy(S)),oi!==null)for(S=oi.return;S!==null;){var O=S;switch(zo(O),O.tag){case 1:O=O.type.childContextTypes,O!=null&&Ff();break;case 3:zl(),Zn(Ji),Zn(yi),to();break;case 5:ld(O);break;case 4:zl();break;case 13:Zn(ir);break;case 19:Zn(ir);break;case 10:Gf(O.type._context);break;case 22:case 23:DM()}S=S.return}if(Ui=f,oi=f=gd(f.current,null),ns=Ca=g,Si=0,w0=null,PM=P_=rh=0,la=_0=null,Vo!==null){for(g=0;g<Vo.length;g++)if(S=Vo[g],O=S.interleaved,O!==null){S.interleaved=null;var D=O.next,F=S.pending;if(F!==null){var Y=F.next;F.next=D,O.next=Y}S.pending=O}Vo=null}return f}function mF(f,g){do{var S=oi;try{if(Lc(),zc.current=jm,Ma){for(var O=er.memoizedState;O!==null;){var D=O.queue;D!==null&&(D.pending=null),O=O.next}Ma=!1}if(Wo=0,On=Er=er=null,Li=!1,$l=0,MM.current=null,S===null||S.return===null){Si=1,w0=g,oi=null;break}e:{var F=f,Y=S.return,le=S,fe=g;if(g=ns,le.flags|=32768,fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){var Oe=fe,Ke=le,Ye=Ke.tag;if((Ke.mode&1)===0&&(Ye===0||Ye===11||Ye===15)){var qe=Ke.alternate;qe?(Ke.updateQueue=qe.updateQueue,Ke.memoizedState=qe.memoizedState,Ke.lanes=qe.lanes):(Ke.updateQueue=null,Ke.memoizedState=null)}var bt=_t(Y);if(bt!==null){bt.flags&=-257,dn(bt,Y,le,F,g),bt.mode&1&&nt(F,Oe,g),g=bt,fe=Oe;var Ct=g.updateQueue;if(Ct===null){var It=new Set;It.add(fe),g.updateQueue=It}else Ct.add(fe);break e}else{if((g&1)===0){nt(F,Oe,g),jM();break e}fe=Error(n(426))}}else if(rr&&le.mode&1){var Yr=_t(Y);if(Yr!==null){(Yr.flags&65536)===0&&(Yr.flags|=256),dn(Yr,Y,le,F,g),sd(k(fe,le));break e}}F=fe=k(fe,le),Si!==4&&(Si=2),_0===null?_0=[F]:_0.push(F),F=Y;do{switch(F.tag){case 3:F.flags|=65536,g&=-g,F.lanes|=g;var Se=me(F,fe,g);Uc(F,Se);break e;case 1:le=fe;var pe=F.type,Te=F.stateNode;if((F.flags&128)===0&&(typeof pe.getDerivedStateFromError=="function"||Te!==null&&typeof Te.componentDidCatch=="function"&&(fd===null||!fd.has(Te)))){F.flags|=65536,g&=-g,F.lanes|=g;var rt=je(F,le,g);Uc(F,rt);break e}}F=F.return}while(F!==null)}yF(S)}catch(Ut){g=Ut,oi===S&&S!==null&&(oi=S=S.return);continue}break}while(!0)}function gF(){var f=M_.current;return M_.current=jm,f===null?jm:f}function jM(){(Si===0||Si===3||Si===2)&&(Si=4),Ui===null||(rh&268435455)===0&&(P_&268435455)===0||md(Ui,ns)}function k_(f,g){var S=Nn;Nn|=2;var O=gF();(Ui!==f||ns!==g)&&(Wc=null,sh(f,g));do try{Oae();break}catch(D){mF(f,D)}while(!0);if(Lc(),Nn=S,M_.current=O,oi!==null)throw Error(n(261));return Ui=null,ns=0,Si}function Oae(){for(;oi!==null;)vF(oi)}function Nae(){for(;oi!==null&&!Ft();)vF(oi)}function vF(f){var g=wF(f.alternate,f,Ca);f.memoizedProps=f.pendingProps,g===null?yF(f):oi=g,MM.current=null}function yF(f){var g=f;do{var S=g.alternate;if(f=g.return,(g.flags&32768)===0){if(S=Eae(S,g,Ca),S!==null){oi=S;return}}else{if(S=Tae(S,g),S!==null){S.flags&=32767,oi=S;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{Si=6,oi=null;return}}if(g=g.sibling,g!==null){oi=g;return}oi=g=f}while(g!==null);Si===0&&(Si=5)}function ah(f,g,S){var O=Rn,D=ro.transition;try{ro.transition=null,Rn=1,Iae(f,g,S,O)}finally{ro.transition=D,Rn=O}return null}function Iae(f,g,S,O){do zm();while(hd!==null);if((Nn&6)!==0)throw Error(n(327));S=f.finishedWork;var D=f.finishedLanes;if(S===null)return null;if(f.finishedWork=null,f.finishedLanes=0,S===f.current)throw Error(n(177));f.callbackNode=null,f.callbackPriority=0;var F=S.lanes|S.childLanes;if(pM(f,F),f===Ui&&(oi=Ui=null,ns=0),(S.subtreeFlags&2064)===0&&(S.flags&2064)===0||R_||(R_=!0,_F(Yn,function(){return zm(),null})),F=(S.flags&15990)!==0,(S.subtreeFlags&15990)!==0||F){F=ro.transition,ro.transition=null;var Y=Rn;Rn=1;var le=Nn;Nn|=4,MM.current=null,Mae(f,S),lF(S,f),ri(Ky),Zs=!!nd,Ky=nd=null,f.current=S,Pae(S),Wt(),Nn=le,Rn=Y,ro.transition=F}else f.current=S;if(R_&&(R_=!1,hd=f,O_=D),F=f.pendingLanes,F===0&&(fd=null),Et(S.stateNode),ca(f,yt()),g!==null)for(O=f.onRecoverableError,S=0;S<g.length;S++)D=g[S],O(D.value,{componentStack:D.stack,digest:D.digest});if(C_)throw C_=!1,f=RM,RM=null,f;return(O_&1)!==0&&f.tag!==0&&zm(),F=f.pendingLanes,(F&1)!==0?f===OM?S0++:(S0=0,OM=f):S0=0,Za(),null}function zm(){if(hd!==null){var f=zu(O_),g=ro.transition,S=Rn;try{if(ro.transition=null,Rn=16>f?16:f,hd===null)var O=!1;else{if(f=hd,hd=null,O_=0,(Nn&6)!==0)throw Error(n(331));var D=Nn;for(Nn|=4,At=f.current;At!==null;){var F=At,Y=F.child;if((At.flags&16)!==0){var le=F.deletions;if(le!==null){for(var fe=0;fe<le.length;fe++){var Oe=le[fe];for(At=Oe;At!==null;){var Ke=At;switch(Ke.tag){case 0:case 11:case 15:b0(8,Ke,F)}var Ye=Ke.child;if(Ye!==null)Ye.return=Ke,At=Ye;else for(;At!==null;){Ke=At;var qe=Ke.sibling,bt=Ke.return;if(rF(Ke),Ke===Oe){At=null;break}if(qe!==null){qe.return=bt,At=qe;break}At=bt}}}var Ct=F.alternate;if(Ct!==null){var It=Ct.child;if(It!==null){Ct.child=null;do{var Yr=It.sibling;It.sibling=null,It=Yr}while(It!==null)}}At=F}}if((F.subtreeFlags&2064)!==0&&Y!==null)Y.return=F,At=Y;else e:for(;At!==null;){if(F=At,(F.flags&2048)!==0)switch(F.tag){case 0:case 11:case 15:b0(9,F,F.return)}var Se=F.sibling;if(Se!==null){Se.return=F.return,At=Se;break e}At=F.return}}var pe=f.current;for(At=pe;At!==null;){Y=At;var Te=Y.child;if((Y.subtreeFlags&2064)!==0&&Te!==null)Te.return=Y,At=Te;else e:for(Y=pe;At!==null;){if(le=At,(le.flags&2048)!==0)try{switch(le.tag){case 0:case 11:case 15:A_(9,le)}}catch(Ut){Fr(le,le.return,Ut)}if(le===Y){At=null;break e}var rt=le.sibling;if(rt!==null){rt.return=le.return,At=rt;break e}At=le.return}}if(Nn=D,Za(),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(Mr,f)}catch{}O=!0}return O}finally{Rn=S,ro.transition=g}}return!1}function xF(f,g,S){g=k(S,g),g=me(f,g,1),f=cr(f,g,1),g=zs(),f!==null&&(_f(f,1,g),ca(f,g))}function Fr(f,g,S){if(f.tag===3)xF(f,f,S);else for(;g!==null;){if(g.tag===3){xF(g,f,S);break}else if(g.tag===1){var O=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof O.componentDidCatch=="function"&&(fd===null||!fd.has(O))){f=k(S,f),f=je(g,f,1),g=cr(g,f,1),f=zs(),g!==null&&(_f(g,1,f),ca(g,f));break}}g=g.return}}function kae(f,g,S){var O=f.pingCache;O!==null&&O.delete(g),g=zs(),f.pingedLanes|=f.suspendedLanes&S,Ui===f&&(ns&S)===S&&(Si===4||Si===3&&(ns&130023424)===ns&&500>yt()-CM?sh(f,0):PM|=S),ca(f,g)}function bF(f,g){g===0&&((f.mode&1)===0?g=1:(g=Pr,Pr<<=1,(Pr&130023424)===0&&(Pr=4194304)));var S=zs();f=Ta(f,g),f!==null&&(_f(f,g,S),ca(f,S))}function Dae(f){var g=f.memoizedState,S=0;g!==null&&(S=g.retryLane),bF(f,S)}function jae(f,g){var S=0;switch(f.tag){case 13:var O=f.stateNode,D=f.memoizedState;D!==null&&(S=D.retryLane);break;case 19:O=f.stateNode;break;default:throw Error(n(314))}O!==null&&O.delete(g),bF(f,S)}var wF;wF=function(f,g,S){if(f!==null)if(f.memoizedProps!==g.pendingProps||Ji.current)vn=!0;else{if((f.lanes&S)===0&&(g.flags&128)===0)return vn=!1,Sae(f,g,S);vn=(f.flags&131072)!==0}else vn=!1,rr&&(g.flags&1048576)!==0&&n0(g,Am,g.index);switch(g.lanes=0,g.tag){case 2:var O=g.type;E_(f,g),f=g.pendingProps;var D=Rc(g,yi.current);Bl(g,S),D=Jf(null,g,O,f,D,S);var F=u0();return g.flags|=1,typeof D=="object"&&D!==null&&typeof D.render=="function"&&D.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,Di(O)?(F=!0,Oc(g)):F=!1,g.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,gn(g),D.updater=Lm,g.stateNode=D,D._reactInternals=g,C(g,O,f,S),g=pn(null,g,O,!0,F,S)):(g.tag=0,rr&&F&&r0(g),pt(null,g,D,S),g=g.child),g;case 16:O=g.elementType;e:{switch(E_(f,g),f=g.pendingProps,D=O._init,O=D(O._payload),g.type=O,D=g.tag=Uae(O),f=oa(O,f),D){case 0:g=ht(null,g,O,f,S);break e;case 1:g=Dt(null,g,O,f,S);break e;case 11:g=_i(null,g,O,f,S);break e;case 14:g=Bs(null,g,O,oa(O.type,f),S);break e}throw Error(n(306,O,""))}return g;case 0:return O=g.type,D=g.pendingProps,D=g.elementType===O?D:oa(O,D),ht(f,g,O,D,S);case 1:return O=g.type,D=g.pendingProps,D=g.elementType===O?D:oa(O,D),Dt(f,g,O,D,S);case 3:e:{if(fn(g),f===null)throw Error(n(387));O=g.pendingProps,F=g.memoizedState,D=F.element,Rr(f,g),Sr(g,O,null,S);var Y=g.memoizedState;if(O=Y.element,F.isDehydrated)if(F={element:O,isDehydrated:!1,cache:Y.cache,pendingSuspenseBoundaries:Y.pendingSuspenseBoundaries,transitions:Y.transitions},g.updateQueue.baseState=F,g.memoizedState=F,g.flags&256){D=k(Error(n(423)),g),g=Cn(f,g,O,S,D);break e}else if(O!==D){D=k(Error(n(424)),g),g=Cn(f,g,O,S,D);break e}else for(Zi=jo(g.stateNode.containerInfo.firstChild),xi=g,rr=!0,aa=null,S=Wf(g,null,O,S),g.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(Fl(),O===D){g=Hc(f,g,S);break e}pt(f,g,O,S)}g=g.child}return g;case 5:return Bc(g),f===null&&Pm(g),O=g.type,D=g.pendingProps,F=f!==null?f.memoizedProps:null,Y=D.children,Xy(O,D)?Y=null:F!==null&&Xy(O,F)&&(g.flags|=32),ke(f,g),pt(f,g,Y,S),g.child;case 6:return f===null&&Pm(g),null;case 13:return Ko(f,g,S);case 4:return Xf(g,g.stateNode.containerInfo),O=g.pendingProps,f===null?g.child=kc(g,null,O,S):pt(f,g,O,S),g.child;case 11:return O=g.type,D=g.pendingProps,D=g.elementType===O?D:oa(O,D),_i(f,g,O,D,S);case 7:return pt(f,g,g.pendingProps,S),g.child;case 8:return pt(f,g,g.pendingProps.children,S),g.child;case 12:return pt(f,g,g.pendingProps.children,S),g.child;case 10:e:{if(O=g.type._context,D=g.pendingProps,F=g.memoizedProps,Y=D.value,Wn(Dc,O._currentValue),O._currentValue=Y,F!==null)if(Is(F.value,Y)){if(F.children===D.children&&!Ji.current){g=Hc(f,g,S);break e}}else for(F=g.child,F!==null&&(F.return=g);F!==null;){var le=F.dependencies;if(le!==null){Y=F.child;for(var fe=le.firstContext;fe!==null;){if(fe.context===O){if(F.tag===1){fe=zn(-1,S&-S),fe.tag=2;var Oe=F.updateQueue;if(Oe!==null){Oe=Oe.shared;var Ke=Oe.pending;Ke===null?fe.next=fe:(fe.next=Ke.next,Ke.next=fe),Oe.pending=fe}}F.lanes|=S,fe=F.alternate,fe!==null&&(fe.lanes|=S),qf(F.return,S,g),le.lanes|=S;break}fe=fe.next}}else if(F.tag===10)Y=F.type===g.type?null:F.child;else if(F.tag===18){if(Y=F.return,Y===null)throw Error(n(341));Y.lanes|=S,le=Y.alternate,le!==null&&(le.lanes|=S),qf(Y,S,g),Y=F.sibling}else Y=F.child;if(Y!==null)Y.return=F;else for(Y=F;Y!==null;){if(Y===g){Y=null;break}if(F=Y.sibling,F!==null){F.return=Y.return,Y=F;break}Y=Y.return}F=Y}pt(f,g,D.children,S),g=g.child}return g;case 9:return D=g.type,O=g.pendingProps.children,Bl(g,S),D=js(D),O=O(D),g.flags|=1,pt(f,g,O,S),g.child;case 14:return O=g.type,D=oa(O,g.pendingProps),D=oa(O.type,D),Bs(f,g,O,D,S);case 15:return Ae(f,g,g.type,g.pendingProps,S);case 17:return O=g.type,D=g.pendingProps,D=g.elementType===O?D:oa(O,D),E_(f,g),g.tag=1,Di(O)?(f=!0,Oc(g)):f=!1,Bl(g,S),y(g,O,D),C(g,O,D,S),pn(null,g,O,!0,f,S);case 19:return QU(f,g,S);case 22:return ve(f,g,S)}throw Error(n(156,g.tag))};function _F(f,g){return Re(f,g)}function Lae(f,g,S,O){this.tag=f,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=O,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function io(f,g,S,O){return new Lae(f,g,S,O)}function LM(f){return f=f.prototype,!(!f||!f.isReactComponent)}function Uae(f){if(typeof f=="function")return LM(f)?1:0;if(f!=null){if(f=f.$$typeof,f===H)return 11;if(f===W)return 14}return 2}function gd(f,g){var S=f.alternate;return S===null?(S=io(f.tag,g,f.key,f.mode),S.elementType=f.elementType,S.type=f.type,S.stateNode=f.stateNode,S.alternate=f,f.alternate=S):(S.pendingProps=g,S.type=f.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=f.flags&14680064,S.childLanes=f.childLanes,S.lanes=f.lanes,S.child=f.child,S.memoizedProps=f.memoizedProps,S.memoizedState=f.memoizedState,S.updateQueue=f.updateQueue,g=f.dependencies,S.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},S.sibling=f.sibling,S.index=f.index,S.ref=f.ref,S}function D_(f,g,S,O,D,F){var Y=2;if(O=f,typeof f=="function")LM(f)&&(Y=1);else if(typeof f=="string")Y=5;else e:switch(f){case N:return oh(S.children,D,F,g);case L:Y=8,D|=8;break;case I:return f=io(12,S,g,D|2),f.elementType=I,f.lanes=F,f;case J:return f=io(13,S,g,D),f.elementType=J,f.lanes=F,f;case G:return f=io(19,S,g,D),f.elementType=G,f.lanes=F,f;case te:return j_(S,D,F,g);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case j:Y=10;break e;case B:Y=9;break e;case H:Y=11;break e;case W:Y=14;break e;case K:Y=16,O=null;break e}throw Error(n(130,f==null?f:typeof f,""))}return g=io(Y,S,g,D),g.elementType=f,g.type=O,g.lanes=F,g}function oh(f,g,S,O){return f=io(7,f,O,g),f.lanes=S,f}function j_(f,g,S,O){return f=io(22,f,O,g),f.elementType=te,f.lanes=S,f.stateNode={isHidden:!1},f}function UM(f,g,S){return f=io(6,f,null,g),f.lanes=S,f}function FM(f,g,S){return g=io(4,f.children!==null?f.children:[],f.key,g),g.lanes=S,g.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},g}function Fae(f,g,S,O,D){this.tag=g,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fu(0),this.expirationTimes=Fu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fu(0),this.identifierPrefix=O,this.onRecoverableError=D,this.mutableSourceEagerHydrationData=null}function BM(f,g,S,O,D,F,Y,le,fe){return f=new Fae(f,g,S,le,fe),g===1?(g=1,F===!0&&(g|=8)):g=0,F=io(3,null,null,g),f.current=F,F.stateNode=f,F.memoizedState={element:O,isDehydrated:S,cache:null,transitions:null,pendingSuspenseBoundaries:null},gn(F),f}function Bae(f,g,S){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:R,key:O==null?null:""+O,children:f,containerInfo:g,implementation:S}}function SF(f){if(!f)return Uo;f=f._reactInternals;e:{if(Po(f)!==f||f.tag!==1)throw Error(n(170));var g=f;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(Di(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(n(171))}if(f.tag===1){var S=f.type;if(Di(S))return Bf(f,S,g)}return g}function EF(f,g,S,O,D,F,Y,le,fe){return f=BM(S,O,!0,f,D,F,Y,le,fe),f.context=SF(null),S=f.current,O=zs(),D=pd(S),F=zn(O,D),F.callback=g??null,cr(S,F,D),f.current.lanes=D,_f(f,D,O),ca(f,O),f}function L_(f,g,S,O){var D=g.current,F=zs(),Y=pd(D);return S=SF(S),g.context===null?g.context=S:g.pendingContext=S,g=zn(F,Y),g.payload={element:f},O=O===void 0?null:O,O!==null&&(g.callback=O),f=cr(D,g,Y),f!==null&&(Jo(f,D,Y,F),ji(f,D,Y)),Y}function U_(f){return f=f.current,f.child?(f.child.tag===5,f.child.stateNode):null}function TF(f,g){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var S=f.retryLane;f.retryLane=S!==0&&S<g?S:g}}function zM(f,g){TF(f,g),(f=f.alternate)&&TF(f,g)}function zae(){return null}var AF=typeof reportError=="function"?reportError:function(f){console.error(f)};function $M(f){this._internalRoot=f}F_.prototype.render=$M.prototype.render=function(f){var g=this._internalRoot;if(g===null)throw Error(n(409));L_(f,g,null,null)},F_.prototype.unmount=$M.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var g=f.containerInfo;ih(function(){L_(null,f,null,null)}),g[Ds]=null}};function F_(f){this._internalRoot=f}F_.prototype.unstable_scheduleHydration=function(f){if(f){var g=Wp();f={blockedOn:null,target:f,priority:g};for(var S=0;S<Ol.length&&g!==0&&g<Ol[S].priority;S++);Ol.splice(S,0,f),S===0&&Kp(f)}};function VM(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function B_(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11&&(f.nodeType!==8||f.nodeValue!==" react-mount-point-unstable "))}function MF(){}function $ae(f,g,S,O,D){if(D){if(typeof O=="function"){var F=O;O=function(){var Oe=U_(Y);F.call(Oe)}}var Y=EF(g,O,f,0,null,!1,!1,"",MF);return f._reactRootContainer=Y,f[Ds]=Y.current,ed(f.nodeType===8?f.parentNode:f),ih(),Y}for(;D=f.lastChild;)f.removeChild(D);if(typeof O=="function"){var le=O;O=function(){var Oe=U_(fe);le.call(Oe)}}var fe=BM(f,0,!1,null,null,!1,!1,"",MF);return f._reactRootContainer=fe,f[Ds]=fe.current,ed(f.nodeType===8?f.parentNode:f),ih(function(){L_(g,fe,S,O)}),fe}function z_(f,g,S,O,D){var F=S._reactRootContainer;if(F){var Y=F;if(typeof D=="function"){var le=D;D=function(){var fe=U_(Y);le.call(fe)}}L_(g,Y,f,D)}else Y=$ae(S,g,f,D,O);return U_(Y)}Sf=function(f){switch(f.tag){case 3:var g=f.stateNode;if(g.current.memoizedState.isDehydrated){var S=nr(g.pendingLanes);S!==0&&(Bu(g,S|1),ca(g,yt()),(Nn&6)===0&&(Bm=yt()+500,Za()))}break;case 13:ih(function(){var O=Ta(f,1);if(O!==null){var D=zs();Jo(O,f,1,D)}}),zM(f,1)}},Oy=function(f){if(f.tag===13){var g=Ta(f,134217728);if(g!==null){var S=zs();Jo(g,f,134217728,S)}zM(f,134217728)}},Jw=function(f){if(f.tag===13){var g=pd(f),S=Ta(f,g);if(S!==null){var O=zs();Jo(S,f,g,O)}zM(f,g)}},Wp=function(){return Rn},Gp=function(f,g){var S=Rn;try{return Rn=f,g()}finally{Rn=S}},Ge=function(f,g,S){switch(g){case"input":if(tt(f,S),g=S.name,S.type==="radio"&&g!=null){for(S=f;S.parentNode;)S=S.parentNode;for(S=S.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<S.length;g++){var O=S[g];if(O!==f&&O.form===f.form){var D=Sm(O);if(!D)throw Error(n(90));ee(O),tt(O,D)}}}break;case"textarea":Fe(f,S);break;case"select":g=S.value,g!=null&&ge(f,!!S.multiple,g,!1)}},xt=kM,Ot=ih;var Vae={usingClientEntryPoint:!1,Events:[Lo,Cr,Sm,zt,We,kM]},E0={findFiberByHostInstance:Ul,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Hae={bundleType:E0.bundleType,version:E0.version,rendererPackageName:E0.rendererPackageName,rendererConfig:E0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(f){return f=Ne(f),f===null?null:f.stateNode},findFiberByHostInstance:E0.findFiberByHostInstance||zae,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$_.isDisabled&&$_.supportsFiber)try{Mr=$_.inject(Hae),Lt=$_}catch{}}return ua.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vae,ua.createPortal=function(f,g){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!VM(g))throw Error(n(200));return Bae(f,g,null,S)},ua.createRoot=function(f,g){if(!VM(f))throw Error(n(299));var S=!1,O="",D=AF;return g!=null&&(g.unstable_strictMode===!0&&(S=!0),g.identifierPrefix!==void 0&&(O=g.identifierPrefix),g.onRecoverableError!==void 0&&(D=g.onRecoverableError)),g=BM(f,1,!1,null,null,S,!1,O,D),f[Ds]=g.current,ed(f.nodeType===8?f.parentNode:f),new $M(g)},ua.findDOMNode=function(f){if(f==null)return null;if(f.nodeType===1)return f;var g=f._reactInternals;if(g===void 0)throw typeof f.render=="function"?Error(n(188)):(f=Object.keys(f).join(","),Error(n(268,f)));return f=Ne(g),f=f===null?null:f.stateNode,f},ua.flushSync=function(f){return ih(f)},ua.hydrate=function(f,g,S){if(!B_(g))throw Error(n(200));return z_(null,f,g,!0,S)},ua.hydrateRoot=function(f,g,S){if(!VM(f))throw Error(n(405));var O=S!=null&&S.hydratedSources||null,D=!1,F="",Y=AF;if(S!=null&&(S.unstable_strictMode===!0&&(D=!0),S.identifierPrefix!==void 0&&(F=S.identifierPrefix),S.onRecoverableError!==void 0&&(Y=S.onRecoverableError)),g=EF(g,null,f,1,S??null,D,!1,F,Y),f[Ds]=g.current,ed(f),O)for(f=0;f<O.length;f++)S=O[f],D=S._getVersion,D=D(S._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[S,D]:g.mutableSourceEagerHydrationData.push(S,D);return new F_(g)},ua.render=function(f,g,S){if(!B_(g))throw Error(n(200));return z_(null,f,g,!1,S)},ua.unmountComponentAtNode=function(f){if(!B_(f))throw Error(n(40));return f._reactRootContainer?(ih(function(){z_(null,null,f,!1,function(){f._reactRootContainer=null,f[Ds]=null})}),!0):!1},ua.unstable_batchedUpdates=kM,ua.unstable_renderSubtreeIntoContainer=function(f,g,S,O){if(!B_(S))throw Error(n(200));if(f==null||f._reactInternals===void 0)throw Error(n(38));return z_(f,g,S,!1,O)},ua.version="18.3.1-next-f1338f8080-20240426",ua}var DF;function Hq(){if(DF)return GM.exports;DF=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),GM.exports=Qae(),GM.exports}var jF;function Zae(){if(jF)return H_;jF=1;var t=Hq();return H_.createRoot=t.createRoot,H_.hydrateRoot=t.hydrateRoot,H_}var Wq=Zae(),M=lw();const ne=Ln(M),cj=Gae({__proto__:null,default:ne},[M]),eoe=1,toe=1e6;let XM=0;function noe(){return XM=(XM+1)%Number.MAX_SAFE_INTEGER,XM.toString()}const YM=new Map,LF=t=>{if(YM.has(t))return;const e=setTimeout(()=>{YM.delete(t),hx({type:"REMOVE_TOAST",toastId:t})},toe);YM.set(t,e)},roe=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,eoe)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?LF(n):t.toasts.forEach(r=>{LF(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},w1=[];let _1={toasts:[]};function hx(t){_1=roe(_1,t),w1.forEach(e=>{e(_1)})}function ioe({...t}){const e=noe(),n=i=>hx({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>hx({type:"DISMISS_TOAST",toastId:e});return hx({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:n}}function ga(){const[t,e]=M.useState(_1);return M.useEffect(()=>(w1.push(e),()=>{const n=w1.indexOf(e);n>-1&&w1.splice(n,1)}),[t]),{...t,toast:ioe,dismiss:n=>hx({type:"DISMISS_TOAST",toastId:n})}}var Zv=Hq();const Gq=Ln(Zv);function Je(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return e?.(i)}}function UF(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function yT(...t){return e=>{let n=!1;const r=t.map(i=>{const s=UF(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():UF(t[i],null)}}}}function tn(...t){return M.useCallback(yT(...t),t)}function soe(t,e){const n=M.createContext(e),r=s=>{const{children:a,...o}=s,l=M.useMemo(()=>o,Object.values(o));return p.jsx(n.Provider,{value:l,children:a})};r.displayName=t+"Provider";function i(s){const a=M.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function cs(t,e=[]){let n=[];function r(s,a){const o=M.createContext(a),l=n.length;n=[...n,a];const c=d=>{const{scope:h,children:m,...b}=d,x=h?.[t]?.[l]||o,v=M.useMemo(()=>b,Object.values(b));return p.jsx(x.Provider,{value:v,children:m})};c.displayName=s+"Provider";function u(d,h){const m=h?.[t]?.[l]||o,b=M.useContext(m);if(b)return b;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=n.map(a=>M.createContext(a));return function(o){const l=o?.[t]||s;return M.useMemo(()=>({[`__scope${t}`]:{...o,[t]:l}}),[o,l])}};return i.scopeName=t,[r,aoe(i,...e)]}function aoe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((o,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...o,...d}},{});return M.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function Kd(t){const e=loe(t),n=M.forwardRef((r,i)=>{const{children:s,...a}=r,o=M.Children.toArray(s),l=o.find(coe);if(l){const c=l.props.children,u=o.map(d=>d===l?M.Children.count(c)>1?M.Children.only(null):M.isValidElement(c)?c.props.children:null:d);return p.jsx(e,{...a,ref:i,children:M.isValidElement(c)?M.cloneElement(c,void 0,u):null})}return p.jsx(e,{...a,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var ooe=Kd("Slot");function loe(t){const e=M.forwardRef((n,r)=>{const{children:i,...s}=n;if(M.isValidElement(i)){const a=doe(i),o=uoe(s,i.props);return i.type!==M.Fragment&&(o.ref=r?yT(r,a):a),M.cloneElement(i,o)}return M.Children.count(i)>1?M.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var qq=Symbol("radix.slottable");function Kq(t){const e=({children:n})=>p.jsx(p.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=qq,e}function coe(t){return M.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===qq}function uoe(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...o)=>{const l=s(...o);return i(...o),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function doe(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function cw(t){const e=t+"CollectionProvider",[n,r]=cs(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=x=>{const{scope:v,children:_}=x,E=ne.useRef(null),T=ne.useRef(new Map).current;return p.jsx(i,{scope:v,itemMap:T,collectionRef:E,children:_})};a.displayName=e;const o=t+"CollectionSlot",l=Kd(o),c=ne.forwardRef((x,v)=>{const{scope:_,children:E}=x,T=s(o,_),A=tn(v,T.collectionRef);return p.jsx(l,{ref:A,children:E})});c.displayName=o;const u=t+"CollectionItemSlot",d="data-radix-collection-item",h=Kd(u),m=ne.forwardRef((x,v)=>{const{scope:_,children:E,...T}=x,A=ne.useRef(null),P=tn(v,A),R=s(u,_);return ne.useEffect(()=>(R.itemMap.set(A,{ref:A,...T}),()=>{R.itemMap.delete(A)})),p.jsx(h,{[d]:"",ref:P,children:E})});m.displayName=u;function b(x){const v=s(t+"CollectionConsumer",x);return ne.useCallback(()=>{const E=v.collectionRef.current;if(!E)return[];const T=Array.from(E.querySelectorAll(`[${d}]`));return Array.from(v.itemMap.values()).sort((R,N)=>T.indexOf(R.ref.current)-T.indexOf(N.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:a,Slot:c,ItemSlot:m},b,r]}var foe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Pt=foe.reduce((t,e)=>{const n=Kd(`Primitive.${e}`),r=M.forwardRef((i,s)=>{const{asChild:a,...o}=i,l=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...o,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function uj(t,e){t&&Zv.flushSync(()=>t.dispatchEvent(e))}function Wr(t){const e=M.useRef(t);return M.useEffect(()=>{e.current=t}),M.useMemo(()=>(...n)=>e.current?.(...n),[])}function hoe(t,e=globalThis?.document){const n=Wr(t);M.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var poe="DismissableLayer",GN="dismissableLayer.update",moe="dismissableLayer.pointerDownOutside",goe="dismissableLayer.focusOutside",FF,Xq=M.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ap=M.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:o,...l}=t,c=M.useContext(Xq),[u,d]=M.useState(null),h=u?.ownerDocument??globalThis?.document,[,m]=M.useState({}),b=tn(e,N=>d(N)),x=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),_=x.indexOf(v),E=u?x.indexOf(u):-1,T=c.layersWithOutsidePointerEventsDisabled.size>0,A=E>=_,P=yoe(N=>{const L=N.target,I=[...c.branches].some(j=>j.contains(L));!A||I||(i?.(N),a?.(N),N.defaultPrevented||o?.())},h),R=xoe(N=>{const L=N.target;[...c.branches].some(j=>j.contains(L))||(s?.(N),a?.(N),N.defaultPrevented||o?.())},h);return hoe(N=>{E===c.layers.size-1&&(r?.(N),!N.defaultPrevented&&o&&(N.preventDefault(),o()))},h),M.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(FF=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),BF(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=FF)}},[u,h,n,c]),M.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),BF())},[u,c]),M.useEffect(()=>{const N=()=>m({});return document.addEventListener(GN,N),()=>document.removeEventListener(GN,N)},[]),p.jsx(Pt.div,{...l,ref:b,style:{pointerEvents:T?A?"auto":"none":void 0,...t.style},onFocusCapture:Je(t.onFocusCapture,R.onFocusCapture),onBlurCapture:Je(t.onBlurCapture,R.onBlurCapture),onPointerDownCapture:Je(t.onPointerDownCapture,P.onPointerDownCapture)})});Ap.displayName=poe;var voe="DismissableLayerBranch",Yq=M.forwardRef((t,e)=>{const n=M.useContext(Xq),r=M.useRef(null),i=tn(e,r);return M.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),p.jsx(Pt.div,{...t,ref:i})});Yq.displayName=voe;function yoe(t,e=globalThis?.document){const n=Wr(t),r=M.useRef(!1),i=M.useRef(()=>{});return M.useEffect(()=>{const s=o=>{if(o.target&&!r.current){let l=function(){Jq(moe,n,c,{discrete:!0})};const c={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function xoe(t,e=globalThis?.document){const n=Wr(t),r=M.useRef(!1);return M.useEffect(()=>{const i=s=>{s.target&&!r.current&&Jq(goe,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function BF(){const t=new CustomEvent(GN);document.dispatchEvent(t)}function Jq(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?uj(i,s):i.dispatchEvent(s)}var boe=Ap,woe=Yq,Gr=globalThis?.document?M.useLayoutEffect:()=>{},_oe="Portal",ey=M.forwardRef((t,e)=>{const{container:n,...r}=t,[i,s]=M.useState(!1);Gr(()=>s(!0),[]);const a=n||i&&globalThis?.document?.body;return a?Gq.createPortal(p.jsx(Pt.div,{...r,ref:e}),a):null});ey.displayName=_oe;function Soe(t,e){return M.useReducer((n,r)=>e[n][r]??n,t)}var Wi=t=>{const{present:e,children:n}=t,r=Eoe(e),i=typeof n=="function"?n({present:r.isPresent}):M.Children.only(n),s=tn(r.ref,Toe(i));return typeof n=="function"||r.isPresent?M.cloneElement(i,{ref:s}):null};Wi.displayName="Presence";function Eoe(t){const[e,n]=M.useState(),r=M.useRef(null),i=M.useRef(t),s=M.useRef("none"),a=t?"mounted":"unmounted",[o,l]=Soe(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return M.useEffect(()=>{const c=W_(r.current);s.current=o==="mounted"?c:"none"},[o]),Gr(()=>{const c=r.current,u=i.current;if(u!==t){const h=s.current,m=W_(c);t?l("MOUNT"):m==="none"||c?.display==="none"?l("UNMOUNT"):l(u&&h!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Gr(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=m=>{const x=W_(r.current).includes(m.animationName);if(m.target===e&&x&&(l("ANIMATION_END"),!i.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},h=m=>{m.target===e&&(s.current=W_(r.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:M.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function W_(t){return t?.animationName||"none"}function Toe(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Aoe=cj[" useInsertionEffect ".trim().toString()]||Gr;function bl({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,a]=Moe({defaultProp:e,onChange:n}),o=t!==void 0,l=o?t:i;{const u=M.useRef(t!==void 0);M.useEffect(()=>{const d=u.current;d!==o&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=o},[o,r])}const c=M.useCallback(u=>{if(o){const d=Poe(u)?u(t):u;d!==t&&a.current?.(d)}else s(u)},[o,t,s,a]);return[l,c]}function Moe({defaultProp:t,onChange:e}){const[n,r]=M.useState(t),i=M.useRef(n),s=M.useRef(e);return Aoe(()=>{s.current=e},[e]),M.useEffect(()=>{i.current!==n&&(s.current?.(n),i.current=n)},[n,i]),[n,r,s]}function Poe(t){return typeof t=="function"}var Qq=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Coe="VisuallyHidden",xT=M.forwardRef((t,e)=>p.jsx(Pt.span,{...t,ref:e,style:{...Qq,...t.style}}));xT.displayName=Coe;var Roe=xT,dj="ToastProvider",[fj,Ooe,Noe]=cw("Toast"),[Zq]=cs("Toast",[Noe]),[Ioe,bT]=Zq(dj),e9=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:a}=t,[o,l]=M.useState(null),[c,u]=M.useState(0),d=M.useRef(!1),h=M.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${dj}\`. Expected non-empty \`string\`.`),p.jsx(fj.Provider,{scope:e,children:p.jsx(Ioe,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:c,viewport:o,onViewportChange:l,onToastAdd:M.useCallback(()=>u(m=>m+1),[]),onToastRemove:M.useCallback(()=>u(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:a})})};e9.displayName=dj;var t9="ToastViewport",koe=["F8"],qN="toast.viewportPause",KN="toast.viewportResume",n9=M.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=koe,label:i="Notifications ({hotkey})",...s}=t,a=bT(t9,n),o=Ooe(n),l=M.useRef(null),c=M.useRef(null),u=M.useRef(null),d=M.useRef(null),h=tn(e,d,a.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=a.toastCount>0;M.useEffect(()=>{const v=_=>{r.length!==0&&r.every(T=>_[T]||_.code===T)&&d.current?.focus()};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),M.useEffect(()=>{const v=l.current,_=d.current;if(b&&v&&_){const E=()=>{if(!a.isClosePausedRef.current){const R=new CustomEvent(qN);_.dispatchEvent(R),a.isClosePausedRef.current=!0}},T=()=>{if(a.isClosePausedRef.current){const R=new CustomEvent(KN);_.dispatchEvent(R),a.isClosePausedRef.current=!1}},A=R=>{!v.contains(R.relatedTarget)&&T()},P=()=>{v.contains(document.activeElement)||T()};return v.addEventListener("focusin",E),v.addEventListener("focusout",A),v.addEventListener("pointermove",E),v.addEventListener("pointerleave",P),window.addEventListener("blur",E),window.addEventListener("focus",T),()=>{v.removeEventListener("focusin",E),v.removeEventListener("focusout",A),v.removeEventListener("pointermove",E),v.removeEventListener("pointerleave",P),window.removeEventListener("blur",E),window.removeEventListener("focus",T)}}},[b,a.isClosePausedRef]);const x=M.useCallback(({tabbingDirection:v})=>{const E=o().map(T=>{const A=T.ref.current,P=[A,...qoe(A)];return v==="forwards"?P:P.reverse()});return(v==="forwards"?E.reverse():E).flat()},[o]);return M.useEffect(()=>{const v=d.current;if(v){const _=E=>{const T=E.altKey||E.ctrlKey||E.metaKey;if(E.key==="Tab"&&!T){const P=document.activeElement,R=E.shiftKey;if(E.target===v&&R){c.current?.focus();return}const I=x({tabbingDirection:R?"backwards":"forwards"}),j=I.findIndex(B=>B===P);JM(I.slice(j+1))?E.preventDefault():R?c.current?.focus():u.current?.focus()}};return v.addEventListener("keydown",_),()=>v.removeEventListener("keydown",_)}},[o,x]),p.jsxs(woe,{ref:l,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&p.jsx(XN,{ref:c,onFocusFromOutsideViewport:()=>{const v=x({tabbingDirection:"forwards"});JM(v)}}),p.jsx(fj.Slot,{scope:n,children:p.jsx(Pt.ol,{tabIndex:-1,...s,ref:h})}),b&&p.jsx(XN,{ref:u,onFocusFromOutsideViewport:()=>{const v=x({tabbingDirection:"backwards"});JM(v)}})]})});n9.displayName=t9;var r9="ToastFocusProxy",XN=M.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,s=bT(r9,n);return p.jsx(xT,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:a=>{const o=a.relatedTarget;!s.viewport?.contains(o)&&r()}})});XN.displayName=r9;var uw="Toast",Doe="toast.swipeStart",joe="toast.swipeMove",Loe="toast.swipeCancel",Uoe="toast.swipeEnd",i9=M.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...a}=t,[o,l]=bl({prop:r,defaultProp:i??!0,onChange:s,caller:uw});return p.jsx(Wi,{present:n||o,children:p.jsx(zoe,{open:o,...a,ref:e,onClose:()=>l(!1),onPause:Wr(t.onPause),onResume:Wr(t.onResume),onSwipeStart:Je(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Je(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:Je(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Je(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});i9.displayName=uw;var[Foe,Boe]=Zq(uw,{onClose(){}}),zoe=M.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:s,onClose:a,onEscapeKeyDown:o,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:m,...b}=t,x=bT(uw,n),[v,_]=M.useState(null),E=tn(e,G=>_(G)),T=M.useRef(null),A=M.useRef(null),P=i||x.duration,R=M.useRef(0),N=M.useRef(P),L=M.useRef(0),{onToastAdd:I,onToastRemove:j}=x,B=Wr(()=>{v?.contains(document.activeElement)&&x.viewport?.focus(),a()}),H=M.useCallback(G=>{!G||G===1/0||(window.clearTimeout(L.current),R.current=new Date().getTime(),L.current=window.setTimeout(B,G))},[B]);M.useEffect(()=>{const G=x.viewport;if(G){const W=()=>{H(N.current),c?.()},K=()=>{const te=new Date().getTime()-R.current;N.current=N.current-te,window.clearTimeout(L.current),l?.()};return G.addEventListener(qN,K),G.addEventListener(KN,W),()=>{G.removeEventListener(qN,K),G.removeEventListener(KN,W)}}},[x.viewport,P,l,c,H]),M.useEffect(()=>{s&&!x.isClosePausedRef.current&&H(P)},[s,P,x.isClosePausedRef,H]),M.useEffect(()=>(I(),()=>j()),[I,j]);const J=M.useMemo(()=>v?d9(v):null,[v]);return x.viewport?p.jsxs(p.Fragment,{children:[J&&p.jsx($oe,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:J}),p.jsx(Foe,{scope:n,onClose:B,children:Zv.createPortal(p.jsx(fj.ItemSlot,{scope:n,children:p.jsx(boe,{asChild:!0,onEscapeKeyDown:Je(o,()=>{x.isFocusedToastEscapeKeyDownRef.current||B(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:p.jsx(Pt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":x.swipeDirection,...b,ref:E,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Je(t.onKeyDown,G=>{G.key==="Escape"&&(o?.(G.nativeEvent),G.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,B()))}),onPointerDown:Je(t.onPointerDown,G=>{G.button===0&&(T.current={x:G.clientX,y:G.clientY})}),onPointerMove:Je(t.onPointerMove,G=>{if(!T.current)return;const W=G.clientX-T.current.x,K=G.clientY-T.current.y,te=!!A.current,z=["left","right"].includes(x.swipeDirection),V=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,X=z?V(0,W):0,q=z?0:V(0,K),Q=G.pointerType==="touch"?10:2,ie={x:X,y:q},ce={originalEvent:G,delta:ie};te?(A.current=ie,G_(joe,d,ce,{discrete:!1})):zF(ie,x.swipeDirection,Q)?(A.current=ie,G_(Doe,u,ce,{discrete:!1}),G.target.setPointerCapture(G.pointerId)):(Math.abs(W)>Q||Math.abs(K)>Q)&&(T.current=null)}),onPointerUp:Je(t.onPointerUp,G=>{const W=A.current,K=G.target;if(K.hasPointerCapture(G.pointerId)&&K.releasePointerCapture(G.pointerId),A.current=null,T.current=null,W){const te=G.currentTarget,z={originalEvent:G,delta:W};zF(W,x.swipeDirection,x.swipeThreshold)?G_(Uoe,m,z,{discrete:!0}):G_(Loe,h,z,{discrete:!0}),te.addEventListener("click",V=>V.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),$oe=t=>{const{__scopeToast:e,children:n,...r}=t,i=bT(uw,e),[s,a]=M.useState(!1),[o,l]=M.useState(!1);return Woe(()=>a(!0)),M.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),o?null:p.jsx(ey,{asChild:!0,children:p.jsx(xT,{...r,children:s&&p.jsxs(p.Fragment,{children:[i.label," ",n]})})})},Voe="ToastTitle",s9=M.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return p.jsx(Pt.div,{...r,ref:e})});s9.displayName=Voe;var Hoe="ToastDescription",a9=M.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return p.jsx(Pt.div,{...r,ref:e})});a9.displayName=Hoe;var o9="ToastAction",l9=M.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?p.jsx(u9,{altText:n,asChild:!0,children:p.jsx(hj,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${o9}\`. Expected non-empty \`string\`.`),null)});l9.displayName=o9;var c9="ToastClose",hj=M.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=Boe(c9,n);return p.jsx(u9,{asChild:!0,children:p.jsx(Pt.button,{type:"button",...r,ref:e,onClick:Je(t.onClick,i.onClose)})})});hj.displayName=c9;var u9=M.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return p.jsx(Pt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function d9(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),Goe(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...d9(r))}}),e}function G_(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?uj(i,s):i.dispatchEvent(s)}var zF=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),s=r>i;return e==="left"||e==="right"?s&&r>n:!s&&i>n};function Woe(t=()=>{}){const e=Wr(t);Gr(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function Goe(t){return t.nodeType===t.ELEMENT_NODE}function qoe(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function JM(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var Koe=e9,f9=n9,h9=i9,p9=s9,m9=a9,g9=l9,v9=hj;function y9(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=y9(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function nn(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=y9(t))&&(r&&(r+=" "),r+=e);return r}const $F=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,VF=nn,wT=(t,e)=>n=>{var r;if(e?.variants==null)return VF(t,n?.class,n?.className);const{variants:i,defaultVariants:s}=e,a=Object.keys(i).map(c=>{const u=n?.[c],d=s?.[c];if(u===null)return null;const h=$F(u)||$F(d);return i[c][h]}),o=n&&Object.entries(n).reduce((c,u)=>{let[d,h]=u;return h===void 0||(c[d]=h),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:h,...m}=u;return Object.entries(m).every(b=>{let[x,v]=b;return Array.isArray(v)?v.includes({...s,...o}[x]):{...s,...o}[x]===v})?[...c,d,h]:c},[]);return VF(t,a,l,n?.class,n?.className)};const Xoe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),x9=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();var Yoe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Joe=M.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...o},l)=>M.createElement("svg",{ref:l,...Yoe,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:x9("lucide",i),...o},[...a.map(([c,u])=>M.createElement(c,u)),...Array.isArray(s)?s:[s]]));const wt=(t,e)=>{const n=M.forwardRef(({className:r,...i},s)=>M.createElement(Joe,{ref:s,iconNode:e,className:x9(`lucide-${Xoe(t)}`,r),...i}));return n.displayName=`${t}`,n};const q_=wt("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);const b9=wt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const yu=wt("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);const HF=wt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const Oi=wt("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);const QM=wt("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);const Qoe=wt("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);const Kl=wt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const px=wt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const ov=wt("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const Zoe=wt("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);const ty=wt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const _T=wt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const ele=wt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const tle=wt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const nle=wt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const w9=wt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const WF=wt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const rle=wt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const F1=wt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const ile=wt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const _9=wt("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);const sle=wt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const Xd=wt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const ale=wt("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);const Dx=wt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);const S9=wt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const ole=wt("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);const yo=wt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const lle=wt("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);const E9=wt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const xu=wt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const GF=wt("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);const cle=wt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const ule=wt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);const dle=wt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);const pj=wt("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);const bu=wt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const mj=wt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const T9=wt("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);const A9=wt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const M9=wt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const YN=wt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const P9=wt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const C9=wt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const fle=wt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);const hle=wt("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);const gj=wt("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);const vj=wt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const ZM=wt("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);const mx=wt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const yj=wt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const ap=wt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const ple=wt("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const xj=wt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const $d=wt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const mle=wt("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);const op=wt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const gle=wt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const Ps=wt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const vle=wt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const qF=wt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const yle=wt("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);const KF=wt("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const dw=wt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const bj=wt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const pi=wt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const XF=wt("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);const xo=wt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const xle=wt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),wj="-",ble=t=>{const e=_le(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const o=a.split(wj);return o[0]===""&&o.length!==1&&o.shift(),R9(o,e)||wle(a)},getConflictingClassGroupIds:(a,o)=>{const l=n[a]||[];return o&&r[a]?[...l,...r[a]]:l}}},R9=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?R9(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(wj);return e.validators.find(({validator:a})=>a(s))?.classGroupId},YF=/^\[(.+)\]$/,wle=t=>{if(YF.test(t)){const e=YF.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},_le=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return Ele(Object.entries(t.classGroups),n).forEach(([s,a])=>{JN(a,r,s,e)}),r},JN=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:JF(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(Sle(i)){JN(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,a])=>{JN(a,JF(e,s),n,r)})})},JF=(t,e)=>{let n=t;return e.split(wj).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},Sle=t=>t.isThemeGetter,Ele=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([a,o])=>[e+a,o])):s);return[n,i]}):t,Tle=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,a)=>{n.set(s,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let a=n.get(s);if(a!==void 0)return a;if((a=r.get(s))!==void 0)return i(s,a),a},set(s,a){n.has(s)?n.set(s,a):i(s,a)}}},O9="!",Ale=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,a=o=>{const l=[];let c=0,u=0,d;for(let v=0;v<o.length;v++){let _=o[v];if(c===0){if(_===i&&(r||o.slice(v,v+s)===e)){l.push(o.slice(u,v)),u=v+s;continue}if(_==="/"){d=v;continue}}_==="["?c++:_==="]"&&c--}const h=l.length===0?o:o.substring(u),m=h.startsWith(O9),b=m?h.substring(1):h,x=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:b,maybePostfixModifierPosition:x}};return n?o=>n({className:o,parseClassName:a}):a},Mle=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},Ple=t=>({cache:Tle(t.cacheSize),parseClassName:Ale(t),...ble(t)}),Cle=/\s+/,Rle=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],a=t.trim().split(Cle);let o="";for(let l=a.length-1;l>=0;l-=1){const c=a[l],{modifiers:u,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:m}=n(c);let b=!!m,x=r(b?h.substring(0,m):h);if(!x){if(!b){o=c+(o.length>0?" "+o:o);continue}if(x=r(h),!x){o=c+(o.length>0?" "+o:o);continue}b=!1}const v=Mle(u).join(":"),_=d?v+O9:v,E=_+x;if(s.includes(E))continue;s.push(E);const T=i(x,b);for(let A=0;A<T.length;++A){const P=T[A];s.push(_+P)}o=c+(o.length>0?" "+o:o)}return o};function Ole(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=N9(e))&&(r&&(r+=" "),r+=n);return r}const N9=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=N9(t[r]))&&(n&&(n+=" "),n+=e);return n};function Nle(t,...e){let n,r,i,s=a;function a(l){const c=e.reduce((u,d)=>d(u),t());return n=Ple(c),r=n.cache.get,i=n.cache.set,s=o,o(l)}function o(l){const c=r(l);if(c)return c;const u=Rle(l,n);return i(l,u),u}return function(){return s(Ole.apply(null,arguments))}}const vr=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},I9=/^\[(?:([a-z-]+):)?(.+)\]$/i,Ile=/^\d+\/\d+$/,kle=new Set(["px","full","screen"]),Dle=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,jle=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Lle=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Ule=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Fle=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Gc=t=>Kg(t)||kle.has(t)||Ile.test(t),yd=t=>ny(t,"length",qle),Kg=t=>!!t&&!Number.isNaN(Number(t)),eP=t=>ny(t,"number",Kg),A0=t=>!!t&&Number.isInteger(Number(t)),Ble=t=>t.endsWith("%")&&Kg(t.slice(0,-1)),bn=t=>I9.test(t),xd=t=>Dle.test(t),zle=new Set(["length","size","percentage"]),$le=t=>ny(t,zle,k9),Vle=t=>ny(t,"position",k9),Hle=new Set(["image","url"]),Wle=t=>ny(t,Hle,Xle),Gle=t=>ny(t,"",Kle),M0=()=>!0,ny=(t,e,n)=>{const r=I9.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},qle=t=>jle.test(t)&&!Lle.test(t),k9=()=>!1,Kle=t=>Ule.test(t),Xle=t=>Fle.test(t),Yle=()=>{const t=vr("colors"),e=vr("spacing"),n=vr("blur"),r=vr("brightness"),i=vr("borderColor"),s=vr("borderRadius"),a=vr("borderSpacing"),o=vr("borderWidth"),l=vr("contrast"),c=vr("grayscale"),u=vr("hueRotate"),d=vr("invert"),h=vr("gap"),m=vr("gradientColorStops"),b=vr("gradientColorStopPositions"),x=vr("inset"),v=vr("margin"),_=vr("opacity"),E=vr("padding"),T=vr("saturate"),A=vr("scale"),P=vr("sepia"),R=vr("skew"),N=vr("space"),L=vr("translate"),I=()=>["auto","contain","none"],j=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto",bn,e],H=()=>[bn,e],J=()=>["",Gc,yd],G=()=>["auto",Kg,bn],W=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],K=()=>["solid","dashed","dotted","double","none"],te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],z=()=>["start","end","center","between","around","evenly","stretch"],V=()=>["","0",bn],X=()=>["auto","avoid","all","avoid-page","page","left","right","column"],q=()=>[Kg,bn];return{cacheSize:500,separator:":",theme:{colors:[M0],spacing:[Gc,yd],blur:["none","",xd,bn],brightness:q(),borderColor:[t],borderRadius:["none","","full",xd,bn],borderSpacing:H(),borderWidth:J(),contrast:q(),grayscale:V(),hueRotate:q(),invert:V(),gap:H(),gradientColorStops:[t],gradientColorStopPositions:[Ble,yd],inset:B(),margin:B(),opacity:q(),padding:H(),saturate:q(),scale:q(),sepia:V(),skew:q(),space:H(),translate:H()},classGroups:{aspect:[{aspect:["auto","square","video",bn]}],container:["container"],columns:[{columns:[xd]}],"break-after":[{"break-after":X()}],"break-before":[{"break-before":X()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...W(),bn]}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",A0,bn]}],basis:[{basis:B()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",bn]}],grow:[{grow:V()}],shrink:[{shrink:V()}],order:[{order:["first","last","none",A0,bn]}],"grid-cols":[{"grid-cols":[M0]}],"col-start-end":[{col:["auto",{span:["full",A0,bn]},bn]}],"col-start":[{"col-start":G()}],"col-end":[{"col-end":G()}],"grid-rows":[{"grid-rows":[M0]}],"row-start-end":[{row:["auto",{span:[A0,bn]},bn]}],"row-start":[{"row-start":G()}],"row-end":[{"row-end":G()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",bn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",bn]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[E]}],px:[{px:[E]}],py:[{py:[E]}],ps:[{ps:[E]}],pe:[{pe:[E]}],pt:[{pt:[E]}],pr:[{pr:[E]}],pb:[{pb:[E]}],pl:[{pl:[E]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",bn,e]}],"min-w":[{"min-w":[bn,e,"min","max","fit"]}],"max-w":[{"max-w":[bn,e,"none","full","min","max","fit","prose",{screen:[xd]},xd]}],h:[{h:[bn,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[bn,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[bn,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[bn,e,"auto","min","max","fit"]}],"font-size":[{text:["base",xd,yd]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",eP]}],"font-family":[{font:[M0]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",bn]}],"line-clamp":[{"line-clamp":["none",Kg,eP]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Gc,bn]}],"list-image":[{"list-image":["none",bn]}],"list-style-type":[{list:["none","disc","decimal",bn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Gc,yd]}],"underline-offset":[{"underline-offset":["auto",Gc,bn]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:H()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",bn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",bn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...W(),Vle]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",$le]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Wle]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...K(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:K()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...K()]}],"outline-offset":[{"outline-offset":[Gc,bn]}],"outline-w":[{outline:[Gc,yd]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:J()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[Gc,yd]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",xd,Gle]}],"shadow-color":[{shadow:[M0]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...te(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":te()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",xd,bn]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[T]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",bn]}],duration:[{duration:q()}],ease:[{ease:["linear","in","out","in-out",bn]}],delay:[{delay:q()}],animate:[{animate:["none","spin","ping","pulse","bounce",bn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[A]}],"scale-x":[{"scale-x":[A]}],"scale-y":[{"scale-y":[A]}],rotate:[{rotate:[A0,bn]}],"translate-x":[{"translate-x":[L]}],"translate-y":[{"translate-y":[L]}],"skew-x":[{"skew-x":[R]}],"skew-y":[{"skew-y":[R]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",bn]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",bn]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":H()}],"scroll-mx":[{"scroll-mx":H()}],"scroll-my":[{"scroll-my":H()}],"scroll-ms":[{"scroll-ms":H()}],"scroll-me":[{"scroll-me":H()}],"scroll-mt":[{"scroll-mt":H()}],"scroll-mr":[{"scroll-mr":H()}],"scroll-mb":[{"scroll-mb":H()}],"scroll-ml":[{"scroll-ml":H()}],"scroll-p":[{"scroll-p":H()}],"scroll-px":[{"scroll-px":H()}],"scroll-py":[{"scroll-py":H()}],"scroll-ps":[{"scroll-ps":H()}],"scroll-pe":[{"scroll-pe":H()}],"scroll-pt":[{"scroll-pt":H()}],"scroll-pr":[{"scroll-pr":H()}],"scroll-pb":[{"scroll-pb":H()}],"scroll-pl":[{"scroll-pl":H()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",bn]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Gc,yd,eP]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Jle=Nle(Yle);function kt(...t){return Jle(nn(t))}const Qle=Koe,D9=M.forwardRef(({className:t,...e},n)=>p.jsx(f9,{ref:n,className:kt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));D9.displayName=f9.displayName;const Zle=wT("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),j9=M.forwardRef(({className:t,variant:e,...n},r)=>p.jsx(h9,{ref:r,className:kt(Zle({variant:e}),t),...n}));j9.displayName=h9.displayName;const ece=M.forwardRef(({className:t,...e},n)=>p.jsx(g9,{ref:n,className:kt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...e}));ece.displayName=g9.displayName;const L9=M.forwardRef(({className:t,...e},n)=>p.jsx(v9,{ref:n,className:kt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:p.jsx(xo,{className:"h-4 w-4"})}));L9.displayName=v9.displayName;const U9=M.forwardRef(({className:t,...e},n)=>p.jsx(p9,{ref:n,className:kt("text-sm font-semibold",t),...e}));U9.displayName=p9.displayName;const F9=M.forwardRef(({className:t,...e},n)=>p.jsx(m9,{ref:n,className:kt("text-sm opacity-90",t),...e}));F9.displayName=m9.displayName;function tce(){const{toasts:t}=ga();return p.jsxs(Qle,{children:[t.map(function({id:e,title:n,description:r,action:i,...s}){return p.jsxs(j9,{...s,children:[p.jsxs("div",{className:"grid gap-1",children:[n&&p.jsx(U9,{children:n}),r&&p.jsx(F9,{children:r})]}),i,p.jsx(L9,{})]},e)}),p.jsx(D9,{})]})}var QF=["light","dark"],nce="(prefers-color-scheme: dark)",rce=M.createContext(void 0),ice={setTheme:t=>{},themes:[]},sce=()=>{var t;return(t=M.useContext(rce))!=null?t:ice};M.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:s,value:a,attrs:o,nonce:l})=>{let c=s==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${o.map(b=>`'${b}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,d=i?QF.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(b,x=!1,v=!0)=>{let _=a?a[b]:b,E=x?b+"|| ''":`'${_}'`,T="";return i&&v&&!x&&QF.includes(b)&&(T+=`d.style.colorScheme = '${b}';`),n==="class"?x||_?T+=`c.add(${E})`:T+="null":_&&(T+=`d[s](n,${E})`),T},m=t?`!function(){${u}${h(t)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${nce}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${h(a?"x[e]":"e",!0)}}${c?"":"else{"+h(s,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${h(a?"x[e]":"e",!0)}}else{${h(s,!1,!1)};}${d}}catch(t){}}();`;return M.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:m}})});var ace=t=>{switch(t){case"success":return cce;case"info":return dce;case"warning":return uce;case"error":return fce;default:return null}},oce=Array(12).fill(0),lce=({visible:t,className:e})=>ne.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},ne.createElement("div",{className:"sonner-spinner"},oce.map((n,r)=>ne.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),cce=ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ne.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),uce=ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ne.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),dce=ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ne.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),fce=ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ne.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),hce=ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ne.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ne.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),pce=()=>{let[t,e]=ne.useState(document.hidden);return ne.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},QN=1,mce=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,i=typeof t?.id=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:QN++,s=this.toasts.find(o=>o.id===i),a=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),s?this.toasts=this.toasts.map(o=>o.id===i?(this.publish({...o,...t,id:i,title:n}),{...o,...t,id:i,dismissible:a,title:n}):o):this.addToast({title:n,...r,dismissible:a,id:i}),i},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),i=n!==void 0,s,a=r.then(async l=>{if(s=["resolve",l],ne.isValidElement(l))i=!1,this.create({id:n,type:"default",message:l});else if(vce(l)&&!l.ok){i=!1;let c=typeof e.error=="function"?await e.error(`HTTP error! status: ${l.status}`):e.error,u=typeof e.description=="function"?await e.description(`HTTP error! status: ${l.status}`):e.description;this.create({id:n,type:"error",message:c,description:u})}else if(e.success!==void 0){i=!1;let c=typeof e.success=="function"?await e.success(l):e.success,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"success",message:c,description:u})}}).catch(async l=>{if(s=["reject",l],e.error!==void 0){i=!1;let c=typeof e.error=="function"?await e.error(l):e.error,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"error",message:c,description:u})}}).finally(()=>{var l;i&&(this.dismiss(n),n=void 0),(l=e.finally)==null||l.call(e)}),o=()=>new Promise((l,c)=>a.then(()=>s[0]==="reject"?c(s[1]):l(s[1])).catch(c));return typeof n!="string"&&typeof n!="number"?{unwrap:o}:Object.assign(n,{unwrap:o})},this.custom=(t,e)=>{let n=e?.id||QN++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},fa=new mce,gce=(t,e)=>{let n=e?.id||QN++;return fa.addToast({title:t,...e,id:n}),n},vce=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",yce=gce,xce=()=>fa.toasts,bce=()=>fa.getActiveToasts();Object.assign(yce,{success:fa.success,info:fa.info,warning:fa.warning,error:fa.error,custom:fa.custom,message:fa.message,promise:fa.promise,dismiss:fa.dismiss,loading:fa.loading},{getHistory:xce,getToasts:bce});function wce(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}wce(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function K_(t){return t.label!==void 0}var _ce=3,Sce="32px",Ece="16px",ZF=4e3,Tce=356,Ace=14,Mce=20,Pce=200;function Qo(...t){return t.filter(Boolean).join(" ")}function Cce(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var Rce=t=>{var e,n,r,i,s,a,o,l,c,u,d;let{invert:h,toast:m,unstyled:b,interacting:x,setHeights:v,visibleToasts:_,heights:E,index:T,toasts:A,expanded:P,removeToast:R,defaultRichColors:N,closeButton:L,style:I,cancelButtonStyle:j,actionButtonStyle:B,className:H="",descriptionClassName:J="",duration:G,position:W,gap:K,loadingIcon:te,expandByDefault:z,classNames:V,icons:X,closeButtonAriaLabel:q="Close toast",pauseWhenPageIsHidden:Q}=t,[ie,ce]=ne.useState(null),[ye,Ce]=ne.useState(null),[he,De]=ne.useState(!1),[be,_e]=ne.useState(!1),[Ee,ee]=ne.useState(!1),[Me,xe]=ne.useState(!1),[Le,Pe]=ne.useState(!1),[tt,Ze]=ne.useState(0),[re,Z]=ne.useState(0),ge=ne.useRef(m.duration||G||ZF),$e=ne.useRef(null),Be=ne.useRef(null),Fe=T===0,mt=T+1<=_,Xe=m.type,it=m.dismissible!==!1,Nt=m.className||"",Xt=m.descriptionClassName||"",He=ne.useMemo(()=>E.findIndex(We=>We.toastId===m.id)||0,[E,m.id]),hn=ne.useMemo(()=>{var We;return(We=m.closeButton)!=null?We:L},[m.closeButton,L]),un=ne.useMemo(()=>m.duration||G||ZF,[m.duration,G]),$t=ne.useRef(0),Tt=ne.useRef(0),gt=ne.useRef(0),ue=ne.useRef(null),[Ve,ft]=W.split("-"),dt=ne.useMemo(()=>E.reduce((We,xt,Ot)=>Ot>=He?We:We+xt.height,0),[E,He]),Ge=pce(),de=m.invert||h,Qe=Xe==="loading";Tt.current=ne.useMemo(()=>He*K+dt,[He,dt]),ne.useEffect(()=>{ge.current=un},[un]),ne.useEffect(()=>{De(!0)},[]),ne.useEffect(()=>{let We=Be.current;if(We){let xt=We.getBoundingClientRect().height;return Z(xt),v(Ot=>[{toastId:m.id,height:xt,position:m.position},...Ot]),()=>v(Ot=>Ot.filter(mn=>mn.toastId!==m.id))}},[v,m.id]),ne.useLayoutEffect(()=>{if(!he)return;let We=Be.current,xt=We.style.height;We.style.height="auto";let Ot=We.getBoundingClientRect().height;We.style.height=xt,Z(Ot),v(mn=>mn.find(An=>An.toastId===m.id)?mn.map(An=>An.toastId===m.id?{...An,height:Ot}:An):[{toastId:m.id,height:Ot,position:m.position},...mn])},[he,m.title,m.description,v,m.id]);let st=ne.useCallback(()=>{_e(!0),Ze(Tt.current),v(We=>We.filter(xt=>xt.toastId!==m.id)),setTimeout(()=>{R(m)},Pce)},[m,R,v,Tt]);ne.useEffect(()=>{if(m.promise&&Xe==="loading"||m.duration===1/0||m.type==="loading")return;let We;return P||x||Q&&Ge?(()=>{if(gt.current<$t.current){let xt=new Date().getTime()-$t.current;ge.current=ge.current-xt}gt.current=new Date().getTime()})():ge.current!==1/0&&($t.current=new Date().getTime(),We=setTimeout(()=>{var xt;(xt=m.onAutoClose)==null||xt.call(m,m),st()},ge.current)),()=>clearTimeout(We)},[P,x,m,Xe,Q,Ge,st]),ne.useEffect(()=>{m.delete&&st()},[st,m.delete]);function zt(){var We,xt,Ot;return X!=null&&X.loading?ne.createElement("div",{className:Qo(V?.loader,(We=m?.classNames)==null?void 0:We.loader,"sonner-loader"),"data-visible":Xe==="loading"},X.loading):te?ne.createElement("div",{className:Qo(V?.loader,(xt=m?.classNames)==null?void 0:xt.loader,"sonner-loader"),"data-visible":Xe==="loading"},te):ne.createElement(lce,{className:Qo(V?.loader,(Ot=m?.classNames)==null?void 0:Ot.loader),visible:Xe==="loading"})}return ne.createElement("li",{tabIndex:0,ref:Be,className:Qo(H,Nt,V?.toast,(e=m?.classNames)==null?void 0:e.toast,V?.default,V?.[Xe],(n=m?.classNames)==null?void 0:n[Xe]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:N,"data-styled":!(m.jsx||m.unstyled||b),"data-mounted":he,"data-promise":!!m.promise,"data-swiped":Le,"data-removed":be,"data-visible":mt,"data-y-position":Ve,"data-x-position":ft,"data-index":T,"data-front":Fe,"data-swiping":Ee,"data-dismissible":it,"data-type":Xe,"data-invert":de,"data-swipe-out":Me,"data-swipe-direction":ye,"data-expanded":!!(P||z&&he),style:{"--index":T,"--toasts-before":T,"--z-index":A.length-T,"--offset":`${be?tt:Tt.current}px`,"--initial-height":z?"auto":`${re}px`,...I,...m.style},onDragEnd:()=>{ee(!1),ce(null),ue.current=null},onPointerDown:We=>{Qe||!it||($e.current=new Date,Ze(Tt.current),We.target.setPointerCapture(We.pointerId),We.target.tagName!=="BUTTON"&&(ee(!0),ue.current={x:We.clientX,y:We.clientY}))},onPointerUp:()=>{var We,xt,Ot,mn;if(Me||!it)return;ue.current=null;let An=Number(((We=Be.current)==null?void 0:We.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),rn=Number(((xt=Be.current)==null?void 0:xt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Hn=new Date().getTime()-((Ot=$e.current)==null?void 0:Ot.getTime()),Fn=ie==="x"?An:rn,us=Math.abs(Fn)/Hn;if(Math.abs(Fn)>=Mce||us>.11){Ze(Tt.current),(mn=m.onDismiss)==null||mn.call(m,m),Ce(ie==="x"?An>0?"right":"left":rn>0?"down":"up"),st(),xe(!0),Pe(!1);return}ee(!1),ce(null)},onPointerMove:We=>{var xt,Ot,mn,An;if(!ue.current||!it||((xt=window.getSelection())==null?void 0:xt.toString().length)>0)return;let rn=We.clientY-ue.current.y,Hn=We.clientX-ue.current.x,Fn=(Ot=t.swipeDirections)!=null?Ot:Cce(W);!ie&&(Math.abs(Hn)>1||Math.abs(rn)>1)&&ce(Math.abs(Hn)>Math.abs(rn)?"x":"y");let us={x:0,y:0};ie==="y"?(Fn.includes("top")||Fn.includes("bottom"))&&(Fn.includes("top")&&rn<0||Fn.includes("bottom")&&rn>0)&&(us.y=rn):ie==="x"&&(Fn.includes("left")||Fn.includes("right"))&&(Fn.includes("left")&&Hn<0||Fn.includes("right")&&Hn>0)&&(us.x=Hn),(Math.abs(us.x)>0||Math.abs(us.y)>0)&&Pe(!0),(mn=Be.current)==null||mn.style.setProperty("--swipe-amount-x",`${us.x}px`),(An=Be.current)==null||An.style.setProperty("--swipe-amount-y",`${us.y}px`)}},hn&&!m.jsx?ne.createElement("button",{"aria-label":q,"data-disabled":Qe,"data-close-button":!0,onClick:Qe||!it?()=>{}:()=>{var We;st(),(We=m.onDismiss)==null||We.call(m,m)},className:Qo(V?.closeButton,(i=m?.classNames)==null?void 0:i.closeButton)},(s=X?.close)!=null?s:hce):null,m.jsx||M.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:ne.createElement(ne.Fragment,null,Xe||m.icon||m.promise?ne.createElement("div",{"data-icon":"",className:Qo(V?.icon,(a=m?.classNames)==null?void 0:a.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||zt():null,m.type!=="loading"?m.icon||X?.[Xe]||ace(Xe):null):null,ne.createElement("div",{"data-content":"",className:Qo(V?.content,(o=m?.classNames)==null?void 0:o.content)},ne.createElement("div",{"data-title":"",className:Qo(V?.title,(l=m?.classNames)==null?void 0:l.title)},typeof m.title=="function"?m.title():m.title),m.description?ne.createElement("div",{"data-description":"",className:Qo(J,Xt,V?.description,(c=m?.classNames)==null?void 0:c.description)},typeof m.description=="function"?m.description():m.description):null),M.isValidElement(m.cancel)?m.cancel:m.cancel&&K_(m.cancel)?ne.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||j,onClick:We=>{var xt,Ot;K_(m.cancel)&&it&&((Ot=(xt=m.cancel).onClick)==null||Ot.call(xt,We),st())},className:Qo(V?.cancelButton,(u=m?.classNames)==null?void 0:u.cancelButton)},m.cancel.label):null,M.isValidElement(m.action)?m.action:m.action&&K_(m.action)?ne.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||B,onClick:We=>{var xt,Ot;K_(m.action)&&((Ot=(xt=m.action).onClick)==null||Ot.call(xt,We),!We.defaultPrevented&&st())},className:Qo(V?.actionButton,(d=m?.classNames)==null?void 0:d.actionButton)},m.action.label):null))};function eB(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function Oce(t,e){let n={};return[t,e].forEach((r,i)=>{let s=i===1,a=s?"--mobile-offset":"--offset",o=s?Ece:Sce;function l(c){["top","right","bottom","left"].forEach(u=>{n[`${a}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${a}-${c}`]=o:n[`${a}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(o)}),n}var Nce=M.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:a,className:o,offset:l,mobileOffset:c,theme:u="light",richColors:d,duration:h,style:m,visibleToasts:b=_ce,toastOptions:x,dir:v=eB(),gap:_=Ace,loadingIcon:E,icons:T,containerAriaLabel:A="Notifications",pauseWhenPageIsHidden:P}=t,[R,N]=ne.useState([]),L=ne.useMemo(()=>Array.from(new Set([r].concat(R.filter(Q=>Q.position).map(Q=>Q.position)))),[R,r]),[I,j]=ne.useState([]),[B,H]=ne.useState(!1),[J,G]=ne.useState(!1),[W,K]=ne.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),te=ne.useRef(null),z=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),V=ne.useRef(null),X=ne.useRef(!1),q=ne.useCallback(Q=>{N(ie=>{var ce;return(ce=ie.find(ye=>ye.id===Q.id))!=null&&ce.delete||fa.dismiss(Q.id),ie.filter(({id:ye})=>ye!==Q.id)})},[]);return ne.useEffect(()=>fa.subscribe(Q=>{if(Q.dismiss){N(ie=>ie.map(ce=>ce.id===Q.id?{...ce,delete:!0}:ce));return}setTimeout(()=>{Gq.flushSync(()=>{N(ie=>{let ce=ie.findIndex(ye=>ye.id===Q.id);return ce!==-1?[...ie.slice(0,ce),{...ie[ce],...Q},...ie.slice(ce+1)]:[Q,...ie]})})})}),[]),ne.useEffect(()=>{if(u!=="system"){K(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?K("dark"):K("light")),typeof window>"u")return;let Q=window.matchMedia("(prefers-color-scheme: dark)");try{Q.addEventListener("change",({matches:ie})=>{K(ie?"dark":"light")})}catch{Q.addListener(({matches:ce})=>{try{K(ce?"dark":"light")}catch(ye){console.error(ye)}})}},[u]),ne.useEffect(()=>{R.length<=1&&H(!1)},[R]),ne.useEffect(()=>{let Q=ie=>{var ce,ye;i.every(Ce=>ie[Ce]||ie.code===Ce)&&(H(!0),(ce=te.current)==null||ce.focus()),ie.code==="Escape"&&(document.activeElement===te.current||(ye=te.current)!=null&&ye.contains(document.activeElement))&&H(!1)};return document.addEventListener("keydown",Q),()=>document.removeEventListener("keydown",Q)},[i]),ne.useEffect(()=>{if(te.current)return()=>{V.current&&(V.current.focus({preventScroll:!0}),V.current=null,X.current=!1)}},[te.current]),ne.createElement("section",{ref:e,"aria-label":`${A} ${z}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},L.map((Q,ie)=>{var ce;let[ye,Ce]=Q.split("-");return R.length?ne.createElement("ol",{key:Q,dir:v==="auto"?eB():v,tabIndex:-1,ref:te,className:o,"data-sonner-toaster":!0,"data-theme":W,"data-y-position":ye,"data-lifted":B&&R.length>1&&!s,"data-x-position":Ce,style:{"--front-toast-height":`${((ce=I[0])==null?void 0:ce.height)||0}px`,"--width":`${Tce}px`,"--gap":`${_}px`,...m,...Oce(l,c)},onBlur:he=>{X.current&&!he.currentTarget.contains(he.relatedTarget)&&(X.current=!1,V.current&&(V.current.focus({preventScroll:!0}),V.current=null))},onFocus:he=>{he.target instanceof HTMLElement&&he.target.dataset.dismissible==="false"||X.current||(X.current=!0,V.current=he.relatedTarget)},onMouseEnter:()=>H(!0),onMouseMove:()=>H(!0),onMouseLeave:()=>{J||H(!1)},onDragEnd:()=>H(!1),onPointerDown:he=>{he.target instanceof HTMLElement&&he.target.dataset.dismissible==="false"||G(!0)},onPointerUp:()=>G(!1)},R.filter(he=>!he.position&&ie===0||he.position===Q).map((he,De)=>{var be,_e;return ne.createElement(Rce,{key:he.id,icons:T,index:De,toast:he,defaultRichColors:d,duration:(be=x?.duration)!=null?be:h,className:x?.className,descriptionClassName:x?.descriptionClassName,invert:n,visibleToasts:b,closeButton:(_e=x?.closeButton)!=null?_e:a,interacting:J,position:Q,style:x?.style,unstyled:x?.unstyled,classNames:x?.classNames,cancelButtonStyle:x?.cancelButtonStyle,actionButtonStyle:x?.actionButtonStyle,removeToast:q,toasts:R.filter(Ee=>Ee.position==he.position),heights:I.filter(Ee=>Ee.position==he.position),setHeights:j,expandByDefault:s,gap:_,loadingIcon:E,expanded:B,pauseWhenPageIsHidden:P,swipeDirections:t.swipeDirections})})):null}))});const Ice=({...t})=>{const{theme:e="system"}=sce();return p.jsx(Nce,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var kce=cj[" useId ".trim().toString()]||(()=>{}),Dce=0;function go(t){const[e,n]=M.useState(kce());return Gr(()=>{n(r=>r??String(Dce++))},[t]),e?`radix-${e}`:""}const jce=["top","right","bottom","left"],Yd=Math.min,ja=Math.max,B1=Math.round,X_=Math.floor,Xl=t=>({x:t,y:t}),Lce={left:"right",right:"left",bottom:"top",top:"bottom"},Uce={start:"end",end:"start"};function ZN(t,e,n){return ja(t,Yd(e,n))}function wu(t,e){return typeof t=="function"?t(e):t}function _u(t){return t.split("-")[0]}function ry(t){return t.split("-")[1]}function _j(t){return t==="x"?"y":"x"}function Sj(t){return t==="y"?"height":"width"}const Fce=new Set(["top","bottom"]);function Wl(t){return Fce.has(_u(t))?"y":"x"}function Ej(t){return _j(Wl(t))}function Bce(t,e,n){n===void 0&&(n=!1);const r=ry(t),i=Ej(t),s=Sj(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=z1(a)),[a,z1(a)]}function zce(t){const e=z1(t);return[eI(t),e,eI(e)]}function eI(t){return t.replace(/start|end/g,e=>Uce[e])}const tB=["left","right"],nB=["right","left"],$ce=["top","bottom"],Vce=["bottom","top"];function Hce(t,e,n){switch(t){case"top":case"bottom":return n?e?nB:tB:e?tB:nB;case"left":case"right":return e?$ce:Vce;default:return[]}}function Wce(t,e,n,r){const i=ry(t);let s=Hce(_u(t),n==="start",r);return i&&(s=s.map(a=>a+"-"+i),e&&(s=s.concat(s.map(eI)))),s}function z1(t){return t.replace(/left|right|bottom|top/g,e=>Lce[e])}function Gce(t){return{top:0,right:0,bottom:0,left:0,...t}}function B9(t){return typeof t!="number"?Gce(t):{top:t,right:t,bottom:t,left:t}}function $1(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function rB(t,e,n){let{reference:r,floating:i}=t;const s=Wl(e),a=Ej(e),o=Sj(a),l=_u(e),c=s==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[o]/2-i[o]/2;let m;switch(l){case"top":m={x:u,y:r.y-i.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:d};break;case"left":m={x:r.x-i.width,y:d};break;default:m={x:r.x,y:r.y}}switch(ry(e)){case"start":m[a]-=h*(n&&c?-1:1);break;case"end":m[a]+=h*(n&&c?-1:1);break}return m}const qce=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:a}=n,o=s.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let c=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=rB(c,r,l),h=r,m={},b=0;for(let x=0;x<o.length;x++){const{name:v,fn:_}=o[x],{x:E,y:T,data:A,reset:P}=await _({x:u,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:m,rects:c,platform:a,elements:{reference:t,floating:e}});u=E??u,d=T??d,m={...m,[v]:{...m[v],...A}},P&&b<=50&&(b++,typeof P=="object"&&(P.placement&&(h=P.placement),P.rects&&(c=P.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:i}):P.rects),{x:u,y:d}=rB(c,h,l)),x=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:m}};async function jx(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:a,elements:o,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:m=0}=wu(e,t),b=B9(m),v=o[h?d==="floating"?"reference":"floating":d],_=$1(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(v)))==null||n?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),E=d==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,T=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),A=await(s.isElement==null?void 0:s.isElement(T))?await(s.getScale==null?void 0:s.getScale(T))||{x:1,y:1}:{x:1,y:1},P=$1(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:E,offsetParent:T,strategy:l}):E);return{top:(_.top-P.top+b.top)/A.y,bottom:(P.bottom-_.bottom+b.bottom)/A.y,left:(_.left-P.left+b.left)/A.x,right:(P.right-_.right+b.right)/A.x}}const Kce=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:a,elements:o,middlewareData:l}=e,{element:c,padding:u=0}=wu(t,e)||{};if(c==null)return{};const d=B9(u),h={x:n,y:r},m=Ej(i),b=Sj(m),x=await a.getDimensions(c),v=m==="y",_=v?"top":"left",E=v?"bottom":"right",T=v?"clientHeight":"clientWidth",A=s.reference[b]+s.reference[m]-h[m]-s.floating[b],P=h[m]-s.reference[m],R=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c));let N=R?R[T]:0;(!N||!await(a.isElement==null?void 0:a.isElement(R)))&&(N=o.floating[T]||s.floating[b]);const L=A/2-P/2,I=N/2-x[b]/2-1,j=Yd(d[_],I),B=Yd(d[E],I),H=j,J=N-x[b]-B,G=N/2-x[b]/2+L,W=ZN(H,G,J),K=!l.arrow&&ry(i)!=null&&G!==W&&s.reference[b]/2-(G<H?j:B)-x[b]/2<0,te=K?G<H?G-H:G-J:0;return{[m]:h[m]+te,data:{[m]:W,centerOffset:G-W-te,...K&&{alignmentOffset:te}},reset:K}}}),Xce=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:a,initialPlacement:o,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:x=!0,...v}=wu(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const _=_u(i),E=Wl(o),T=_u(o)===o,A=await(l.isRTL==null?void 0:l.isRTL(c.floating)),P=h||(T||!x?[z1(o)]:zce(o)),R=b!=="none";!h&&R&&P.push(...Wce(o,x,b,A));const N=[o,...P],L=await jx(e,v),I=[];let j=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&I.push(L[_]),d){const G=Bce(i,a,A);I.push(L[G[0]],L[G[1]])}if(j=[...j,{placement:i,overflows:I}],!I.every(G=>G<=0)){var B,H;const G=(((B=s.flip)==null?void 0:B.index)||0)+1,W=N[G];if(W&&(!(d==="alignment"?E!==Wl(W):!1)||j.every(z=>z.overflows[0]>0&&Wl(z.placement)===E)))return{data:{index:G,overflows:j},reset:{placement:W}};let K=(H=j.filter(te=>te.overflows[0]<=0).sort((te,z)=>te.overflows[1]-z.overflows[1])[0])==null?void 0:H.placement;if(!K)switch(m){case"bestFit":{var J;const te=(J=j.filter(z=>{if(R){const V=Wl(z.placement);return V===E||V==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(V=>V>0).reduce((V,X)=>V+X,0)]).sort((z,V)=>z[1]-V[1])[0])==null?void 0:J[0];te&&(K=te);break}case"initialPlacement":K=o;break}if(i!==K)return{reset:{placement:K}}}return{}}}};function iB(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function sB(t){return jce.some(e=>t[e]>=0)}const Yce=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=wu(t,e);switch(r){case"referenceHidden":{const s=await jx(e,{...i,elementContext:"reference"}),a=iB(s,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:sB(a)}}}case"escaped":{const s=await jx(e,{...i,altBoundary:!0}),a=iB(s,n.floating);return{data:{escapedOffsets:a,escaped:sB(a)}}}default:return{}}}}},z9=new Set(["left","top"]);async function Jce(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=_u(n),o=ry(n),l=Wl(n)==="y",c=z9.has(a)?-1:1,u=s&&l?-1:1,d=wu(e,t);let{mainAxis:h,crossAxis:m,alignmentAxis:b}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return o&&typeof b=="number"&&(m=o==="end"?b*-1:b),l?{x:m*u,y:h*c}:{x:h*c,y:m*u}}const Qce=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:a,middlewareData:o}=e,l=await Jce(e,t);return a===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:a}}}}},Zce=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:v=>{let{x:_,y:E}=v;return{x:_,y:E}}},...l}=wu(t,e),c={x:n,y:r},u=await jx(e,l),d=Wl(_u(i)),h=_j(d);let m=c[h],b=c[d];if(s){const v=h==="y"?"top":"left",_=h==="y"?"bottom":"right",E=m+u[v],T=m-u[_];m=ZN(E,m,T)}if(a){const v=d==="y"?"top":"left",_=d==="y"?"bottom":"right",E=b+u[v],T=b-u[_];b=ZN(E,b,T)}const x=o.fn({...e,[h]:m,[d]:b});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[h]:s,[d]:a}}}}}},eue=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:a}=e,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=wu(t,e),u={x:n,y:r},d=Wl(i),h=_j(d);let m=u[h],b=u[d];const x=wu(o,e),v=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(l){const T=h==="y"?"height":"width",A=s.reference[h]-s.floating[T]+v.mainAxis,P=s.reference[h]+s.reference[T]-v.mainAxis;m<A?m=A:m>P&&(m=P)}if(c){var _,E;const T=h==="y"?"width":"height",A=z9.has(_u(i)),P=s.reference[d]-s.floating[T]+(A&&((_=a.offset)==null?void 0:_[d])||0)+(A?0:v.crossAxis),R=s.reference[d]+s.reference[T]+(A?0:((E=a.offset)==null?void 0:E[d])||0)-(A?v.crossAxis:0);b<P?b=P:b>R&&(b=R)}return{[h]:m,[d]:b}}}},tue=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:a,elements:o}=e,{apply:l=()=>{},...c}=wu(t,e),u=await jx(e,c),d=_u(i),h=ry(i),m=Wl(i)==="y",{width:b,height:x}=s.floating;let v,_;d==="top"||d==="bottom"?(v=d,_=h===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(_=d,v=h==="end"?"top":"bottom");const E=x-u.top-u.bottom,T=b-u.left-u.right,A=Yd(x-u[v],E),P=Yd(b-u[_],T),R=!e.middlewareData.shift;let N=A,L=P;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(L=T),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(N=E),R&&!h){const j=ja(u.left,0),B=ja(u.right,0),H=ja(u.top,0),J=ja(u.bottom,0);m?L=b-2*(j!==0||B!==0?j+B:ja(u.left,u.right)):N=x-2*(H!==0||J!==0?H+J:ja(u.top,u.bottom))}await l({...e,availableWidth:L,availableHeight:N});const I=await a.getDimensions(o.floating);return b!==I.width||x!==I.height?{reset:{rects:!0}}:{}}}};function ST(){return typeof window<"u"}function iy(t){return $9(t)?(t.nodeName||"").toLowerCase():"#document"}function $a(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function lc(t){var e;return(e=($9(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function $9(t){return ST()?t instanceof Node||t instanceof $a(t).Node:!1}function wl(t){return ST()?t instanceof Element||t instanceof $a(t).Element:!1}function ic(t){return ST()?t instanceof HTMLElement||t instanceof $a(t).HTMLElement:!1}function aB(t){return!ST()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof $a(t).ShadowRoot}const nue=new Set(["inline","contents"]);function fw(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=_l(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!nue.has(i)}const rue=new Set(["table","td","th"]);function iue(t){return rue.has(iy(t))}const sue=[":popover-open",":modal"];function ET(t){return sue.some(e=>{try{return t.matches(e)}catch{return!1}})}const aue=["transform","translate","scale","rotate","perspective"],oue=["transform","translate","scale","rotate","perspective","filter"],lue=["paint","layout","strict","content"];function Tj(t){const e=Aj(),n=wl(t)?_l(t):t;return aue.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||oue.some(r=>(n.willChange||"").includes(r))||lue.some(r=>(n.contain||"").includes(r))}function cue(t){let e=Jd(t);for(;ic(e)&&!lv(e);){if(Tj(e))return e;if(ET(e))return null;e=Jd(e)}return null}function Aj(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const uue=new Set(["html","body","#document"]);function lv(t){return uue.has(iy(t))}function _l(t){return $a(t).getComputedStyle(t)}function TT(t){return wl(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Jd(t){if(iy(t)==="html")return t;const e=t.assignedSlot||t.parentNode||aB(t)&&t.host||lc(t);return aB(e)?e.host:e}function V9(t){const e=Jd(t);return lv(e)?t.ownerDocument?t.ownerDocument.body:t.body:ic(e)&&fw(e)?e:V9(e)}function Lx(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=V9(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),a=$a(i);if(s){const o=tI(a);return e.concat(a,a.visualViewport||[],fw(i)?i:[],o&&n?Lx(o):[])}return e.concat(i,Lx(i,[],n))}function tI(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function H9(t){const e=_l(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=ic(t),s=i?t.offsetWidth:n,a=i?t.offsetHeight:r,o=B1(n)!==s||B1(r)!==a;return o&&(n=s,r=a),{width:n,height:r,$:o}}function Mj(t){return wl(t)?t:t.contextElement}function Xg(t){const e=Mj(t);if(!ic(e))return Xl(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=H9(e);let a=(s?B1(n.width):n.width)/r,o=(s?B1(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const due=Xl(0);function W9(t){const e=$a(t);return!Aj()||!e.visualViewport?due:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function fue(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==$a(t)?!1:e}function lp(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=Mj(t);let a=Xl(1);e&&(r?wl(r)&&(a=Xg(r)):a=Xg(t));const o=fue(s,n,r)?W9(s):Xl(0);let l=(i.left+o.x)/a.x,c=(i.top+o.y)/a.y,u=i.width/a.x,d=i.height/a.y;if(s){const h=$a(s),m=r&&wl(r)?$a(r):r;let b=h,x=tI(b);for(;x&&r&&m!==b;){const v=Xg(x),_=x.getBoundingClientRect(),E=_l(x),T=_.left+(x.clientLeft+parseFloat(E.paddingLeft))*v.x,A=_.top+(x.clientTop+parseFloat(E.paddingTop))*v.y;l*=v.x,c*=v.y,u*=v.x,d*=v.y,l+=T,c+=A,b=$a(x),x=tI(b)}}return $1({width:u,height:d,x:l,y:c})}function Pj(t,e){const n=TT(t).scrollLeft;return e?e.left+n:lp(lc(t)).left+n}function G9(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:Pj(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function hue(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",a=lc(r),o=e?ET(e.floating):!1;if(r===a||o&&s)return n;let l={scrollLeft:0,scrollTop:0},c=Xl(1);const u=Xl(0),d=ic(r);if((d||!d&&!s)&&((iy(r)!=="body"||fw(a))&&(l=TT(r)),ic(r))){const m=lp(r);c=Xg(r),u.x=m.x+r.clientLeft,u.y=m.y+r.clientTop}const h=a&&!d&&!s?G9(a,l,!0):Xl(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}}function pue(t){return Array.from(t.getClientRects())}function mue(t){const e=lc(t),n=TT(t),r=t.ownerDocument.body,i=ja(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=ja(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+Pj(t);const o=-n.scrollTop;return _l(r).direction==="rtl"&&(a+=ja(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:a,y:o}}function gue(t,e){const n=$a(t),r=lc(t),i=n.visualViewport;let s=r.clientWidth,a=r.clientHeight,o=0,l=0;if(i){s=i.width,a=i.height;const c=Aj();(!c||c&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}return{width:s,height:a,x:o,y:l}}const vue=new Set(["absolute","fixed"]);function yue(t,e){const n=lp(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=ic(t)?Xg(t):Xl(1),a=t.clientWidth*s.x,o=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:a,height:o,x:l,y:c}}function oB(t,e,n){let r;if(e==="viewport")r=gue(t,n);else if(e==="document")r=mue(lc(t));else if(wl(e))r=yue(e,n);else{const i=W9(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return $1(r)}function q9(t,e){const n=Jd(t);return n===e||!wl(n)||lv(n)?!1:_l(n).position==="fixed"||q9(n,e)}function xue(t,e){const n=e.get(t);if(n)return n;let r=Lx(t,[],!1).filter(o=>wl(o)&&iy(o)!=="body"),i=null;const s=_l(t).position==="fixed";let a=s?Jd(t):t;for(;wl(a)&&!lv(a);){const o=_l(a),l=Tj(a);!l&&o.position==="fixed"&&(i=null),(s?!l&&!i:!l&&o.position==="static"&&!!i&&vue.has(i.position)||fw(a)&&!l&&q9(t,a))?r=r.filter(u=>u!==a):i=o,a=Jd(a)}return e.set(t,r),r}function bue(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const a=[...n==="clippingAncestors"?ET(e)?[]:xue(e,this._c):[].concat(n),r],o=a[0],l=a.reduce((c,u)=>{const d=oB(e,u,i);return c.top=ja(d.top,c.top),c.right=Yd(d.right,c.right),c.bottom=Yd(d.bottom,c.bottom),c.left=ja(d.left,c.left),c},oB(e,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function wue(t){const{width:e,height:n}=H9(t);return{width:e,height:n}}function _ue(t,e,n){const r=ic(e),i=lc(e),s=n==="fixed",a=lp(t,!0,s,e);let o={scrollLeft:0,scrollTop:0};const l=Xl(0);function c(){l.x=Pj(i)}if(r||!r&&!s)if((iy(e)!=="body"||fw(i))&&(o=TT(e)),r){const m=lp(e,!0,s,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else i&&c();s&&!r&&i&&c();const u=i&&!r&&!s?G9(i,o):Xl(0),d=a.left+o.scrollLeft-l.x-u.x,h=a.top+o.scrollTop-l.y-u.y;return{x:d,y:h,width:a.width,height:a.height}}function tP(t){return _l(t).position==="static"}function lB(t,e){if(!ic(t)||_l(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return lc(t)===n&&(n=n.ownerDocument.body),n}function K9(t,e){const n=$a(t);if(ET(t))return n;if(!ic(t)){let i=Jd(t);for(;i&&!lv(i);){if(wl(i)&&!tP(i))return i;i=Jd(i)}return n}let r=lB(t,e);for(;r&&iue(r)&&tP(r);)r=lB(r,e);return r&&lv(r)&&tP(r)&&!Tj(r)?n:r||cue(t)||n}const Sue=async function(t){const e=this.getOffsetParent||K9,n=this.getDimensions,r=await n(t.floating);return{reference:_ue(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Eue(t){return _l(t).direction==="rtl"}const Tue={convertOffsetParentRelativeRectToViewportRelativeRect:hue,getDocumentElement:lc,getClippingRect:bue,getOffsetParent:K9,getElementRects:Sue,getClientRects:pue,getDimensions:wue,getScale:Xg,isElement:wl,isRTL:Eue};function X9(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Aue(t,e){let n=null,r;const i=lc(t);function s(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:d,width:h,height:m}=c;if(o||e(),!h||!m)return;const b=X_(d),x=X_(i.clientWidth-(u+h)),v=X_(i.clientHeight-(d+m)),_=X_(u),T={rootMargin:-b+"px "+-x+"px "+-v+"px "+-_+"px",threshold:ja(0,Yd(1,l))||1};let A=!0;function P(R){const N=R[0].intersectionRatio;if(N!==l){if(!A)return a();N?a(!1,N):r=setTimeout(()=>{a(!1,1e-7)},1e3)}N===1&&!X9(c,t.getBoundingClientRect())&&a(),A=!1}try{n=new IntersectionObserver(P,{...T,root:i.ownerDocument})}catch{n=new IntersectionObserver(P,T)}n.observe(t)}return a(!0),s}function Mue(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Mj(t),u=i||s?[...c?Lx(c):[],...Lx(e)]:[];u.forEach(_=>{i&&_.addEventListener("scroll",n,{passive:!0}),s&&_.addEventListener("resize",n)});const d=c&&o?Aue(c,n):null;let h=-1,m=null;a&&(m=new ResizeObserver(_=>{let[E]=_;E&&E.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var T;(T=m)==null||T.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let b,x=l?lp(t):null;l&&v();function v(){const _=lp(t);x&&!X9(x,_)&&n(),x=_,b=requestAnimationFrame(v)}return n(),()=>{var _;u.forEach(E=>{i&&E.removeEventListener("scroll",n),s&&E.removeEventListener("resize",n)}),d?.(),(_=m)==null||_.disconnect(),m=null,l&&cancelAnimationFrame(b)}}const Pue=Qce,Cue=Zce,Rue=Xce,Oue=tue,Nue=Yce,cB=Kce,Iue=eue,kue=(t,e,n)=>{const r=new Map,i={platform:Tue,...n},s={...i.platform,_c:r};return qce(t,e,{...i,platform:s})};var Due=typeof document<"u",jue=function(){},S1=Due?M.useLayoutEffect:jue;function V1(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!V1(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!V1(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function Y9(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function uB(t,e){const n=Y9(t);return Math.round(e*n)/n}function nP(t){const e=M.useRef(t);return S1(()=>{e.current=t}),e}function Lue(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:a}={},transform:o=!0,whileElementsMounted:l,open:c}=t,[u,d]=M.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,m]=M.useState(r);V1(h,r)||m(r);const[b,x]=M.useState(null),[v,_]=M.useState(null),E=M.useCallback(z=>{z!==R.current&&(R.current=z,x(z))},[]),T=M.useCallback(z=>{z!==N.current&&(N.current=z,_(z))},[]),A=s||b,P=a||v,R=M.useRef(null),N=M.useRef(null),L=M.useRef(u),I=l!=null,j=nP(l),B=nP(i),H=nP(c),J=M.useCallback(()=>{if(!R.current||!N.current)return;const z={placement:e,strategy:n,middleware:h};B.current&&(z.platform=B.current),kue(R.current,N.current,z).then(V=>{const X={...V,isPositioned:H.current!==!1};G.current&&!V1(L.current,X)&&(L.current=X,Zv.flushSync(()=>{d(X)}))})},[h,e,n,B,H]);S1(()=>{c===!1&&L.current.isPositioned&&(L.current.isPositioned=!1,d(z=>({...z,isPositioned:!1})))},[c]);const G=M.useRef(!1);S1(()=>(G.current=!0,()=>{G.current=!1}),[]),S1(()=>{if(A&&(R.current=A),P&&(N.current=P),A&&P){if(j.current)return j.current(A,P,J);J()}},[A,P,J,j,I]);const W=M.useMemo(()=>({reference:R,floating:N,setReference:E,setFloating:T}),[E,T]),K=M.useMemo(()=>({reference:A,floating:P}),[A,P]),te=M.useMemo(()=>{const z={position:n,left:0,top:0};if(!K.floating)return z;const V=uB(K.floating,u.x),X=uB(K.floating,u.y);return o?{...z,transform:"translate("+V+"px, "+X+"px)",...Y9(K.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:V,top:X}},[n,o,K.floating,u.x,u.y]);return M.useMemo(()=>({...u,update:J,refs:W,elements:K,floatingStyles:te}),[u,J,W,K,te])}const Uue=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?cB({element:r.current,padding:i}).fn(n):{}:r?cB({element:r,padding:i}).fn(n):{}}}},Fue=(t,e)=>({...Pue(t),options:[t,e]}),Bue=(t,e)=>({...Cue(t),options:[t,e]}),zue=(t,e)=>({...Iue(t),options:[t,e]}),$ue=(t,e)=>({...Rue(t),options:[t,e]}),Vue=(t,e)=>({...Oue(t),options:[t,e]}),Hue=(t,e)=>({...Nue(t),options:[t,e]}),Wue=(t,e)=>({...Uue(t),options:[t,e]});var Gue="Arrow",J9=M.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return p.jsx(Pt.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});J9.displayName=Gue;var que=J9;function Cj(t){const[e,n]=M.useState(void 0);return Gr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let a,o;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;a=c.inlineSize,o=c.blockSize}else a=t.offsetWidth,o=t.offsetHeight;n({width:a,height:o})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Rj="Popper",[Q9,lf]=cs(Rj),[Kue,Z9]=Q9(Rj),e7=t=>{const{__scopePopper:e,children:n}=t,[r,i]=M.useState(null);return p.jsx(Kue,{scope:e,anchor:r,onAnchorChange:i,children:n})};e7.displayName=Rj;var t7="PopperAnchor",n7=M.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=Z9(t7,n),a=M.useRef(null),o=tn(e,a);return M.useEffect(()=>{s.onAnchorChange(r?.current||a.current)}),r?null:p.jsx(Pt.div,{...i,ref:o})});n7.displayName=t7;var Oj="PopperContent",[Xue,Yue]=Q9(Oj),r7=M.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:b,...x}=t,v=Z9(Oj,n),[_,E]=M.useState(null),T=tn(e,he=>E(he)),[A,P]=M.useState(null),R=Cj(A),N=R?.width??0,L=R?.height??0,I=r+(s!=="center"?"-"+s:""),j=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},B=Array.isArray(c)?c:[c],H=B.length>0,J={padding:j,boundary:B.filter(Que),altBoundary:H},{refs:G,floatingStyles:W,placement:K,isPositioned:te,middlewareData:z}=Lue({strategy:"fixed",placement:I,whileElementsMounted:(...he)=>Mue(...he,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[Fue({mainAxis:i+L,alignmentAxis:a}),l&&Bue({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?zue():void 0,...J}),l&&$ue({...J}),Vue({...J,apply:({elements:he,rects:De,availableWidth:be,availableHeight:_e})=>{const{width:Ee,height:ee}=De.reference,Me=he.floating.style;Me.setProperty("--radix-popper-available-width",`${be}px`),Me.setProperty("--radix-popper-available-height",`${_e}px`),Me.setProperty("--radix-popper-anchor-width",`${Ee}px`),Me.setProperty("--radix-popper-anchor-height",`${ee}px`)}}),A&&Wue({element:A,padding:o}),Zue({arrowWidth:N,arrowHeight:L}),h&&Hue({strategy:"referenceHidden",...J})]}),[V,X]=a7(K),q=Wr(b);Gr(()=>{te&&q?.()},[te,q]);const Q=z.arrow?.x,ie=z.arrow?.y,ce=z.arrow?.centerOffset!==0,[ye,Ce]=M.useState();return Gr(()=>{_&&Ce(window.getComputedStyle(_).zIndex)},[_]),p.jsx("div",{ref:G.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:te?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ye,"--radix-popper-transform-origin":[z.transformOrigin?.x,z.transformOrigin?.y].join(" "),...z.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:p.jsx(Xue,{scope:n,placedSide:V,onArrowChange:P,arrowX:Q,arrowY:ie,shouldHideArrow:ce,children:p.jsx(Pt.div,{"data-side":V,"data-align":X,...x,ref:T,style:{...x.style,animation:te?void 0:"none"}})})})});r7.displayName=Oj;var i7="PopperArrow",Jue={top:"bottom",right:"left",bottom:"top",left:"right"},s7=M.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=Yue(i7,r),a=Jue[s.placedSide];return p.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:p.jsx(que,{...i,ref:n,style:{...i.style,display:"block"}})})});s7.displayName=i7;function Que(t){return t!==null}var Zue=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:i}=e,a=i.arrow?.centerOffset!==0,o=a?0:t.arrowWidth,l=a?0:t.arrowHeight,[c,u]=a7(n),d={start:"0%",center:"50%",end:"100%"}[u],h=(i.arrow?.x??0)+o/2,m=(i.arrow?.y??0)+l/2;let b="",x="";return c==="bottom"?(b=a?d:`${h}px`,x=`${-l}px`):c==="top"?(b=a?d:`${h}px`,x=`${r.floating.height+l}px`):c==="right"?(b=`${-l}px`,x=a?d:`${m}px`):c==="left"&&(b=`${r.floating.width+l}px`,x=a?d:`${m}px`),{data:{x:b,y:x}}}});function a7(t){const[e,n="center"]=t.split("-");return[e,n]}var Nj=e7,hw=n7,AT=r7,MT=s7,[PT]=cs("Tooltip",[lf]),Ij=lf(),o7="TooltipProvider",ede=700,dB="tooltip.open",[tde,l7]=PT(o7),c7=t=>{const{__scopeTooltip:e,delayDuration:n=ede,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=t,a=M.useRef(!0),o=M.useRef(!1),l=M.useRef(0);return M.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),p.jsx(tde,{scope:e,isOpenDelayedRef:a,delayDuration:n,onOpen:M.useCallback(()=>{window.clearTimeout(l.current),a.current=!1},[]),onClose:M.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:o,onPointerInTransitChange:M.useCallback(c=>{o.current=c},[]),disableHoverableContent:i,children:s})};c7.displayName=o7;var u7="Tooltip",[XGe,CT]=PT(u7),nI="TooltipTrigger",nde=M.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=CT(nI,n),s=l7(nI,n),a=Ij(n),o=M.useRef(null),l=tn(e,o,i.onTriggerChange),c=M.useRef(!1),u=M.useRef(!1),d=M.useCallback(()=>c.current=!1,[]);return M.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),p.jsx(hw,{asChild:!0,...a,children:p.jsx(Pt.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:Je(t.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:Je(t.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:Je(t.onPointerDown,()=>{i.open&&i.onClose(),c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Je(t.onFocus,()=>{c.current||i.onOpen()}),onBlur:Je(t.onBlur,i.onClose),onClick:Je(t.onClick,i.onClose)})})});nde.displayName=nI;var rde="TooltipPortal",[YGe,ide]=PT(rde,{forceMount:void 0}),cv="TooltipContent",d7=M.forwardRef((t,e)=>{const n=ide(cv,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=t,a=CT(cv,t.__scopeTooltip);return p.jsx(Wi,{present:r||a.open,children:a.disableHoverableContent?p.jsx(f7,{side:i,...s,ref:e}):p.jsx(sde,{side:i,...s,ref:e})})}),sde=M.forwardRef((t,e)=>{const n=CT(cv,t.__scopeTooltip),r=l7(cv,t.__scopeTooltip),i=M.useRef(null),s=tn(e,i),[a,o]=M.useState(null),{trigger:l,onClose:c}=n,u=i.current,{onPointerInTransitChange:d}=r,h=M.useCallback(()=>{o(null),d(!1)},[d]),m=M.useCallback((b,x)=>{const v=b.currentTarget,_={x:b.clientX,y:b.clientY},E=ude(_,v.getBoundingClientRect()),T=dde(_,E),A=fde(x.getBoundingClientRect()),P=pde([...T,...A]);o(P),d(!0)},[d]);return M.useEffect(()=>()=>h(),[h]),M.useEffect(()=>{if(l&&u){const b=v=>m(v,u),x=v=>m(v,l);return l.addEventListener("pointerleave",b),u.addEventListener("pointerleave",x),()=>{l.removeEventListener("pointerleave",b),u.removeEventListener("pointerleave",x)}}},[l,u,m,h]),M.useEffect(()=>{if(a){const b=x=>{const v=x.target,_={x:x.clientX,y:x.clientY},E=l?.contains(v)||u?.contains(v),T=!hde(_,a);E?h():T&&(h(),c())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[l,u,a,c,h]),p.jsx(f7,{...t,ref:s})}),[ade,ode]=PT(u7,{isInside:!1}),lde=Kq("TooltipContent"),f7=M.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:a,...o}=t,l=CT(cv,n),c=Ij(n),{onClose:u}=l;return M.useEffect(()=>(document.addEventListener(dB,u),()=>document.removeEventListener(dB,u)),[u]),M.useEffect(()=>{if(l.trigger){const d=h=>{h.target?.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),p.jsx(Ap,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:p.jsxs(AT,{"data-state":l.stateAttribute,...c,...o,ref:e,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(lde,{children:r}),p.jsx(ade,{scope:n,isInside:!0,children:p.jsx(Roe,{id:l.contentId,role:"tooltip",children:i||r})})]})})});d7.displayName=cv;var h7="TooltipArrow",cde=M.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=Ij(n);return ode(h7,n).isInside?null:p.jsx(MT,{...i,...r,ref:e})});cde.displayName=h7;function ude(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function dde(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function fde(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function hde(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,a=e.length-1;s<e.length;a=s++){const o=e[s],l=e[a],c=o.x,u=o.y,d=l.x,h=l.y;u>r!=h>r&&n<(d-c)*(r-u)/(h-u)+c&&(i=!i)}return i}function pde(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),mde(e)}function mde(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const s=e[e.length-1],a=e[e.length-2];if((s.x-a.x)*(i.y-a.y)>=(s.y-a.y)*(i.x-a.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const s=n[n.length-1],a=n[n.length-2];if((s.x-a.x)*(i.y-a.y)>=(s.y-a.y)*(i.x-a.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var gde=c7,p7=d7;const vde=gde,yde=M.forwardRef(({className:t,sideOffset:e=4,...n},r)=>p.jsx(p7,{ref:r,sideOffset:e,className:kt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));yde.displayName=p7.displayName;var RT=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},OT=typeof window>"u"||"Deno"in globalThis;function al(){}function xde(t,e){return typeof t=="function"?t(e):t}function bde(t){return typeof t=="number"&&t>=0&&t!==1/0}function wde(t,e){return Math.max(t+(e||0)-Date.now(),0)}function rI(t,e){return typeof t=="function"?t(e):t}function _de(t,e){return typeof t=="function"?t(e):t}function fB(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:a,stale:o}=t;if(a){if(r){if(e.queryHash!==kj(a,e.options))return!1}else if(!Fx(e.queryKey,a))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||i&&i!==e.state.fetchStatus||s&&!s(e))}function hB(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(Ux(e.options.mutationKey)!==Ux(s))return!1}else if(!Fx(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function kj(t,e){return(e?.queryKeyHashFn||Ux)(t)}function Ux(t){return JSON.stringify(t,(e,n)=>iI(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function Fx(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Fx(t[n],e[n])):!1}function m7(t,e){if(t===e)return t;const n=pB(t)&&pB(e);if(n||iI(t)&&iI(e)){const r=n?t:Object.keys(t),i=r.length,s=n?e:Object.keys(e),a=s.length,o=n?[]:{},l=new Set(r);let c=0;for(let u=0;u<a;u++){const d=n?u:s[u];(!n&&l.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(o[d]=void 0,c++):(o[d]=m7(t[d],e[d]),o[d]===t[d]&&t[d]!==void 0&&c++)}return i===a&&c===i?t:o}return e}function pB(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function iI(t){if(!mB(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!mB(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function mB(t){return Object.prototype.toString.call(t)==="[object Object]"}function Sde(t){return new Promise(e=>{setTimeout(e,t)})}function Ede(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?m7(t,e):e}function Tde(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function Ade(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Dj=Symbol();function g7(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===Dj?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Mde=class extends RT{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!OT&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},v7=new Mde,Pde=class extends RT{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!OT&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},H1=new Pde;function Cde(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function Rde(t){return Math.min(1e3*2**t,3e4)}function y7(t){return(t??"online")==="online"?H1.isOnline():!0}var x7=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function rP(t){return t instanceof x7}function b7(t){let e=!1,n=0,r=!1,i;const s=Cde(),a=x=>{r||(h(new x7(x)),t.abort?.())},o=()=>{e=!0},l=()=>{e=!1},c=()=>v7.isFocused()&&(t.networkMode==="always"||H1.isOnline())&&t.canRun(),u=()=>y7(t.networkMode)&&t.canRun(),d=x=>{r||(r=!0,t.onSuccess?.(x),i?.(),s.resolve(x))},h=x=>{r||(r=!0,t.onError?.(x),i?.(),s.reject(x))},m=()=>new Promise(x=>{i=v=>{(r||c())&&x(v)},t.onPause?.()}).then(()=>{i=void 0,r||t.onContinue?.()}),b=()=>{if(r)return;let x;const v=n===0?t.initialPromise:void 0;try{x=v??t.fn()}catch(_){x=Promise.reject(_)}Promise.resolve(x).then(d).catch(_=>{if(r)return;const E=t.retry??(OT?0:3),T=t.retryDelay??Rde,A=typeof T=="function"?T(n,_):T,P=E===!0||typeof E=="number"&&n<E||typeof E=="function"&&E(n,_);if(e||!P){h(_);return}n++,t.onFail?.(n,_),Sde(A).then(()=>c()?void 0:m()).then(()=>{e?h(_):b()})})};return{promise:s,cancel:a,continue:()=>(i?.(),s),cancelRetry:o,continueRetry:l,canStart:u,start:()=>(u()?b():m().then(b),s)}}var Ode=t=>setTimeout(t,0);function Nde(){let t=[],e=0,n=o=>{o()},r=o=>{o()},i=Ode;const s=o=>{e?t.push(o):i(()=>{n(o)})},a=()=>{const o=t;t=[],o.length&&i(()=>{r(()=>{o.forEach(l=>{n(l)})})})};return{batch:o=>{let l;e++;try{l=o()}finally{e--,e||a()}return l},batchCalls:o=>(...l)=>{s(()=>{o(...l)})},schedule:s,setNotifyFunction:o=>{n=o},setBatchNotifyFunction:o=>{r=o},setScheduler:o=>{i=o}}}var Ws=Nde(),w7=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),bde(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(OT?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},Ide=class extends w7{#e;#t;#n;#i;#r;#a;#o;constructor(t){super(),this.#o=!1,this.#a=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#i=t.client,this.#n=this.#i.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=Dde(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(t){this.options={...this.#a,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=Ede(this.state.data,t,this.options);return this.#s({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#s({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#r?.promise;return this.#r?.cancel(t),e?e.then(al).catch(al):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>_de(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Dj||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>rI(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!wde(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#r&&(this.#o?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}fetch(t,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(t&&this.setOptions(t),!this.options.queryFn){const l=this.observers.find(c=>c.options.queryFn);l&&this.setOptions(l.options)}const n=new AbortController,r=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#o=!0,n.signal)})},i=()=>{const l=g7(this.options,e),u=(()=>{const d={client:this.#i,queryKey:this.queryKey,meta:this.meta};return r(d),d})();return this.#o=!1,this.options.persister?this.options.persister(l,u,this):l(u)},a=(()=>{const l={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:i};return r(l),l})();this.options.behavior?.onFetch(a,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==a.fetchOptions?.meta)&&this.#s({type:"fetch",meta:a.fetchOptions?.meta});const o=l=>{rP(l)&&l.silent||this.#s({type:"error",error:l}),rP(l)||(this.#n.config.onError?.(l,this),this.#n.config.onSettled?.(this.state.data,l,this)),this.scheduleGc()};return this.#r=b7({initialPromise:e?.initialPromise,fn:a.fetchFn,abort:n.abort.bind(n),onSuccess:l=>{if(l===void 0){o(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(l)}catch(c){o(c);return}this.#n.config.onSuccess?.(l,this),this.#n.config.onSettled?.(l,this.state.error,this),this.scheduleGc()},onError:o,onFail:(l,c)=>{this.#s({type:"failed",failureCount:l,error:c})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}),this.#r.start()}#s(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...kde(n.data,this.options),fetchMeta:t.meta??null};case"success":return this.#t=void 0,{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=t.error;return rP(r)&&r.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),Ws.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function kde(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:y7(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Dde(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var jde=class extends RT{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,i=e.queryHash??kj(r,e);let s=this.get(i);return s||(s=new Ide({client:t,queryKey:r,queryHash:i,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(s)),s}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ws.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>fB(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>fB(t,n)):e}notify(t){Ws.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){Ws.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ws.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Lde=class extends w7{#e;#t;#n;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||Ude(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#i({type:"continue"})};this.#n=b7({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(i,s)=>{this.#i({type:"failed",failureCount:i,error:s})},onPause:()=>{this.#i({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const n=this.state.status==="pending",r=!this.#n.canStart();try{if(n)e();else{this.#i({type:"pending",variables:t,isPaused:r}),await this.#t.config.onMutate?.(t,this);const s=await this.options.onMutate?.(t);s!==this.state.context&&this.#i({type:"pending",context:s,variables:t,isPaused:r})}const i=await this.#n.start();return await this.#t.config.onSuccess?.(i,t,this.state.context,this),await this.options.onSuccess?.(i,t,this.state.context),await this.#t.config.onSettled?.(i,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(i,null,t,this.state.context),this.#i({type:"success",data:i}),i}catch(i){try{throw await this.#t.config.onError?.(i,t,this.state.context,this),await this.options.onError?.(i,t,this.state.context),await this.#t.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,i,t,this.state.context),i}finally{this.#i({type:"error",error:i})}}finally{this.#t.runNext(this)}}#i(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Ws.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function Ude(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Fde=class extends RT{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new Lde({mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=Y_(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=Y_(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=Y_(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(i=>i.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=Y_(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Ws.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>hB(e,n))}findAll(t={}){return this.getAll().filter(e=>hB(t,e))}notify(t){Ws.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return Ws.batch(()=>Promise.all(t.map(e=>e.continue().catch(al))))}};function Y_(t){return t.options.scope?.id}function gB(t){return{onFetch:(e,n)=>{const r=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,s=e.state.data?.pages||[],a=e.state.data?.pageParams||[];let o={pages:[],pageParams:[]},l=0;const c=async()=>{let u=!1;const d=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?u=!0:e.signal.addEventListener("abort",()=>{u=!0}),e.signal)})},h=g7(e.options,e.fetchOptions),m=async(b,x,v)=>{if(u)return Promise.reject();if(x==null&&b.pages.length)return Promise.resolve(b);const E=(()=>{const R={client:e.client,queryKey:e.queryKey,pageParam:x,direction:v?"backward":"forward",meta:e.options.meta};return d(R),R})(),T=await h(E),{maxPages:A}=e.options,P=v?Ade:Tde;return{pages:P(b.pages,T,A),pageParams:P(b.pageParams,x,A)}};if(i&&s.length){const b=i==="backward",x=b?Bde:vB,v={pages:s,pageParams:a},_=x(r,v);o=await m(v,_,b)}else{const b=t??s.length;do{const x=l===0?a[0]??r.initialPageParam:vB(r,o);if(l>0&&x==null)break;o=await m(o,x),l++}while(l<b)}return o};e.options.persister?e.fetchFn=()=>e.options.persister?.(c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=c}}}function vB(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function Bde(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var zde=class{#e;#t;#n;#i;#r;#a;#o;#s;constructor(t={}){this.#e=t.queryCache||new jde,this.#t=t.mutationCache||new Fde,this.#n=t.defaultOptions||{},this.#i=new Map,this.#r=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=v7.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=H1.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#s?.(),this.#s=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(rI(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=this.#e.get(r.queryHash)?.state.data,a=xde(e,s);if(a!==void 0)return this.#e.build(this,r).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return Ws.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;Ws.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return Ws.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Ws.batch(()=>this.#e.findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(al).catch(al)}invalidateQueries(t,e={}){return Ws.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Ws.batch(()=>this.#e.findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(al)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(al)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(rI(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(al).catch(al)}fetchInfiniteQuery(t){return t.behavior=gB(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(al).catch(al)}ensureInfiniteQueryData(t){return t.behavior=gB(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return H1.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#i.set(Ux(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#i.values()],n={};return e.forEach(r=>{Fx(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#r.set(Ux(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{Fx(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=kj(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Dj&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},$de=M.createContext(void 0),Vde=({client:t,children:e})=>(M.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),p.jsx($de.Provider,{value:t,children:e}));function Bx(){return Bx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bx.apply(this,arguments)}var Fd;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Fd||(Fd={}));const yB="popstate";function Hde(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:a,hash:o}=r.location;return sI("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:W1(i)}return Gde(e,n,null,t)}function fi(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function jj(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Wde(){return Math.random().toString(36).substr(2,8)}function xB(t,e){return{usr:t.state,key:t.key,idx:e}}function sI(t,e,n,r){return n===void 0&&(n=null),Bx({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?sy(e):e,{state:n,key:e&&e.key||r||Wde()})}function W1(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function sy(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Gde(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o=Fd.Pop,l=null,c=u();c==null&&(c=0,a.replaceState(Bx({},a.state,{idx:c}),""));function u(){return(a.state||{idx:null}).idx}function d(){o=Fd.Pop;let v=u(),_=v==null?null:v-c;c=v,l&&l({action:o,location:x.location,delta:_})}function h(v,_){o=Fd.Push;let E=sI(x.location,v,_);c=u()+1;let T=xB(E,c),A=x.createHref(E);try{a.pushState(T,"",A)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(A)}s&&l&&l({action:o,location:x.location,delta:1})}function m(v,_){o=Fd.Replace;let E=sI(x.location,v,_);c=u();let T=xB(E,c),A=x.createHref(E);a.replaceState(T,"",A),s&&l&&l({action:o,location:x.location,delta:0})}function b(v){let _=i.location.origin!=="null"?i.location.origin:i.location.href,E=typeof v=="string"?v:W1(v);return E=E.replace(/ $/,"%20"),fi(_,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,_)}let x={get action(){return o},get location(){return t(i,a)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(yB,d),l=v,()=>{i.removeEventListener(yB,d),l=null}},createHref(v){return e(i,v)},createURL:b,encodeLocation(v){let _=b(v);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:h,replace:m,go(v){return a.go(v)}};return x}var bB;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(bB||(bB={}));function qde(t,e,n){return n===void 0&&(n="/"),Kde(t,e,n)}function Kde(t,e,n,r){let i=typeof e=="string"?sy(e):e,s=Lj(i.pathname||"/",n);if(s==null)return null;let a=_7(t);Xde(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=ofe(s);o=ife(a[l],c)}return o}function _7(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(fi(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Vd([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(fi(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),_7(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:nfe(c,s.index),routesMeta:u})};return t.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of S7(s.path))i(s,a,l)}),e}function S7(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=S7(r.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function Xde(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:rfe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Yde=/^:[\w-]+$/,Jde=3,Qde=2,Zde=1,efe=10,tfe=-2,wB=t=>t==="*";function nfe(t,e){let n=t.split("/"),r=n.length;return n.some(wB)&&(r+=tfe),e&&(r+=Qde),n.filter(i=>!wB(i)).reduce((i,s)=>i+(Yde.test(s)?Jde:s===""?Zde:efe),r)}function rfe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function ife(t,e,n){let{routesMeta:r}=t,i={},s="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],c=o===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=sfe({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!d)return null;Object.assign(i,d.params),a.push({params:i,pathname:Vd([s,d.pathname]),pathnameBase:ffe(Vd([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=Vd([s,d.pathnameBase]))}return a}function sfe(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=afe(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:h,isOptional:m}=u;if(h==="*"){let x=o[d]||"";a=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const b=o[d];return m&&!b?c[h]=void 0:c[h]=(b||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:t}}function afe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),jj(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function ofe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jj(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Lj(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const lfe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cfe=t=>lfe.test(t);function ufe(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?sy(t):t,s;if(n)if(cfe(n))s=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),jj(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?s=_B(n.substring(1),"/"):s=_B(n,e)}else s=e;return{pathname:s,search:hfe(r),hash:pfe(i)}}function _B(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function iP(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dfe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function E7(t,e){let n=dfe(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function T7(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=sy(t):(i=Bx({},t),fi(!i.pathname||!i.pathname.includes("?"),iP("?","pathname","search",i)),fi(!i.pathname||!i.pathname.includes("#"),iP("#","pathname","hash",i)),fi(!i.search||!i.search.includes("#"),iP("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=n;else{let d=e.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}o=d>=0?e[d]:"/"}let l=ufe(i,o),c=a&&a!=="/"&&a.endsWith("/"),u=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Vd=t=>t.join("/").replace(/\/\/+/g,"/"),ffe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),hfe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,pfe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function mfe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const A7=["post","put","patch","delete"];new Set(A7);const gfe=["get",...A7];new Set(gfe);function zx(){return zx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zx.apply(this,arguments)}const Uj=M.createContext(null),vfe=M.createContext(null),Mp=M.createContext(null),NT=M.createContext(null),Pp=M.createContext({outlet:null,matches:[],isDataRoute:!1}),M7=M.createContext(null);function yfe(t,e){let{relative:n}=e===void 0?{}:e;pw()||fi(!1);let{basename:r,navigator:i}=M.useContext(Mp),{hash:s,pathname:a,search:o}=C7(t,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:Vd([r,a])),i.createHref({pathname:l,search:o,hash:s})}function pw(){return M.useContext(NT)!=null}function ay(){return pw()||fi(!1),M.useContext(NT).location}function P7(t){M.useContext(Mp).static||M.useLayoutEffect(t)}function oy(){let{isDataRoute:t}=M.useContext(Pp);return t?Ofe():xfe()}function xfe(){pw()||fi(!1);let t=M.useContext(Uj),{basename:e,future:n,navigator:r}=M.useContext(Mp),{matches:i}=M.useContext(Pp),{pathname:s}=ay(),a=JSON.stringify(E7(i,n.v7_relativeSplatPath)),o=M.useRef(!1);return P7(()=>{o.current=!0}),M.useCallback(function(c,u){if(u===void 0&&(u={}),!o.current)return;if(typeof c=="number"){r.go(c);return}let d=T7(c,JSON.parse(a),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Vd([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,a,s,t])}function C7(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=M.useContext(Mp),{matches:i}=M.useContext(Pp),{pathname:s}=ay(),a=JSON.stringify(E7(i,r.v7_relativeSplatPath));return M.useMemo(()=>T7(t,JSON.parse(a),s,n==="path"),[t,a,s,n])}function bfe(t,e){return wfe(t,e)}function wfe(t,e,n,r){pw()||fi(!1);let{navigator:i}=M.useContext(Mp),{matches:s}=M.useContext(Pp),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=ay(),u;if(e){var d;let v=typeof e=="string"?sy(e):e;l==="/"||(d=v.pathname)!=null&&d.startsWith(l)||fi(!1),u=v}else u=c;let h=u.pathname||"/",m=h;if(l!=="/"){let v=l.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let b=qde(t,{pathname:m}),x=Afe(b&&b.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:Vd([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Vd([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,n,r);return e&&x?M.createElement(NT.Provider,{value:{location:zx({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Fd.Pop}},x):x}function _fe(){let t=Rfe(),e=mfe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:i},n):null,null)}const Sfe=M.createElement(_fe,null);class Efe extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(Pp.Provider,{value:this.props.routeContext},M.createElement(M7.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Tfe(t){let{routeContext:e,match:n,children:r}=t,i=M.useContext(Uj);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(Pp.Provider,{value:e},r)}function Afe(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=(i=n)==null?void 0:i.errors;if(o!=null){let u=a.findIndex(d=>d.route.id&&o?.[d.route.id]!==void 0);u>=0||fi(!1),a=a.slice(0,Math.min(a.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<a.length;u++){let d=a[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:m}=n,b=d.route.loader&&h[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||b){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((u,d,h)=>{let m,b=!1,x=null,v=null;n&&(m=o&&d.route.id?o[d.route.id]:void 0,x=d.route.errorElement||Sfe,l&&(c<0&&h===0?(Nfe("route-fallback"),b=!0,v=null):c===h&&(b=!0,v=d.route.hydrateFallbackElement||null)));let _=e.concat(a.slice(0,h+1)),E=()=>{let T;return m?T=x:b?T=v:d.route.Component?T=M.createElement(d.route.Component,null):d.route.element?T=d.route.element:T=u,M.createElement(Tfe,{match:d,routeContext:{outlet:u,matches:_,isDataRoute:n!=null},children:T})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?M.createElement(Efe,{location:n.location,revalidation:n.revalidation,component:x,error:m,children:E(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):E()},null)}var R7=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(R7||{}),O7=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(O7||{});function Mfe(t){let e=M.useContext(Uj);return e||fi(!1),e}function Pfe(t){let e=M.useContext(vfe);return e||fi(!1),e}function Cfe(t){let e=M.useContext(Pp);return e||fi(!1),e}function N7(t){let e=Cfe(),n=e.matches[e.matches.length-1];return n.route.id||fi(!1),n.route.id}function Rfe(){var t;let e=M.useContext(M7),n=Pfe(),r=N7();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Ofe(){let{router:t}=Mfe(R7.UseNavigateStable),e=N7(O7.UseNavigateStable),n=M.useRef(!1);return P7(()=>{n.current=!0}),M.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,zx({fromRouteId:e},s)))},[t,e])}const SB={};function Nfe(t,e,n){SB[t]||(SB[t]=!0)}function Ife(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function Tg(t){fi(!1)}function kfe(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Fd.Pop,navigator:s,static:a=!1,future:o}=t;pw()&&fi(!1);let l=e.replace(/^\/*/,"/"),c=M.useMemo(()=>({basename:l,navigator:s,static:a,future:zx({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof r=="string"&&(r=sy(r));let{pathname:u="/",search:d="",hash:h="",state:m=null,key:b="default"}=r,x=M.useMemo(()=>{let v=Lj(u,l);return v==null?null:{location:{pathname:v,search:d,hash:h,state:m,key:b},navigationType:i}},[l,u,d,h,m,b,i]);return x==null?null:M.createElement(Mp.Provider,{value:c},M.createElement(NT.Provider,{children:n,value:x}))}function Dfe(t){let{children:e,location:n}=t;return bfe(aI(e),n)}new Promise(()=>{});function aI(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(r,i)=>{if(!M.isValidElement(r))return;let s=[...e,i];if(r.type===M.Fragment){n.push.apply(n,aI(r.props.children,s));return}r.type!==Tg&&fi(!1),!r.props.index||!r.props.children||fi(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=aI(r.props.children,s)),n.push(a)}),n}function oI(){return oI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oI.apply(this,arguments)}function jfe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Lfe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Ufe(t,e){return t.button===0&&(!e||e==="_self")&&!Lfe(t)}const Ffe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Bfe="6";try{window.__reactRouterVersion=Bfe}catch{}const zfe="startTransition",EB=cj[zfe];function $fe(t){let{basename:e,children:n,future:r,window:i}=t,s=M.useRef();s.current==null&&(s.current=Hde({window:i,v5Compat:!0}));let a=s.current,[o,l]=M.useState({action:a.action,location:a.location}),{v7_startTransition:c}=r||{},u=M.useCallback(d=>{c&&EB?EB(()=>l(d)):l(d)},[l,c]);return M.useLayoutEffect(()=>a.listen(u),[a,u]),M.useEffect(()=>Ife(r),[r]),M.createElement(kfe,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:a,future:r})}const Vfe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Hfe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sP=M.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:u,viewTransition:d}=e,h=jfe(e,Ffe),{basename:m}=M.useContext(Mp),b,x=!1;if(typeof c=="string"&&Hfe.test(c)&&(b=c,Vfe))try{let T=new URL(window.location.href),A=c.startsWith("//")?new URL(T.protocol+c):new URL(c),P=Lj(A.pathname,m);A.origin===T.origin&&P!=null?c=P+A.search+A.hash:x=!0}catch{}let v=yfe(c,{relative:i}),_=Wfe(c,{replace:a,state:o,target:l,preventScrollReset:u,relative:i,viewTransition:d});function E(T){r&&r(T),T.defaultPrevented||_(T)}return M.createElement("a",oI({},h,{href:b||v,onClick:x||s?r:E,ref:n,target:l}))});var TB;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(TB||(TB={}));var AB;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(AB||(AB={}));function Wfe(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:o}=e===void 0?{}:e,l=oy(),c=ay(),u=C7(t,{relative:a});return M.useCallback(d=>{if(Ufe(d,n)){d.preventDefault();let h=r!==void 0?r:W1(c)===W1(u);l(t,{replace:h,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[c,l,u,r,i,n,t,s,a,o])}var Hl=function(){return Hl=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Hl.apply(this,arguments)};function ly(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Gfe(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(u){try{c(r.next(u))}catch(d){a(d)}}function l(u){try{c(r.throw(u))}catch(d){a(d)}}function c(u){u.done?s(u.value):i(u.value).then(o,l)}c((r=r.apply(t,e||[])).next())})}function qfe(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}const Kfe=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Fj extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Xfe extends Fj{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class MB extends Fj{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class PB extends Fj{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var lI;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(lI||(lI={}));class Yfe{constructor(e,{headers:n={},customFetch:r,region:i=lI.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=Kfe(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Gfe(this,arguments,void 0,function*(n,r={}){var i;let s,a;try{const{headers:o,method:l,body:c,signal:u,timeout:d}=r;let h={},{region:m}=r;m||(m=this.region);const b=new URL(`${this.url}/${n}`);m&&m!=="any"&&(h["x-region"]=m,b.searchParams.set("forceFunctionRegion",m));let x;c&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",x=c):typeof c=="string"?(h["Content-Type"]="text/plain",x=c):typeof FormData<"u"&&c instanceof FormData?x=c:(h["Content-Type"]="application/json",x=JSON.stringify(c)):c&&typeof c!="string"&&!(typeof Blob<"u"&&c instanceof Blob)&&!(c instanceof ArrayBuffer)&&!(typeof FormData<"u"&&c instanceof FormData)?x=JSON.stringify(c):x=c;let v=u;d&&(a=new AbortController,s=setTimeout(()=>a.abort(),d),u?(v=a.signal,u.addEventListener("abort",()=>a.abort())):v=a.signal);const _=yield this.fetch(b.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),o),body:x,signal:v}).catch(P=>{throw new Xfe(P)}),E=_.headers.get("x-relay-error");if(E&&E==="true")throw new MB(_);if(!_.ok)throw new PB(_);let T=((i=_.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),A;return T==="application/json"?A=yield _.json():T==="application/octet-stream"||T==="application/pdf"?A=yield _.blob():T==="text/event-stream"?A=_:T==="multipart/form-data"?A=yield _.formData():A=yield _.text(),{data:A,error:null,response:_}}catch(o){return{data:null,error:o,response:o instanceof PB||o instanceof MB?o.context:void 0}}finally{s&&clearTimeout(s)}})}}var Jfe=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},Qfe=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let a=null,o=null,l=null,c=s.status,u=s.statusText;if(s.ok){var d,h;if(n.method!=="HEAD"){var m;const _=await s.text();_===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((m=n.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?o=_:o=JSON.parse(_))}const x=(d=n.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),v=(h=s.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");x&&v&&v.length>1&&(l=parseInt(v[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(o)&&(o.length>1?(a={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,u="Not Acceptable"):o.length===1?o=o[0]:o=null)}else{var b;const x=await s.text();try{a=JSON.parse(x),Array.isArray(a)&&s.status===404&&(o=[],a=null,c=200,u="OK")}catch{s.status===404&&x===""?(c=204,u="No Content"):a={message:x}}if(a&&n.isMaybeSingle&&(!(a==null||(b=a.details)===null||b===void 0)&&b.includes("0 rows"))&&(a=null,c=200,u="OK"),a&&n.shouldThrowOnError)throw new Jfe(a)}return{error:a,data:o,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(i=i.catch(s=>{var a;let o="";const l=s?.cause;if(l){var c,u,d,h;const b=(c=l?.message)!==null&&c!==void 0?c:"",x=(u=l?.code)!==null&&u!==void 0?u:"";o=`${(d=s?.name)!==null&&d!==void 0?d:"FetchError"}: ${s?.message}`,o+=`

Caused by: ${(h=l?.name)!==null&&h!==void 0?h:"Error"}: ${b}`,x&&(o+=` (${x})`),l?.stack&&(o+=`
${l.stack}`)}else{var m;o=(m=s?.stack)!==null&&m!==void 0?m:""}return{error:{message:`${(a=s?.name)!==null&&a!==void 0?a:"FetchError"}: ${s?.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},Zfe=class extends Qfe{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const s=i?`${i}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(s,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:s="text"}={}){var a;const o=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${o};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const CB=new RegExp("[,()]");var Ag=class extends Zfe{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&CB.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&CB.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const s=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${s}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},ehe=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET";let s=!1;const a=(t??"*").split("").map(c=>/\s/.test(c)&&!s?"":(c==='"'&&(s=!s),c)).join(""),{url:o,headers:l}=this.cloneRequestState();return o.searchParams.set("select",a),r&&l.append("Prefer",`count=${r}`),new Ag({method:i,url:o,headers:l,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const i="POST",{url:s,headers:a}=this.cloneRequestState();if(e&&a.append("Prefer",`count=${e}`),n||a.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);s.searchParams.set("columns",l.join(","))}}return new Ag({method:i,url:s,headers:a,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var s;const a="POST",{url:o,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&o.searchParams.set("on_conflict",e),r&&l.append("Prefer",`count=${r}`),i||l.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);o.searchParams.set("columns",u.join(","))}}return new Ag({method:a,url:o,headers:l,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}update(t,{count:e}={}){var n;const r="PATCH",{url:i,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new Ag({method:r,url:i,headers:s,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE",{url:r,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new Ag({method:n,url:r,headers:i,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},the=class I7{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new ehe(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new I7(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){var a;let o;const l=new URL(`${this.url}/rpc/${e}`);let c;const u=m=>m!==null&&typeof m=="object"&&(!Array.isArray(m)||m.some(u)),d=r&&Object.values(n).some(u);d?(o="POST",c=n):r||i?(o=r?"HEAD":"GET",Object.entries(n).filter(([m,b])=>b!==void 0).map(([m,b])=>[m,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([m,b])=>{l.searchParams.append(m,b)})):(o="POST",c=n);const h=new Headers(this.headers);return d?h.set("Prefer",s?`count=${s},return=minimal`:"return=minimal"):s&&h.set("Prefer",`count=${s}`),new Ag({method:o,url:l,headers:h,schema:this.schemaName,body:c,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};class nhe{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const i=r.node,s=parseInt(i.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const rhe="2.91.1",ihe=`realtime-js/${rhe}`,she="1.0.0",k7="2.0.0",RB=k7,cI=1e4,ahe=1e3,ohe=100;var kd;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(kd||(kd={}));var Ai;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ai||(Ai={}));var cl;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(cl||(cl={}));var uI;(function(t){t.websocket="websocket"})(uI||(uI={}));var Dh;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Dh||(Dh={}));class lhe{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},a=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,n,r){var i,s;const a=e.topic,o=(i=e.ref)!==null&&i!==void 0?i:"",l=(s=e.join_ref)!==null&&s!==void 0?s:"",c=e.payload.event,u=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},d=Object.keys(u).length===0?"":JSON.stringify(u);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+o.length+a.length+c.length+d.length,m=new ArrayBuffer(this.HEADER_LENGTH+h);let b=new DataView(m),x=0;b.setUint8(x++,this.KINDS.userBroadcastPush),b.setUint8(x++,l.length),b.setUint8(x++,o.length),b.setUint8(x++,a.length),b.setUint8(x++,c.length),b.setUint8(x++,d.length),b.setUint8(x++,n),Array.from(l,_=>b.setUint8(x++,_.charCodeAt(0))),Array.from(o,_=>b.setUint8(x++,_.charCodeAt(0))),Array.from(a,_=>b.setUint8(x++,_.charCodeAt(0))),Array.from(c,_=>b.setUint8(x++,_.charCodeAt(0))),Array.from(d,_=>b.setUint8(x++,_.charCodeAt(0)));var v=new Uint8Array(m.byteLength+r.byteLength);return v.set(new Uint8Array(m),0),v.set(new Uint8Array(r),m.byteLength),v.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,s,a,o,l]=r;return n({join_ref:i,ref:s,topic:a,event:o,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,n,i)}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2),a=n.getUint8(3),o=n.getUint8(4);let l=this.HEADER_LENGTH+4;const c=r.decode(e.slice(l,l+i));l=l+i;const u=r.decode(e.slice(l,l+s));l=l+s;const d=r.decode(e.slice(l,l+a));l=l+a;const h=e.slice(l,e.byteLength),m=o===this.JSON_ENCODING?JSON.parse(r.decode(h)):h,b={type:this.BROADCAST_EVENT,event:u,payload:m};return a>0&&(b.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:b}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class D7{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ur;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ur||(ur={}));const OB=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,a)=>(s[a]=che(a,t,e,i),s),{}):{}},che=(t,e,n,r)=>{const i=e.find(o=>o.name===t),s=i?.type,a=n[t];return s&&!r.includes(s)?j7(s,a):dI(a)},j7=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return hhe(e,n)}switch(t){case ur.bool:return uhe(e);case ur.float4:case ur.float8:case ur.int2:case ur.int4:case ur.int8:case ur.numeric:case ur.oid:return dhe(e);case ur.json:case ur.jsonb:return fhe(e);case ur.timestamp:return phe(e);case ur.abstime:case ur.date:case ur.daterange:case ur.int4range:case ur.int8range:case ur.money:case ur.reltime:case ur.text:case ur.time:case ur.timestamptz:case ur.timetz:case ur.tsrange:case ur.tstzrange:return dI(e);default:return dI(e)}},dI=t=>t,uhe=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},dhe=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},fhe=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},hhe=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const a=t.slice(1,n);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>j7(e,o))}return t},phe=t=>typeof t=="string"?t.replace(" ","T"):t,L7=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class aP{constructor(e,n,r={},i=cI){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var NB;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(NB||(NB={}));class gx{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=gx.syncState(this.state,i,s,a),this.pendingDiffs.forEach(l=>{this.state=gx.syncDiff(this.state,l,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=gx.syncDiff(this.state,i,s,a),o())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),a=this.transformState(n),o={},l={};return this.map(s,(c,u)=>{a[c]||(l[c]=u)}),this.map(a,(c,u)=>{const d=s[c];if(d){const h=u.map(v=>v.presence_ref),m=d.map(v=>v.presence_ref),b=u.filter(v=>m.indexOf(v.presence_ref)<0),x=d.filter(v=>h.indexOf(v.presence_ref)<0);b.length>0&&(o[c]=b),x.length>0&&(l[c]=x)}else o[c]=u}),this.syncDiff(s,{joins:o,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(o,l)=>{var c;const u=(c=e[o])!==null&&c!==void 0?c:[];if(e[o]=this.cloneDeep(l),u.length>0){const d=e[o].map(m=>m.presence_ref),h=u.filter(m=>d.indexOf(m.presence_ref)<0);e[o].unshift(...h)}r(o,u,l)}),this.map(a,(o,l)=>{let c=e[o];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[o]=c,i(o,c,l),c.length===0&&delete e[o]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var IB;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(IB||(IB={}));var vx;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(vx||(vx={}));var ru;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ru||(ru={}));class Og{constructor(e,n={config:{}},r){var i,s;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Ai.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new aP(this,cl.join,this.params,this.timeout),this.rejoinTimer=new D7(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ai.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ai.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ai.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ai.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ai.errored,this.rejoinTimer.scheduleTimeout())}),this._on(cl.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new gx(this),this.broadcastEndpointURL=L7(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Ai.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[vx.PRESENCE]&&this.bindings[vx.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,d={},h={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(m=>e?.(ru.CHANNEL_ERROR,m)),this._onClose(()=>e?.(ru.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var b;if(this.socket._isManualToken()||this.socket.setAuth(),m===void 0){e?.(ru.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,v=(b=x?.length)!==null&&b!==void 0?b:0,_=[];for(let E=0;E<v;E++){const T=x[E],{filter:{event:A,schema:P,table:R,filter:N}}=T,L=m&&m[E];if(L&&L.event===A&&Og.isFilterValueEqual(L.schema,P)&&Og.isFilterValueEqual(L.table,R)&&Og.isFilterValueEqual(L.filter,N))_.push(Object.assign(Object.assign({},T),{id:L.id}));else{this.unsubscribe(),this.state=Ai.errored,e?.(ru.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,e&&e(ru.SUBSCRIBED);return}}).receive("error",m=>{this.state=Ai.errored,e?.(ru.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e?.(ru.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Ai.joined&&e===vx.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(o.status===202)return{success:!0};let l=o.statusText;try{const c=await o.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:a}=e,o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ai.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(cl.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new aP(this,cl.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ai.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new aP(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>ohe){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:c,join:u}=cl;if(r&&[o,l,c,u].indexOf(a)>=0&&r!==this._joinRef())return;let h=this._onMessage(a,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var b,x,v;return((b=m.filter)===null||b===void 0?void 0:b.event)==="*"||((v=(x=m.filter)===null||x===void 0?void 0:x.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===a}).map(m=>m.callback(h,r)):(s=this.bindings[a])===null||s===void 0||s.filter(m=>{var b,x,v,_,E,T,A,P;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const R=m.id,N=(b=m.filter)===null||b===void 0?void 0:b.event;return R&&((x=n.ids)===null||x===void 0?void 0:x.includes(R))&&(N==="*"||N?.toLocaleLowerCase()===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))&&(!(!((_=m.filter)===null||_===void 0)&&_.table)||m.filter.table===((E=n.data)===null||E===void 0?void 0:E.table))}else{const R=(A=(T=m?.filter)===null||T===void 0?void 0:T.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return R==="*"||R===((P=n?.event)===null||P===void 0?void 0:P.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof h=="object"&&"ids"in h){const b=h.data,{schema:x,table:v,commit_timestamp:_,type:E,errors:T}=b;h=Object.assign(Object.assign({},{schema:x,table:v,commit_timestamp:_,eventType:E,new:{},old:{},errors:T}),this._getPayloadRecords(b))}m.callback(h,r)})}_isClosed(){return this.state===Ai.closed}_isJoined(){return this.state===Ai.joined}_isJoining(){return this.state===Ai.joining}_isLeaving(){return this.state===Ai.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Og.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(cl.close,{},e)}_onError(e){this._on(cl.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ai.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=OB(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=OB(e.columns,e.old_record)),n}}const oP=()=>{},J_={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},mhe=[1e3,2e3,5e3,1e4],ghe=1e4,vhe=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class yhe{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=cI,this.transport=null,this.heartbeatIntervalMs=J_.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=oP,this.ref=0,this.reconnectTimer=null,this.vsn=RB,this.logger=oP,this.conn=null,this.sendBuffer=[],this.serializer=new lhe,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${uI.websocket}`,this.httpEndpoint=L7(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=nhe.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case kd.connecting:return Dh.Connecting;case kd.open:return Dh.Open;case kd.closing:return Dh.Closing;default:return Dh.Closed}}isConnected(){return this.connectionState()===Dh.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new Og(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ahe,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},J_.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const c=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",c)}catch(u){this.log("error","error in heartbeat callback",u)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:i,payload:s,ref:a}=n,o=a?`(${a})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${o}`.trim(),s),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,s,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===kd.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===kd.open||this.conn.readyState===kd.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(cl.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([vhe],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const s={access_token:n,version:ihe};n&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(cl.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new D7(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},J_.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,s,a,o,l,c,u,d,h,m;switch(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:cI,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:J_.HEARTBEAT_INTERVAL,this.worker=(s=e?.worker)!==null&&s!==void 0?s:!1,this.accessToken=(a=e?.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=e?.heartbeatCallback)!==null&&o!==void 0?o:oP,this.vsn=(l=e?.vsn)!==null&&l!==void 0?l:RB,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e?.reconnectAfterMs)!==null&&c!==void 0?c:(b=>mhe[b-1]||ghe),this.vsn){case she:this.encode=(u=e?.encode)!==null&&u!==void 0?u:((b,x)=>x(JSON.stringify(b))),this.decode=(d=e?.decode)!==null&&d!==void 0?d:((b,x)=>x(JSON.parse(b)));break;case k7:this.encode=(h=e?.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(m=e?.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var $x=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function xhe(t,e,n){const r=new URL(e,t);if(n)for(const[i,s]of Object.entries(n))s!==void 0&&r.searchParams.set(i,s);return r.toString()}async function bhe(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function whe(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:s,headers:a}){const o=xhe(t.baseUrl,r,i),l=await bhe(t.auth),c=await e(o,{method:n,headers:{...s?{"Content-Type":"application/json"}:{},...l,...a},body:s?JSON.stringify(s):void 0}),u=await c.text(),d=(c.headers.get("content-type")||"").includes("application/json"),h=d&&u?JSON.parse(u):u;if(!c.ok){const m=d?h:void 0,b=m?.error;throw new $x(b?.message??`Request failed with status ${c.status}`,{status:c.status,icebergType:b?.type,icebergCode:b?.code,details:m})}return{status:c.status,headers:c.headers,data:h}}}}function Q_(t){return t.join("")}var _he=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Q_(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Q_(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Q_(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Q_(t.namespace)}`}),!0}catch(e){if(e instanceof $x&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof $x&&n.status===409)return;throw n}}};function $m(t){return t.join("")}var She=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${$m(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${$m(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${$m(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${$m(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${$m(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${$m(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof $x&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof $x&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},Ehe=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=whe({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new _he(this.client,e),this.tableOps=new She(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},IT=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Or(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var The=class extends IT{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},fI=class extends IT{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const Bj=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Ahe=()=>Response,hI=t=>{if(Array.isArray(t))return t.map(n=>hI(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=hI(r)}),e},Mhe=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Phe=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Vx(t){"@babel/helpers - typeof";return Vx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vx(t)}function Che(t,e){if(Vx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rhe(t){var e=Che(t,"string");return Vx(e)=="symbol"?e:e+""}function Ohe(t,e,n){return(e=Rhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function en(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kB(Object(n),!0).forEach(function(r){Ohe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const lP=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},Nhe=async(t,e,n)=>{t instanceof await Ahe()&&!n?.noResolveJson?t.json().then(r=>{const i=t.status||500,s=r?.statusCode||i+"";e(new The(lP(r),i,s))}).catch(r=>{e(new fI(lP(r),r))}):e(new fI(lP(t),t))},Ihe=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"||!r?i:(Mhe(r)?(i.headers=en({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,e?.duplex&&(i.duplex=e.duplex),en(en({},i),n))};async function mw(t,e,n,r,i,s){return new Promise((a,o)=>{t(n,Ihe(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>Nhe(l,o,r))})}async function Hx(t,e,n,r){return mw(t,"GET",e,n,r)}async function ol(t,e,n,r,i){return mw(t,"POST",e,r,i,n)}async function pI(t,e,n,r,i){return mw(t,"PUT",e,r,i,n)}async function khe(t,e,n,r){return mw(t,"HEAD",e,en(en({},n),{},{noResolveJson:!0}),r)}async function zj(t,e,n,r,i){return mw(t,"DELETE",e,r,i,n)}var Dhe=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Or(e))return{data:null,error:e};throw e}}};let U7;U7=Symbol.toStringTag;var jhe=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[U7]="BlobDownloadBuilder",this.promise=null}asStream(){return new Dhe(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Or(e))return{data:null,error:e};throw e}}};const Lhe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},DB={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Uhe=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=Bj(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,r){var i=this;try{let s;const a=en(en({},DB),r);let o=en(en({},i.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),l&&s.append("metadata",i.encodeMetadata(l)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",a.cacheControl),l&&!s.has("metadata")&&s.append("metadata",i.encodeMetadata(l))):(s=n,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=i.toBase64(i.encodeMetadata(l))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!a.duplex&&(a.duplex="half")),r?.headers&&(o=en(en({},o),r.headers));const c=i._removeEmptyFolders(e),u=i._getFinalPath(c),d=await(t=="PUT"?pI:ol)(i.fetch,`${i.url}/object/${u}`,s,en({headers:o},a?.duplex?{duplex:a.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(s){if(i.shouldThrowOnError)throw s;if(Or(s))return{data:null,error:s};throw s}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var i=this;const s=i._removeEmptyFolders(t),a=i._getFinalPath(s),o=new URL(i.url+`/object/upload/sign/${a}`);o.searchParams.set("token",e);try{let l;const c=en({upsert:DB.upsert},r),u=en(en({},i.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType),{data:{path:s,fullPath:(await pI(i.fetch,o.toString(),l,{headers:u})).Key},error:null}}catch(l){if(i.shouldThrowOnError)throw l;if(Or(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(t,e){var n=this;try{let r=n._getFinalPath(t);const i=en({},n.headers);e?.upsert&&(i["x-upsert"]="true");const s=await ol(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(n.url+s.url),o=a.searchParams.get("token");if(!o)throw new IT("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:o},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Or(r))return{data:null,error:r};throw r}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;try{return{data:await ol(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Or(i))return{data:null,error:i};throw i}}async copy(t,e,n){var r=this;try{return{data:{path:(await ol(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:r.headers})).Key},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Or(i))return{data:null,error:i};throw i}}async createSignedUrl(t,e,n){var r=this;try{let i=r._getFinalPath(t),s=await ol(r.fetch,`${r.url}/object/sign/${i}`,en({expiresIn:e},n?.transform?{transform:n.transform}:{}),{headers:r.headers});const a=n?.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${r.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Or(i))return{data:null,error:i};throw i}}async createSignedUrls(t,e,n){var r=this;try{const i=await ol(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),s=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(a=>en(en({},a),{},{signedUrl:a.signedURL?encodeURI(`${r.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Or(i))return{data:null,error:i};throw i}}download(t,e){const n=typeof e?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(e?.transform||{}),i=r?`?${r}`:"",s=this._getFinalPath(t),a=()=>Hx(this.fetch,`${this.url}/${n}/${s}${i}`,{headers:this.headers,noResolveJson:!0});return new jhe(a,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:hI(await Hx(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Or(r))return{data:null,error:r};throw r}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await khe(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Or(r)&&r instanceof fI){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],i=e?.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const s=typeof e?.transform<"u"?"render/image":"object",a=this.transformOptsToQueryString(e?.transform||{});a!==""&&r.push(a);let o=r.join("&");return o!==""&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${o}`)}}}async remove(t){var e=this;try{return{data:await zj(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Or(n))return{data:null,error:n};throw n}}async list(t,e,n){var r=this;try{const i=en(en(en({},Lhe),e),{},{prefix:t||""});return{data:await ol(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Or(i))return{data:null,error:i};throw i}}async listV2(t,e){var n=this;try{const r=en({},t);return{data:await ol(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Or(r))return{data:null,error:r};throw r}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const F7="2.91.1",B7={"X-Client-Info":`storage-js/${F7}`};var Fhe=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1;const i=new URL(t);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=en(en({},B7),e),this.fetch=Bj(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await Hx(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Or(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await Hx(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Or(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await ol(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Or(r))return{data:null,error:r};throw r}}async updateBucket(t,e){var n=this;try{return{data:await pI(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Or(r))return{data:null,error:r};throw r}}async emptyBucket(t){var e=this;try{return{data:await ol(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Or(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await zj(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Or(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},Bhe=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=en(en({},B7),e),this.fetch=Bj(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await ol(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Or(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);const r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await Hx(e.fetch,i,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Or(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await zj(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Or(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!Phe(t))throw new IT("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new Ehe({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,s){const a=i[s];return typeof a!="function"?a:async(...o)=>{try{return{data:await a.apply(i,o),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}};const $j={"X-Client-Info":`storage-js/${F7}`,"Content-Type":"application/json"};var z7=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function La(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var cP=class extends z7{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},zhe=class extends z7{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const Vj=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),$he=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},jB=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Vhe=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!n?.noResolveJson){const r=t.status||500,i=t;if(typeof i.json=="function")i.json().then(s=>{const a=s?.statusCode||s?.code||r+"";e(new cP(jB(s),r,a))}).catch(()=>{const s=r+"";e(new cP(i.statusText||`HTTP ${r} error`,r,s))});else{const s=r+"";e(new cP(i.statusText||`HTTP ${r} error`,r,s))}}else e(new zhe(jB(t),t))},Hhe=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return r?($he(r)?(i.headers=en({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,en(en({},i),n)):i};async function Whe(t,e,n,r,i,s){return new Promise((a,o)=>{t(n,Hhe(e,r,i,s)).then(l=>{if(!l.ok)throw l;if(r?.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>a(l)).catch(l=>Vhe(l,o,r))})}async function Ua(t,e,n,r,i){return Whe(t,"POST",e,r,i,n)}var Ghe=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=en(en({},$j),e),this.fetch=Vj(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await Ua(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(La(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await Ua(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(La(r))return{data:null,error:r};throw r}}async listIndexes(t){var e=this;try{return{data:await Ua(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(La(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await Ua(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(La(r))return{data:null,error:r};throw r}}},qhe=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=en(en({},$j),e),this.fetch=Vj(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Ua(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(La(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await Ua(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(La(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await Ua(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(La(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await Ua(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(La(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Ua(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(La(n))return{data:null,error:n};throw n}}},Khe=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=en(en({},$j),e),this.fetch=Vj(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Ua(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(La(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await Ua(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(La(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await Ua(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(La(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await Ua(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(La(n))return{data:null,error:n};throw n}}},Xhe=class extends Khe{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new Yhe(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},Yhe=class extends Ghe{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,en(en({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,en(en({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new Jhe(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},Jhe=class extends qhe{constructor(t,e,n,r,i){super(t,e,i),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,en(en({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,en(en({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,en(en({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,en(en({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,en(en({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},Qhe=class extends Fhe{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new Uhe(this.url,this.headers,t,this.fetch)}get vectors(){return new Xhe(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Bhe(this.url+"/iceberg",this.headers,this.fetch)}};const $7="2.91.1",Mg=30*1e3,mI=3,uP=mI*Mg,Zhe="http://localhost:9999",epe="supabase.auth.token",tpe={"X-Client-Info":`gotrue-js/${$7}`},gI="X-Supabase-Api-Version",V7={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},npe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,rpe=600*1e3;class Wx extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Bt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class ipe extends Wx{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function spe(t){return Bt(t)&&t.name==="AuthApiError"}class jh extends Wx{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Ou extends Wx{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Na extends Ou{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ape(t){return Bt(t)&&t.name==="AuthSessionMissingError"}class Vm extends Ou{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Z_ extends Ou{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class eS extends Ou{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ope(t){return Bt(t)&&t.name==="AuthImplicitGrantRedirectError"}class LB extends Ou{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class lpe extends Ou{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class vI extends Ou{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function dP(t){return Bt(t)&&t.name==="AuthRetryableFetchError"}class UB extends Ou{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class yI extends Ou{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const G1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),FB=` 	
\r=`.split(""),cpe=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<FB.length;e+=1)t[FB[e].charCodeAt(0)]=-2;for(let e=0;e<G1.length;e+=1)t[G1[e].charCodeAt(0)]=e;return t})();function BB(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(G1[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(G1[r]),e.queuedBits-=6}}function H7(t,e,n){const r=cpe[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function zB(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=a=>{fpe(a,r,n)};for(let a=0;a<t.length;a+=1)H7(t.charCodeAt(a),i,s);return e.join("")}function upe(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function dpe(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}upe(r,e)}}function fpe(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Yg(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)H7(t.charCodeAt(i),n,r);return new Uint8Array(e)}function hpe(t){const e=[];return dpe(t,n=>e.push(n)),new Uint8Array(e)}function Fh(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>BB(i,n,r)),BB(null,n,r),e.join("")}function ppe(t){return Math.round(Date.now()/1e3)+t}function mpe(){return Symbol("auth-callback")}const is=()=>typeof window<"u"&&typeof document<"u",lh={tested:!1,writable:!1},W7=()=>{if(!is())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(lh.tested)return lh.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),lh.tested=!0,lh.writable=!0}catch{lh.tested=!0,lh.writable=!1}return lh.writable};function gpe(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const G7=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),vpe=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Pg=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},ch=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},rs=async(t,e)=>{await t.removeItem(e)};class kT{constructor(){this.promise=new kT.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}kT.promiseConstructor=Promise;function fP(t){const e=t.split(".");if(e.length!==3)throw new yI("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!npe.test(e[r]))throw new yI("JWT not in base64url format");return{header:JSON.parse(zB(e[0])),payload:JSON.parse(zB(e[1])),signature:Yg(e[2]),raw:{header:e[0],payload:e[1]}}}async function ype(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function xpe(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await t(s);if(!e(s,null,a)){r(a);return}}catch(a){if(!e(s,a)){i(a);return}}})()})}function bpe(t){return("0"+t.toString(16)).substr(-2)}function wpe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,bpe).join("")}async function _pe(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function Spe(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await _pe(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Hm(t,e,n=!1){const r=wpe();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Pg(t,`${e}-code-verifier`,i);const s=await Spe(r);return[s,r===s?"plain":"s256"]}const Epe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Tpe(t){const e=t.headers.get(gI);if(!e||!e.match(Epe))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Ape(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Mpe(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Ppe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Wm(t){if(!Ppe.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function hP(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Cpe(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function $B(t){return JSON.parse(JSON.stringify(t))}const Eh=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Rpe=[502,503,504];async function VB(t){var e;if(!vpe(t))throw new vI(Eh(t),0);if(Rpe.includes(t.status))throw new vI(Eh(t),t.status);let n;try{n=await t.json()}catch(s){throw new jh(Eh(s),s)}let r;const i=Tpe(t);if(i&&i.getTime()>=V7["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new UB(Eh(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Na}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new UB(Eh(n),t.status,n.weak_password.reasons);throw new ipe(Eh(n),t.status||500,r)}const Ope=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Qt(t,e,n,r){var i;const s=Object.assign({},r?.headers);s[gI]||(s[gI]=V7["2024-01-01"].name),r?.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await Npe(t,e,n+o,{headers:s,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}}async function Npe(t,e,n,r,i,s){const a=Ope(e,r,i,s);let o;try{o=await t(n,Object.assign({},a))}catch(l){throw console.error(l),new vI(Eh(l),0)}if(o.ok||await VB(o),r?.noResolveJson)return o;try{return await o.json()}catch(l){await VB(l)}}function rl(t){var e;let n=null;Dpe(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=ppe(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function HB(t){const e=rl(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function jd(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Ipe(t){return{data:t,error:null}}function kpe(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,a=ly(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function WB(t){return t}function Dpe(t){return t.access_token&&t.refresh_token&&t.expires_in}const pP=["global","local","others"];class jpe{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=G7(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=pP[0]){if(pP.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${pP.join(", ")}`);try{return await Qt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Bt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Qt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:jd})}catch(r){if(Bt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=ly(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await Qt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:kpe,redirectTo:n?.redirectTo})}catch(n){if(Bt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Qt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:jd})}catch(n){if(Bt(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Qt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:WB});if(u.error)throw u.error;const d=await u.json(),h=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(l=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(b=>{const x=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(b.split(";")[1].split("=")[1]);c[`${v}Page`]=x}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(Bt(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Wm(e);try{return await Qt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:jd})}catch(n){if(Bt(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Wm(e);try{return await Qt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:jd})}catch(r){if(Bt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Wm(e);try{return await Qt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:jd})}catch(r){if(Bt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Wm(e.userId);try{const{data:n,error:r}=await Qt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Bt(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Wm(e.userId),Wm(e.id);try{return{data:await Qt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Bt(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,s,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Qt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:WB});if(u.error)throw u.error;const d=await u.json(),h=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(l=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(b=>{const x=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(b.split(";")[1].split("=")[1]);c[`${v}Page`]=x}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(Bt(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await Qt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Bt(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Qt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Bt(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await Qt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Bt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Qt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Bt(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Qt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Bt(n))return{data:null,error:n};throw n}}}function GB(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Gm={debug:!!(globalThis&&W7()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class q7 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Lpe extends q7{}async function Upe(t,e,n){Gm.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Gm.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Gm.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Gm.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Gm.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Lpe(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Gm.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Fpe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function K7(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Bpe(t){return parseInt(t,16)}function zpe(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function $pe(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:a,notBefore:o,requestId:l,resources:c,scheme:u,uri:d,version:h}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const m=K7(t.address),b=u?`${u}://${r}`:r,x=t.statement?`${t.statement}
`:"",v=`${b} wants you to sign in with your Ethereum account:
${m}

${x}`;let _=`URI: ${d}
Version: ${h}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${s.toISOString()}`;if(i&&(_+=`
Expiration Time: ${i.toISOString()}`),o&&(_+=`
Not Before: ${o.toISOString()}`),l&&(_+=`
Request ID: ${l}`),c){let E=`
Resources:`;for(const T of c){if(!T||typeof T!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${T}`);E+=`
- ${T}`}_+=E}return`${v}
${_}`}class ui extends Error{constructor({message:e,code:n,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class q1 extends ui{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function Vpe({error:t,options:e}){var n,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ui({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ui({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ui({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ui({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new ui({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new ui({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new ui({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new ui({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(X7(a)){if(s.rp.id!==a)return new ui({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ui({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new ui({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new ui({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ui({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Hpe({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ui({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new ui({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(X7(r)){if(n.rpId!==r)return new ui({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ui({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new ui({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ui({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Wpe{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Gpe=new Wpe;function qpe(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=ly(t,["challenge","user","excludeCredentials"]),s=Yg(e).buffer,a=Object.assign(Object.assign({},n),{id:Yg(n.id).buffer}),o=Object.assign(Object.assign({},i),{challenge:s,user:a});if(r&&r.length>0){o.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];o.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Yg(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return o}function Kpe(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=ly(t,["challenge","allowCredentials"]),i=Yg(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const o=n[a];s.allowCredentials[a]=Object.assign(Object.assign({},o),{id:Yg(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return s}function Xpe(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Fh(new Uint8Array(t.response.attestationObject)),clientDataJSON:Fh(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Ype(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Fh(new Uint8Array(i.authenticatorData)),clientDataJSON:Fh(new Uint8Array(i.clientDataJSON)),signature:Fh(new Uint8Array(i.signature)),userHandle:i.userHandle?Fh(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function X7(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function qB(){var t,e;return!!(is()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Jpe(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new q1("Browser returned unexpected credential type",e)}:{data:null,error:new q1("Empty credential response",e)}}catch(e){return{data:null,error:Vpe({error:e,options:t})}}}async function Qpe(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new q1("Browser returned unexpected credential type",e)}:{data:null,error:new q1("Empty credential response",e)}}catch(e){return{data:null,error:Hpe({error:e,options:t})}}}const Zpe={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},eme={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function K1(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const s in i){const a=i[s];if(a!==void 0)if(Array.isArray(a))r[s]=a;else if(n(a))r[s]=a;else if(e(a)){const o=r[s];e(o)?r[s]=K1(o,a):r[s]=K1(a)}else r[s]=a}return r}function tme(t,e){return K1(Zpe,t,e||{})}function nme(t,e){return K1(eme,t,e||{})}class rme{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},s){try{const{data:a,error:o}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:o};const l=i??Gpe.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:c}=a.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(a.webauthn.type){case"create":{const c=tme(a.webauthn.credential_options.publicKey,s?.create),{data:u,error:d}=await Jpe({publicKey:c,signal:l});return u?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}case"request":{const c=nme(a.webauthn.credential_options.publicKey,s?.request),{data:u,error:d}=await Qpe(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:c,signal:l}));return u?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}}}catch(a){return Bt(a)?{data:null,error:a}:{data:null,error:new jh("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new Wx("rpId is required for WebAuthn authentication")};try{if(!qB())return{data:null,error:new jh("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!a)return{data:null,error:o};const{webauthn:l}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(a){return Bt(a)?{data:null,error:a}:{data:null,error:new jh("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new Wx("rpId is required for WebAuthn registration")};try{if(!qB())return{data:null,error:new jh("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(u=>{var d;return(d=u.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===e&&h.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u?.id}):void 0),{data:null,error:o};const{data:l,error:c}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:a.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(a){return Bt(a)?{data:null,error:a}:{data:null,error:new jh("Unexpected error in register",a)}}}}Fpe();const ime={url:Zhe,storageKey:epe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:tpe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function KB(t,e,n){return await n()}const qm={};class Gx{get jwks(){var e,n;return(n=(e=qm[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){qm[this.storageKey]=Object.assign(Object.assign({},qm[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=qm[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){qm[this.storageKey]=Object.assign(Object.assign({},qm[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},ime),e);if(this.storageKey=s.storageKey,this.instanceID=(n=Gx.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Gx.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&is()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new jpe({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=G7(s.fetch),this.lock=s.lock||KB,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,this.lockAcquireTimeout=s.lockAcquireTimeout,s.lock?this.lock=s.lock:this.persistSession&&is()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=Upe:this.lock=KB,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new rme(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:W7()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=GB(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=GB(this.memoryStorage)),is()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${$7}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(is()&&(n=gpe(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),is()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),ope(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return{error:s}}const{session:a,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Bt(n)?this._returnResult({error:n}):this._returnResult({error:new jh("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await Qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:rl}),{data:a,error:o}=s;if(o||!a)return this._returnResult({data:{user:null,session:null},error:o});const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(Bt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:u,password:d,options:h}=e;let m=null,b=null;this.flowType==="pkce"&&([m,b]=await Hm(this.storage,this.storageKey)),s=await Qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h?.emailRedirectTo,body:{email:u,password:d,data:(n=h?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:m,code_challenge_method:b},xform:rl})}else if("phone"in e){const{phone:u,password:d,options:h}=e;s=await Qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=h?.data)!==null&&r!==void 0?r:{},channel:(i=h?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:rl})}else throw new Z_("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return await rs(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(await rs(this.storage,`${this.storageKey}-code-verifier`),Bt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:a,options:o}=e;n=await Qt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:HB})}else if("phone"in e){const{phone:s,password:a,options:o}=e;n=await Qt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:HB})}else throw new Z_("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const s=new Vm;return this._returnResult({data:{user:null,session:null},error:s})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Bt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,s,a,o,l,c,u,d,h;let m,b;if("message"in e)m=e.message,b=e.signature;else{const{chain:x,wallet:v,statement:_,options:E}=e;let T;if(is())if(typeof v=="object")T=v;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")T=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!E?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=v}const A=new URL((n=E?.url)!==null&&n!==void 0?n:window.location.href),P=await T.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!P||P.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const R=K7(P[0]);let N=(r=E?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!N){const I=await T.request({method:"eth_chainId"});N=Bpe(I)}const L={domain:A.host,address:R,statement:_,uri:A.href,version:"1",chainId:N,nonce:(i=E?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(s=E?.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(o=E?.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(l=E?.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=E?.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=E?.signInWithEthereum)===null||u===void 0?void 0:u.resources};m=$pe(L),b=await T.request({method:"personal_sign",params:[zpe(m),R]})}try{const{data:x,error:v}=await Qt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:b},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:rl});if(v)throw v;if(!x||!x.session||!x.user){const _=new Vm;return this._returnResult({data:{user:null,session:null},error:_})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:v})}catch(x){if(Bt(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(e){var n,r,i,s,a,o,l,c,u,d,h,m;let b,x;if("message"in e)b=e.message,x=e.signature;else{const{chain:v,wallet:_,statement:E,options:T}=e;let A;if(is())if(typeof _=="object")A=_;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))A=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!T?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=_}const P=new URL((n=T?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in A&&A.signIn){const R=await A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},T?.signInWithSolana),{version:"1",domain:P.host,uri:P.href}),E?{statement:E}:null));let N;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")N=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)N=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)b=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),x=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${P.host} wants you to sign in with your Solana account:`,A.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${P.href}`,`Issued At: ${(i=(r=T?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=T?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${T.signInWithSolana.notBefore}`]:[],...!((a=T?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${T.signInWithSolana.expirationTime}`]:[],...!((o=T?.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${T.signInWithSolana.chainId}`]:[],...!((l=T?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${T.signInWithSolana.nonce}`]:[],...!((c=T?.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${T.signInWithSolana.requestId}`]:[],...!((d=(u=T?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...T.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const R=await A.signMessage(new TextEncoder().encode(b),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=R}}try{const{data:v,error:_}=await Qt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:Fh(x)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:rl});if(_)throw _;if(!v||!v.session||!v.user){const E=new Vm;return this._returnResult({data:{user:null,session:null},error:E})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:_})}catch(v){if(Bt(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(e){const n=await ch(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new lpe;const{data:s,error:a}=await Qt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:rl});if(await rs(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){const o=new Vm;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(await rs(this.storage,`${this.storageKey}-code-verifier`),Bt(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:a}=e,o=await Qt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:rl}),{data:l,error:c}=o;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new Vm;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(n){if(Bt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,s,a;try{if("email"in e){const{email:o,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Hm(this.storage,this.storageKey));const{error:d}=await Qt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=l?.data)!==null&&n!==void 0?n:{},create_user:(r=l?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:o,options:l}=e,{data:c,error:u}=await Qt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=l?.data)!==null&&i!==void 0?i:{},create_user:(s=l?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(a=l?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c?.message_id},error:u})}throw new Z_("You must provide either an email or phone number.")}catch(o){if(await rs(this.storage,`${this.storageKey}-code-verifier`),Bt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await Qt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:rl});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,c=a.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(Bt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,s,a;try{let o=null,l=null;this.flowType==="pkce"&&([o,l]=await Hm(this.storage,this.storageKey));const c=await Qt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:Ipe});return!((s=c.data)===null||s===void 0)&&s.url&&is()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(o){if(await rs(this.storage,`${this.storageKey}-code-verifier`),Bt(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Na;const{error:i}=await Qt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(Bt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:a}=await Qt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:a,error:o}=await Qt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:o})}throw new Z_("You must provide either an email or phone number and a type")}catch(n){if(Bt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await ch(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<uP:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await ch(this.userStorage,this.storageKey+"-user");a?.user?e.user=a.user:e.user=hP()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=Cpe(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await Qt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:jd}):await this._useSession(async n=>{var r,i,s;const{data:a,error:o}=n;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Na}:await Qt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:jd})})}catch(n){if(Bt(n))return ape(n)&&(await this._removeSession(),await rs(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Na;const a=i.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await Hm(this.storage,this.storageKey));const{data:c,error:u}=await Qt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:jd});if(u)throw u;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(await rs(this.storage,`${this.storageKey}-code-verifier`),Bt(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Na;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:a}=fP(e.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(n){if(Bt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:o}=n;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new Na;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Bt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!is())throw new eS("No browser detected.");if(e.error||e.error_description||e.error_code)throw new eS(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new LB("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new eS("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new LB("No code detected.");const{data:E,error:T}=await this._exchangeCodeForSession(e.code);if(T)throw T;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:o,expires_at:l,token_type:c}=e;if(!s||!o||!a||!c)throw new eS("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(o);let h=u+d;l&&(h=parseInt(l));const m=h-u;m*1e3<=Mg&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${d}s`);const b=h-d;u-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,h,u):u-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,h,u);const{data:x,error:v}=await this._getUser(s);if(v)throw v;const _={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:d,expires_at:h,refresh_token:a,token_type:c,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:_,redirectType:e.type},error:null})}catch(r){if(Bt(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await ch(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({error:s});const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(spe(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return e!=="others"&&(await this._removeSession(),await rs(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=mpe(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Hm(this.storage,this.storageKey,!0));try{return await Qt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(await rs(this.storage,`${this.storageKey}-code-verifier`),Bt(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Bt(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var a,o,l,c,u;const{data:d,error:h}=s;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Qt(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return is()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r?.url),this._returnResult({data:{provider:e.provider,url:r?.url},error:null})}catch(r){if(Bt(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:a,provider:o,token:l,access_token:c,nonce:u}=e,d=await Qt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:o,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:rl}),{data:h,error:m}=d;return m?this._returnResult({data:{user:null,session:null},error:m}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new Vm}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:m}))}catch(i){if(await rs(this.storage,`${this.storageKey}-code-verifier`),Bt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)throw a;return await Qt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Bt(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await xpe(async i=>(i>0&&await ype(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Qt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:rl})),(i,s)=>{const a=200*Math.pow(2,i);return s&&dP(s)&&Date.now()+a-r<Mg})}catch(r){if(this._debug(n,"error",r),Bt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),is()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await ch(this.storage,this.storageKey);if(i&&this.userStorage){let a=await ch(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await Pg(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a?.user)!==null&&e!==void 0?e:hP()}else if(i&&!i.user&&!i.user){const a=await ch(this.storage,this.storageKey+"-user");a&&a?.user?(i.user=a.user,await rs(this.storage,this.storageKey+"-user"),await Pg(this.storage,this.storageKey,i)):i.user=hP()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<uP;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${uP}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),dP(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(i.access_token);!o&&a?.user?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Na;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new kT;const{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new Na;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={data:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(i,"error",s),Bt(s)){const a={data:null,error:s};return dP(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await rs(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Pg(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=$B(i);await Pg(this.storage,this.storageKey,s)}else{const i=$B(n);await Pg(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await rs(this.storage,this.storageKey),await rs(this.storage,this.storageKey+"-code-verifier"),await rs(this.storage,this.storageKey+"-user"),this.userStorage&&await rs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&is()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Mg);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Mg);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Mg}ms, refresh threshold is ${mI} ticks`),i<=mI&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof q7)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!is()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,a]=await Hm(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(o.toString())}if(r?.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?this._returnResult({data:null,error:s}):await Qt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Bt(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await Qt(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l?.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(Bt(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Xpe(e.webauthn.credential_response):Ype(e.webauthn.credential_response)})}:{code:e.code}),{data:o,error:l}=await Qt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:l}))})}catch(n){if(Bt(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const a=await Qt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:o}=a;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:qpe(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Kpe(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Bt(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=n?.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=fP(r.access_token);let a=null;s.aal&&(a=s.aal);let o=a;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(o="aal2");const c=s.amr||[];return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await Qt(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Na})})}catch(n){if(Bt(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Na});const a=await Qt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&is()&&!n?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(r){if(Bt(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Na});const a=await Qt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&is()&&!n?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(r){if(Bt(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await Qt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Na})})}catch(e){if(Bt(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await Qt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Na})})}catch(n){if(Bt(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+rpe>i)return r;const{data:s,error:a}=await Qt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(o=>o.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:m,error:b}=await this.getSession();if(b||!m.session)return this._returnResult({data:null,error:b});r=m.session.access_token}const{header:i,payload:s,signature:a,raw:{header:o,payload:l}}=fP(r);n?.allowExpired||Ape(s.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!c){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:s,header:i,signature:a},error:null}}const u=Mpe(i.alg),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,a,hpe(`${o}.${l}`)))throw new yI("Invalid JWT signature");return{data:{claims:s,header:i,signature:a},error:null}}catch(r){if(Bt(r))return this._returnResult({data:null,error:r});throw r}}}Gx.nextInstanceID={};const sme=Gx,ame="2.91.1";let ex="";typeof Deno<"u"?ex="deno":typeof document<"u"?ex="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ex="react-native":ex="node";const ome={"X-Client-Info":`supabase-js-${ex}/${ame}`},lme={headers:ome},cme={schema:"public"},ume={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},dme={};function qx(t){"@babel/helpers - typeof";return qx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qx(t)}function fme(t,e){if(qx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(qx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hme(t){var e=fme(t,"string");return qx(e)=="symbol"?e:e+""}function pme(t,e,n){return(e=hme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XB(Object(n),!0).forEach(function(r){pme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const mme=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),gme=()=>Headers,vme=(t,e,n)=>{const r=mme(n),i=gme();return async(s,a)=>{var o;const l=(o=await e())!==null&&o!==void 0?o:t;let c=new i(a?.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,zr(zr({},a),{},{headers:c}))}};function yme(t){return t.endsWith("/")?t:t+"/"}function xme(t,e){var n,r;const{db:i,auth:s,realtime:a,global:o}=t,{db:l,auth:c,realtime:u,global:d}=e,h={db:zr(zr({},l),i),auth:zr(zr({},c),s),realtime:zr(zr({},u),a),storage:{},global:zr(zr(zr({},d),o),{},{headers:zr(zr({},(n=d?.headers)!==null&&n!==void 0?n:{}),(r=o?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}function bme(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(yme(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var wme=class extends sme{constructor(t){super(t)}},_me=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;const s=bme(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const a=`sb-${s.hostname.split(".")[0]}-auth-token`,o={db:cme,realtime:dme,auth:zr(zr({},ume),{},{storageKey:a}),global:lme},l=xme(n??{},o);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=l.global.headers)!==null&&i!==void 0?i:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(u,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=vme(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(zr({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(u=>this.realtime.setAuth(u)).catch(u=>console.warn("Failed to set initial Realtime auth token:",u)),this.rest=new the(new URL("rest/v1",s).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new Qhe(this.storageUrl.href,this.headers,this.fetch,n?.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new Yfe(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:s,flowType:a,lock:o,debug:l,throwOnError:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new wme({url:this.authUrl.href,headers:zr(zr({},h),u),storageKey:s,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:a,lock:o,debug:l,throwOnError:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new yhe(this.realtimeUrl.href,zr(zr({},t),{},{params:zr(zr({},{apikey:this.supabaseKey}),t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e?.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Sme=(t,e,n)=>new _me(t,e,n);function Eme(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}Eme()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Tme="https://jyxoltkvmtyfbfysbknb.supabase.co",Ame="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp5eG9sdGt2bXR5ZmJmeXNia25iIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkzNTYzNzEsImV4cCI6MjA4NDkzMjM3MX0.DwGUUMDCDrjXNbsPrLllWn1TSu1u9oa8Bzvb0UY6ZRo",ot=Sme(Tme,Ame,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),Y7=M.createContext(void 0);function Mme({children:t}){const[e,n]=M.useState(null),[r,i]=M.useState(null),[s,a]=M.useState(null),[o,l]=M.useState(!0),c=async b=>{const{data:x,error:v}=await ot.from("profiles").select("*").eq("user_id",b).single();!v&&x&&a(x)};M.useEffect(()=>{const{data:{subscription:b}}=ot.auth.onAuthStateChange(async(x,v)=>{i(v),n(v?.user??null),v?.user?setTimeout(()=>c(v.user.id),0):a(null),l(!1)});return ot.auth.getSession().then(({data:{session:x}})=>{i(x),n(x?.user??null),x?.user&&c(x.user.id),l(!1)}),()=>b.unsubscribe()},[]);const u=async(b,x,v)=>{const{error:_}=await ot.auth.signUp({email:b,password:x,options:{emailRedirectTo:window.location.origin,data:{name:v}}});return{error:_}},d=async(b,x)=>{const{error:v}=await ot.auth.signInWithPassword({email:b,password:x});return{error:v}},h=async()=>{await ot.auth.signOut(),n(null),i(null),a(null)},m=async b=>{if(!e)return{error:new Error("Not authenticated")};const{error:x}=await ot.from("profiles").update(b).eq("user_id",e.id);return x||await c(e.id),{error:x}};return p.jsx(Y7.Provider,{value:{user:e,session:r,profile:s,isLoading:o,signUp:u,signIn:d,signOut:h,updateProfile:m},children:t})}function qr(){const t=M.useContext(Y7);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const Hj=M.createContext({});function Wj(t){const e=M.useRef(null);return e.current===null&&(e.current=t()),e.current}const DT=M.createContext(null),Gj=M.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class Pme extends M.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Cme({children:t,isPresent:e}){const n=M.useId(),r=M.useRef(null),i=M.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=M.useContext(Gj);return M.useInsertionEffect(()=>{const{width:a,height:o,top:l,left:c}=i.current;if(e||!r.current||!a||!o)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return s&&(u.nonce=s),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),p.jsx(Pme,{isPresent:e,childRef:r,sizeRef:i,children:M.cloneElement(t,{ref:r})})}const Rme=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a})=>{const o=Wj(Ome),l=M.useId(),c=M.useCallback(d=>{o.set(d,!0);for(const h of o.values())if(!h)return;r&&r()},[o,r]),u=M.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:c,register:d=>(o.set(d,!1),()=>o.delete(d))}),s?[Math.random(),c]:[n,c]);return M.useMemo(()=>{o.forEach((d,h)=>o.set(h,!1))},[n]),M.useEffect(()=>{!n&&!o.size&&r&&r()},[n]),a==="popLayout"&&(t=p.jsx(Cme,{isPresent:n,children:t})),p.jsx(DT.Provider,{value:u,children:t})};function Ome(){return new Map}function J7(t=!0){const e=M.useContext(DT);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=M.useId();M.useEffect(()=>{t&&i(s)},[t]);const a=M.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,a]:[!0]}const tS=t=>t.key||"";function YB(t){const e=[];return M.Children.forEach(t,n=>{M.isValidElement(n)&&e.push(n)}),e}const qj=typeof window<"u",Q7=qj?M.useLayoutEffect:M.useEffect,cf=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:a=!1})=>{const[o,l]=J7(a),c=M.useMemo(()=>YB(t),[t]),u=a&&!o?[]:c.map(tS),d=M.useRef(!0),h=M.useRef(c),m=Wj(()=>new Map),[b,x]=M.useState(c),[v,_]=M.useState(c);Q7(()=>{d.current=!1,h.current=c;for(let A=0;A<v.length;A++){const P=tS(v[A]);u.includes(P)?m.delete(P):m.get(P)!==!0&&m.set(P,!1)}},[v,u.length,u.join("-")]);const E=[];if(c!==b){let A=[...c];for(let P=0;P<v.length;P++){const R=v[P],N=tS(R);u.includes(N)||(A.splice(P,0,R),E.push(R))}s==="wait"&&E.length&&(A=E),_(YB(A)),x(c);return}const{forceRender:T}=M.useContext(Hj);return p.jsx(p.Fragment,{children:v.map(A=>{const P=tS(A),R=a&&!o?!1:c===v||u.includes(P),N=()=>{if(m.has(P))m.set(P,!0);else return;let L=!0;m.forEach(I=>{I||(L=!1)}),L&&(T?.(),_(h.current),a&&l?.(),r&&r())};return p.jsx(Rme,{isPresent:R,initial:!d.current||n?void 0:!1,custom:R?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:R?void 0:N,children:A},P)})})},Va=t=>t;let Z7=Va;function Kj(t){let e;return()=>(e===void 0&&(e=t()),e)}const uv=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},hu=t=>t*1e3,pu=t=>t/1e3,Nme={useManualTiming:!1};function Ime(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(c){s.has(c)&&(l.schedule(c),t()),c(a)}const l={schedule:(c,u=!1,d=!1)=>{const m=d&&r?e:n;return u&&s.add(c),m.has(c)||m.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(a=c,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(o),e.clear(),r=!1,i&&(i=!1,l.process(c))}};return l}const nS=["read","resolveKeyframes","update","preRender","render","postRender"],kme=40;function eK(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=nS.reduce((_,E)=>(_[E]=Ime(s),_),{}),{read:o,resolveKeyframes:l,update:c,preRender:u,render:d,postRender:h}=a,m=()=>{const _=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(_-i.timestamp,kme),1),i.timestamp=_,i.isProcessing=!0,o.process(i),l.process(i),c.process(i),u.process(i),d.process(i),h.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(m))},b=()=>{n=!0,r=!0,i.isProcessing||t(m)};return{schedule:nS.reduce((_,E)=>{const T=a[E];return _[E]=(A,P=!1,R=!1)=>(n||b(),T.schedule(A,P,R)),_},{}),cancel:_=>{for(let E=0;E<nS.length;E++)a[nS[E]].cancel(_)},state:i,steps:a}}const{schedule:xr,cancel:Qd,state:as,steps:mP}=eK(typeof requestAnimationFrame<"u"?requestAnimationFrame:Va,!0),tK=M.createContext({strict:!1}),JB={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},dv={};for(const t in JB)dv[t]={isEnabled:e=>JB[t].some(n=>!!e[n])};function Dme(t){for(const e in t)dv[e]={...dv[e],...t[e]}}const jme=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function X1(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||jme.has(t)}let nK=t=>!X1(t);function Lme(t){t&&(nK=e=>e.startsWith("on")?!X1(e):t(e))}try{Lme(require("@emotion/is-prop-valid").default)}catch{}function Ume(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(nK(i)||n===!0&&X1(i)||!e&&!X1(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function Fme(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const jT=M.createContext({});function Kx(t){return typeof t=="string"||Array.isArray(t)}function LT(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Xj=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Yj=["initial",...Xj];function UT(t){return LT(t.animate)||Yj.some(e=>Kx(t[e]))}function rK(t){return!!(UT(t)||t.variants)}function Bme(t,e){if(UT(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Kx(n)?n:void 0,animate:Kx(r)?r:void 0}}return t.inherit!==!1?e:{}}function zme(t){const{initial:e,animate:n}=Bme(t,M.useContext(jT));return M.useMemo(()=>({initial:e,animate:n}),[QB(e),QB(n)])}function QB(t){return Array.isArray(t)?t.join(" "):t}const $me=Symbol.for("motionComponentSymbol");function Ng(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Vme(t,e,n){return M.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ng(n)&&(n.current=r))},[e])}const Jj=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Hme="framerAppearId",iK="data-"+Jj(Hme),{schedule:Qj}=eK(queueMicrotask,!1),sK=M.createContext({});function Wme(t,e,n,r,i){var s,a;const{visualElement:o}=M.useContext(jT),l=M.useContext(tK),c=M.useContext(DT),u=M.useContext(Gj).reducedMotion,d=M.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:o,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,m=M.useContext(sK);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&Gme(d.current,n,i,m);const b=M.useRef(!1);M.useInsertionEffect(()=>{h&&b.current&&h.update(n,c)});const x=n[iK],v=M.useRef(!!x&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,x))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,x)));return Q7(()=>{h&&(b.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),Qj.render(h.render),v.current&&h.animationState&&h.animationState.animateChanges())}),M.useEffect(()=>{h&&(!v.current&&h.animationState&&h.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var _;(_=window.MotionHandoffMarkAsComplete)===null||_===void 0||_.call(window,x)}),v.current=!1))}),h}function Gme(t,e,n,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:aK(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&Ng(o),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function aK(t){if(t)return t.options.allowProjection!==!1?t.projection:aK(t.parent)}function qme({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,a;t&&Dme(t);function o(c,u){let d;const h={...M.useContext(Gj),...c,layoutId:Kme(c)},{isStatic:m}=h,b=zme(c),x=r(c,m);if(!m&&qj){Xme();const v=Yme(h);d=v.MeasureLayout,b.visualElement=Wme(i,x,h,e,v.ProjectionNode)}return p.jsxs(jT.Provider,{value:b,children:[d&&b.visualElement?p.jsx(d,{visualElement:b.visualElement,...h}):null,n(i,c,Vme(x,b.visualElement,u),x,m,b.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(a=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&a!==void 0?a:""})`}`;const l=M.forwardRef(o);return l[$me]=i,l}function Kme({layoutId:t}){const e=M.useContext(Hj).id;return e&&t!==void 0?e+"-"+t:t}function Xme(t,e){M.useContext(tK).strict}function Yme(t){const{drag:e,layout:n}=dv;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Jme=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Zj(t){return typeof t!="string"||t.includes("-")?!1:!!(Jme.indexOf(t)>-1||/[A-Z]/u.test(t))}function ZB(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function eL(t,e,n,r){if(typeof e=="function"){const[i,s]=ZB(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=ZB(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const xI=t=>Array.isArray(t),Qme=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Zme=t=>xI(t)?t[t.length-1]||0:t,Ms=t=>!!(t&&t.getVelocity);function E1(t){const e=Ms(t)?t.get():t;return Qme(e)?e.toValue():e}function ege({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const a={latestValues:tge(r,i,s,t),renderState:e()};return n&&(a.onMount=o=>n({props:r,current:o,...a}),a.onUpdate=o=>n(o)),a}const oK=t=>(e,n)=>{const r=M.useContext(jT),i=M.useContext(DT),s=()=>ege(t,e,r,i);return n?s():Wj(s)};function tge(t,e,n,r){const i={},s=r(t,{});for(const h in s)i[h]=E1(s[h]);let{initial:a,animate:o}=t;const l=UT(t),c=rK(t);e&&c&&!l&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let u=n?n.initial===!1:!1;u=u||a===!1;const d=u?o:a;if(d&&typeof d!="boolean"&&!LT(d)){const h=Array.isArray(d)?d:[d];for(let m=0;m<h.length;m++){const b=eL(t,h[m]);if(b){const{transitionEnd:x,transition:v,..._}=b;for(const E in _){let T=_[E];if(Array.isArray(T)){const A=u?T.length-1:0;T=T[A]}T!==null&&(i[E]=T)}for(const E in x)i[E]=x[E]}}}return i}const cy=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Cp=new Set(cy),lK=t=>e=>typeof e=="string"&&e.startsWith(t),cK=lK("--"),nge=lK("var(--"),tL=t=>nge(t)?rge.test(t.split("/*")[0].trim()):!1,rge=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,uK=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Su=(t,e,n)=>n>e?e:n<t?t:n,uy={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Xx={...uy,transform:t=>Su(0,1,t)},rS={...uy,default:1},gw=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Od=gw("deg"),Yl=gw("%"),Zt=gw("px"),ige=gw("vh"),sge=gw("vw"),e4={...Yl,parse:t=>Yl.parse(t)/100,transform:t=>Yl.transform(t*100)},age={borderWidth:Zt,borderTopWidth:Zt,borderRightWidth:Zt,borderBottomWidth:Zt,borderLeftWidth:Zt,borderRadius:Zt,radius:Zt,borderTopLeftRadius:Zt,borderTopRightRadius:Zt,borderBottomRightRadius:Zt,borderBottomLeftRadius:Zt,width:Zt,maxWidth:Zt,height:Zt,maxHeight:Zt,top:Zt,right:Zt,bottom:Zt,left:Zt,padding:Zt,paddingTop:Zt,paddingRight:Zt,paddingBottom:Zt,paddingLeft:Zt,margin:Zt,marginTop:Zt,marginRight:Zt,marginBottom:Zt,marginLeft:Zt,backgroundPositionX:Zt,backgroundPositionY:Zt},oge={rotate:Od,rotateX:Od,rotateY:Od,rotateZ:Od,scale:rS,scaleX:rS,scaleY:rS,scaleZ:rS,skew:Od,skewX:Od,skewY:Od,distance:Zt,translateX:Zt,translateY:Zt,translateZ:Zt,x:Zt,y:Zt,z:Zt,perspective:Zt,transformPerspective:Zt,opacity:Xx,originX:e4,originY:e4,originZ:Zt},t4={...uy,transform:Math.round},nL={...age,...oge,zIndex:t4,size:Zt,fillOpacity:Xx,strokeOpacity:Xx,numOctaves:t4},lge={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},cge=cy.length;function uge(t,e,n){let r="",i=!0;for(let s=0;s<cge;s++){const a=cy[s],o=t[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const c=uK(o,nL[a]);if(!l){i=!1;const u=lge[a]||a;r+=`${u}(${c}) `}n&&(e[a]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function rL(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let a=!1,o=!1;for(const l in e){const c=e[l];if(Cp.has(l)){a=!0;continue}else if(cK(l)){i[l]=c;continue}else{const u=uK(c,nL[l]);l.startsWith("origin")?(o=!0,s[l]=u):r[l]=u}}if(e.transform||(a||n?r.transform=uge(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const dge={offset:"stroke-dashoffset",array:"stroke-dasharray"},fge={offset:"strokeDashoffset",array:"strokeDasharray"};function hge(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?dge:fge;t[s.offset]=Zt.transform(-r);const a=Zt.transform(e),o=Zt.transform(n);t[s.array]=`${a} ${o}`}function n4(t,e,n){return typeof t=="string"?t:Zt.transform(e+n*t)}function pge(t,e,n){const r=n4(e,t.x,t.width),i=n4(n,t.y,t.height);return`${r} ${i}`}function iL(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...c},u,d){if(rL(t,c,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:m,dimensions:b}=t;h.transform&&(b&&(m.transform=h.transform),delete h.transform),b&&(i!==void 0||s!==void 0||m.transform)&&(m.transformOrigin=pge(b,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),a!==void 0&&hge(h,a,o,l,!1)}const sL=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),dK=()=>({...sL(),attrs:{}}),aL=t=>typeof t=="string"&&t.toLowerCase()==="svg";function fK(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const hK=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function pK(t,e,n,r){fK(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(hK.has(i)?i:Jj(i),e.attrs[i])}const Y1={};function mge(t){Object.assign(Y1,t)}function mK(t,{layout:e,layoutId:n}){return Cp.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Y1[t]||t==="opacity")}function oL(t,e,n){var r;const{style:i}=t,s={};for(const a in i)(Ms(i[a])||e.style&&Ms(e.style[a])||mK(a,t)||((r=n?.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[a]=i[a]);return s}function gK(t,e,n){const r=oL(t,e,n);for(const i in t)if(Ms(t[i])||Ms(e[i])){const s=cy.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function gge(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const r4=["x","y","width","height","cx","cy","r"],vge={useVisualState:oK({scrapeMotionValuesFromProps:gK,createRenderState:dK,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const o in i)if(Cp.has(o)){s=!0;break}}if(!s)return;let a=!e;if(e)for(let o=0;o<r4.length;o++){const l=r4[o];t[l]!==e[l]&&(a=!0)}a&&xr.read(()=>{gge(n,r),xr.render(()=>{iL(r,i,aL(n.tagName),t.transformTemplate),pK(n,r)})})}})},yge={useVisualState:oK({scrapeMotionValuesFromProps:oL,createRenderState:sL})};function vK(t,e,n){for(const r in e)!Ms(e[r])&&!mK(r,n)&&(t[r]=e[r])}function xge({transformTemplate:t},e){return M.useMemo(()=>{const n=sL();return rL(n,e,t),Object.assign({},n.vars,n.style)},[e])}function bge(t,e){const n=t.style||{},r={};return vK(r,n,t),Object.assign(r,xge(t,e)),r}function wge(t,e){const n={},r=bge(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function _ge(t,e,n,r){const i=M.useMemo(()=>{const s=dK();return iL(s,e,aL(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};vK(s,t.style,t),i.style={...s,...i.style}}return i}function Sge(t=!1){return(n,r,i,{latestValues:s},a)=>{const l=(Zj(n)?_ge:wge)(r,s,a,n),c=Ume(r,typeof n=="string",t),u=n!==M.Fragment?{...c,...l,ref:i}:{},{children:d}=r,h=M.useMemo(()=>Ms(d)?d.get():d,[d]);return M.createElement(n,{...u,children:h})}}function Ege(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...Zj(r)?vge:yge,preloadedFeatures:t,useRender:Sge(i),createVisualElement:e,Component:r};return qme(a)}}function yK(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function FT(t,e,n){const r=t.getProps();return eL(r,e,n!==void 0?n:r.custom,t)}const Tge=Kj(()=>window.ScrollTimeline!==void 0);class Age{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(Tge()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Mge extends Age{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function lL(t,e){return t?t[e]||t.default||t:void 0}const bI=2e4;function xK(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<bI;)e+=n,r=t.next(e);return e>=bI?1/0:e}function cL(t){return typeof t=="function"}function i4(t,e){t.timeline=e,t.onfinish=null}const uL=t=>Array.isArray(t)&&typeof t[0]=="number",Pge={linearEasing:void 0};function Cge(t,e){const n=Kj(t);return()=>{var r;return(r=Pge[e])!==null&&r!==void 0?r:n()}}const J1=Cge(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),bK=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(uv(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function wK(t){return!!(typeof t=="function"&&J1()||!t||typeof t=="string"&&(t in wI||J1())||uL(t)||Array.isArray(t)&&t.every(wK))}const tx=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,wI={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:tx([0,.65,.55,1]),circOut:tx([.55,0,1,.45]),backIn:tx([.31,.01,.66,-.59]),backOut:tx([.33,1.53,.69,.99])};function _K(t,e){if(t)return typeof t=="function"&&J1()?bK(t,e):uL(t)?tx(t):Array.isArray(t)?t.map(n=>_K(n,e)||wI.easeOut):wI[t]}const il={x:!1,y:!1};function SK(){return il.x||il.y}function Rge(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function EK(t,e){const n=Rge(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function s4(t){return e=>{e.pointerType==="touch"||SK()||t(e)}}function Oge(t,e,n={}){const[r,i,s]=EK(t,n),a=s4(o=>{const{target:l}=o,c=e(o);if(typeof c!="function"||!l)return;const u=s4(d=>{c(d),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,i)});return r.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const TK=(t,e)=>e?t===e?!0:TK(t,e.parentElement):!1,dL=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Nge=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Ige(t){return Nge.has(t.tagName)||t.tabIndex!==-1}const nx=new WeakSet;function a4(t){return e=>{e.key==="Enter"&&t(e)}}function gP(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const kge=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=a4(()=>{if(nx.has(n))return;gP(n,"down");const i=a4(()=>{gP(n,"up")}),s=()=>gP(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function o4(t){return dL(t)&&!SK()}function Dge(t,e,n={}){const[r,i,s]=EK(t,n),a=o=>{const l=o.currentTarget;if(!o4(o)||nx.has(l))return;nx.add(l);const c=e(o),u=(m,b)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",h),!(!o4(m)||!nx.has(l))&&(nx.delete(l),typeof c=="function"&&c(m,{success:b}))},d=m=>{u(m,n.useGlobalTarget||TK(l,m.target))},h=m=>{u(m,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",h,i)};return r.forEach(o=>{!Ige(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),o.addEventListener("focus",c=>kge(c,i),i)}),s}function jge(t){return t==="x"||t==="y"?il[t]?null:(il[t]=!0,()=>{il[t]=!1}):il.x||il.y?null:(il.x=il.y=!0,()=>{il.x=il.y=!1})}const AK=new Set(["width","height","top","left","right","bottom",...cy]);let T1;function Lge(){T1=void 0}const Jl={now:()=>(T1===void 0&&Jl.set(as.isProcessing||Nme.useManualTiming?as.timestamp:performance.now()),T1),set:t=>{T1=t,queueMicrotask(Lge)}};function fL(t,e){t.indexOf(e)===-1&&t.push(e)}function hL(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class pL{constructor(){this.subscriptions=[]}add(e){return fL(this.subscriptions,e),()=>hL(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function MK(t,e){return e?t*(1e3/e):0}const l4=30,Uge=t=>!isNaN(parseFloat(t));class Fge{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Jl.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Jl.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Uge(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new pL);const r=this.events[e].add(n);return e==="change"?()=>{r(),xr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Jl.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>l4)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,l4);return MK(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Yx(t,e){return new Fge(t,e)}function Bge(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Yx(n))}function zge(t,e){const n=FT(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const a in s){const o=Zme(s[a]);Bge(t,a,o)}}function $ge(t){return!!(Ms(t)&&t.add)}function _I(t,e){const n=t.getValue("willChange");if($ge(n))return n.add(e)}function PK(t){return t.props[iK]}const CK=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Vge=1e-7,Hge=12;function Wge(t,e,n,r,i){let s,a,o=0;do a=e+(n-e)/2,s=CK(a,r,i)-t,s>0?n=a:e=a;while(Math.abs(s)>Vge&&++o<Hge);return a}function vw(t,e,n,r){if(t===e&&n===r)return Va;const i=s=>Wge(s,0,1,t,n);return s=>s===0||s===1?s:CK(i(s),e,r)}const RK=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,OK=t=>e=>1-t(1-e),NK=vw(.33,1.53,.69,.99),mL=OK(NK),IK=RK(mL),kK=t=>(t*=2)<1?.5*mL(t):.5*(2-Math.pow(2,-10*(t-1))),gL=t=>1-Math.sin(Math.acos(t)),DK=OK(gL),jK=RK(gL),LK=t=>/^0[^.\s]+$/u.test(t);function Gge(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||LK(t):!0}const yx=t=>Math.round(t*1e5)/1e5,vL=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function qge(t){return t==null}const Kge=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,yL=(t,e)=>n=>!!(typeof n=="string"&&Kge.test(n)&&n.startsWith(t)||e&&!qge(n)&&Object.prototype.hasOwnProperty.call(n,e)),UK=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,a,o]=r.match(vL);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},Xge=t=>Su(0,255,t),vP={...uy,transform:t=>Math.round(Xge(t))},Bh={test:yL("rgb","red"),parse:UK("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+vP.transform(t)+", "+vP.transform(e)+", "+vP.transform(n)+", "+yx(Xx.transform(r))+")"};function Yge(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const SI={test:yL("#"),parse:Yge,transform:Bh.transform},Ig={test:yL("hsl","hue"),parse:UK("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Yl.transform(yx(e))+", "+Yl.transform(yx(n))+", "+yx(Xx.transform(r))+")"},Ss={test:t=>Bh.test(t)||SI.test(t)||Ig.test(t),parse:t=>Bh.test(t)?Bh.parse(t):Ig.test(t)?Ig.parse(t):SI.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Bh.transform(t):Ig.transform(t)},Jge=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Qge(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(vL))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(Jge))===null||n===void 0?void 0:n.length)||0)>0}const FK="number",BK="color",Zge="var",eve="var(",c4="${}",tve=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Jx(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=e.replace(tve,l=>(Ss.test(l)?(r.color.push(s),i.push(BK),n.push(Ss.parse(l))):l.startsWith(eve)?(r.var.push(s),i.push(Zge),n.push(l)):(r.number.push(s),i.push(FK),n.push(parseFloat(l))),++s,c4)).split(c4);return{values:n,split:o,indexes:r,types:i}}function zK(t){return Jx(t).values}function $K(t){const{split:e,types:n}=Jx(t),r=e.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=e[a],i[a]!==void 0){const o=n[a];o===FK?s+=yx(i[a]):o===BK?s+=Ss.transform(i[a]):s+=i[a]}return s}}const nve=t=>typeof t=="number"?0:t;function rve(t){const e=zK(t);return $K(t)(e.map(nve))}const Zd={test:Qge,parse:zK,createTransformer:$K,getAnimatableNone:rve},ive=new Set(["brightness","contrast","saturate","opacity"]);function sve(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(vL)||[];if(!r)return t;const i=n.replace(r,"");let s=ive.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const ave=/\b([a-z-]*)\(.*?\)/gu,EI={...Zd,getAnimatableNone:t=>{const e=t.match(ave);return e?e.map(sve).join(" "):t}},ove={...nL,color:Ss,backgroundColor:Ss,outlineColor:Ss,fill:Ss,stroke:Ss,borderColor:Ss,borderTopColor:Ss,borderRightColor:Ss,borderBottomColor:Ss,borderLeftColor:Ss,filter:EI,WebkitFilter:EI},xL=t=>ove[t];function VK(t,e){let n=xL(t);return n!==EI&&(n=Zd),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const lve=new Set(["auto","none","0"]);function cve(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!lve.has(s)&&Jx(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=VK(n,i)}const u4=t=>t===uy||t===Zt,d4=(t,e)=>parseFloat(t.split(", ")[e]),f4=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return d4(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?d4(s[1],t):0}},uve=new Set(["x","y","z"]),dve=cy.filter(t=>!uve.has(t));function fve(t){const e=[];return dve.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const fv={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:f4(4,13),y:f4(5,14)};fv.translateX=fv.x;fv.translateY=fv.y;const Jh=new Set;let TI=!1,AI=!1;function HK(){if(AI){const t=Array.from(Jh).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=fve(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,a])=>{var o;(o=r.getValue(s))===null||o===void 0||o.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}AI=!1,TI=!1,Jh.forEach(t=>t.complete()),Jh.clear()}function WK(){Jh.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(AI=!0)})}function hve(){WK(),HK()}class bL{constructor(e,n,r,i,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Jh.add(this),TI||(TI=!0,xr.read(WK),xr.resolveKeyframes(HK))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const a=i?.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const l=r.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),i&&a===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Jh.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Jh.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const GK=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),pve=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function mve(t){const e=pve.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function qK(t,e,n=1){const[r,i]=mve(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return GK(a)?parseFloat(a):a}return tL(i)?qK(i,e,n+1):i}const KK=t=>e=>e.test(t),gve={test:t=>t==="auto",parse:t=>t},XK=[uy,Zt,Yl,Od,sge,ige,gve],h4=t=>XK.find(KK(t));class YK extends bL{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),tL(c))){const u=qK(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!AK.has(r)||e.length!==2)return;const[i,s]=e,a=h4(i),o=h4(s);if(a!==o)if(u4(a)&&u4(o))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)Gge(e[i])&&r.push(i);r.length&&cve(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=fv[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=i.length-1,o=i[a];i[a]=fv[r](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const p4=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Zd.test(t)||t==="0")&&!t.startsWith("url("));function vve(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function yve(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],a=p4(i,e),o=p4(s,e);return!a||!o?!1:vve(t)||(n==="spring"||cL(n))&&r}const xve=t=>t!==null;function BT(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(xve),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const bve=40;class JK{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Jl.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>bve?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&hve(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Jl.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:a,onComplete:o,onUpdate:l,isGenerator:c}=this.options;if(!c&&!yve(e,r,i,s))if(a)this.options.duration=0;else{l&&l(BT(e,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const kr=(t,e,n)=>t+(e-t)*n;function yP(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function wve({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,a=0;if(!e)i=s=a=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;i=yP(l,o,t+1/3),s=yP(l,o,t),a=yP(l,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function Q1(t,e){return n=>n>0?e:t}const xP=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},_ve=[SI,Bh,Ig],Sve=t=>_ve.find(e=>e.test(t));function m4(t){const e=Sve(t);if(!e)return!1;let n=e.parse(t);return e===Ig&&(n=wve(n)),n}const g4=(t,e)=>{const n=m4(t),r=m4(e);if(!n||!r)return Q1(t,e);const i={...n};return s=>(i.red=xP(n.red,r.red,s),i.green=xP(n.green,r.green,s),i.blue=xP(n.blue,r.blue,s),i.alpha=kr(n.alpha,r.alpha,s),Bh.transform(i))},Eve=(t,e)=>n=>e(t(n)),yw=(...t)=>t.reduce(Eve),MI=new Set(["none","hidden"]);function Tve(t,e){return MI.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Ave(t,e){return n=>kr(t,e,n)}function wL(t){return typeof t=="number"?Ave:typeof t=="string"?tL(t)?Q1:Ss.test(t)?g4:Cve:Array.isArray(t)?QK:typeof t=="object"?Ss.test(t)?g4:Mve:Q1}function QK(t,e){const n=[...t],r=n.length,i=t.map((s,a)=>wL(s)(s,e[a]));return s=>{for(let a=0;a<r;a++)n[a]=i[a](s);return n}}function Mve(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=wL(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function Pve(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],o=t.indexes[a][i[a]],l=(n=t.values[o])!==null&&n!==void 0?n:0;r[s]=l,i[a]++}return r}const Cve=(t,e)=>{const n=Zd.createTransformer(e),r=Jx(t),i=Jx(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?MI.has(t)&&!i.values.length||MI.has(e)&&!r.values.length?Tve(t,e):yw(QK(Pve(r,i),i.values),n):Q1(t,e)};function ZK(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?kr(t,e,n):wL(t)(t,e)}const Rve=5;function eX(t,e,n){const r=Math.max(e-Rve,0);return MK(n-t(r),e-r)}const $r={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},bP=.001;function Ove({duration:t=$r.duration,bounce:e=$r.bounce,velocity:n=$r.velocity,mass:r=$r.mass}){let i,s,a=1-e;a=Su($r.minDamping,$r.maxDamping,a),t=Su($r.minDuration,$r.maxDuration,pu(t)),a<1?(i=c=>{const u=c*a,d=u*t,h=u-n,m=PI(c,a),b=Math.exp(-d);return bP-h/m*b},s=c=>{const d=c*a*t,h=d*n+n,m=Math.pow(a,2)*Math.pow(c,2)*t,b=Math.exp(-d),x=PI(Math.pow(c,2),a);return(-i(c)+bP>0?-1:1)*((h-m)*b)/x}):(i=c=>{const u=Math.exp(-c*t),d=(c-n)*t+1;return-bP+u*d},s=c=>{const u=Math.exp(-c*t),d=(n-c)*(t*t);return u*d});const o=5/t,l=Ive(i,s,o);if(t=hu(t),isNaN(l))return{stiffness:$r.stiffness,damping:$r.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:a*2*Math.sqrt(r*c),duration:t}}}const Nve=12;function Ive(t,e,n){let r=n;for(let i=1;i<Nve;i++)r=r-t(r)/e(r);return r}function PI(t,e){return t*Math.sqrt(1-e*e)}const kve=["duration","bounce"],Dve=["stiffness","damping","mass"];function v4(t,e){return e.some(n=>t[n]!==void 0)}function jve(t){let e={velocity:$r.velocity,stiffness:$r.stiffness,damping:$r.damping,mass:$r.mass,isResolvedFromDuration:!1,...t};if(!v4(t,Dve)&&v4(t,kve))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Su(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:$r.mass,stiffness:i,damping:s}}else{const n=Ove(t);e={...e,...n,mass:$r.mass},e.isResolvedFromDuration=!0}return e}function tX(t=$r.visualDuration,e=$r.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:m}=jve({...n,velocity:-pu(n.velocity||0)}),b=h||0,x=c/(2*Math.sqrt(l*u)),v=a-s,_=pu(Math.sqrt(l/u)),E=Math.abs(v)<5;r||(r=E?$r.restSpeed.granular:$r.restSpeed.default),i||(i=E?$r.restDelta.granular:$r.restDelta.default);let T;if(x<1){const P=PI(_,x);T=R=>{const N=Math.exp(-x*_*R);return a-N*((b+x*_*v)/P*Math.sin(P*R)+v*Math.cos(P*R))}}else if(x===1)T=P=>a-Math.exp(-_*P)*(v+(b+_*v)*P);else{const P=_*Math.sqrt(x*x-1);T=R=>{const N=Math.exp(-x*_*R),L=Math.min(P*R,300);return a-N*((b+x*_*v)*Math.sinh(L)+P*v*Math.cosh(L))/P}}const A={calculatedDuration:m&&d||null,next:P=>{const R=T(P);if(m)o.done=P>=d;else{let N=0;x<1&&(N=P===0?hu(b):eX(T,P,R));const L=Math.abs(N)<=r,I=Math.abs(a-R)<=i;o.done=L&&I}return o.value=o.done?a:R,o},toString:()=>{const P=Math.min(xK(A),bI),R=bK(N=>A.next(P*N).value,P,30);return P+"ms "+R}};return A}function y4({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],h={done:!1,value:d},m=L=>o!==void 0&&L<o||l!==void 0&&L>l,b=L=>o===void 0?l:l===void 0||Math.abs(o-L)<Math.abs(l-L)?o:l;let x=n*e;const v=d+x,_=a===void 0?v:a(v);_!==v&&(x=_-d);const E=L=>-x*Math.exp(-L/r),T=L=>_+E(L),A=L=>{const I=E(L),j=T(L);h.done=Math.abs(I)<=c,h.value=h.done?_:j};let P,R;const N=L=>{m(h.value)&&(P=L,R=tX({keyframes:[h.value,b(h.value)],velocity:eX(T,L,h.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return N(0),{calculatedDuration:null,next:L=>{let I=!1;return!R&&P===void 0&&(I=!0,A(L),N(L)),P!==void 0&&L>=P?R.next(L-P):(!I&&A(L),h)}}}const Lve=vw(.42,0,1,1),Uve=vw(0,0,.58,1),nX=vw(.42,0,.58,1),Fve=t=>Array.isArray(t)&&typeof t[0]!="number",Bve={linear:Va,easeIn:Lve,easeInOut:nX,easeOut:Uve,circIn:gL,circInOut:jK,circOut:DK,backIn:mL,backInOut:IK,backOut:NK,anticipate:kK},x4=t=>{if(uL(t)){Z7(t.length===4);const[e,n,r,i]=t;return vw(e,n,r,i)}else if(typeof t=="string")return Bve[t];return t};function zve(t,e,n){const r=[],i=n||ZK,s=t.length-1;for(let a=0;a<s;a++){let o=i(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||Va:e;o=yw(l,o)}r.push(o)}return r}function $ve(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Z7(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=zve(e,r,i),l=o.length,c=u=>{if(a&&u<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const h=uv(t[d],t[d+1],u);return o[d](h)};return n?u=>c(Su(t[0],t[s-1],u)):c}function Vve(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=uv(0,e,r);t.push(kr(n,1,i))}}function Hve(t){const e=[0];return Vve(e,t.length-1),e}function Wve(t,e){return t.map(n=>n*e)}function Gve(t,e){return t.map(()=>e||nX).splice(0,t.length-1)}function Z1({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Fve(r)?r.map(x4):x4(r),s={done:!1,value:e[0]},a=Wve(n&&n.length===e.length?n:Hve(e),t),o=$ve(a,e,{ease:Array.isArray(i)?i:Gve(e,i)});return{calculatedDuration:t,next:l=>(s.value=o(l),s.done=l>=t,s)}}const qve=t=>{const e=({timestamp:n})=>t(n);return{start:()=>xr.update(e,!0),stop:()=>Qd(e),now:()=>as.isProcessing?as.timestamp:Jl.now()}},Kve={decay:y4,inertia:y4,tween:Z1,keyframes:Z1,spring:tX},Xve=t=>t/100;class _L extends JK{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,a=i?.KeyframeResolver||bL,o=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new a(s,o,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=this.options,o=cL(n)?n:Kve[n]||Z1;let l,c;o!==Z1&&typeof e[0]!="number"&&(l=yw(Xve,ZK(e[0],e[1])),e=[0,100]);const u=o({...this.options,keyframes:e});s==="mirror"&&(c=o({...this.options,keyframes:[...e].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=xK(u));const{calculatedDuration:d}=u,h=d+i,m=h*(r+1)-i;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:h,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:L}=this.options;return{done:!0,value:L[L.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:d}=r;if(this.startTime===null)return s.next(0);const{delay:h,repeat:m,repeatType:b,repeatDelay:x,onUpdate:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const _=this.currentTime-h*(this.speed>=0?1:-1),E=this.speed>=0?_<0:_>u;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let T=this.currentTime,A=s;if(m){const L=Math.min(this.currentTime,u)/d;let I=Math.floor(L),j=L%1;!j&&L>=1&&(j=1),j===1&&I--,I=Math.min(I,m+1),I%2&&(b==="reverse"?(j=1-j,x&&(j-=x/d)):b==="mirror"&&(A=a)),T=Su(0,1,j)*d}const P=E?{done:!1,value:l[0]}:A.next(T);o&&(P.value=o(P.value));let{done:R}=P;!E&&c!==null&&(R=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const N=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&R);return N&&i!==void 0&&(P.value=BT(l,this.options,i)),v&&v(P.value),N&&this.finish(),P}get duration(){const{resolved:e}=this;return e?pu(e.calculatedDuration):0}get time(){return pu(this.currentTime)}set time(e){e=hu(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=pu(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=qve,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Yve=new Set(["opacity","clipPath","filter","transform"]);function Jve(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=_K(o,i);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}const Qve=Kj(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),eE=10,Zve=2e4;function eye(t){return cL(t.type)||t.type==="spring"||!wK(t.ease)}function tye(t,e){const n=new _L({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<Zve;)r=n.sample(s),i.push(r.value),s+=eE;return{times:void 0,keyframes:i,duration:s-eE,ease:"linear"}}const rX={anticipate:kK,backInOut:IK,circInOut:jK};function nye(t){return t in rX}class b4 extends JK{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new YK(s,(a,o)=>this.onKeyframesResolved(a,o),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:a,motionValue:o,name:l,startTime:c}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof s=="string"&&J1()&&nye(s)&&(s=rX[s]),eye(this.options)){const{onComplete:d,onUpdate:h,motionValue:m,element:b,...x}=this.options,v=tye(e,x);e=v.keyframes,e.length===1&&(e[1]=e[0]),r=v.duration,i=v.times,s=v.ease,a="keyframes"}const u=Jve(o.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(i4(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:d}=this.options;o.set(BT(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:i,type:a,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return pu(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return pu(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=hu(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Va;const{animation:r}=n;i4(r,e)}return Va}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:a,times:o}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:d,element:h,...m}=this.options,b=new _L({...m,keyframes:r,duration:i,type:s,ease:a,times:o,isGenerator:!0}),x=hu(this.time);c.setWithVelocity(b.sample(x-eE).value,b.sample(x).value,eE)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:a,type:o}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return Qve()&&r&&Yve.has(r)&&!l&&!c&&!i&&s!=="mirror"&&a!==0&&o!=="inertia"}}const rye={type:"spring",stiffness:500,damping:25,restSpeed:10},iye=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),sye={type:"keyframes",duration:.8},aye={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},oye=(t,{keyframes:e})=>e.length>2?sye:Cp.has(t)?t.startsWith("scale")?iye(e[1]):rye:aye;function lye({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const SL=(t,e,n,r={},i,s)=>a=>{const o=lL(r,t)||{},l=o.delay||r.delay||0;let{elapsed:c=0}=r;c=c-hu(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-c,onUpdate:h=>{e.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:s?void 0:i};lye(o)||(u={...u,...oye(t,u)}),u.duration&&(u.duration=hu(u.duration)),u.repeatDelay&&(u.repeatDelay=hu(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const h=BT(u.keyframes,o);if(h!==void 0)return xr.update(()=>{u.onUpdate(h),u.onComplete()}),new Mge([])}return!s&&b4.supports(u)?new b4(u):new _L(u)};function cye({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function iX(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:a=t.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(a=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const d in l){const h=t.getValue(d,(s=t.latestValues[d])!==null&&s!==void 0?s:null),m=l[d];if(m===void 0||u&&cye(u,d))continue;const b={delay:n,...lL(a||{},d)};let x=!1;if(window.MotionHandoffAnimation){const _=PK(t);if(_){const E=window.MotionHandoffAnimation(_,d,xr);E!==null&&(b.startTime=E,x=!0)}}_I(t,d),h.start(SL(d,h,m,t.shouldReduceMotion&&AK.has(d)?{type:!1}:b,t,x));const v=h.animation;v&&c.push(v)}return o&&Promise.all(c).then(()=>{xr.update(()=>{o&&zge(t,o)})}),c}function CI(t,e,n={}){var r;const i=FT(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const a=i?()=>Promise.all(iX(t,i,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=s;return uye(t,e,u+c,d,h,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[a,o]:[o,a];return c().then(()=>u())}else return Promise.all([a(),o(n.delay)])}function uye(t,e,n=0,r=0,i=1,s){const a=[],o=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>o-c*r;return Array.from(t.variantChildren).sort(dye).forEach((c,u)=>{c.notify("AnimationStart",e),a.push(CI(c,e,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(a)}function dye(t,e){return t.sortNodePosition(e)}function fye(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>CI(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=CI(t,e,n);else{const i=typeof e=="function"?FT(t,e,n.custom):e;r=Promise.all(iX(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const hye=Yj.length;function sX(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?sX(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<hye;n++){const r=Yj[n],i=t.props[r];(Kx(i)||i===!1)&&(e[r]=i)}return e}const pye=[...Xj].reverse(),mye=Xj.length;function gye(t){return e=>Promise.all(e.map(({animation:n,options:r})=>fye(t,n,r)))}function vye(t){let e=gye(t),n=w4(),r=!0;const i=l=>(c,u)=>{var d;const h=FT(t,u,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(h){const{transition:m,transitionEnd:b,...x}=h;c={...c,...x,...b}}return c};function s(l){e=l(t)}function a(l){const{props:c}=t,u=sX(t.parent)||{},d=[],h=new Set;let m={},b=1/0;for(let v=0;v<mye;v++){const _=pye[v],E=n[_],T=c[_]!==void 0?c[_]:u[_],A=Kx(T),P=_===l?E.isActive:null;P===!1&&(b=v);let R=T===u[_]&&T!==c[_]&&A;if(R&&r&&t.manuallyAnimateOnMount&&(R=!1),E.protectedKeys={...m},!E.isActive&&P===null||!T&&!E.prevProp||LT(T)||typeof T=="boolean")continue;const N=yye(E.prevProp,T);let L=N||_===l&&E.isActive&&!R&&A||v>b&&A,I=!1;const j=Array.isArray(T)?T:[T];let B=j.reduce(i(_),{});P===!1&&(B={});const{prevResolvedValues:H={}}=E,J={...H,...B},G=te=>{L=!0,h.has(te)&&(I=!0,h.delete(te)),E.needsAnimating[te]=!0;const z=t.getValue(te);z&&(z.liveStyle=!1)};for(const te in J){const z=B[te],V=H[te];if(m.hasOwnProperty(te))continue;let X=!1;xI(z)&&xI(V)?X=!yK(z,V):X=z!==V,X?z!=null?G(te):h.add(te):z!==void 0&&h.has(te)?G(te):E.protectedKeys[te]=!0}E.prevProp=T,E.prevResolvedValues=B,E.isActive&&(m={...m,...B}),r&&t.blockInitialAnimation&&(L=!1),L&&(!(R&&N)||I)&&d.push(...j.map(te=>({animation:te,options:{type:_}})))}if(h.size){const v={};h.forEach(_=>{const E=t.getBaseTarget(_),T=t.getValue(_);T&&(T.liveStyle=!0),v[_]=E??null}),d.push({animation:v})}let x=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(d):Promise.resolve()}function o(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(h=>{var m;return(m=h.animationState)===null||m===void 0?void 0:m.setActive(l,c)}),n[l].isActive=c;const d=a(l);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>n,reset:()=>{n=w4(),r=!0}}}function yye(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!yK(e,t):!1}function uh(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function w4(){return{animate:uh(!0),whileInView:uh(),whileHover:uh(),whileTap:uh(),whileDrag:uh(),whileFocus:uh(),exit:uh()}}class uf{constructor(e){this.isMounted=!1,this.node=e}update(){}}class xye extends uf{constructor(e){super(e),e.animationState||(e.animationState=vye(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();LT(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let bye=0;class wye extends uf{constructor(){super(...arguments),this.id=bye++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const _ye={animation:{Feature:xye},exit:{Feature:wye}};function Qx(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function xw(t){return{point:{x:t.pageX,y:t.pageY}}}const Sye=t=>e=>dL(e)&&t(e,xw(e));function xx(t,e,n,r){return Qx(t,e,Sye(n),r)}const _4=(t,e)=>Math.abs(t-e);function Eye(t,e){const n=_4(t.x,e.x),r=_4(t.y,e.y);return Math.sqrt(n**2+r**2)}class aX{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=_P(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,m=Eye(d.offset,{x:0,y:0})>=3;if(!h&&!m)return;const{point:b}=d,{timestamp:x}=as;this.history.push({...b,timestamp:x});const{onStart:v,onMove:_}=this.handlers;h||(v&&v(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,d)},this.handlePointerMove=(d,h)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=wP(h,this.transformPagePoint),xr.update(this.updatePoint,!0)},this.handlePointerUp=(d,h)=>{this.end();const{onEnd:m,onSessionEnd:b,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=_P(d.type==="pointercancel"?this.lastMoveEventInfo:wP(h,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,v),b&&b(d,v)},!dL(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const a=xw(e),o=wP(a,this.transformPagePoint),{point:l}=o,{timestamp:c}=as;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,_P(o,this.history)),this.removeListeners=yw(xx(this.contextWindow,"pointermove",this.handlePointerMove),xx(this.contextWindow,"pointerup",this.handlePointerUp),xx(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Qd(this.updatePoint)}}function wP(t,e){return e?{point:e(t.point)}:t}function S4(t,e){return{x:t.x-e.x,y:t.y-e.y}}function _P({point:t},e){return{point:t,delta:S4(t,oX(e)),offset:S4(t,Tye(e)),velocity:Aye(e,.1)}}function Tye(t){return t[0]}function oX(t){return t[t.length-1]}function Aye(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=oX(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>hu(e)));)n--;if(!r)return{x:0,y:0};const s=pu(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const lX=1e-4,Mye=1-lX,Pye=1+lX,cX=.01,Cye=0-cX,Rye=0+cX;function qa(t){return t.max-t.min}function Oye(t,e,n){return Math.abs(t-e)<=n}function E4(t,e,n,r=.5){t.origin=r,t.originPoint=kr(e.min,e.max,t.origin),t.scale=qa(n)/qa(e),t.translate=kr(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Mye&&t.scale<=Pye||isNaN(t.scale))&&(t.scale=1),(t.translate>=Cye&&t.translate<=Rye||isNaN(t.translate))&&(t.translate=0)}function bx(t,e,n,r){E4(t.x,e.x,n.x,r?r.originX:void 0),E4(t.y,e.y,n.y,r?r.originY:void 0)}function T4(t,e,n){t.min=n.min+e.min,t.max=t.min+qa(e)}function Nye(t,e,n){T4(t.x,e.x,n.x),T4(t.y,e.y,n.y)}function A4(t,e,n){t.min=e.min-n.min,t.max=t.min+qa(e)}function wx(t,e,n){A4(t.x,e.x,n.x),A4(t.y,e.y,n.y)}function Iye(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?kr(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?kr(n,t,r.max):Math.min(t,n)),t}function M4(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function kye(t,{top:e,left:n,bottom:r,right:i}){return{x:M4(t.x,n,i),y:M4(t.y,e,r)}}function P4(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Dye(t,e){return{x:P4(t.x,e.x),y:P4(t.y,e.y)}}function jye(t,e){let n=.5;const r=qa(t),i=qa(e);return i>r?n=uv(e.min,e.max-r,t.min):r>i&&(n=uv(t.min,t.max-i,e.min)),Su(0,1,n)}function Lye(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const RI=.35;function Uye(t=RI){return t===!1?t=0:t===!0&&(t=RI),{x:C4(t,"left","right"),y:C4(t,"top","bottom")}}function C4(t,e,n){return{min:R4(t,e),max:R4(t,n)}}function R4(t,e){return typeof t=="number"?t:t[e]||0}const O4=()=>({translate:0,scale:1,origin:0,originPoint:0}),kg=()=>({x:O4(),y:O4()}),N4=()=>({min:0,max:0}),Qr=()=>({x:N4(),y:N4()});function uo(t){return[t("x"),t("y")]}function uX({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Fye({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Bye(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function SP(t){return t===void 0||t===1}function OI({scale:t,scaleX:e,scaleY:n}){return!SP(t)||!SP(e)||!SP(n)}function Th(t){return OI(t)||dX(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function dX(t){return I4(t.x)||I4(t.y)}function I4(t){return t&&t!=="0%"}function tE(t,e,n){const r=t-n,i=e*r;return n+i}function k4(t,e,n,r,i){return i!==void 0&&(t=tE(t,i,r)),tE(t,n,r)+e}function NI(t,e=0,n=1,r,i){t.min=k4(t.min,e,n,r,i),t.max=k4(t.max,e,n,r,i)}function fX(t,{x:e,y:n}){NI(t.x,e.translate,e.scale,e.originPoint),NI(t.y,n.translate,n.scale,n.originPoint)}const D4=.999999999999,j4=1.0000000000001;function zye(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,a;for(let o=0;o<i;o++){s=n[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&jg(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,fX(t,a)),r&&Th(s.latestValues)&&jg(t,s.latestValues))}e.x<j4&&e.x>D4&&(e.x=1),e.y<j4&&e.y>D4&&(e.y=1)}function Dg(t,e){t.min=t.min+e,t.max=t.max+e}function L4(t,e,n,r,i=.5){const s=kr(t.min,t.max,i);NI(t,e,n,s,r)}function jg(t,e){L4(t.x,e.x,e.scaleX,e.scale,e.originX),L4(t.y,e.y,e.scaleY,e.scale,e.originY)}function hX(t,e){return uX(Bye(t.getBoundingClientRect(),e))}function $ye(t,e,n){const r=hX(t,n),{scroll:i}=e;return i&&(Dg(r.x,i.offset.x),Dg(r.y,i.offset.y)),r}const pX=({current:t})=>t?t.ownerDocument.defaultView:null,Vye=new WeakMap;class Hye{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Qr(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(xw(u).point)},s=(u,d)=>{const{drag:h,dragPropagation:m,onDragStart:b}=this.getProps();if(h&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=jge(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),uo(v=>{let _=this.getAxisMotionValue(v).get()||0;if(Yl.test(_)){const{projection:E}=this.visualElement;if(E&&E.layout){const T=E.layout.layoutBox[v];T&&(_=qa(T)*(parseFloat(_)/100))}}this.originPoint[v]=_}),b&&xr.postRender(()=>b(u,d)),_I(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},a=(u,d)=>{const{dragPropagation:h,dragDirectionLock:m,onDirectionLock:b,onDrag:x}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:v}=d;if(m&&this.currentDirection===null){this.currentDirection=Wye(v),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",d.point,v),this.updateAxis("y",d.point,v),this.visualElement.render(),x&&x(u,d)},o=(u,d)=>this.stop(u,d),l=()=>uo(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new aX(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:pX(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&xr.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!iS(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=Iye(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Ng(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=kye(i.layoutBox,n):this.constraints=!1,this.elastic=Uye(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&uo(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Lye(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ng(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=$ye(r,i.root,this.visualElement.getTransformPagePoint());let a=Dye(i.layout.layoutBox,s);if(n){const o=n(Fye(a));this.hasMutatedConstraints=!!o,o&&(a=uX(o))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=uo(u=>{if(!iS(u,n,this.currentDirection))return;let d=l&&l[u]||{};a&&(d={min:0,max:0});const h=i?200:1e6,m=i?40:1e7,b={type:"inertia",velocity:r?e[u]:0,bounceStiffness:h,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(u,b)});return Promise.all(c).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return _I(this.visualElement,e),r.start(SL(e,r,0,n,this.visualElement,!1))}stopAnimation(){uo(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){uo(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){uo(n=>{const{drag:r}=this.getProps();if(!iS(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[n];s.set(e[n]-kr(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ng(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};uo(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=jye({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),uo(a=>{if(!iS(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set(kr(l,c,i[a]))})}addListeners(){if(!this.visualElement.current)return;Vye.set(this.visualElement,this);const e=this.visualElement.current,n=xx(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ng(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),xr.read(r);const a=Qx(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(uo(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())}));return()=>{a(),n(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=RI,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function iS(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Wye(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Gye extends uf{constructor(e){super(e),this.removeGroupControls=Va,this.removeListeners=Va,this.controls=new Hye(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Va}unmount(){this.removeGroupControls(),this.removeListeners()}}const U4=t=>(e,n)=>{t&&xr.postRender(()=>t(e,n))};class qye extends uf{constructor(){super(...arguments),this.removePointerDownListener=Va}onPointerDown(e){this.session=new aX(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:pX(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:U4(e),onStart:U4(n),onMove:r,onEnd:(s,a)=>{delete this.session,i&&xr.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=xx(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const A1={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function F4(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const P0={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Zt.test(t))t=parseFloat(t);else return t;const n=F4(t,e.target.x),r=F4(t,e.target.y);return`${n}% ${r}%`}},Kye={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Zd.parse(t);if(i.length>5)return r;const s=Zd.createTransformer(t),a=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;i[0+a]/=o,i[1+a]/=l;const c=kr(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=c),typeof i[3+a]=="number"&&(i[3+a]/=c),s(i)}};class Xye extends M.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;mge(Yye),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),A1.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,a=r.projection;return a&&(a.isPresent=s,i||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||xr.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Qj.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function mX(t){const[e,n]=J7(),r=M.useContext(Hj);return p.jsx(Xye,{...t,layoutGroup:r,switchLayoutGroup:M.useContext(sK),isPresent:e,safeToRemove:n})}const Yye={borderRadius:{...P0,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:P0,borderTopRightRadius:P0,borderBottomLeftRadius:P0,borderBottomRightRadius:P0,boxShadow:Kye};function Jye(t,e,n){const r=Ms(t)?t:Yx(t);return r.start(SL("",r,e,n)),r.animation}function Qye(t){return t instanceof SVGElement&&t.tagName!=="svg"}const Zye=(t,e)=>t.depth-e.depth;class e0e{constructor(){this.children=[],this.isDirty=!1}add(e){fL(this.children,e),this.isDirty=!0}remove(e){hL(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Zye),this.isDirty=!1,this.children.forEach(e)}}function t0e(t,e){const n=Jl.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Qd(r),t(s-e))};return xr.read(r,!0),()=>Qd(r)}const gX=["TopLeft","TopRight","BottomLeft","BottomRight"],n0e=gX.length,B4=t=>typeof t=="string"?parseFloat(t):t,z4=t=>typeof t=="number"||Zt.test(t);function r0e(t,e,n,r,i,s){i?(t.opacity=kr(0,n.opacity!==void 0?n.opacity:1,i0e(r)),t.opacityExit=kr(e.opacity!==void 0?e.opacity:1,0,s0e(r))):s&&(t.opacity=kr(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let a=0;a<n0e;a++){const o=`border${gX[a]}Radius`;let l=$4(e,o),c=$4(n,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||z4(l)===z4(c)?(t[o]=Math.max(kr(B4(l),B4(c),r),0),(Yl.test(c)||Yl.test(l))&&(t[o]+="%")):t[o]=c}(e.rotate||n.rotate)&&(t.rotate=kr(e.rotate||0,n.rotate||0,r))}function $4(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const i0e=vX(0,.5,DK),s0e=vX(.5,.95,Va);function vX(t,e,n){return r=>r<t?0:r>e?1:n(uv(t,e,r))}function V4(t,e){t.min=e.min,t.max=e.max}function so(t,e){V4(t.x,e.x),V4(t.y,e.y)}function H4(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function W4(t,e,n,r,i){return t-=e,t=tE(t,1/n,r),i!==void 0&&(t=tE(t,1/i,r)),t}function a0e(t,e=0,n=1,r=.5,i,s=t,a=t){if(Yl.test(e)&&(e=parseFloat(e),e=kr(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=kr(s.min,s.max,r);t===s&&(o-=e),t.min=W4(t.min,e,n,o,i),t.max=W4(t.max,e,n,o,i)}function G4(t,e,[n,r,i],s,a){a0e(t,e[n],e[r],e[i],e.scale,s,a)}const o0e=["x","scaleX","originX"],l0e=["y","scaleY","originY"];function q4(t,e,n,r){G4(t.x,e,o0e,n?n.x:void 0,r?r.x:void 0),G4(t.y,e,l0e,n?n.y:void 0,r?r.y:void 0)}function K4(t){return t.translate===0&&t.scale===1}function yX(t){return K4(t.x)&&K4(t.y)}function X4(t,e){return t.min===e.min&&t.max===e.max}function c0e(t,e){return X4(t.x,e.x)&&X4(t.y,e.y)}function Y4(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function xX(t,e){return Y4(t.x,e.x)&&Y4(t.y,e.y)}function J4(t){return qa(t.x)/qa(t.y)}function Q4(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class u0e{constructor(){this.members=[]}add(e){fL(this.members,e),e.scheduleRender()}remove(e){if(hL(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function d0e(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,a=n?.z||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:h,skewX:m,skewY:b}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),d&&(r+=`rotateX(${d}deg) `),h&&(r+=`rotateY(${h}deg) `),m&&(r+=`skewX(${m}deg) `),b&&(r+=`skewY(${b}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const Ah={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},rx=typeof window<"u"&&window.MotionDebug!==void 0,EP=["","X","Y","Z"],f0e={visibility:"hidden"},Z4=1e3;let h0e=0;function TP(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function bX(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=PK(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",xr,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&bX(r)}function wX({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},o=e?.()){this.id=h0e++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,rx&&(Ah.totalNodes=Ah.resolvedTargetDeltas=Ah.recalculatedProjection=0),this.nodes.forEach(g0e),this.nodes.forEach(w0e),this.nodes.forEach(_0e),this.nodes.forEach(v0e),rx&&window.MotionDebug.record(Ah)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new e0e)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new pL),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Qye(a),this.instance=a;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const h=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=t0e(h,250),A1.hasAnimatedSinceResize&&(A1.hasAnimatedSinceResize=!1,this.nodes.forEach(tz))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeTargetChanged:m,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||u.getDefaultTransition()||M0e,{onLayoutAnimationStart:v,onLayoutAnimationComplete:_}=u.getProps(),E=!this.targetLayout||!xX(this.targetLayout,b)||m,T=!h&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||T||h&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,T);const A={...lL(x,"layout"),onPlay:v,onComplete:_};(u.shouldReduceMotion||this.options.layoutRoot)&&(A.delay=0,A.type=!1),this.startAnimation(A)}else h||tz(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Qd(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(S0e),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&bX(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ez);return}this.isUpdating||this.nodes.forEach(x0e),this.isUpdating=!1,this.nodes.forEach(b0e),this.nodes.forEach(p0e),this.nodes.forEach(m0e),this.clearAllSnapshots();const o=Jl.now();as.delta=Su(0,1e3/60,o-as.timestamp),as.timestamp=o,as.isProcessing=!0,mP.update.process(as),mP.preRender.process(as),mP.render.process(as),as.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Qj.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(y0e),this.sharedNodes.forEach(E0e)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,xr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){xr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Qr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!yX(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;a&&(o||Th(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),P0e(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return Qr();const l=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(C0e))){const{scroll:u}=this.root;u&&(Dg(l.x,u.offset.x),Dg(l.y,u.offset.y))}return l}removeElementScroll(a){var o;const l=Qr();if(so(l,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;u!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&so(l,a),Dg(l.x,d.offset.x),Dg(l.y,d.offset.y))}return l}applyTransform(a,o=!1){const l=Qr();so(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];!o&&u.options.layoutScroll&&u.scroll&&u!==u.root&&jg(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Th(u.latestValues)&&jg(l,u.latestValues)}return Th(this.latestValues)&&jg(l,this.latestValues),l}removeTransform(a){const o=Qr();so(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Th(c.latestValues))continue;OI(c.latestValues)&&c.updateSnapshot();const u=Qr(),d=c.measurePageBox();so(u,d),q4(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Th(this.latestValues)&&q4(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==as.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=as.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Qr(),this.relativeTargetOrigin=Qr(),wx(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),so(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Qr(),this.targetWithTransforms=Qr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Nye(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):so(this.target,this.layout.layoutBox),fX(this.target,this.targetDelta)):so(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Qr(),this.relativeTargetOrigin=Qr(),wx(this.relativeTargetOrigin,this.target,m.target),so(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}rx&&Ah.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||OI(this.parent.latestValues)||dX(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===as.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;so(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;zye(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Qr());const{target:b}=o;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(H4(this.prevProjectionDelta.x,this.projectionDelta.x),H4(this.prevProjectionDelta.y,this.projectionDelta.y)),bx(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!Q4(this.projectionDelta.x,this.prevProjectionDelta.x)||!Q4(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b)),rx&&Ah.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=kg(),this.projectionDelta=kg(),this.projectionDeltaWithTransform=kg()}setAnimationOrigin(a,o=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=kg();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=Qr(),m=l?l.source:void 0,b=this.layout?this.layout.source:void 0,x=m!==b,v=this.getStack(),_=!v||v.members.length<=1,E=!!(x&&!_&&this.options.crossfade===!0&&!this.path.some(A0e));this.animationProgress=0;let T;this.mixTargetDelta=A=>{const P=A/1e3;nz(d.x,a.x,P),nz(d.y,a.y,P),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(wx(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),T0e(this.relativeTarget,this.relativeTargetOrigin,h,P),T&&c0e(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=Qr()),so(T,this.relativeTarget)),x&&(this.animationValues=u,r0e(u,c,this.latestValues,P,E,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Qd(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=xr.update(()=>{A1.hasAnimatedSinceResize=!0,this.currentAnimation=Jye(0,Z4,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Z4),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:u}=a;if(!(!o||!l||!c)){if(this!==a&&this.layout&&c&&_X(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Qr();const d=qa(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const h=qa(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+h}so(o,l),jg(o,u),bx(this.projectionDeltaWithTransform,this.layoutCorrected,o,u)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new u0e),this.sharedNodes.get(a).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&TP("z",a,c,this.animationValues);for(let u=0;u<EP.length;u++)TP(`rotate${EP[u]}`,a,c,this.animationValues),TP(`skew${EP[u]}`,a,c,this.animationValues);a.render();for(const u in c)a.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);a.scheduleRender()}getProjectionStyles(a){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return f0e;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=E1(a?.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=E1(a?.pointerEvents)||""),this.hasProjected&&!Th(this.latestValues)&&(x.transform=u?u({},""):"none",this.hasProjected=!1),x}const h=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=d0e(this.projectionDeltaWithTransform,this.treeScale,h),u&&(c.transform=u(h,c.transform));const{x:m,y:b}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${b.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(o=h.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:c.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const x in Y1){if(h[x]===void 0)continue;const{correct:v,applyTo:_}=Y1[x],E=c.transform==="none"?h[x]:v(h[x],d);if(_){const T=_.length;for(let A=0;A<T;A++)c[_[A]]=E}else c[x]=E}return this.options.layoutId&&(c.pointerEvents=d===this?E1(a?.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(ez),this.root.sharedNodes.clear()}}}function p0e(t){t.updateLayout()}function m0e(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,a=n.source!==t.layout.source;s==="size"?uo(d=>{const h=a?n.measuredBox[d]:n.layoutBox[d],m=qa(h);h.min=r[d].min,h.max=h.min+m}):_X(s,n.layoutBox,r)&&uo(d=>{const h=a?n.measuredBox[d]:n.layoutBox[d],m=qa(r[d]);h.max=h.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+m)});const o=kg();bx(o,r,n.layoutBox);const l=kg();a?bx(l,t.applyTransform(i,!0),n.measuredBox):bx(l,r,n.layoutBox);const c=!yX(o);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:m}=d;if(h&&m){const b=Qr();wx(b,n.layoutBox,h.layoutBox);const x=Qr();wx(x,r,m.layoutBox),xX(b,x)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=b,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function g0e(t){rx&&Ah.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function v0e(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function y0e(t){t.clearSnapshot()}function ez(t){t.clearMeasurements()}function x0e(t){t.isLayoutDirty=!1}function b0e(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function tz(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function w0e(t){t.resolveTargetDelta()}function _0e(t){t.calcProjection()}function S0e(t){t.resetSkewAndRotation()}function E0e(t){t.removeLeadSnapshot()}function nz(t,e,n){t.translate=kr(e.translate,0,n),t.scale=kr(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function rz(t,e,n,r){t.min=kr(e.min,n.min,r),t.max=kr(e.max,n.max,r)}function T0e(t,e,n,r){rz(t.x,e.x,n.x,r),rz(t.y,e.y,n.y,r)}function A0e(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const M0e={duration:.45,ease:[.4,0,.1,1]},iz=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),sz=iz("applewebkit/")&&!iz("chrome/")?Math.round:Va;function az(t){t.min=sz(t.min),t.max=sz(t.max)}function P0e(t){az(t.x),az(t.y)}function _X(t,e,n){return t==="position"||t==="preserve-aspect"&&!Oye(J4(e),J4(n),.2)}function C0e(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const R0e=wX({attachResizeListener:(t,e)=>Qx(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),AP={current:void 0},SX=wX({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!AP.current){const t=new R0e({});t.mount(window),t.setOptions({layoutScroll:!0}),AP.current=t}return AP.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),O0e={pan:{Feature:qye},drag:{Feature:Gye,ProjectionNode:SX,MeasureLayout:mX}};function oz(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&xr.postRender(()=>s(e,xw(e)))}class N0e extends uf{mount(){const{current:e}=this.node;e&&(this.unmount=Oge(e,n=>(oz(this.node,n,"Start"),r=>oz(this.node,r,"End"))))}unmount(){}}class I0e extends uf{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=yw(Qx(this.node.current,"focus",()=>this.onFocus()),Qx(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function lz(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&xr.postRender(()=>s(e,xw(e)))}class k0e extends uf{mount(){const{current:e}=this.node;e&&(this.unmount=Dge(e,n=>(lz(this.node,n,"Start"),(r,{success:i})=>lz(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const II=new WeakMap,MP=new WeakMap,D0e=t=>{const e=II.get(t.target);e&&e(t)},j0e=t=>{t.forEach(D0e)};function L0e({root:t,...e}){const n=t||document;MP.has(n)||MP.set(n,{});const r=MP.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(j0e,{root:t,...e})),r[i]}function U0e(t,e,n){const r=L0e(e);return II.set(t,n),r.observe(t),()=>{II.delete(t),r.unobserve(t)}}const F0e={some:0,all:1};class B0e extends uf{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:F0e[i]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),h=c?u:d;h&&h(l)};return U0e(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(z0e(e,n))&&this.startObserver()}unmount(){}}function z0e({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const $0e={inView:{Feature:B0e},tap:{Feature:k0e},focus:{Feature:I0e},hover:{Feature:N0e}},V0e={layout:{ProjectionNode:SX,MeasureLayout:mX}},kI={current:null},EX={current:!1};function H0e(){if(EX.current=!0,!!qj)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>kI.current=t.matches;t.addListener(e),e()}else kI.current=!1}const W0e=[...XK,Ss,Zd],G0e=t=>W0e.find(KK(t)),cz=new WeakMap;function q0e(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Ms(i))t.addValue(r,i);else if(Ms(s))t.addValue(r,Yx(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=t.getStaticValue(r);t.addValue(r,Yx(a!==void 0?a:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const uz=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class K0e{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=bL,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Jl.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,xr.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=a;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=UT(n),this.isVariantNode=rK(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in h){const b=h[m];l[m]!==void 0&&Ms(b)&&b.set(l[m],!1)}}mount(e){this.current=e,cz.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),EX.current||H0e(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:kI.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){cz.delete(this.current),this.projection&&this.projection.unmount(),Qd(this.notifyUpdate),Qd(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Cp.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&xr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in dv){const n=dv[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Qr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<uz.length;r++){const i=uz[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=q0e(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Yx(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(GK(i)||LK(i))?i=parseFloat(i):!G0e(i)&&Zd.test(n)&&(i=VK(e,n)),this.setBaseTarget(e,Ms(i)?i.get():i)),Ms(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const a=eL(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(i=a[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Ms(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new pL),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class TX extends K0e{constructor(){super(...arguments),this.KeyframeResolver=YK}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ms(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function X0e(t){return window.getComputedStyle(t)}class Y0e extends TX{constructor(){super(...arguments),this.type="html",this.renderInstance=fK}readValueFromInstance(e,n){if(Cp.has(n)){const r=xL(n);return r&&r.default||0}else{const r=X0e(e),i=(cK(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return hX(e,n)}build(e,n,r){rL(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return oL(e,n,r)}}class J0e extends TX{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Qr}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Cp.has(n)){const r=xL(n);return r&&r.default||0}return n=hK.has(n)?n:Jj(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return gK(e,n,r)}build(e,n,r){iL(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){pK(e,n,r,i)}mount(e){this.isSVGTag=aL(e.tagName),super.mount(e)}}const Q0e=(t,e)=>Zj(t)?new J0e(e):new Y0e(e,{allowProjection:t!==M.Fragment}),Z0e=Ege({..._ye,...$0e,...O0e,...V0e},Q0e),at=Fme(Z0e),EL=wT("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ut=M.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const a=r?ooe:"button";return p.jsx(a,{className:kt(EL({variant:e,size:n,className:t})),ref:s,...i})});ut.displayName="Button";function AX(){const{user:t}=qr(),[e,n]=M.useState([]),[r,i]=M.useState(!0),s=M.useCallback(async()=>{if(!t){n([]),i(!1);return}i(!0);const{data:u,error:d}=await ot.from("user_roles").select("role").eq("user_id",t.id);!d&&u&&n(u.map(h=>h.role)),i(!1)},[t]);M.useEffect(()=>{s()},[s]);const a=e.includes("admin"),o=e.includes("moderator"),l=e.includes("researcher"),c=M.useCallback(u=>e.includes(u),[e]);return{roles:e,isAdmin:a,isModerator:o,isResearcher:l,hasRole:c,isLoading:r,refreshRoles:s}}var PP={exports:{}},CP={};var dz;function exe(){if(dz)return CP;dz=1;var t=lw();function e(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,a=t.useDebugValue;function o(d,h){var m=h(),b=r({inst:{value:m,getSnapshot:h}}),x=b[0].inst,v=b[1];return s(function(){x.value=m,x.getSnapshot=h,l(x)&&v({inst:x})},[d,m,h]),i(function(){return l(x)&&v({inst:x}),d(function(){l(x)&&v({inst:x})})},[d]),a(m),m}function l(d){var h=d.getSnapshot;d=d.value;try{var m=h();return!n(d,m)}catch{return!0}}function c(d,h){return h()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:o;return CP.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,CP}var fz;function txe(){return fz||(fz=1,PP.exports=exe()),PP.exports}var nxe=txe();function rxe(){return nxe.useSyncExternalStore(ixe,()=>!0,()=>!1)}function ixe(){return()=>{}}var TL="Avatar",[sxe]=cs(TL),[axe,MX]=sxe(TL),PX=M.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[i,s]=M.useState("idle");return p.jsx(axe,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:s,children:p.jsx(Pt.span,{...r,ref:e})})});PX.displayName=TL;var CX="AvatarImage",RX=M.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...s}=t,a=MX(CX,n),o=oxe(r,s),l=Wr(c=>{i(c),a.onImageLoadingStatusChange(c)});return Gr(()=>{o!=="idle"&&l(o)},[o,l]),o==="loaded"?p.jsx(Pt.img,{...s,ref:e,src:r}):null});RX.displayName=CX;var OX="AvatarFallback",NX=M.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...i}=t,s=MX(OX,n),[a,o]=M.useState(r===void 0);return M.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>o(!0),r);return()=>window.clearTimeout(l)}},[r]),a&&s.imageLoadingStatus!=="loaded"?p.jsx(Pt.span,{...i,ref:e}):null});NX.displayName=OX;function hz(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function oxe(t,{referrerPolicy:e,crossOrigin:n}){const r=rxe(),i=M.useRef(null),s=r?(i.current||(i.current=new window.Image),i.current):null,[a,o]=M.useState(()=>hz(s,t));return Gr(()=>{o(hz(s,t))},[s,t]),Gr(()=>{const l=d=>()=>{o(d)};if(!s)return;const c=l("loaded"),u=l("error");return s.addEventListener("load",c),s.addEventListener("error",u),e&&(s.referrerPolicy=e),typeof n=="string"&&(s.crossOrigin=n),()=>{s.removeEventListener("load",c),s.removeEventListener("error",u)}},[s,n,e]),a}var IX=PX,kX=RX,DX=NX;const bw=M.forwardRef(({className:t,...e},n)=>p.jsx(IX,{ref:n,className:kt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));bw.displayName=IX.displayName;const zT=M.forwardRef(({className:t,...e},n)=>p.jsx(kX,{ref:n,className:kt("aspect-square h-full w-full",t),...e}));zT.displayName=kX.displayName;const ww=M.forwardRef(({className:t,...e},n)=>p.jsx(DX,{ref:n,className:kt("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));ww.displayName=DX.displayName;function jX({onOpenProfile:t}){const[e,n]=M.useState(!1),{user:r,profile:i,signOut:s}=qr(),a=oy();if(!r)return null;const o=i?.display_name?.split(" ").map(l=>l[0]).join("").toUpperCase().slice(0,2)||r.email?.[0].toUpperCase()||"U";return p.jsxs("div",{className:"relative",children:[p.jsxs(ut,{variant:"ghost",className:"flex items-center gap-2 px-2",onClick:()=>n(!e),children:[p.jsxs(bw,{className:"h-8 w-8",children:[p.jsx(zT,{src:i?.avatar_url||void 0}),p.jsx(ww,{className:"bg-primary/20 text-primary text-xs",children:o})]}),p.jsx("span",{className:"hidden md:inline text-sm font-medium max-w-[100px] truncate",children:i?.display_name||r.email}),p.jsx(_T,{className:"w-4 h-4 text-muted-foreground"})]}),p.jsx(cf,{children:e&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>n(!1)}),p.jsxs(at.div,{className:"absolute right-0 top-full mt-2 w-56 glass-panel z-50 overflow-hidden",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[p.jsxs("div",{className:"p-3 border-b border-border",children:[p.jsx("p",{className:"font-medium text-sm truncate",children:i?.display_name||"Researcher"}),p.jsx("p",{className:"text-xs text-muted-foreground truncate",children:r.email})]}),p.jsxs("div",{className:"p-1",children:[p.jsxs("button",{onClick:()=>{a("/dashboard"),n(!1)},className:"w-full flex items-center gap-3 px-3 py-2 text-sm rounded-lg hover:bg-muted transition-colors",children:[p.jsx(bj,{className:"w-4 h-4"}),"My Dashboard"]}),p.jsxs("button",{onClick:()=>n(!1),className:"w-full flex items-center gap-3 px-3 py-2 text-sm rounded-lg hover:bg-muted transition-colors",children:[p.jsx(yo,{className:"w-4 h-4"}),"My Publications"]}),p.jsxs("button",{onClick:()=>n(!1),className:"w-full flex items-center gap-3 px-3 py-2 text-sm rounded-lg hover:bg-muted transition-colors",children:[p.jsx(xj,{className:"w-4 h-4"}),"Settings"]})]}),p.jsx("div",{className:"p-1 border-t border-border",children:p.jsxs("button",{onClick:()=>{s(),n(!1)},className:"w-full flex items-center gap-3 px-3 py-2 text-sm rounded-lg hover:bg-destructive/10 text-destructive transition-colors",children:[p.jsx(A9,{className:"w-4 h-4"}),"Sign Out"]})})]})]})})]})}const lxe=wT("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function $i({className:t,variant:e,...n}){return p.jsx("div",{className:kt(lxe({variant:e}),t),...n})}var cxe=M.createContext(void 0);function dy(t){const e=M.useContext(cxe);return t||e||"ltr"}function Zx(t,[e,n]){return Math.min(n,Math.max(e,t))}function uxe(t,e){return M.useReducer((n,r)=>e[n][r]??n,t)}var AL="ScrollArea",[LX]=cs(AL),[dxe,Eo]=LX(AL),UX=M.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:s=600,...a}=t,[o,l]=M.useState(null),[c,u]=M.useState(null),[d,h]=M.useState(null),[m,b]=M.useState(null),[x,v]=M.useState(null),[_,E]=M.useState(0),[T,A]=M.useState(0),[P,R]=M.useState(!1),[N,L]=M.useState(!1),I=tn(e,B=>l(B)),j=dy(i);return p.jsx(dxe,{scope:n,type:r,dir:j,scrollHideDelay:s,scrollArea:o,viewport:c,onViewportChange:u,content:d,onContentChange:h,scrollbarX:m,onScrollbarXChange:b,scrollbarXEnabled:P,onScrollbarXEnabledChange:R,scrollbarY:x,onScrollbarYChange:v,scrollbarYEnabled:N,onScrollbarYEnabledChange:L,onCornerWidthChange:E,onCornerHeightChange:A,children:p.jsx(Pt.div,{dir:j,...a,ref:I,style:{position:"relative","--radix-scroll-area-corner-width":_+"px","--radix-scroll-area-corner-height":T+"px",...t.style}})})});UX.displayName=AL;var FX="ScrollAreaViewport",BX=M.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:i,...s}=t,a=Eo(FX,n),o=M.useRef(null),l=tn(e,o,a.onViewportChange);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),p.jsx(Pt.div,{"data-radix-scroll-area-viewport":"",...s,ref:l,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...t.style},children:p.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});BX.displayName=FX;var cc="ScrollAreaScrollbar",ML=M.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=Eo(cc,t.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:a}=i,o=t.orientation==="horizontal";return M.useEffect(()=>(o?s(!0):a(!0),()=>{o?s(!1):a(!1)}),[o,s,a]),i.type==="hover"?p.jsx(fxe,{...r,ref:e,forceMount:n}):i.type==="scroll"?p.jsx(hxe,{...r,ref:e,forceMount:n}):i.type==="auto"?p.jsx(zX,{...r,ref:e,forceMount:n}):i.type==="always"?p.jsx(PL,{...r,ref:e}):null});ML.displayName=cc;var fxe=M.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=Eo(cc,t.__scopeScrollArea),[s,a]=M.useState(!1);return M.useEffect(()=>{const o=i.scrollArea;let l=0;if(o){const c=()=>{window.clearTimeout(l),a(!0)},u=()=>{l=window.setTimeout(()=>a(!1),i.scrollHideDelay)};return o.addEventListener("pointerenter",c),o.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),o.removeEventListener("pointerenter",c),o.removeEventListener("pointerleave",u)}}},[i.scrollArea,i.scrollHideDelay]),p.jsx(Wi,{present:n||s,children:p.jsx(zX,{"data-state":s?"visible":"hidden",...r,ref:e})})}),hxe=M.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=Eo(cc,t.__scopeScrollArea),s=t.orientation==="horizontal",a=VT(()=>l("SCROLL_END"),100),[o,l]=uxe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return M.useEffect(()=>{if(o==="idle"){const c=window.setTimeout(()=>l("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(c)}},[o,i.scrollHideDelay,l]),M.useEffect(()=>{const c=i.viewport,u=s?"scrollLeft":"scrollTop";if(c){let d=c[u];const h=()=>{const m=c[u];d!==m&&(l("SCROLL"),a()),d=m};return c.addEventListener("scroll",h),()=>c.removeEventListener("scroll",h)}},[i.viewport,s,l,a]),p.jsx(Wi,{present:n||o!=="hidden",children:p.jsx(PL,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Je(t.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:Je(t.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),zX=M.forwardRef((t,e)=>{const n=Eo(cc,t.__scopeScrollArea),{forceMount:r,...i}=t,[s,a]=M.useState(!1),o=t.orientation==="horizontal",l=VT(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;a(o?c:u)}},10);return hv(n.viewport,l),hv(n.content,l),p.jsx(Wi,{present:r||s,children:p.jsx(PL,{"data-state":s?"visible":"hidden",...i,ref:e})})}),PL=M.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,i=Eo(cc,t.__scopeScrollArea),s=M.useRef(null),a=M.useRef(0),[o,l]=M.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=GX(o.viewport,o.content),u={...r,sizes:o,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>s.current=h,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:h=>a.current=h};function d(h,m){return xxe(h,a.current,o,m)}return n==="horizontal"?p.jsx(pxe,{...u,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const h=i.viewport.scrollLeft,m=pz(h,o,i.dir);s.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:h=>{i.viewport&&(i.viewport.scrollLeft=h)},onDragScroll:h=>{i.viewport&&(i.viewport.scrollLeft=d(h,i.dir))}}):n==="vertical"?p.jsx(mxe,{...u,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const h=i.viewport.scrollTop,m=pz(h,o);s.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:h=>{i.viewport&&(i.viewport.scrollTop=h)},onDragScroll:h=>{i.viewport&&(i.viewport.scrollTop=d(h))}}):null}),pxe=M.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,s=Eo(cc,t.__scopeScrollArea),[a,o]=M.useState(),l=M.useRef(null),c=tn(e,l,s.onScrollbarXChange);return M.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),p.jsx(VX,{"data-orientation":"horizontal",...i,ref:c,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":$T(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,d)=>{if(s.viewport){const h=s.viewport.scrollLeft+u.deltaX;t.onWheelScroll(h),KX(h,d)&&u.preventDefault()}},onResize:()=>{l.current&&s.viewport&&a&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:rE(a.paddingLeft),paddingEnd:rE(a.paddingRight)}})}})}),mxe=M.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,s=Eo(cc,t.__scopeScrollArea),[a,o]=M.useState(),l=M.useRef(null),c=tn(e,l,s.onScrollbarYChange);return M.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),p.jsx(VX,{"data-orientation":"vertical",...i,ref:c,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":$T(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,d)=>{if(s.viewport){const h=s.viewport.scrollTop+u.deltaY;t.onWheelScroll(h),KX(h,d)&&u.preventDefault()}},onResize:()=>{l.current&&s.viewport&&a&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:rE(a.paddingTop),paddingEnd:rE(a.paddingBottom)}})}})}),[gxe,$X]=LX(cc),VX=M.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:a,onThumbPointerDown:o,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:d,...h}=t,m=Eo(cc,n),[b,x]=M.useState(null),v=tn(e,I=>x(I)),_=M.useRef(null),E=M.useRef(""),T=m.viewport,A=r.content-r.viewport,P=Wr(u),R=Wr(l),N=VT(d,10);function L(I){if(_.current){const j=I.clientX-_.current.left,B=I.clientY-_.current.top;c({x:j,y:B})}}return M.useEffect(()=>{const I=j=>{const B=j.target;b?.contains(B)&&P(j,A)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[T,b,A,P]),M.useEffect(R,[r,R]),hv(b,N),hv(m.content,N),p.jsx(gxe,{scope:n,scrollbar:b,hasThumb:i,onThumbChange:Wr(s),onThumbPointerUp:Wr(a),onThumbPositionChange:R,onThumbPointerDown:Wr(o),children:p.jsx(Pt.div,{...h,ref:v,style:{position:"absolute",...h.style},onPointerDown:Je(t.onPointerDown,I=>{I.button===0&&(I.target.setPointerCapture(I.pointerId),_.current=b.getBoundingClientRect(),E.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),L(I))}),onPointerMove:Je(t.onPointerMove,L),onPointerUp:Je(t.onPointerUp,I=>{const j=I.target;j.hasPointerCapture(I.pointerId)&&j.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=E.current,m.viewport&&(m.viewport.style.scrollBehavior=""),_.current=null})})})}),nE="ScrollAreaThumb",HX=M.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=$X(nE,t.__scopeScrollArea);return p.jsx(Wi,{present:n||i.hasThumb,children:p.jsx(vxe,{ref:e,...r})})}),vxe=M.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...i}=t,s=Eo(nE,n),a=$X(nE,n),{onThumbPositionChange:o}=a,l=tn(e,d=>a.onThumbChange(d)),c=M.useRef(void 0),u=VT(()=>{c.current&&(c.current(),c.current=void 0)},100);return M.useEffect(()=>{const d=s.viewport;if(d){const h=()=>{if(u(),!c.current){const m=bxe(d,o);c.current=m,o()}};return o(),d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[s.viewport,u,o]),p.jsx(Pt.div,{"data-state":a.hasThumb?"visible":"hidden",...i,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Je(t.onPointerDownCapture,d=>{const m=d.target.getBoundingClientRect(),b=d.clientX-m.left,x=d.clientY-m.top;a.onThumbPointerDown({x:b,y:x})}),onPointerUp:Je(t.onPointerUp,a.onThumbPointerUp)})});HX.displayName=nE;var CL="ScrollAreaCorner",WX=M.forwardRef((t,e)=>{const n=Eo(CL,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?p.jsx(yxe,{...t,ref:e}):null});WX.displayName=CL;var yxe=M.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,i=Eo(CL,n),[s,a]=M.useState(0),[o,l]=M.useState(0),c=!!(s&&o);return hv(i.scrollbarX,()=>{const u=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(u),l(u)}),hv(i.scrollbarY,()=>{const u=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(u),a(u)}),c?p.jsx(Pt.div,{...r,ref:e,style:{width:s,height:o,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function rE(t){return t?parseInt(t,10):0}function GX(t,e){const n=t/e;return isNaN(n)?0:n}function $T(t){const e=GX(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function xxe(t,e,n,r="ltr"){const i=$T(n),s=i/2,a=e||s,o=i-a,l=n.scrollbar.paddingStart+a,c=n.scrollbar.size-n.scrollbar.paddingEnd-o,u=n.content-n.viewport,d=r==="ltr"?[0,u]:[u*-1,0];return qX([l,c],d)(t)}function pz(t,e,n="ltr"){const r=$T(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=e.scrollbar.size-i,a=e.content-e.viewport,o=s-r,l=n==="ltr"?[0,a]:[a*-1,0],c=Zx(t,l);return qX([0,a],[0,o])(c)}function qX(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function KX(t,e){return t>0&&t<e}var bxe=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return(function i(){const s={left:t.scrollLeft,top:t.scrollTop},a=n.left!==s.left,o=n.top!==s.top;(a||o)&&e(),n=s,r=window.requestAnimationFrame(i)})(),()=>window.cancelAnimationFrame(r)};function VT(t,e){const n=Wr(t),r=M.useRef(0);return M.useEffect(()=>()=>window.clearTimeout(r.current),[]),M.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function hv(t,e){const n=Wr(e);Gr(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,n])}var XX=UX,wxe=BX,_xe=WX;const gl=M.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(XX,{ref:r,className:kt("relative overflow-hidden",t),...n,children:[p.jsx(wxe,{className:"h-full w-full rounded-[inherit]",children:e}),p.jsx(YX,{}),p.jsx(_xe,{})]}));gl.displayName=XX.displayName;const YX=M.forwardRef(({className:t,orientation:e="vertical",...n},r)=>p.jsx(ML,{ref:r,orientation:e,className:kt("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:p.jsx(HX,{className:"relative flex-1 rounded-full bg-border"})}));YX.displayName=ML.displayName;var RP=0;function HT(){M.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??mz()),document.body.insertAdjacentElement("beforeend",t[1]??mz()),RP++,()=>{RP===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),RP--}},[])}function mz(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var OP="focusScope.autoFocusOnMount",NP="focusScope.autoFocusOnUnmount",gz={bubbles:!1,cancelable:!0},Sxe="FocusScope",_w=M.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=t,[o,l]=M.useState(null),c=Wr(i),u=Wr(s),d=M.useRef(null),h=tn(e,x=>l(x)),m=M.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;M.useEffect(()=>{if(r){let x=function(T){if(m.paused||!o)return;const A=T.target;o.contains(A)?d.current=A:Nd(d.current,{select:!0})},v=function(T){if(m.paused||!o)return;const A=T.relatedTarget;A!==null&&(o.contains(A)||Nd(d.current,{select:!0}))},_=function(T){if(document.activeElement===document.body)for(const P of T)P.removedNodes.length>0&&Nd(o)};document.addEventListener("focusin",x),document.addEventListener("focusout",v);const E=new MutationObserver(_);return o&&E.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",v),E.disconnect()}}},[r,o,m.paused]),M.useEffect(()=>{if(o){yz.add(m);const x=document.activeElement;if(!o.contains(x)){const _=new CustomEvent(OP,gz);o.addEventListener(OP,c),o.dispatchEvent(_),_.defaultPrevented||(Exe(Cxe(JX(o)),{select:!0}),document.activeElement===x&&Nd(o))}return()=>{o.removeEventListener(OP,c),setTimeout(()=>{const _=new CustomEvent(NP,gz);o.addEventListener(NP,u),o.dispatchEvent(_),_.defaultPrevented||Nd(x??document.body,{select:!0}),o.removeEventListener(NP,u),yz.remove(m)},0)}}},[o,c,u,m]);const b=M.useCallback(x=>{if(!n&&!r||m.paused)return;const v=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,_=document.activeElement;if(v&&_){const E=x.currentTarget,[T,A]=Txe(E);T&&A?!x.shiftKey&&_===A?(x.preventDefault(),n&&Nd(T,{select:!0})):x.shiftKey&&_===T&&(x.preventDefault(),n&&Nd(A,{select:!0})):_===E&&x.preventDefault()}},[n,r,m.paused]);return p.jsx(Pt.div,{tabIndex:-1,...a,ref:h,onKeyDown:b})});_w.displayName=Sxe;function Exe(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Nd(r,{select:e}),document.activeElement!==n)return}function Txe(t){const e=JX(t),n=vz(e,t),r=vz(e.reverse(),t);return[n,r]}function JX(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function vz(t,e){for(const n of t)if(!Axe(n,{upTo:e}))return n}function Axe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Mxe(t){return t instanceof HTMLInputElement&&"select"in t}function Nd(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Mxe(t)&&e&&t.select()}}var yz=Pxe();function Pxe(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=xz(t,e),t.unshift(e)},remove(e){t=xz(t,e),t[0]?.resume()}}}function xz(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Cxe(t){return t.filter(e=>e.tagName!=="A")}var Rxe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Km=new WeakMap,sS=new WeakMap,aS={},IP=0,QX=function(t){return t&&(t.host||QX(t.parentNode))},Oxe=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=QX(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Nxe=function(t,e,n,r){var i=Oxe(e,Array.isArray(t)?t:[t]);aS[n]||(aS[n]=new WeakMap);var s=aS[n],a=[],o=new Set,l=new Set(i),c=function(d){!d||o.has(d)||(o.add(d),c(d.parentNode))};i.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(o.has(h))u(h);else try{var m=h.getAttribute(r),b=m!==null&&m!=="false",x=(Km.get(h)||0)+1,v=(s.get(h)||0)+1;Km.set(h,x),s.set(h,v),a.push(h),x===1&&b&&sS.set(h,!0),v===1&&h.setAttribute(n,"true"),b||h.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",h,_)}})};return u(e),o.clear(),IP++,function(){a.forEach(function(d){var h=Km.get(d)-1,m=s.get(d)-1;Km.set(d,h),s.set(d,m),h||(sS.has(d)||d.removeAttribute(r),sS.delete(d)),m||d.removeAttribute(n)}),IP--,IP||(Km=new WeakMap,Km=new WeakMap,sS=new WeakMap,aS={})}},WT=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=Rxe(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),Nxe(r,i,n,"aria-hidden")):function(){return null}},M1="right-scroll-bar-position",P1="width-before-scroll-bar",Ixe="with-scroll-bars-hidden",kxe="--removed-body-scroll-bar-size";function kP(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Dxe(t,e){var n=M.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var jxe=typeof window<"u"?M.useLayoutEffect:M.useEffect,bz=new WeakMap;function Lxe(t,e){var n=Dxe(null,function(r){return t.forEach(function(i){return kP(i,r)})});return jxe(function(){var r=bz.get(n);if(r){var i=new Set(r),s=new Set(t),a=n.current;i.forEach(function(o){s.has(o)||kP(o,null)}),s.forEach(function(o){i.has(o)||kP(o,a)})}bz.set(n,t)},[t]),n}function Uxe(t){return t}function Fxe(t,e){e===void 0&&(e=Uxe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var a=e(s,r);return n.push(a),function(){n=n.filter(function(o){return o!==a})}},assignSyncMedium:function(s){for(r=!0;n.length;){var a=n;n=[],a.forEach(s)}n={push:function(o){return s(o)},filter:function(){return n}}},assignMedium:function(s){r=!0;var a=[];if(n.length){var o=n;n=[],o.forEach(s),a=n}var l=function(){var u=a;a=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){a.push(u),c()},filter:function(u){return a=a.filter(u),n}}}};return i}function Bxe(t){t===void 0&&(t={});var e=Fxe(null);return e.options=Hl({async:!0,ssr:!1},t),e}var ZX=function(t){var e=t.sideCar,n=ly(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return M.createElement(r,Hl({},n))};ZX.isSideCarExport=!0;function zxe(t,e){return t.useMedium(e),ZX}var eY=Bxe(),DP=function(){},GT=M.forwardRef(function(t,e){var n=M.useRef(null),r=M.useState({onScrollCapture:DP,onWheelCapture:DP,onTouchMoveCapture:DP}),i=r[0],s=r[1],a=t.forwardProps,o=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,h=t.sideCar,m=t.noRelative,b=t.noIsolation,x=t.inert,v=t.allowPinchZoom,_=t.as,E=_===void 0?"div":_,T=t.gapMode,A=ly(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=h,R=Lxe([n,e]),N=Hl(Hl({},A),i);return M.createElement(M.Fragment,null,u&&M.createElement(P,{sideCar:eY,removeScrollBar:c,shards:d,noRelative:m,noIsolation:b,inert:x,setCallbacks:s,allowPinchZoom:!!v,lockRef:n,gapMode:T}),a?M.cloneElement(M.Children.only(o),Hl(Hl({},N),{ref:R})):M.createElement(E,Hl({},N,{className:l,ref:R}),o))});GT.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};GT.classNames={fullWidth:P1,zeroRight:M1};var $xe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Vxe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=$xe();return e&&t.setAttribute("nonce",e),t}function Hxe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Wxe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Gxe=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Vxe())&&(Hxe(e,n),Wxe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},qxe=function(){var t=Gxe();return function(e,n){M.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},tY=function(){var t=qxe(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},Kxe={left:0,top:0,right:0,gap:0},jP=function(t){return parseInt(t||"",10)||0},Xxe=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[jP(n),jP(r),jP(i)]},Yxe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Kxe;var e=Xxe(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},Jxe=tY(),Jg="data-scroll-locked",Qxe=function(t,e,n,r){var i=t.left,s=t.top,a=t.right,o=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Ixe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(Jg,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(M1,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(P1,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(M1," .").concat(M1,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(P1," .").concat(P1,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Jg,`] {
    `).concat(kxe,": ").concat(o,`px;
  }
`)},wz=function(){var t=parseInt(document.body.getAttribute(Jg)||"0",10);return isFinite(t)?t:0},Zxe=function(){M.useEffect(function(){return document.body.setAttribute(Jg,(wz()+1).toString()),function(){var t=wz()-1;t<=0?document.body.removeAttribute(Jg):document.body.setAttribute(Jg,t.toString())}},[])},ebe=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;Zxe();var s=M.useMemo(function(){return Yxe(i)},[i]);return M.createElement(Jxe,{styles:Qxe(s,!e,i,n?"":"!important")})},DI=!1;if(typeof window<"u")try{var oS=Object.defineProperty({},"passive",{get:function(){return DI=!0,!0}});window.addEventListener("test",oS,oS),window.removeEventListener("test",oS,oS)}catch{DI=!1}var Xm=DI?{passive:!1}:!1,tbe=function(t){return t.tagName==="TEXTAREA"},nY=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!tbe(t)&&n[e]==="visible")},nbe=function(t){return nY(t,"overflowY")},rbe=function(t){return nY(t,"overflowX")},_z=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=rY(t,r);if(i){var s=iY(t,r),a=s[1],o=s[2];if(a>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},ibe=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},sbe=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},rY=function(t,e){return t==="v"?nbe(e):rbe(e)},iY=function(t,e){return t==="v"?ibe(e):sbe(e)},abe=function(t,e){return t==="h"&&e==="rtl"?-1:1},obe=function(t,e,n,r,i){var s=abe(t,window.getComputedStyle(e).direction),a=s*r,o=n.target,l=e.contains(o),c=!1,u=a>0,d=0,h=0;do{if(!o)break;var m=iY(t,o),b=m[0],x=m[1],v=m[2],_=x-v-s*b;(b||_)&&rY(t,o)&&(d+=_,h+=b);var E=o.parentNode;o=E&&E.nodeType===Node.DOCUMENT_FRAGMENT_NODE?E.host:E}while(!l&&o!==document.body||l&&(e.contains(o)||e===o));return(u&&Math.abs(d)<1||!u&&Math.abs(h)<1)&&(c=!0),c},lS=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Sz=function(t){return[t.deltaX,t.deltaY]},Ez=function(t){return t&&"current"in t?t.current:t},lbe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},cbe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},ube=0,Ym=[];function dbe(t){var e=M.useRef([]),n=M.useRef([0,0]),r=M.useRef(),i=M.useState(ube++)[0],s=M.useState(tY)[0],a=M.useRef(t);M.useEffect(function(){a.current=t},[t]),M.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var x=qfe([t.lockRef.current],(t.shards||[]).map(Ez),!0).filter(Boolean);return x.forEach(function(v){return v.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),x.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var o=M.useCallback(function(x,v){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!a.current.allowPinchZoom;var _=lS(x),E=n.current,T="deltaX"in x?x.deltaX:E[0]-_[0],A="deltaY"in x?x.deltaY:E[1]-_[1],P,R=x.target,N=Math.abs(T)>Math.abs(A)?"h":"v";if("touches"in x&&N==="h"&&R.type==="range")return!1;var L=_z(N,R);if(!L)return!0;if(L?P=N:(P=N==="v"?"h":"v",L=_z(N,R)),!L)return!1;if(!r.current&&"changedTouches"in x&&(T||A)&&(r.current=P),!P)return!0;var I=r.current||P;return obe(I,v,x,I==="h"?T:A)},[]),l=M.useCallback(function(x){var v=x;if(!(!Ym.length||Ym[Ym.length-1]!==s)){var _="deltaY"in v?Sz(v):lS(v),E=e.current.filter(function(P){return P.name===v.type&&(P.target===v.target||v.target===P.shadowParent)&&lbe(P.delta,_)})[0];if(E&&E.should){v.cancelable&&v.preventDefault();return}if(!E){var T=(a.current.shards||[]).map(Ez).filter(Boolean).filter(function(P){return P.contains(v.target)}),A=T.length>0?o(v,T[0]):!a.current.noIsolation;A&&v.cancelable&&v.preventDefault()}}},[]),c=M.useCallback(function(x,v,_,E){var T={name:x,delta:v,target:_,should:E,shadowParent:fbe(_)};e.current.push(T),setTimeout(function(){e.current=e.current.filter(function(A){return A!==T})},1)},[]),u=M.useCallback(function(x){n.current=lS(x),r.current=void 0},[]),d=M.useCallback(function(x){c(x.type,Sz(x),x.target,o(x,t.lockRef.current))},[]),h=M.useCallback(function(x){c(x.type,lS(x),x.target,o(x,t.lockRef.current))},[]);M.useEffect(function(){return Ym.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Xm),document.addEventListener("touchmove",l,Xm),document.addEventListener("touchstart",u,Xm),function(){Ym=Ym.filter(function(x){return x!==s}),document.removeEventListener("wheel",l,Xm),document.removeEventListener("touchmove",l,Xm),document.removeEventListener("touchstart",u,Xm)}},[]);var m=t.removeScrollBar,b=t.inert;return M.createElement(M.Fragment,null,b?M.createElement(s,{styles:cbe(i)}):null,m?M.createElement(ebe,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function fbe(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const hbe=zxe(eY,dbe);var Sw=M.forwardRef(function(t,e){return M.createElement(GT,Hl({},t,{ref:e,sideCar:hbe}))});Sw.classNames=GT.classNames;var qT="Popover",[sY]=cs(qT,[lf]),Ew=lf(),[pbe,df]=sY(qT),aY=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:a=!1}=t,o=Ew(e),l=M.useRef(null),[c,u]=M.useState(!1),[d,h]=bl({prop:r,defaultProp:i??!1,onChange:s,caller:qT});return p.jsx(Nj,{...o,children:p.jsx(pbe,{scope:e,contentId:go(),triggerRef:l,open:d,onOpenChange:h,onOpenToggle:M.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:c,onCustomAnchorAdd:M.useCallback(()=>u(!0),[]),onCustomAnchorRemove:M.useCallback(()=>u(!1),[]),modal:a,children:n})})};aY.displayName=qT;var oY="PopoverAnchor",mbe=M.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=df(oY,n),s=Ew(n),{onCustomAnchorAdd:a,onCustomAnchorRemove:o}=i;return M.useEffect(()=>(a(),()=>o()),[a,o]),p.jsx(hw,{...s,...r,ref:e})});mbe.displayName=oY;var lY="PopoverTrigger",cY=M.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=df(lY,n),s=Ew(n),a=tn(e,i.triggerRef),o=p.jsx(Pt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":pY(i.open),...r,ref:a,onClick:Je(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?o:p.jsx(hw,{asChild:!0,...s,children:o})});cY.displayName=lY;var RL="PopoverPortal",[gbe,vbe]=sY(RL,{forceMount:void 0}),uY=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,s=df(RL,e);return p.jsx(gbe,{scope:e,forceMount:n,children:p.jsx(Wi,{present:n||s.open,children:p.jsx(ey,{asChild:!0,container:i,children:r})})})};uY.displayName=RL;var pv="PopoverContent",dY=M.forwardRef((t,e)=>{const n=vbe(pv,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,s=df(pv,t.__scopePopover);return p.jsx(Wi,{present:r||s.open,children:s.modal?p.jsx(xbe,{...i,ref:e}):p.jsx(bbe,{...i,ref:e})})});dY.displayName=pv;var ybe=Kd("PopoverContent.RemoveScroll"),xbe=M.forwardRef((t,e)=>{const n=df(pv,t.__scopePopover),r=M.useRef(null),i=tn(e,r),s=M.useRef(!1);return M.useEffect(()=>{const a=r.current;if(a)return WT(a)},[]),p.jsx(Sw,{as:ybe,allowPinchZoom:!0,children:p.jsx(fY,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Je(t.onCloseAutoFocus,a=>{a.preventDefault(),s.current||n.triggerRef.current?.focus()}),onPointerDownOutside:Je(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0,c=o.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:Je(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),bbe=M.forwardRef((t,e)=>{const n=df(pv,t.__scopePopover),r=M.useRef(!1),i=M.useRef(!1);return p.jsx(fY,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{t.onCloseAutoFocus?.(s),s.defaultPrevented||(r.current||n.triggerRef.current?.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{t.onInteractOutside?.(s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=s.target;n.triggerRef.current?.contains(a)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),fY=M.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:a,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,h=df(pv,n),m=Ew(n);return HT(),p.jsx(_w,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:p.jsx(Ap,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:u,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>h.onOpenChange(!1),children:p.jsx(AT,{"data-state":pY(h.open),role:"dialog",id:h.contentId,...m,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),hY="PopoverClose",wbe=M.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=df(hY,n);return p.jsx(Pt.button,{type:"button",...r,ref:e,onClick:Je(t.onClick,()=>i.onOpenChange(!1))})});wbe.displayName=hY;var _be="PopoverArrow",Sbe=M.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Ew(n);return p.jsx(MT,{...i,...r,ref:e})});Sbe.displayName=_be;function pY(t){return t?"open":"closed"}var Ebe=aY,Tbe=cY,Abe=uY,mY=dY;const Mbe=Ebe,Pbe=Tbe,gY=M.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>p.jsx(Abe,{children:p.jsx(mY,{ref:i,align:e,sideOffset:n,className:kt("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));gY.displayName=mY.displayName;function vY(){const[t,e]=M.useState([]),[n,r]=M.useState(0),[i,s]=M.useState(!0),{user:a}=qr(),{toast:o}=ga(),l=M.useCallback(async()=>{if(!a){e([]),r(0),s(!1);return}const{data:m,error:b}=await ot.from("notifications").select("*").eq("user_id",a.id).order("created_at",{ascending:!1}).limit(50);if(b)console.error("Error fetching notifications:",b);else{const x=m||[];e(x),r(x.filter(v=>!v.is_read).length)}s(!1)},[a]);return M.useEffect(()=>{l()},[l]),M.useEffect(()=>{if(!a)return;const m=ot.channel("notifications-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${a.id}`},b=>{const x=b.new;e(v=>[x,...v]),r(v=>v+1),o({title:x.title,description:x.message})}).subscribe();return()=>{ot.removeChannel(m)}},[a,o]),{notifications:t,unreadCount:n,isLoading:i,markAsRead:async m=>{const{error:b}=await ot.from("notifications").update({is_read:!0}).eq("id",m);b||(e(x=>x.map(v=>v.id===m?{...v,is_read:!0}:v)),r(x=>Math.max(0,x-1)))},markAllAsRead:async()=>{if(!a)return;const{error:m}=await ot.from("notifications").update({is_read:!0}).eq("user_id",a.id).eq("is_read",!1);m||(e(b=>b.map(x=>({...x,is_read:!0}))),r(0))},deleteNotification:async m=>{const b=t.find(v=>v.id===m),{error:x}=await ot.from("notifications").delete().eq("id",m);x||(e(v=>v.filter(_=>_.id!==m)),b&&!b.is_read&&r(v=>Math.max(0,v-1)))},createNotification:async(m,b,x,v,_={})=>{const{error:E}=await ot.from("notifications").insert([{user_id:m,type:b,title:x,message:v,metadata:_}]);return E?(console.error("Error creating notification:",E),{error:E}):{error:null}},refetch:l}}function ar(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function ef(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const yY=6048e5,Cbe=864e5,xY=6e4,bY=36e5,cS=43200,Tz=1440;let Rbe={};function Tw(){return Rbe}function eb(t,e){const n=Tw(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=ar(t),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function iE(t){return eb(t,{weekStartsOn:1})}function wY(t){const e=ar(t),n=e.getFullYear(),r=ef(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=iE(r),s=ef(t,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const a=iE(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function Az(t){const e=ar(t);return e.setHours(0,0,0,0),e}function sE(t){const e=ar(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Obe(t,e){const n=Az(t),r=Az(e),i=+n-sE(n),s=+r-sE(r);return Math.round((i-s)/Cbe)}function Nbe(t){const e=wY(t),n=ef(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),iE(n)}function C1(t,e){const n=ar(t),r=ar(e),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function Ibe(t){return ef(t,Date.now())}function kbe(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Dbe(t){if(!kbe(t)&&typeof t!="number")return!1;const e=ar(t);return!isNaN(Number(e))}function jbe(t,e){const n=ar(t),r=ar(e),i=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return i*12+s}function Lbe(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function Ube(t,e){return+ar(t)-+ar(e)}function Fbe(t){const e=ar(t);return e.setHours(23,59,59,999),e}function Bbe(t){const e=ar(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function zbe(t){const e=ar(t);return+Fbe(e)==+Bbe(e)}function $be(t,e){const n=ar(t),r=ar(e),i=C1(n,r),s=Math.abs(jbe(n,r));let a;if(s<1)a=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*s);let o=C1(n,r)===-i;zbe(ar(t))&&s===1&&C1(t,r)===1&&(o=!1),a=i*(s-Number(o))}return a===0?0:a}function Vbe(t,e,n){const r=Ube(t,e)/1e3;return Lbe(n?.roundingMethod)(r)}function Hbe(t){const e=ar(t),n=ef(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Wbe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Gbe=(t,e,n)=>{let r;const i=Wbe[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function LP(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const qbe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Kbe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Xbe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ybe={date:LP({formats:qbe,defaultWidth:"full"}),time:LP({formats:Kbe,defaultWidth:"full"}),dateTime:LP({formats:Xbe,defaultWidth:"full"})},Jbe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Qbe=(t,e,n,r)=>Jbe[t];function C0(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,o=n?.width?String(n.width):a;i=t.formattingValues[o]||t.formattingValues[a]}else{const a=t.defaultWidth,o=n?.width?String(n.width):t.defaultWidth;i=t.values[o]||t.values[a]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const Zbe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ewe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},twe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},nwe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},rwe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},iwe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},swe=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},awe={ordinalNumber:swe,era:C0({values:Zbe,defaultWidth:"wide"}),quarter:C0({values:ewe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:C0({values:twe,defaultWidth:"wide"}),day:C0({values:nwe,defaultWidth:"wide"}),dayPeriod:C0({values:rwe,defaultWidth:"wide",formattingValues:iwe,defaultFormattingWidth:"wide"})};function R0(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const a=s[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(o)?lwe(o,d=>d.test(a)):owe(o,d=>d.test(a));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(a.length);return{value:c,rest:u}}}function owe(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function lwe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function cwe(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let a=t.valueCallback?t.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const o=e.slice(i.length);return{value:a,rest:o}}}const uwe=/^(\d+)(th|st|nd|rd)?/i,dwe=/\d+/i,fwe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},hwe={any:[/^b/i,/^(a|c)/i]},pwe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},mwe={any:[/1/i,/2/i,/3/i,/4/i]},gwe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},vwe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ywe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},xwe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},bwe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},wwe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},_we={ordinalNumber:cwe({matchPattern:uwe,parsePattern:dwe,valueCallback:t=>parseInt(t,10)}),era:R0({matchPatterns:fwe,defaultMatchWidth:"wide",parsePatterns:hwe,defaultParseWidth:"any"}),quarter:R0({matchPatterns:pwe,defaultMatchWidth:"wide",parsePatterns:mwe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:R0({matchPatterns:gwe,defaultMatchWidth:"wide",parsePatterns:vwe,defaultParseWidth:"any"}),day:R0({matchPatterns:ywe,defaultMatchWidth:"wide",parsePatterns:xwe,defaultParseWidth:"any"}),dayPeriod:R0({matchPatterns:bwe,defaultMatchWidth:"any",parsePatterns:wwe,defaultParseWidth:"any"})},_Y={code:"en-US",formatDistance:Gbe,formatLong:Ybe,formatRelative:Qbe,localize:awe,match:_we,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Swe(t){const e=ar(t);return Obe(e,Hbe(e))+1}function Ewe(t){const e=ar(t),n=+iE(e)-+Nbe(e);return Math.round(n/yY)+1}function SY(t,e){const n=ar(t),r=n.getFullYear(),i=Tw(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,a=ef(t,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const o=eb(a,e),l=ef(t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=eb(l,e);return n.getTime()>=o.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function Twe(t,e){const n=Tw(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=SY(t,e),s=ef(t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),eb(s,e)}function Awe(t,e){const n=ar(t),r=+eb(n,e)-+Twe(n,e);return Math.round(r/yY)+1}function Gn(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const bd={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Gn(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Gn(n+1,2)},d(t,e){return Gn(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Gn(t.getHours()%12||12,e.length)},H(t,e){return Gn(t.getHours(),e.length)},m(t,e){return Gn(t.getMinutes(),e.length)},s(t,e){return Gn(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Gn(i,e.length)}},Jm={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Mz={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return bd.y(t,e)},Y:function(t,e,n,r){const i=SY(t,r),s=i>0?i:1-i;if(e==="YY"){const a=s%100;return Gn(a,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):Gn(s,e.length)},R:function(t,e){const n=wY(t);return Gn(n,e.length)},u:function(t,e){const n=t.getFullYear();return Gn(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Gn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Gn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return bd.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Gn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=Awe(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Gn(i,e.length)},I:function(t,e,n){const r=Ewe(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Gn(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):bd.d(t,e)},D:function(t,e,n){const r=Swe(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Gn(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Gn(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Gn(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Gn(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Jm.noon:r===0?i=Jm.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Jm.evening:r>=12?i=Jm.afternoon:r>=4?i=Jm.morning:i=Jm.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return bd.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):bd.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Gn(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Gn(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):bd.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):bd.s(t,e)},S:function(t,e){return bd.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Cz(r);case"XXXX":case"XX":return Mh(r);default:return Mh(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Cz(r);case"xxxx":case"xx":return Mh(r);default:return Mh(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Pz(r,":");default:return"GMT"+Mh(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Pz(r,":");default:return"GMT"+Mh(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Gn(r,e.length)},T:function(t,e,n){const r=t.getTime();return Gn(r,e.length)}};function Pz(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+Gn(s,2)}function Cz(t,e){return t%60===0?(t>0?"-":"+")+Gn(Math.abs(t)/60,2):Mh(t,e)}function Mh(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Gn(Math.trunc(r/60),2),s=Gn(r%60,2);return n+i+e+s}const Rz=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},EY=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},Mwe=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return Rz(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",Rz(r,e)).replace("{{time}}",EY(i,e))},Pwe={p:EY,P:Mwe},Cwe=/^D+$/,Rwe=/^Y+$/,Owe=["D","DD","YY","YYYY"];function Nwe(t){return Cwe.test(t)}function Iwe(t){return Rwe.test(t)}function kwe(t,e,n){const r=Dwe(t,e,n);if(console.warn(r),Owe.includes(t))throw new RangeError(r)}function Dwe(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const jwe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Lwe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Uwe=/^'([^]*?)'?$/,Fwe=/''/g,Bwe=/[a-zA-Z]/;function TY(t,e,n){const r=Tw(),i=r.locale??_Y,s=r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=r.weekStartsOn??r.locale?.options?.weekStartsOn??0,o=ar(t);if(!Dbe(o))throw new RangeError("Invalid time value");let l=e.match(Lwe).map(u=>{const d=u[0];if(d==="p"||d==="P"){const h=Pwe[d];return h(u,i.formatLong)}return u}).join("").match(jwe).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const d=u[0];if(d==="'")return{isToken:!1,value:zwe(u)};if(Mz[d])return{isToken:!0,value:u};if(d.match(Bwe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+d+"`");return{isToken:!1,value:u}});i.localize.preprocessor&&(l=i.localize.preprocessor(o,l));const c={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return l.map(u=>{if(!u.isToken)return u.value;const d=u.value;(Iwe(d)||Nwe(d))&&kwe(d,e,String(t));const h=Mz[d[0]];return h(o,d,i.localize,c)}).join("")}function zwe(t){const e=t.match(Uwe);return e?e[1].replace(Fwe,"'"):t}function $we(t,e,n){const r=Tw(),i=n?.locale??r.locale??_Y,s=2520,a=C1(t,e);if(isNaN(a))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:a});let l,c;a>0?(l=ar(e),c=ar(t)):(l=ar(t),c=ar(e));const u=Vbe(c,l),d=(sE(c)-sE(l))/1e3,h=Math.round((u-d)/60);let m;if(h<2)return n?.includeSeconds?u<5?i.formatDistance("lessThanXSeconds",5,o):u<10?i.formatDistance("lessThanXSeconds",10,o):u<20?i.formatDistance("lessThanXSeconds",20,o):u<40?i.formatDistance("halfAMinute",0,o):u<60?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",1,o):h===0?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",h,o);if(h<45)return i.formatDistance("xMinutes",h,o);if(h<90)return i.formatDistance("aboutXHours",1,o);if(h<Tz){const b=Math.round(h/60);return i.formatDistance("aboutXHours",b,o)}else{if(h<s)return i.formatDistance("xDays",1,o);if(h<cS){const b=Math.round(h/Tz);return i.formatDistance("xDays",b,o)}else if(h<cS*2)return m=Math.round(h/cS),i.formatDistance("aboutXMonths",m,o)}if(m=$be(c,l),m<12){const b=Math.round(h/cS);return i.formatDistance("xMonths",b,o)}else{const b=m%12,x=Math.trunc(m/12);return b<3?i.formatDistance("aboutXYears",x,o):b<9?i.formatDistance("overXYears",x,o):i.formatDistance("almostXYears",x+1,o)}}function Qg(t,e){return $we(t,Ibe(t),e)}function AY(t,e){const r=Gwe(t);let i;if(r.date){const l=qwe(r.date,2);i=Kwe(l.restDateString,l.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const s=i.getTime();let a=0,o;if(r.time&&(a=Xwe(r.time),isNaN(a)))return new Date(NaN);if(r.timezone){if(o=Ywe(r.timezone),isNaN(o))return new Date(NaN)}else{const l=new Date(s+a),c=new Date(0);return c.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),c.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),c}return new Date(s+a+o)}const uS={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Vwe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Hwe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Wwe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Gwe(t){const e={},n=t.split(uS.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],uS.timeZoneDelimiter.test(e.date)&&(e.date=t.split(uS.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const i=uS.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function qwe(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((r[1]||r[2]).length)}}function Kwe(t,e){if(e===null)return new Date(NaN);const n=t.match(Vwe);if(!n)return new Date(NaN);const r=!!n[4],i=O0(n[1]),s=O0(n[2])-1,a=O0(n[3]),o=O0(n[4]),l=O0(n[5])-1;if(r)return t_e(e,o,l)?Jwe(e,o,l):new Date(NaN);{const c=new Date(0);return!Zwe(e,s,a)||!e_e(e,i)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(i,a)),c)}}function O0(t){return t?parseInt(t):1}function Xwe(t){const e=t.match(Hwe);if(!e)return NaN;const n=UP(e[1]),r=UP(e[2]),i=UP(e[3]);return n_e(n,r,i)?n*bY+r*xY+i*1e3:NaN}function UP(t){return t&&parseFloat(t.replace(",","."))||0}function Ywe(t){if(t==="Z")return 0;const e=t.match(Wwe);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return r_e(r,i)?n*(r*bY+i*xY):NaN}function Jwe(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const i=r.getUTCDay()||7,s=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const Qwe=[31,null,31,30,31,30,31,31,30,31,30,31];function MY(t){return t%400===0||t%4===0&&t%100!==0}function Zwe(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(Qwe[e]||(MY(t)?29:28))}function e_e(t,e){return e>=1&&e<=(MY(t)?366:365)}function t_e(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function n_e(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function r_e(t,e){return e>=0&&e<=59}const i_e=t=>{switch(t){case"citation":return Ps;case"collaboration_request":return dw;case"collaboration_accepted":return ty;case"team_invite":return pi;case"team_joined":return pi;default:return C9}},s_e=t=>{switch(t){case"citation":return"text-emerald-500";case"collaboration_request":return"text-primary";case"collaboration_accepted":return"text-secondary";case"team_invite":return"text-cyan-500";case"team_joined":return"text-purple-500";default:return"text-muted-foreground"}};function PY(){const[t,e]=M.useState(!1),{notifications:n,unreadCount:r,isLoading:i,markAsRead:s,markAllAsRead:a,deleteNotification:o}=vY();return p.jsxs(Mbe,{open:t,onOpenChange:e,children:[p.jsx(Pbe,{asChild:!0,children:p.jsxs(ut,{variant:"ghost",size:"icon",className:"relative",children:[p.jsx(HF,{className:"w-4 h-4"}),r>0&&p.jsx($i,{className:"absolute -top-1 -right-1 h-5 min-w-5 p-0 flex items-center justify-center bg-destructive text-destructive-foreground text-xs",children:r>9?"9+":r})]})}),p.jsxs(gY,{className:"w-80 p-0",align:"end",children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[p.jsx("h3",{className:"font-semibold text-foreground",children:"Notifications"}),r>0&&p.jsxs(ut,{variant:"ghost",size:"sm",className:"text-xs h-7",onClick:()=>a(),children:[p.jsx(Zoe,{className:"w-3 h-3 mr-1"}),"Mark all read"]})]}),p.jsx(gl,{className:"h-80",children:i?p.jsx("div",{className:"flex items-center justify-center py-8",children:p.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):n.length===0?p.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[p.jsx(HF,{className:"w-10 h-10 mb-2 opacity-50"}),p.jsx("p",{className:"text-sm",children:"No notifications yet"})]}):p.jsx(cf,{children:n.map((l,c)=>{const u=i_e(l.type),d=s_e(l.type);return p.jsx(at.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,x:50},transition:{delay:c*.05},className:`px-4 py-3 border-b border-border last:border-0 hover:bg-muted/50 transition-colors ${l.is_read?"":"bg-primary/5"}`,children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("div",{className:`mt-0.5 ${d}`,children:p.jsx(u,{className:"w-4 h-4"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-start justify-between gap-2",children:[p.jsx("p",{className:`text-sm font-medium ${l.is_read?"text-muted-foreground":"text-foreground"}`,children:l.title}),p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[!l.is_read&&p.jsx(ut,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>s(l.id),children:p.jsx(ty,{className:"w-3 h-3"})}),p.jsx(ut,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-destructive",onClick:()=>o(l.id),children:p.jsx(op,{className:"w-3 h-3"})})]})]}),p.jsx("p",{className:"text-xs text-muted-foreground mt-0.5 line-clamp-2",children:l.message}),p.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:Qg(new Date(l.created_at),{addSuffix:!0})})]})]})},l.id)})})})]})]})}const Oz=[{id:"globe",label:"Global Impact",icon:xu},{id:"dashboard",label:"Analytics",icon:ov},{id:"network",label:"Collaboration",icon:hle},{id:"predictions",label:"Predictions",icon:Qoe},{id:"research-network",label:"Research Network",icon:Oi,isRoute:!0,route:"/research"}];function a_e({activeTab:t,setActiveTab:e,onOpenAuth:n,onOpenProfile:r,onOpenExport:i}){const[s,a]=M.useState(!1),{user:o,profile:l}=qr(),{isAdmin:c}=AX(),u=oy();return p.jsx("header",{className:"fixed top-0 left-0 right-0 z-50",children:p.jsxs("div",{className:"glass-panel m-4 px-6 py-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs(at.div,{className:"flex items-center gap-3",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-primary to-cyan flex items-center justify-center",children:p.jsx(xu,{className:"w-5 h-5 text-white"})}),p.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-secondary rounded-full animate-pulse"})]}),p.jsxs("div",{className:"hidden sm:block",children:[p.jsx("h1",{className:"font-display font-bold text-lg text-foreground",children:"UDSM Research"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Global Intelligence Platform"})]})]}),p.jsxs("nav",{className:"hidden md:flex items-center gap-1",children:[Oz.map((d,h)=>p.jsxs(at.button,{onClick:()=>{"isRoute"in d&&d.isRoute&&"route"in d?u(d.route):e(d.id)},className:`nav-link flex items-center gap-2 rounded-lg ${t===d.id?"nav-link-active bg-muted":""}`,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3,delay:h*.1},whileHover:{scale:1.02},whileTap:{scale:.98},children:[p.jsx(d.icon,{className:"w-4 h-4"}),p.jsx("span",{className:"text-sm font-medium",children:d.label})]},d.id)),o&&p.jsxs(at.button,{onClick:()=>u("/dashboard"),className:"nav-link flex items-center gap-2 rounded-lg text-primary hover:bg-primary/10",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.4},whileHover:{scale:1.02},whileTap:{scale:.98},children:[p.jsx(yo,{className:"w-4 h-4"}),p.jsx("span",{className:"text-sm font-medium",children:"My Research"})]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[o&&l&&p.jsxs(at.div,{className:"hidden xl:flex items-center gap-2",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.5},children:[p.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-lg bg-primary/10",children:[p.jsx(yu,{className:"w-3.5 h-3.5 text-primary"}),p.jsx("span",{className:"text-xs font-medium text-foreground",children:l.h_index||0})]}),p.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-lg bg-secondary/10",children:[p.jsx(Ps,{className:"w-3.5 h-3.5 text-secondary"}),p.jsx("span",{className:"text-xs font-medium text-foreground",children:l.total_citations?.toLocaleString()||0})]}),p.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-lg bg-cyan/10",children:[p.jsx(Oi,{className:"w-3.5 h-3.5 text-cyan"}),p.jsx("span",{className:"text-xs font-medium text-foreground",children:l.total_publications||0})]})]}),p.jsxs(at.div,{className:"hidden lg:flex items-center gap-2 px-3 py-1.5 rounded-full bg-emerald/20 border border-emerald/30",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.5},children:[p.jsx("span",{className:"w-2 h-2 bg-emerald rounded-full animate-pulse"}),p.jsx("span",{className:"text-xs text-emerald font-medium",children:"Live Data"})]}),p.jsx(ut,{variant:"ghost",size:"icon",className:"hidden md:flex",onClick:i,title:"Export Data",children:p.jsx(Xd,{className:"w-4 h-4"})}),p.jsx(ut,{variant:"ghost",size:"icon",className:"hidden md:flex",children:p.jsx(xj,{className:"w-4 h-4"})}),c&&p.jsxs(ut,{variant:"ghost",size:"sm",className:"hidden md:flex gap-2",onClick:()=>u("/admin"),children:[p.jsx($d,{className:"w-4 h-4"}),"Admin"]}),o?p.jsxs(p.Fragment,{children:[p.jsx(PY,{}),p.jsx(jX,{onOpenProfile:r})]}):p.jsxs(ut,{onClick:n,className:"hidden md:flex bg-gradient-to-r from-primary to-cyan hover:opacity-90",size:"sm",children:[p.jsx(T9,{className:"w-4 h-4 mr-2"}),"Sign In"]}),p.jsx(ut,{variant:"ghost",size:"icon",className:"md:hidden",onClick:()=>a(!s),children:p.jsx(P9,{className:"w-5 h-5"})})]})]}),s&&p.jsx(at.nav,{className:"md:hidden mt-4 pt-4 border-t border-border",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[Oz.map(d=>p.jsxs("button",{onClick:()=>{"isRoute"in d&&d.isRoute&&"route"in d?u(d.route):e(d.id),a(!1)},className:`flex items-center gap-2 p-3 rounded-lg transition-colors ${t===d.id?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:text-foreground"}`,children:[p.jsx(d.icon,{className:"w-4 h-4"}),p.jsx("span",{className:"text-sm font-medium",children:d.label})]},d.id)),o&&p.jsxs("button",{onClick:()=>{u("/dashboard"),a(!1)},className:"flex items-center gap-2 p-3 rounded-lg transition-colors bg-primary/20 text-primary hover:bg-primary/30",children:[p.jsx(yo,{className:"w-4 h-4"}),p.jsx("span",{className:"text-sm font-medium",children:"My Research"})]}),c&&p.jsxs("button",{onClick:()=>{u("/admin"),a(!1)},className:"flex items-center gap-2 p-3 rounded-lg transition-colors bg-secondary/20 text-secondary hover:bg-secondary/30",children:[p.jsx($d,{className:"w-4 h-4"}),p.jsx("span",{className:"text-sm font-medium",children:"Admin"})]})]})})]})})}const KT="160",Ph={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ch={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CY=0,jI=1,RY=2,o_e=3,OY=0,XT=1,_x=2,ll=3,Sl=0,Hi=1,Fa=2,l_e=2,mu=0,Qh=1,LI=2,UI=3,FI=4,NY=5,Ld=100,IY=101,kY=102,BI=103,zI=104,DY=200,jY=201,LY=202,UY=203,aE=204,oE=205,FY=206,BY=207,zY=208,$Y=209,VY=210,HY=211,WY=212,GY=213,qY=214,KY=0,XY=1,YY=2,tb=3,JY=4,QY=5,ZY=6,eJ=7,Aw=0,tJ=1,nJ=2,Ql=0,rJ=1,iJ=2,sJ=3,OL=4,aJ=5,oJ=6,$I="attached",lJ="detached",YT=300,Eu=301,tf=302,nb=303,rb=304,fy=306,ib=1e3,As=1001,sb=1002,Zr=1003,lE=1004,c_e=1004,Sx=1005,u_e=1005,ei=1006,NL=1007,d_e=1007,nf=1008,f_e=1008,Zl=1009,cJ=1010,uJ=1011,JT=1012,IL=1013,lu=1014,pl=1015,mv=1016,kL=1017,DL=1018,Hd=1020,dJ=1021,Gs=1023,fJ=1024,hJ=1025,Wd=1026,cp=1027,pJ=1028,jL=1029,mJ=1030,LL=1031,UL=1033,R1=33776,O1=33777,N1=33778,I1=33779,VI=35840,HI=35841,WI=35842,GI=35843,FL=36196,qI=37492,KI=37496,XI=37808,YI=37809,JI=37810,QI=37811,ZI=37812,ek=37813,tk=37814,nk=37815,rk=37816,ik=37817,sk=37818,ak=37819,ok=37820,lk=37821,k1=36492,ck=36494,uk=36495,gJ=36283,dk=36284,fk=36285,hk=36286,vJ=2200,yJ=2201,xJ=2202,ab=2300,ob=2301,D1=2302,zh=2400,$h=2401,lb=2402,QT=2500,BL=2501,h_e=0,p_e=1,m_e=2,zL=3e3,Gd=3001,bJ=3200,wJ=3201,ff=0,_J=1,Ba="",Pi="srgb",sc="srgb-linear",ZT="display-p3",Mw="display-p3-linear",cb="linear",dr="srgb",ub="rec709",db="p3",g_e=0,Rh=7680,v_e=7681,y_e=7682,x_e=7683,b_e=34055,w_e=34056,__e=5386,S_e=512,E_e=513,T_e=514,A_e=515,M_e=516,P_e=517,C_e=518,pk=519,SJ=512,EJ=513,TJ=514,$L=515,AJ=516,MJ=517,PJ=518,CJ=519,fb=35044,R_e=35048,O_e=35040,N_e=35045,I_e=35049,k_e=35041,D_e=35046,j_e=35050,L_e=35042,U_e="100",mk="300 es",cE=1035,ml=2e3,gv=2001;let Nu=class{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,a=i.length;s<a;s++)i[s].call(this,e);e.target=null}}};const xs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Nz=1234567;const Zh=Math.PI/180,vv=180/Math.PI;function Ha(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(xs[t&255]+xs[t>>8&255]+xs[t>>16&255]+xs[t>>24&255]+"-"+xs[e&255]+xs[e>>8&255]+"-"+xs[e>>16&15|64]+xs[e>>24&255]+"-"+xs[n&63|128]+xs[n>>8&255]+"-"+xs[n>>16&255]+xs[n>>24&255]+xs[r&255]+xs[r>>8&255]+xs[r>>16&255]+xs[r>>24&255]).toLowerCase()}function Hr(t,e,n){return Math.max(e,Math.min(n,t))}function VL(t,e){return(t%e+e)%e}function F_e(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function B_e(t,e,n){return t!==e?(n-t)/(e-t):0}function Ex(t,e,n){return(1-n)*t+n*e}function z_e(t,e,n,r){return Ex(t,e,1-Math.exp(-n*r))}function $_e(t,e=1){return e-Math.abs(VL(t,e*2)-e)}function V_e(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function H_e(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function W_e(t,e){return t+Math.floor(Math.random()*(e-t+1))}function G_e(t,e){return t+Math.random()*(e-t)}function q_e(t){return t*(.5-Math.random())}function K_e(t){t!==void 0&&(Nz=t);let e=Nz+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function X_e(t){return t*Zh}function Y_e(t){return t*vv}function gk(t){return(t&t-1)===0&&t!==0}function J_e(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function uE(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function Q_e(t,e,n,r,i){const s=Math.cos,a=Math.sin,o=s(n/2),l=a(n/2),c=s((e+r)/2),u=a((e+r)/2),d=s((e-r)/2),h=a((e-r)/2),m=s((r-e)/2),b=a((r-e)/2);switch(i){case"XYX":t.set(o*u,l*d,l*h,o*c);break;case"YZY":t.set(l*h,o*u,l*d,o*c);break;case"ZXZ":t.set(l*d,l*h,o*u,o*c);break;case"XZX":t.set(o*u,l*b,l*m,o*c);break;case"YXY":t.set(l*m,o*u,l*b,o*c);break;case"ZYZ":t.set(l*b,l*m,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function pa(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function _n(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const Z_e={DEG2RAD:Zh,RAD2DEG:vv,generateUUID:Ha,clamp:Hr,euclideanModulo:VL,mapLinear:F_e,inverseLerp:B_e,lerp:Ex,damp:z_e,pingpong:$_e,smoothstep:V_e,smootherstep:H_e,randInt:W_e,randFloat:G_e,randFloatSpread:q_e,seededRandom:K_e,degToRad:X_e,radToDeg:Y_e,isPowerOfTwo:gk,ceilPowerOfTwo:J_e,floorPowerOfTwo:uE,setQuaternionFromProperEuler:Q_e,normalize:_n,denormalize:pa};class ze{constructor(e=0,n=0){ze.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Hr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),s=this.x-e.x,a=this.y-e.y;return this.x=s*r-a*i+e.x,this.y=s*i+a*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Sn{constructor(e,n,r,i,s,a,o,l,c){Sn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,a,o,l,c)}set(e,n,r,i,s,a,o,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=o,u[3]=n,u[4]=s,u[5]=l,u[6]=r,u[7]=a,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,a=r[0],o=r[3],l=r[6],c=r[1],u=r[4],d=r[7],h=r[2],m=r[5],b=r[8],x=i[0],v=i[3],_=i[6],E=i[1],T=i[4],A=i[7],P=i[2],R=i[5],N=i[8];return s[0]=a*x+o*E+l*P,s[3]=a*v+o*T+l*R,s[6]=a*_+o*A+l*N,s[1]=c*x+u*E+d*P,s[4]=c*v+u*T+d*R,s[7]=c*_+u*A+d*N,s[2]=h*x+m*E+b*P,s[5]=h*v+m*T+b*R,s[8]=h*_+m*A+b*N,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8];return n*a*u-n*o*c-r*s*u+r*o*l+i*s*c-i*a*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],d=u*a-o*c,h=o*l-u*s,m=c*s-a*l,b=n*d+r*h+i*m;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/b;return e[0]=d*x,e[1]=(i*c-u*r)*x,e[2]=(o*r-i*a)*x,e[3]=h*x,e[4]=(u*n-i*l)*x,e[5]=(i*s-o*n)*x,e[6]=m*x,e[7]=(r*l-c*n)*x,e[8]=(a*n-r*s)*x,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,s,a,o){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*a+c*o)+a+e,-i*c,i*l,-i*(-c*a+l*o)+o+n,0,0,1),this}scale(e,n){return this.premultiply(FP.makeScale(e,n)),this}rotate(e){return this.premultiply(FP.makeRotation(-e)),this}translate(e,n){return this.premultiply(FP.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const FP=new Sn;function RJ(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const eSe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Lg(t,e){return new eSe[t](e)}function hb(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function OJ(){const t=hb("canvas");return t.style.display="block",t}const Iz={};function Tx(t){t in Iz||(Iz[t]=!0,console.warn(t))}const kz=new Sn().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Dz=new Sn().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),dS={[sc]:{transfer:cb,primaries:ub,toReference:t=>t,fromReference:t=>t},[Pi]:{transfer:dr,primaries:ub,toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[Mw]:{transfer:cb,primaries:db,toReference:t=>t.applyMatrix3(Dz),fromReference:t=>t.applyMatrix3(kz)},[ZT]:{transfer:dr,primaries:db,toReference:t=>t.convertSRGBToLinear().applyMatrix3(Dz),fromReference:t=>t.applyMatrix3(kz).convertLinearToSRGB()}},tSe=new Set([sc,Mw]),qn={enabled:!0,_workingColorSpace:sc,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!tSe.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=dS[e].toReference,i=dS[n].fromReference;return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return dS[t].primaries},getTransfer:function(t){return t===Ba?cb:dS[t].transfer}};function Zg(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function BP(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let Qm;class HL{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Qm===void 0&&(Qm=hb("canvas")),Qm.width=e.width,Qm.height=e.height;const r=Qm.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=Qm}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=hb("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let a=0;a<s.length;a++)s[a]=Zg(s[a]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(Zg(n[r]/255)*255):n[r]=Zg(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let nSe=0;class Vh{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:nSe++}),this.uuid=Ha(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let a=0,o=i.length;a<o;a++)i[a].isDataTexture?s.push(zP(i[a].image)):s.push(zP(i[a]))}else s=zP(i);r.url=s}return n||(e.images[this.uuid]=r),r}}function zP(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?HL.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let rSe=0;class ti extends Nu{constructor(e=ti.DEFAULT_IMAGE,n=ti.DEFAULT_MAPPING,r=As,i=As,s=ei,a=nf,o=Gs,l=Zl,c=ti.DEFAULT_ANISOTROPY,u=Ba){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:rSe++}),this.uuid=Ha(),this.name="",this.source=new Vh(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new ze(0,0),this.repeat=new ze(1,1),this.center=new ze(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Sn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof u=="string"?this.colorSpace=u:(Tx("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===Gd?Pi:Ba),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==YT)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ib:e.x=e.x-Math.floor(e.x);break;case As:e.x=e.x<0?0:1;break;case sb:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ib:e.y=e.y-Math.floor(e.y);break;case As:e.y=e.y<0?0:1;break;case sb:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Tx("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Pi?Gd:zL}set encoding(e){Tx("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Gd?Pi:Ba}}ti.DEFAULT_IMAGE=null;ti.DEFAULT_MAPPING=YT;ti.DEFAULT_ANISOTROPY=1;class Kn{constructor(e=0,n=0,r=0,i=1){Kn.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=this.w,a=e.elements;return this.x=a[0]*n+a[4]*r+a[8]*i+a[12]*s,this.y=a[1]*n+a[5]*r+a[9]*i+a[13]*s,this.z=a[2]*n+a[6]*r+a[10]*i+a[14]*s,this.w=a[3]*n+a[7]*r+a[11]*i+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,s;const l=e.elements,c=l[0],u=l[4],d=l[8],h=l[1],m=l[5],b=l[9],x=l[2],v=l[6],_=l[10];if(Math.abs(u-h)<.01&&Math.abs(d-x)<.01&&Math.abs(b-v)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+x)<.1&&Math.abs(b+v)<.1&&Math.abs(c+m+_-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const T=(c+1)/2,A=(m+1)/2,P=(_+1)/2,R=(u+h)/4,N=(d+x)/4,L=(b+v)/4;return T>A&&T>P?T<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(T),i=R/r,s=N/r):A>P?A<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(A),r=R/i,s=L/i):P<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(P),r=N/s,i=L/s),this.set(r,i,s,n),this}let E=Math.sqrt((v-b)*(v-b)+(d-x)*(d-x)+(h-u)*(h-u));return Math.abs(E)<.001&&(E=1),this.x=(v-b)/E,this.y=(d-x)/E,this.z=(h-u)/E,this.w=Math.acos((c+m+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class NJ extends Nu{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Kn(0,0,e,n),this.scissorTest=!1,this.viewport=new Kn(0,0,e,n);const i={width:e,height:n,depth:1};r.encoding!==void 0&&(Tx("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===Gd?Pi:Ba),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ei,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new ti(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new Vh(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class El extends NJ{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class eA extends ti{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Zr,this.minFilter=Zr,this.wrapR=As,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class iSe extends El{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new eA(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class WL extends ti{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Zr,this.minFilter=Zr,this.wrapR=As,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class sSe extends El{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new WL(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class aSe extends El{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let a=0;a<r;a++)this.texture[a]=s.clone(),this.texture[a].isRenderTargetTexture=!0}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=n,this.texture[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let n=0,r=e.texture.length;n<r;n++)this.texture[n]=e.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class os{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,s,a,o){let l=r[i+0],c=r[i+1],u=r[i+2],d=r[i+3];const h=s[a+0],m=s[a+1],b=s[a+2],x=s[a+3];if(o===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d;return}if(o===1){e[n+0]=h,e[n+1]=m,e[n+2]=b,e[n+3]=x;return}if(d!==x||l!==h||c!==m||u!==b){let v=1-o;const _=l*h+c*m+u*b+d*x,E=_>=0?1:-1,T=1-_*_;if(T>Number.EPSILON){const P=Math.sqrt(T),R=Math.atan2(P,_*E);v=Math.sin(v*R)/P,o=Math.sin(o*R)/P}const A=o*E;if(l=l*v+h*A,c=c*v+m*A,u=u*v+b*A,d=d*v+x*A,v===1-o){const P=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=P,c*=P,u*=P,d*=P}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d}static multiplyQuaternionsFlat(e,n,r,i,s,a){const o=r[i],l=r[i+1],c=r[i+2],u=r[i+3],d=s[a],h=s[a+1],m=s[a+2],b=s[a+3];return e[n]=o*b+u*d+l*m-c*h,e[n+1]=l*b+u*h+c*d-o*m,e[n+2]=c*b+u*m+o*h-l*d,e[n+3]=u*b-o*d-l*h-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,c=o(r/2),u=o(i/2),d=o(s/2),h=l(r/2),m=l(i/2),b=l(s/2);switch(a){case"XYZ":this._x=h*u*d+c*m*b,this._y=c*m*d-h*u*b,this._z=c*u*b+h*m*d,this._w=c*u*d-h*m*b;break;case"YXZ":this._x=h*u*d+c*m*b,this._y=c*m*d-h*u*b,this._z=c*u*b-h*m*d,this._w=c*u*d+h*m*b;break;case"ZXY":this._x=h*u*d-c*m*b,this._y=c*m*d+h*u*b,this._z=c*u*b+h*m*d,this._w=c*u*d-h*m*b;break;case"ZYX":this._x=h*u*d-c*m*b,this._y=c*m*d+h*u*b,this._z=c*u*b-h*m*d,this._w=c*u*d+h*m*b;break;case"YZX":this._x=h*u*d+c*m*b,this._y=c*m*d+h*u*b,this._z=c*u*b-h*m*d,this._w=c*u*d-h*m*b;break;case"XZY":this._x=h*u*d-c*m*b,this._y=c*m*d-h*u*b,this._z=c*u*b+h*m*d,this._w=c*u*d+h*m*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],s=n[8],a=n[1],o=n[5],l=n[9],c=n[2],u=n[6],d=n[10],h=r+o+d;if(h>0){const m=.5/Math.sqrt(h+1);this._w=.25/m,this._x=(u-l)*m,this._y=(s-c)*m,this._z=(a-i)*m}else if(r>o&&r>d){const m=2*Math.sqrt(1+r-o-d);this._w=(u-l)/m,this._x=.25*m,this._y=(i+a)/m,this._z=(s+c)/m}else if(o>d){const m=2*Math.sqrt(1+o-r-d);this._w=(s-c)/m,this._x=(i+a)/m,this._y=.25*m,this._z=(l+u)/m}else{const m=2*Math.sqrt(1+d-r-o);this._w=(a-i)/m,this._x=(s+c)/m,this._y=(l+u)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Hr(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,s=e._z,a=e._w,o=n._x,l=n._y,c=n._z,u=n._w;return this._x=r*u+a*o+i*c-s*l,this._y=i*u+a*l+s*o-r*c,this._z=s*u+a*c+r*l-i*o,this._w=a*u-r*o-i*l-s*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,a=this._w;let o=a*e._w+r*e._x+i*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=r,this._y=i,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const m=1-n;return this._w=m*a+n*this._w,this._x=m*r+n*this._x,this._y=m*i+n*this._y,this._z=m*s+n*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,o),d=Math.sin((1-n)*u)/c,h=Math.sin(n*u)/c;return this._w=a*d+this._w*h,this._x=r*d+this._x*h,this._y=i*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(n*Math.cos(i),r*Math.sin(s),r*Math.cos(s),n*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ae{constructor(e=0,n=0,r=0){ae.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(jz.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(jz.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6]*i,this.y=s[1]*n+s[4]*r+s[7]*i,this.z=s[2]*n+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=e.elements,a=1/(s[3]*n+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*n+s[4]*r+s[8]*i+s[12])*a,this.y=(s[1]*n+s[5]*r+s[9]*i+s[13])*a,this.z=(s[2]*n+s[6]*r+s[10]*i+s[14])*a,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,s=e.x,a=e.y,o=e.z,l=e.w,c=2*(a*i-o*r),u=2*(o*n-s*i),d=2*(s*r-a*n);return this.x=n+l*c+a*d-o*u,this.y=r+l*u+o*c-s*d,this.z=i+l*d+s*u-a*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i,this.y=s[1]*n+s[5]*r+s[9]*i,this.z=s[2]*n+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,s=e.z,a=n.x,o=n.y,l=n.z;return this.x=i*l-s*o,this.y=s*a-r*l,this.z=r*o-i*a,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return $P.copy(this).projectOnVector(e),this.sub($P)}reflect(e){return this.sub($P.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Hr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const $P=new ae,jz=new os;class Ys{constructor(e=new ae(1/0,1/0,1/0),n=new ae(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(Zo.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(Zo.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=Zo.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(n===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=s.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,Zo):Zo.fromBufferAttribute(s,a),Zo.applyMatrix4(e.matrixWorld),this.expandByPoint(Zo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),fS.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),fS.copy(r.boundingBox)),fS.applyMatrix4(e.matrixWorld),this.union(fS)}const i=e.children;for(let s=0,a=i.length;s<a;s++)this.expandByObject(i[s],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Zo),Zo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(N0),hS.subVectors(this.max,N0),Zm.subVectors(e.a,N0),eg.subVectors(e.b,N0),tg.subVectors(e.c,N0),wd.subVectors(eg,Zm),_d.subVectors(tg,eg),dh.subVectors(Zm,tg);let n=[0,-wd.z,wd.y,0,-_d.z,_d.y,0,-dh.z,dh.y,wd.z,0,-wd.x,_d.z,0,-_d.x,dh.z,0,-dh.x,-wd.y,wd.x,0,-_d.y,_d.x,0,-dh.y,dh.x,0];return!VP(n,Zm,eg,tg,hS)||(n=[1,0,0,0,1,0,0,0,1],!VP(n,Zm,eg,tg,hS))?!1:(pS.crossVectors(wd,_d),n=[pS.x,pS.y,pS.z],VP(n,Zm,eg,tg,hS))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Zo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Zo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(qc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),qc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),qc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),qc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),qc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),qc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),qc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),qc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(qc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const qc=[new ae,new ae,new ae,new ae,new ae,new ae,new ae,new ae],Zo=new ae,fS=new Ys,Zm=new ae,eg=new ae,tg=new ae,wd=new ae,_d=new ae,dh=new ae,N0=new ae,hS=new ae,pS=new ae,fh=new ae;function VP(t,e,n,r,i){for(let s=0,a=t.length-3;s<=a;s+=3){fh.fromArray(t,s);const o=i.x*Math.abs(fh.x)+i.y*Math.abs(fh.y)+i.z*Math.abs(fh.z),l=e.dot(fh),c=n.dot(fh),u=r.dot(fh);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>o)return!1}return!0}const oSe=new Ys,I0=new ae,HP=new ae;let Cs=class{constructor(e=new ae,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):oSe.setFromPoints(e).getCenter(r);let i=0;for(let s=0,a=e.length;s<a;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;I0.subVectors(e,this.center);const n=I0.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(I0,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(HP.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(I0.copy(e.center).add(HP)),this.expandByPoint(I0.copy(e.center).sub(HP))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const Kc=new ae,WP=new ae,mS=new ae,Sd=new ae,GP=new ae,gS=new ae,qP=new ae;class Rp{constructor(e=new ae,n=new ae(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Kc)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Kc.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Kc.copy(this.origin).addScaledVector(this.direction,n),Kc.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){WP.copy(e).add(n).multiplyScalar(.5),mS.copy(n).sub(e).normalize(),Sd.copy(this.origin).sub(WP);const s=e.distanceTo(n)*.5,a=-this.direction.dot(mS),o=Sd.dot(this.direction),l=-Sd.dot(mS),c=Sd.lengthSq(),u=Math.abs(1-a*a);let d,h,m,b;if(u>0)if(d=a*l-o,h=a*o-l,b=s*u,d>=0)if(h>=-b)if(h<=b){const x=1/u;d*=x,h*=x,m=d*(d+a*h+2*o)+h*(a*d+h+2*l)+c}else h=s,d=Math.max(0,-(a*h+o)),m=-d*d+h*(h+2*l)+c;else h=-s,d=Math.max(0,-(a*h+o)),m=-d*d+h*(h+2*l)+c;else h<=-b?(d=Math.max(0,-(-a*s+o)),h=d>0?-s:Math.min(Math.max(-s,-l),s),m=-d*d+h*(h+2*l)+c):h<=b?(d=0,h=Math.min(Math.max(-s,-l),s),m=h*(h+2*l)+c):(d=Math.max(0,-(a*s+o)),h=d>0?s:Math.min(Math.max(-s,-l),s),m=-d*d+h*(h+2*l)+c);else h=a>0?-s:s,d=Math.max(0,-(a*h+o)),m=-d*d+h*(h+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(WP).addScaledVector(mS,h),m}intersectSphere(e,n){Kc.subVectors(e.center,this.origin);const r=Kc.dot(this.direction),i=Kc.dot(Kc)-r*r,s=e.radius*e.radius;if(i>s)return null;const a=Math.sqrt(s-i),o=r-a,l=r+a;return l<0?null:o<0?this.at(l,n):this.at(o,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,s,a,o,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(r=(e.min.x-h.x)*c,i=(e.max.x-h.x)*c):(r=(e.max.x-h.x)*c,i=(e.min.x-h.x)*c),u>=0?(s=(e.min.y-h.y)*u,a=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,a=(e.min.y-h.y)*u),r>a||s>i||((s>r||isNaN(r))&&(r=s),(a<i||isNaN(i))&&(i=a),d>=0?(o=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(o=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),r>l||o>i)||((o>r||r!==r)&&(r=o),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,Kc)!==null}intersectTriangle(e,n,r,i,s){GP.subVectors(n,e),gS.subVectors(r,e),qP.crossVectors(GP,gS);let a=this.direction.dot(qP),o;if(a>0){if(i)return null;o=1}else if(a<0)o=-1,a=-a;else return null;Sd.subVectors(this.origin,e);const l=o*this.direction.dot(gS.crossVectors(Sd,gS));if(l<0)return null;const c=o*this.direction.dot(GP.cross(Sd));if(c<0||l+c>a)return null;const u=-o*Sd.dot(qP);return u<0?null:this.at(u/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class cn{constructor(e,n,r,i,s,a,o,l,c,u,d,h,m,b,x,v){cn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,a,o,l,c,u,d,h,m,b,x,v)}set(e,n,r,i,s,a,o,l,c,u,d,h,m,b,x,v){const _=this.elements;return _[0]=e,_[4]=n,_[8]=r,_[12]=i,_[1]=s,_[5]=a,_[9]=o,_[13]=l,_[2]=c,_[6]=u,_[10]=d,_[14]=h,_[3]=m,_[7]=b,_[11]=x,_[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new cn().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/ng.setFromMatrixColumn(e,0).length(),s=1/ng.setFromMatrixColumn(e,1).length(),a=1/ng.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=0,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,s=e.z,a=Math.cos(r),o=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const h=a*u,m=a*d,b=o*u,x=o*d;n[0]=l*u,n[4]=-l*d,n[8]=c,n[1]=m+b*c,n[5]=h-x*c,n[9]=-o*l,n[2]=x-h*c,n[6]=b+m*c,n[10]=a*l}else if(e.order==="YXZ"){const h=l*u,m=l*d,b=c*u,x=c*d;n[0]=h+x*o,n[4]=b*o-m,n[8]=a*c,n[1]=a*d,n[5]=a*u,n[9]=-o,n[2]=m*o-b,n[6]=x+h*o,n[10]=a*l}else if(e.order==="ZXY"){const h=l*u,m=l*d,b=c*u,x=c*d;n[0]=h-x*o,n[4]=-a*d,n[8]=b+m*o,n[1]=m+b*o,n[5]=a*u,n[9]=x-h*o,n[2]=-a*c,n[6]=o,n[10]=a*l}else if(e.order==="ZYX"){const h=a*u,m=a*d,b=o*u,x=o*d;n[0]=l*u,n[4]=b*c-m,n[8]=h*c+x,n[1]=l*d,n[5]=x*c+h,n[9]=m*c-b,n[2]=-c,n[6]=o*l,n[10]=a*l}else if(e.order==="YZX"){const h=a*l,m=a*c,b=o*l,x=o*c;n[0]=l*u,n[4]=x-h*d,n[8]=b*d+m,n[1]=d,n[5]=a*u,n[9]=-o*u,n[2]=-c*u,n[6]=m*d+b,n[10]=h-x*d}else if(e.order==="XZY"){const h=a*l,m=a*c,b=o*l,x=o*c;n[0]=l*u,n[4]=-d,n[8]=c*u,n[1]=h*d+x,n[5]=a*u,n[9]=m*d-b,n[2]=b*d-m,n[6]=o*u,n[10]=x*d+h}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(lSe,e,cSe)}lookAt(e,n,r){const i=this.elements;return Ra.subVectors(e,n),Ra.lengthSq()===0&&(Ra.z=1),Ra.normalize(),Ed.crossVectors(r,Ra),Ed.lengthSq()===0&&(Math.abs(r.z)===1?Ra.x+=1e-4:Ra.z+=1e-4,Ra.normalize(),Ed.crossVectors(r,Ra)),Ed.normalize(),vS.crossVectors(Ra,Ed),i[0]=Ed.x,i[4]=vS.x,i[8]=Ra.x,i[1]=Ed.y,i[5]=vS.y,i[9]=Ra.y,i[2]=Ed.z,i[6]=vS.z,i[10]=Ra.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,a=r[0],o=r[4],l=r[8],c=r[12],u=r[1],d=r[5],h=r[9],m=r[13],b=r[2],x=r[6],v=r[10],_=r[14],E=r[3],T=r[7],A=r[11],P=r[15],R=i[0],N=i[4],L=i[8],I=i[12],j=i[1],B=i[5],H=i[9],J=i[13],G=i[2],W=i[6],K=i[10],te=i[14],z=i[3],V=i[7],X=i[11],q=i[15];return s[0]=a*R+o*j+l*G+c*z,s[4]=a*N+o*B+l*W+c*V,s[8]=a*L+o*H+l*K+c*X,s[12]=a*I+o*J+l*te+c*q,s[1]=u*R+d*j+h*G+m*z,s[5]=u*N+d*B+h*W+m*V,s[9]=u*L+d*H+h*K+m*X,s[13]=u*I+d*J+h*te+m*q,s[2]=b*R+x*j+v*G+_*z,s[6]=b*N+x*B+v*W+_*V,s[10]=b*L+x*H+v*K+_*X,s[14]=b*I+x*J+v*te+_*q,s[3]=E*R+T*j+A*G+P*z,s[7]=E*N+T*B+A*W+P*V,s[11]=E*L+T*H+A*K+P*X,s[15]=E*I+T*J+A*te+P*q,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],s=e[12],a=e[1],o=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],m=e[14],b=e[3],x=e[7],v=e[11],_=e[15];return b*(+s*l*d-i*c*d-s*o*h+r*c*h+i*o*m-r*l*m)+x*(+n*l*m-n*c*h+s*a*h-i*a*m+i*c*u-s*l*u)+v*(+n*c*d-n*o*m-s*a*d+r*a*m+s*o*u-r*c*u)+_*(-i*o*u-n*l*d+n*o*h+i*a*d-r*a*h+r*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],m=e[11],b=e[12],x=e[13],v=e[14],_=e[15],E=d*v*c-x*h*c+x*l*m-o*v*m-d*l*_+o*h*_,T=b*h*c-u*v*c-b*l*m+a*v*m+u*l*_-a*h*_,A=u*x*c-b*d*c+b*o*m-a*x*m-u*o*_+a*d*_,P=b*d*l-u*x*l-b*o*h+a*x*h+u*o*v-a*d*v,R=n*E+r*T+i*A+s*P;if(R===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const N=1/R;return e[0]=E*N,e[1]=(x*h*s-d*v*s-x*i*m+r*v*m+d*i*_-r*h*_)*N,e[2]=(o*v*s-x*l*s+x*i*c-r*v*c-o*i*_+r*l*_)*N,e[3]=(d*l*s-o*h*s-d*i*c+r*h*c+o*i*m-r*l*m)*N,e[4]=T*N,e[5]=(u*v*s-b*h*s+b*i*m-n*v*m-u*i*_+n*h*_)*N,e[6]=(b*l*s-a*v*s-b*i*c+n*v*c+a*i*_-n*l*_)*N,e[7]=(a*h*s-u*l*s+u*i*c-n*h*c-a*i*m+n*l*m)*N,e[8]=A*N,e[9]=(b*d*s-u*x*s-b*r*m+n*x*m+u*r*_-n*d*_)*N,e[10]=(a*x*s-b*o*s+b*r*c-n*x*c-a*r*_+n*o*_)*N,e[11]=(u*o*s-a*d*s-u*r*c+n*d*c+a*r*m-n*o*m)*N,e[12]=P*N,e[13]=(u*x*i-b*d*i+b*r*h-n*x*h-u*r*v+n*d*v)*N,e[14]=(b*o*i-a*x*i-b*r*l+n*x*l+a*r*v-n*o*v)*N,e[15]=(a*d*i-u*o*i+u*r*l-n*d*l-a*r*h+n*o*h)*N,this}scale(e){const n=this.elements,r=e.x,i=e.y,s=e.z;return n[0]*=r,n[4]*=i,n[8]*=s,n[1]*=r,n[5]*=i,n[9]*=s,n[2]*=r,n[6]*=i,n[10]*=s,n[3]*=r,n[7]*=i,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),s=1-r,a=e.x,o=e.y,l=e.z,c=s*a,u=s*o;return this.set(c*a+r,c*o-i*l,c*l+i*o,0,c*o+i*l,u*o+r,u*l-i*a,0,c*l-i*o,u*l+i*a,s*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,s,a){return this.set(1,r,s,0,e,1,a,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,s=n._x,a=n._y,o=n._z,l=n._w,c=s+s,u=a+a,d=o+o,h=s*c,m=s*u,b=s*d,x=a*u,v=a*d,_=o*d,E=l*c,T=l*u,A=l*d,P=r.x,R=r.y,N=r.z;return i[0]=(1-(x+_))*P,i[1]=(m+A)*P,i[2]=(b-T)*P,i[3]=0,i[4]=(m-A)*R,i[5]=(1-(h+_))*R,i[6]=(v+E)*R,i[7]=0,i[8]=(b+T)*N,i[9]=(v-E)*N,i[10]=(1-(h+x))*N,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let s=ng.set(i[0],i[1],i[2]).length();const a=ng.set(i[4],i[5],i[6]).length(),o=ng.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],el.copy(this);const c=1/s,u=1/a,d=1/o;return el.elements[0]*=c,el.elements[1]*=c,el.elements[2]*=c,el.elements[4]*=u,el.elements[5]*=u,el.elements[6]*=u,el.elements[8]*=d,el.elements[9]*=d,el.elements[10]*=d,n.setFromRotationMatrix(el),r.x=s,r.y=a,r.z=o,this}makePerspective(e,n,r,i,s,a,o=ml){const l=this.elements,c=2*s/(n-e),u=2*s/(r-i),d=(n+e)/(n-e),h=(r+i)/(r-i);let m,b;if(o===ml)m=-(a+s)/(a-s),b=-2*a*s/(a-s);else if(o===gv)m=-a/(a-s),b=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=b,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,r,i,s,a,o=ml){const l=this.elements,c=1/(n-e),u=1/(r-i),d=1/(a-s),h=(n+e)*c,m=(r+i)*u;let b,x;if(o===ml)b=(a+s)*d,x=-2*d;else if(o===gv)b=s*d,x=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=x,l[14]=-b,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const ng=new ae,el=new cn,lSe=new ae(0,0,0),cSe=new ae(1,1,1),Ed=new ae,vS=new ae,Ra=new ae,Lz=new cn,Uz=new os;class hy{constructor(e=0,n=0,r=0,i=hy.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,s=i[0],a=i[4],o=i[8],l=i[1],c=i[5],u=i[9],d=i[2],h=i[6],m=i[10];switch(n){case"XYZ":this._y=Math.asin(Hr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,m),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Hr(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Hr(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Hr(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(Hr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(o,m));break;case"XZY":this._z=Math.asin(-Hr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-u,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return Lz.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Lz,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return Uz.setFromEuler(this),this.setFromQuaternion(Uz,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}hy.DEFAULT_ORDER="XYZ";class ep{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let uSe=0;const Fz=new ae,rg=new os,Xc=new cn,yS=new ae,k0=new ae,dSe=new ae,fSe=new os,Bz=new ae(1,0,0),zz=new ae(0,1,0),$z=new ae(0,0,1),hSe={type:"added"},pSe={type:"removed"};class Dn extends Nu{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:uSe++}),this.uuid=Ha(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Dn.DEFAULT_UP.clone();const e=new ae,n=new hy,r=new os,i=new ae(1,1,1);function s(){r.setFromEuler(n,!1)}function a(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new cn},normalMatrix:{value:new Sn}}),this.matrix=new cn,this.matrixWorld=new cn,this.matrixAutoUpdate=Dn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Dn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new ep,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return rg.setFromAxisAngle(e,n),this.quaternion.multiply(rg),this}rotateOnWorldAxis(e,n){return rg.setFromAxisAngle(e,n),this.quaternion.premultiply(rg),this}rotateX(e){return this.rotateOnAxis(Bz,e)}rotateY(e){return this.rotateOnAxis(zz,e)}rotateZ(e){return this.rotateOnAxis($z,e)}translateOnAxis(e,n){return Fz.copy(e).applyQuaternion(this.quaternion),this.position.add(Fz.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(Bz,e)}translateY(e){return this.translateOnAxis(zz,e)}translateZ(e){return this.translateOnAxis($z,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Xc.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?yS.copy(e):yS.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),k0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Xc.lookAt(k0,yS,this.up):Xc.lookAt(yS,k0,this.up),this.quaternion.setFromRotationMatrix(Xc),i&&(Xc.extractRotation(i.matrixWorld),rg.setFromRotationMatrix(Xc),this.quaternion.premultiply(rg.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(hSe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(pSe)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Xc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Xc.multiply(e.parent.matrixWorld)),e.applyMatrix4(Xc),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const a=this.children[r].getObjectByProperty(e,n);if(a!==void 0)return a}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(k0,e,dSe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(k0,fSe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++){const s=n[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let s=0,a=i.length;s<a;s++){const o=i[s];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(s(e.materials,this.material[l]));i.material=o}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];i.animations.push(s(e.animations,l))}}if(n){const o=a(e.geometries),l=a(e.materials),c=a(e.textures),u=a(e.images),d=a(e.shapes),h=a(e.skeletons),m=a(e.animations),b=a(e.nodes);o.length>0&&(r.geometries=o),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),d.length>0&&(r.shapes=d),h.length>0&&(r.skeletons=h),m.length>0&&(r.animations=m),b.length>0&&(r.nodes=b)}return r.object=i,r;function a(o){const l=[];for(const c in o){const u=o[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Dn.DEFAULT_UP=new ae(0,1,0);Dn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Dn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const tl=new ae,Yc=new ae,KP=new ae,Jc=new ae,ig=new ae,sg=new ae,Vz=new ae,XP=new ae,YP=new ae,JP=new ae;let xS=!1;class ha{constructor(e=new ae,n=new ae,r=new ae){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),tl.subVectors(e,n),i.cross(tl);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,n,r,i,s){tl.subVectors(i,n),Yc.subVectors(r,n),KP.subVectors(e,n);const a=tl.dot(tl),o=tl.dot(Yc),l=tl.dot(KP),c=Yc.dot(Yc),u=Yc.dot(KP),d=a*c-o*o;if(d===0)return s.set(0,0,0),null;const h=1/d,m=(c*l-o*u)*h,b=(a*u-o*l)*h;return s.set(1-m-b,b,m)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Jc)===null?!1:Jc.x>=0&&Jc.y>=0&&Jc.x+Jc.y<=1}static getUV(e,n,r,i,s,a,o,l){return xS===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),xS=!0),this.getInterpolation(e,n,r,i,s,a,o,l)}static getInterpolation(e,n,r,i,s,a,o,l){return this.getBarycoord(e,n,r,i,Jc)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Jc.x),l.addScaledVector(a,Jc.y),l.addScaledVector(o,Jc.z),l)}static isFrontFacing(e,n,r,i){return tl.subVectors(r,n),Yc.subVectors(e,n),tl.cross(Yc).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return tl.subVectors(this.c,this.b),Yc.subVectors(this.a,this.b),tl.cross(Yc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ha.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return ha.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,r,i,s){return xS===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),xS=!0),ha.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}getInterpolation(e,n,r,i,s){return ha.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}containsPoint(e){return ha.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ha.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,s=this.c;let a,o;ig.subVectors(i,r),sg.subVectors(s,r),XP.subVectors(e,r);const l=ig.dot(XP),c=sg.dot(XP);if(l<=0&&c<=0)return n.copy(r);YP.subVectors(e,i);const u=ig.dot(YP),d=sg.dot(YP);if(u>=0&&d<=u)return n.copy(i);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return a=l/(l-u),n.copy(r).addScaledVector(ig,a);JP.subVectors(e,s);const m=ig.dot(JP),b=sg.dot(JP);if(b>=0&&m<=b)return n.copy(s);const x=m*c-l*b;if(x<=0&&c>=0&&b<=0)return o=c/(c-b),n.copy(r).addScaledVector(sg,o);const v=u*b-m*d;if(v<=0&&d-u>=0&&m-b>=0)return Vz.subVectors(s,i),o=(d-u)/(d-u+(m-b)),n.copy(i).addScaledVector(Vz,o);const _=1/(v+x+h);return a=x*_,o=h*_,n.copy(r).addScaledVector(ig,a).addScaledVector(sg,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const IJ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Td={h:0,s:0,l:0},bS={h:0,s:0,l:0};function QP(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}let St=class{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Pi){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,qn.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=qn.workingColorSpace){return this.r=e,this.g=n,this.b=r,qn.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=qn.workingColorSpace){if(e=VL(e,1),n=Hr(n,0,1),r=Hr(r,0,1),n===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+n):r+n-r*n,a=2*r-s;this.r=QP(a,s,e+1/3),this.g=QP(a,s,e),this.b=QP(a,s,e-1/3)}return qn.toWorkingColorSpace(this,i),this}setStyle(e,n=Pi){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=i[1],o=i[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(a===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Pi){const r=IJ[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Zg(e.r),this.g=Zg(e.g),this.b=Zg(e.b),this}copyLinearToSRGB(e){return this.r=BP(e.r),this.g=BP(e.g),this.b=BP(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Pi){return qn.fromWorkingColorSpace(bs.copy(this),e),Math.round(Hr(bs.r*255,0,255))*65536+Math.round(Hr(bs.g*255,0,255))*256+Math.round(Hr(bs.b*255,0,255))}getHexString(e=Pi){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=qn.workingColorSpace){qn.fromWorkingColorSpace(bs.copy(this),n);const r=bs.r,i=bs.g,s=bs.b,a=Math.max(r,i,s),o=Math.min(r,i,s);let l,c;const u=(o+a)/2;if(o===a)l=0,c=0;else{const d=a-o;switch(c=u<=.5?d/(a+o):d/(2-a-o),a){case r:l=(i-s)/d+(i<s?6:0);break;case i:l=(s-r)/d+2;break;case s:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=qn.workingColorSpace){return qn.fromWorkingColorSpace(bs.copy(this),n),e.r=bs.r,e.g=bs.g,e.b=bs.b,e}getStyle(e=Pi){qn.fromWorkingColorSpace(bs.copy(this),e);const n=bs.r,r=bs.g,i=bs.b;return e!==Pi?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(Td),this.setHSL(Td.h+e,Td.s+n,Td.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(Td),e.getHSL(bS);const r=Ex(Td.h,bS.h,n),i=Ex(Td.s,bS.s,n),s=Ex(Td.l,bS.l,n);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*n+s[3]*r+s[6]*i,this.g=s[1]*n+s[4]*r+s[7]*i,this.b=s[2]*n+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const bs=new St;St.NAMES=IJ;let mSe=0;class Rs extends Nu{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:mSe++}),this.uuid=Ha(),this.name="",this.type="Material",this.blending=Qh,this.side=Sl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=aE,this.blendDst=oE,this.blendEquation=Ld,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new St(0,0,0),this.blendAlpha=0,this.depthFunc=tb,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=pk,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Rh,this.stencilZFail=Rh,this.stencilZPass=Rh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Qh&&(r.blending=this.blending),this.side!==Sl&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==aE&&(r.blendSrc=this.blendSrc),this.blendDst!==oE&&(r.blendDst=this.blendDst),this.blendEquation!==Ld&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==tb&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==pk&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Rh&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Rh&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Rh&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(n){const s=i(e.textures),a=i(e.images);s.length>0&&(r.textures=s),a.length>0&&(r.images=a)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=n[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class hf extends Rs{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new St(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Aw,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const au=gSe();function gSe(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;(c&8388608)===0;)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:a,offsetTable:o}}function da(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Hr(t,-65504,65504),au.floatView[0]=t;const e=au.uint32View[0],n=e>>23&511;return au.baseTable[n]+((e&8388607)>>au.shiftTable[n])}function ix(t){const e=t>>10;return au.uint32View[0]=au.mantissaTable[au.offsetTable[e]+(t&1023)]+au.exponentTable[e],au.floatView[0]}const vSe={toHalfFloat:da,fromHalfFloat:ix},li=new ae,wS=new ze;class Xn{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=fb,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=pl,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)wS.fromBufferAttribute(this,n),wS.applyMatrix3(e),this.setXY(n,wS.x,wS.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)li.fromBufferAttribute(this,n),li.applyMatrix3(e),this.setXYZ(n,li.x,li.y,li.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)li.fromBufferAttribute(this,n),li.applyMatrix4(e),this.setXYZ(n,li.x,li.y,li.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)li.fromBufferAttribute(this,n),li.applyNormalMatrix(e),this.setXYZ(n,li.x,li.y,li.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)li.fromBufferAttribute(this,n),li.transformDirection(e),this.setXYZ(n,li.x,li.y,li.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=pa(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=_n(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=pa(n,this.array)),n}setX(e,n){return this.normalized&&(n=_n(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=pa(n,this.array)),n}setY(e,n){return this.normalized&&(n=_n(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=pa(n,this.array)),n}setZ(e,n){return this.normalized&&(n=_n(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=pa(n,this.array)),n}setW(e,n){return this.normalized&&(n=_n(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=_n(n,this.array),r=_n(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=_n(n,this.array),r=_n(r,this.array),i=_n(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=_n(n,this.array),r=_n(r,this.array),i=_n(i,this.array),s=_n(s,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==fb&&(e.usage=this.usage),e}}class ySe extends Xn{constructor(e,n,r){super(new Int8Array(e),n,r)}}class xSe extends Xn{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class bSe extends Xn{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class wSe extends Xn{constructor(e,n,r){super(new Int16Array(e),n,r)}}class GL extends Xn{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class _Se extends Xn{constructor(e,n,r){super(new Int32Array(e),n,r)}}class qL extends Xn{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class SSe extends Xn{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}getX(e){let n=ix(this.array[e*this.itemSize]);return this.normalized&&(n=pa(n,this.array)),n}setX(e,n){return this.normalized&&(n=_n(n,this.array)),this.array[e*this.itemSize]=da(n),this}getY(e){let n=ix(this.array[e*this.itemSize+1]);return this.normalized&&(n=pa(n,this.array)),n}setY(e,n){return this.normalized&&(n=_n(n,this.array)),this.array[e*this.itemSize+1]=da(n),this}getZ(e){let n=ix(this.array[e*this.itemSize+2]);return this.normalized&&(n=pa(n,this.array)),n}setZ(e,n){return this.normalized&&(n=_n(n,this.array)),this.array[e*this.itemSize+2]=da(n),this}getW(e){let n=ix(this.array[e*this.itemSize+3]);return this.normalized&&(n=pa(n,this.array)),n}setW(e,n){return this.normalized&&(n=_n(n,this.array)),this.array[e*this.itemSize+3]=da(n),this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=_n(n,this.array),r=_n(r,this.array)),this.array[e+0]=da(n),this.array[e+1]=da(r),this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=_n(n,this.array),r=_n(r,this.array),i=_n(i,this.array)),this.array[e+0]=da(n),this.array[e+1]=da(r),this.array[e+2]=da(i),this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=_n(n,this.array),r=_n(r,this.array),i=_n(i,this.array),s=_n(s,this.array)),this.array[e+0]=da(n),this.array[e+1]=da(r),this.array[e+2]=da(i),this.array[e+3]=da(s),this}}class jt extends Xn{constructor(e,n,r){super(new Float32Array(e),n,r)}}class ESe extends Xn{constructor(e,n,r){super(new Float64Array(e),n,r)}}let TSe=0;const ao=new cn,ZP=new Dn,ag=new ae,Oa=new Ys,D0=new Ys,Bi=new ae;class Tn extends Nu{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:TSe++}),this.uuid=Ha(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(RJ(e)?qL:GL)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Sn().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ao.makeRotationFromQuaternion(e),this.applyMatrix4(ao),this}rotateX(e){return ao.makeRotationX(e),this.applyMatrix4(ao),this}rotateY(e){return ao.makeRotationY(e),this.applyMatrix4(ao),this}rotateZ(e){return ao.makeRotationZ(e),this.applyMatrix4(ao),this}translate(e,n,r){return ao.makeTranslation(e,n,r),this.applyMatrix4(ao),this}scale(e,n,r){return ao.makeScale(e,n,r),this.applyMatrix4(ao),this}lookAt(e){return ZP.lookAt(e),ZP.updateMatrix(),this.applyMatrix4(ZP.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ag).negate(),this.translate(ag.x,ag.y,ag.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new jt(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ys);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new ae(-1/0,-1/0,-1/0),new ae(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const s=n[r];Oa.setFromBufferAttribute(s),this.morphTargetsRelative?(Bi.addVectors(this.boundingBox.min,Oa.min),this.boundingBox.expandByPoint(Bi),Bi.addVectors(this.boundingBox.max,Oa.max),this.boundingBox.expandByPoint(Bi)):(this.boundingBox.expandByPoint(Oa.min),this.boundingBox.expandByPoint(Oa.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Cs);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new ae,1/0);return}if(e){const r=this.boundingSphere.center;if(Oa.setFromBufferAttribute(e),n)for(let s=0,a=n.length;s<a;s++){const o=n[s];D0.setFromBufferAttribute(o),this.morphTargetsRelative?(Bi.addVectors(Oa.min,D0.min),Oa.expandByPoint(Bi),Bi.addVectors(Oa.max,D0.max),Oa.expandByPoint(Bi)):(Oa.expandByPoint(D0.min),Oa.expandByPoint(D0.max))}Oa.getCenter(r);let i=0;for(let s=0,a=e.count;s<a;s++)Bi.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(Bi));if(n)for(let s=0,a=n.length;s<a;s++){const o=n[s],l=this.morphTargetsRelative;for(let c=0,u=o.count;c<u;c++)Bi.fromBufferAttribute(o,c),l&&(ag.fromBufferAttribute(e,c),Bi.add(ag)),i=Math.max(i,r.distanceToSquared(Bi))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=n.position.array,s=n.normal.array,a=n.uv.array,o=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Xn(new Float32Array(4*o),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let j=0;j<o;j++)c[j]=new ae,u[j]=new ae;const d=new ae,h=new ae,m=new ae,b=new ze,x=new ze,v=new ze,_=new ae,E=new ae;function T(j,B,H){d.fromArray(i,j*3),h.fromArray(i,B*3),m.fromArray(i,H*3),b.fromArray(a,j*2),x.fromArray(a,B*2),v.fromArray(a,H*2),h.sub(d),m.sub(d),x.sub(b),v.sub(b);const J=1/(x.x*v.y-v.x*x.y);isFinite(J)&&(_.copy(h).multiplyScalar(v.y).addScaledVector(m,-x.y).multiplyScalar(J),E.copy(m).multiplyScalar(x.x).addScaledVector(h,-v.x).multiplyScalar(J),c[j].add(_),c[B].add(_),c[H].add(_),u[j].add(E),u[B].add(E),u[H].add(E))}let A=this.groups;A.length===0&&(A=[{start:0,count:r.length}]);for(let j=0,B=A.length;j<B;++j){const H=A[j],J=H.start,G=H.count;for(let W=J,K=J+G;W<K;W+=3)T(r[W+0],r[W+1],r[W+2])}const P=new ae,R=new ae,N=new ae,L=new ae;function I(j){N.fromArray(s,j*3),L.copy(N);const B=c[j];P.copy(B),P.sub(N.multiplyScalar(N.dot(B))).normalize(),R.crossVectors(L,B);const J=R.dot(u[j])<0?-1:1;l[j*4]=P.x,l[j*4+1]=P.y,l[j*4+2]=P.z,l[j*4+3]=J}for(let j=0,B=A.length;j<B;++j){const H=A[j],J=H.start,G=H.count;for(let W=J,K=J+G;W<K;W+=3)I(r[W+0]),I(r[W+1]),I(r[W+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Xn(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let h=0,m=r.count;h<m;h++)r.setXYZ(h,0,0,0);const i=new ae,s=new ae,a=new ae,o=new ae,l=new ae,c=new ae,u=new ae,d=new ae;if(e)for(let h=0,m=e.count;h<m;h+=3){const b=e.getX(h+0),x=e.getX(h+1),v=e.getX(h+2);i.fromBufferAttribute(n,b),s.fromBufferAttribute(n,x),a.fromBufferAttribute(n,v),u.subVectors(a,s),d.subVectors(i,s),u.cross(d),o.fromBufferAttribute(r,b),l.fromBufferAttribute(r,x),c.fromBufferAttribute(r,v),o.add(u),l.add(u),c.add(u),r.setXYZ(b,o.x,o.y,o.z),r.setXYZ(x,l.x,l.y,l.z),r.setXYZ(v,c.x,c.y,c.z)}else for(let h=0,m=n.count;h<m;h+=3)i.fromBufferAttribute(n,h+0),s.fromBufferAttribute(n,h+1),a.fromBufferAttribute(n,h+2),u.subVectors(a,s),d.subVectors(i,s),u.cross(d),r.setXYZ(h+0,u.x,u.y,u.z),r.setXYZ(h+1,u.x,u.y,u.z),r.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)Bi.fromBufferAttribute(e,n),Bi.normalize(),e.setXYZ(n,Bi.x,Bi.y,Bi.z)}toNonIndexed(){function e(o,l){const c=o.array,u=o.itemSize,d=o.normalized,h=new c.constructor(l.length*u);let m=0,b=0;for(let x=0,v=l.length;x<v;x++){o.isInterleavedBufferAttribute?m=l[x]*o.data.stride+o.offset:m=l[x]*u;for(let _=0;_<u;_++)h[b++]=c[m++]}return new Xn(h,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Tn,r=this.index.array,i=this.attributes;for(const o in i){const l=i[o],c=e(l,r);n.setAttribute(o,c)}const s=this.morphAttributes;for(const o in s){const l=[],c=s[o];for(let u=0,d=c.length;u<d;u++){const h=c[u],m=e(h,r);l.push(m)}n.morphAttributes[o]=l}n.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const c=a[o];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++){const m=c[d];u.push(m.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(n))}const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let h=0,m=d.length;h<m;h++)u.push(d[h].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,u=a.length;c<u;c++){const d=a[c];this.addGroup(d.start,d.count,d.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Hz=new cn,hh=new Rp,_S=new Cs,Wz=new ae,og=new ae,lg=new ae,cg=new ae,eC=new ae,SS=new ae,ES=new ze,TS=new ze,AS=new ze,Gz=new ae,qz=new ae,Kz=new ae,MS=new ae,PS=new ae;class Ci extends Dn{constructor(e=new Tn,n=new hf){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,a=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(s&&o){SS.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=o[l],d=s[l];u!==0&&(eC.fromBufferAttribute(d,e),a?SS.addScaledVector(eC,u):SS.addScaledVector(eC.sub(n),u))}n.add(SS)}return n}raycast(e,n){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),_S.copy(r.boundingSphere),_S.applyMatrix4(s),hh.copy(e.ray).recast(e.near),!(_S.containsPoint(hh.origin)===!1&&(hh.intersectSphere(_S,Wz)===null||hh.origin.distanceToSquared(Wz)>(e.far-e.near)**2))&&(Hz.copy(s).invert(),hh.copy(e.ray).applyMatrix4(Hz),!(r.boundingBox!==null&&hh.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,hh)))}_computeIntersections(e,n,r){let i;const s=this.geometry,a=this.material,o=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,h=s.groups,m=s.drawRange;if(o!==null)if(Array.isArray(a))for(let b=0,x=h.length;b<x;b++){const v=h[b],_=a[v.materialIndex],E=Math.max(v.start,m.start),T=Math.min(o.count,Math.min(v.start+v.count,m.start+m.count));for(let A=E,P=T;A<P;A+=3){const R=o.getX(A),N=o.getX(A+1),L=o.getX(A+2);i=CS(this,_,e,r,c,u,d,R,N,L),i&&(i.faceIndex=Math.floor(A/3),i.face.materialIndex=v.materialIndex,n.push(i))}}else{const b=Math.max(0,m.start),x=Math.min(o.count,m.start+m.count);for(let v=b,_=x;v<_;v+=3){const E=o.getX(v),T=o.getX(v+1),A=o.getX(v+2);i=CS(this,a,e,r,c,u,d,E,T,A),i&&(i.faceIndex=Math.floor(v/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(a))for(let b=0,x=h.length;b<x;b++){const v=h[b],_=a[v.materialIndex],E=Math.max(v.start,m.start),T=Math.min(l.count,Math.min(v.start+v.count,m.start+m.count));for(let A=E,P=T;A<P;A+=3){const R=A,N=A+1,L=A+2;i=CS(this,_,e,r,c,u,d,R,N,L),i&&(i.faceIndex=Math.floor(A/3),i.face.materialIndex=v.materialIndex,n.push(i))}}else{const b=Math.max(0,m.start),x=Math.min(l.count,m.start+m.count);for(let v=b,_=x;v<_;v+=3){const E=v,T=v+1,A=v+2;i=CS(this,a,e,r,c,u,d,E,T,A),i&&(i.faceIndex=Math.floor(v/3),n.push(i))}}}}function ASe(t,e,n,r,i,s,a,o){let l;if(e.side===Hi?l=r.intersectTriangle(a,s,i,!0,o):l=r.intersectTriangle(i,s,a,e.side===Sl,o),l===null)return null;PS.copy(o),PS.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(PS);return c<n.near||c>n.far?null:{distance:c,point:PS.clone(),object:t}}function CS(t,e,n,r,i,s,a,o,l,c){t.getVertexPosition(o,og),t.getVertexPosition(l,lg),t.getVertexPosition(c,cg);const u=ASe(t,e,n,r,og,lg,cg,MS);if(u){i&&(ES.fromBufferAttribute(i,o),TS.fromBufferAttribute(i,l),AS.fromBufferAttribute(i,c),u.uv=ha.getInterpolation(MS,og,lg,cg,ES,TS,AS,new ze)),s&&(ES.fromBufferAttribute(s,o),TS.fromBufferAttribute(s,l),AS.fromBufferAttribute(s,c),u.uv1=ha.getInterpolation(MS,og,lg,cg,ES,TS,AS,new ze),u.uv2=u.uv1),a&&(Gz.fromBufferAttribute(a,o),qz.fromBufferAttribute(a,l),Kz.fromBufferAttribute(a,c),u.normal=ha.getInterpolation(MS,og,lg,cg,Gz,qz,Kz,new ae),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const d={a:o,b:l,c,normal:new ae,materialIndex:0};ha.getNormal(og,lg,cg,d.normal),u.face=d}return u}class Op extends Tn{constructor(e=1,n=1,r=1,i=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:s,depthSegments:a};const o=this;i=Math.floor(i),s=Math.floor(s),a=Math.floor(a);const l=[],c=[],u=[],d=[];let h=0,m=0;b("z","y","x",-1,-1,r,n,e,a,s,0),b("z","y","x",1,-1,r,n,-e,a,s,1),b("x","z","y",1,1,e,r,n,i,a,2),b("x","z","y",1,-1,e,r,-n,i,a,3),b("x","y","z",1,-1,e,n,r,i,s,4),b("x","y","z",-1,-1,e,n,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new jt(c,3)),this.setAttribute("normal",new jt(u,3)),this.setAttribute("uv",new jt(d,2));function b(x,v,_,E,T,A,P,R,N,L,I){const j=A/N,B=P/L,H=A/2,J=P/2,G=R/2,W=N+1,K=L+1;let te=0,z=0;const V=new ae;for(let X=0;X<K;X++){const q=X*B-J;for(let Q=0;Q<W;Q++){const ie=Q*j-H;V[x]=ie*E,V[v]=q*T,V[_]=G,c.push(V.x,V.y,V.z),V[x]=0,V[v]=0,V[_]=R>0?1:-1,u.push(V.x,V.y,V.z),d.push(Q/N),d.push(1-X/L),te+=1}}for(let X=0;X<L;X++)for(let q=0;q<N;q++){const Q=h+q+W*X,ie=h+q+W*(X+1),ce=h+(q+1)+W*(X+1),ye=h+(q+1)+W*X;l.push(Q,ie,ye),l.push(ie,ce,ye),z+=6}o.addGroup(m,z,I),m+=z,h+=te}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Op(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function yv(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function Vs(t){const e={};for(let n=0;n<t.length;n++){const r=yv(t[n]);for(const i in r)e[i]=r[i]}return e}function MSe(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function kJ(t){return t.getRenderTarget()===null?t.outputColorSpace:qn.workingColorSpace}const DJ={clone:yv,merge:Vs};var PSe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,CSe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ac extends Rs{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=PSe,this.fragmentShader=CSe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=yv(e.uniforms),this.uniformsGroups=MSe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?n.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?n.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?n.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?n.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?n.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?n.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?n.uniforms[i]={type:"m4",value:a.toArray()}:n.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class Pw extends Dn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new cn,this.projectionMatrix=new cn,this.projectionMatrixInverse=new cn,this.coordinateSystem=ml}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Nr extends Pw{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=vv*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Zh*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return vv*2*Math.atan(Math.tan(Zh*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,r,i,s,a){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(Zh*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,s=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;s+=a.offsetX*i/l,n-=a.offsetY*r/c,i*=a.width/l,r*=a.height/c}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const ug=-90,dg=1;class jJ extends Dn{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Nr(ug,dg,e,n);i.layers=this.layers,this.add(i);const s=new Nr(ug,dg,e,n);s.layers=this.layers,this.add(s);const a=new Nr(ug,dg,e,n);a.layers=this.layers,this.add(a);const o=new Nr(ug,dg,e,n);o.layers=this.layers,this.add(o);const l=new Nr(ug,dg,e,n);l.layers=this.layers,this.add(l);const c=new Nr(ug,dg,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,s,a,o,l]=n;for(const c of n)this.remove(c);if(e===ml)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===gv)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,l,c,u]=this.children,d=e.getRenderTarget(),h=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),b=e.xr.enabled;e.xr.enabled=!1;const x=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,s),e.setRenderTarget(r,1,i),e.render(n,a),e.setRenderTarget(r,2,i),e.render(n,o),e.setRenderTarget(r,3,i),e.render(n,l),e.setRenderTarget(r,4,i),e.render(n,c),r.texture.generateMipmaps=x,e.setRenderTarget(r,5,i),e.render(n,u),e.setRenderTarget(d,h,m),e.xr.enabled=b,r.texture.needsPMREMUpdate=!0}}class Cw extends ti{constructor(e,n,r,i,s,a,o,l,c,u){e=e!==void 0?e:[],n=n!==void 0?n:Eu,super(e,n,r,i,s,a,o,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class LJ extends El{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];n.encoding!==void 0&&(Tx("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===Gd?Pi:Ba),this.texture=new Cw(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:ei}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Op(5,5,5),s=new ac({name:"CubemapFromEquirect",uniforms:yv(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Hi,blending:mu});s.uniforms.tEquirect.value=n;const a=new Ci(i,s),o=n.minFilter;return n.minFilter===nf&&(n.minFilter=ei),new jJ(1,10,this).update(e,a),n.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,n,r,i){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(n,r,i);e.setRenderTarget(s)}}const tC=new ae,RSe=new ae,OSe=new Sn;class su{constructor(e=new ae(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=tC.subVectors(r,n).cross(RSe.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(tC),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:n.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||OSe.getNormalMatrix(e),i=this.coplanarPoint(tC).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ph=new Cs,RS=new ae;class Rw{constructor(e=new su,n=new su,r=new su,i=new su,s=new su,a=new su){this.planes=[e,n,r,i,s,a]}set(e,n,r,i,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(n),o[2].copy(r),o[3].copy(i),o[4].copy(s),o[5].copy(a),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=ml){const r=this.planes,i=e.elements,s=i[0],a=i[1],o=i[2],l=i[3],c=i[4],u=i[5],d=i[6],h=i[7],m=i[8],b=i[9],x=i[10],v=i[11],_=i[12],E=i[13],T=i[14],A=i[15];if(r[0].setComponents(l-s,h-c,v-m,A-_).normalize(),r[1].setComponents(l+s,h+c,v+m,A+_).normalize(),r[2].setComponents(l+a,h+u,v+b,A+E).normalize(),r[3].setComponents(l-a,h-u,v-b,A-E).normalize(),r[4].setComponents(l-o,h-d,v-x,A-T).normalize(),n===ml)r[5].setComponents(l+o,h+d,v+x,A+T).normalize();else if(n===gv)r[5].setComponents(o,d,x,T).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),ph.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),ph.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ph)}intersectsSprite(e){return ph.center.set(0,0,0),ph.radius=.7071067811865476,ph.applyMatrix4(e.matrixWorld),this.intersectsSphere(ph)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(RS.x=i.normal.x>0?e.max.x:e.min.x,RS.y=i.normal.y>0?e.max.y:e.min.y,RS.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(RS)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function UJ(){let t=null,e=!1,n=null,r=null;function i(s,a){n(s,a),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function NSe(t,e){const n=e.isWebGL2,r=new WeakMap;function i(c,u){const d=c.array,h=c.usage,m=d.byteLength,b=t.createBuffer();t.bindBuffer(u,b),t.bufferData(u,d,h),c.onUploadCallback();let x;if(d instanceof Float32Array)x=t.FLOAT;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(n)x=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else x=t.UNSIGNED_SHORT;else if(d instanceof Int16Array)x=t.SHORT;else if(d instanceof Uint32Array)x=t.UNSIGNED_INT;else if(d instanceof Int32Array)x=t.INT;else if(d instanceof Int8Array)x=t.BYTE;else if(d instanceof Uint8Array)x=t.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)x=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:b,type:x,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version,size:m}}function s(c,u,d){const h=u.array,m=u._updateRange,b=u.updateRanges;if(t.bindBuffer(d,c),m.count===-1&&b.length===0&&t.bufferSubData(d,0,h),b.length!==0){for(let x=0,v=b.length;x<v;x++){const _=b[x];n?t.bufferSubData(d,_.start*h.BYTES_PER_ELEMENT,h,_.start,_.count):t.bufferSubData(d,_.start*h.BYTES_PER_ELEMENT,h.subarray(_.start,_.start+_.count))}u.clearUpdateRanges()}m.count!==-1&&(n?t.bufferSubData(d,m.offset*h.BYTES_PER_ELEMENT,h,m.offset,m.count):t.bufferSubData(d,m.offset*h.BYTES_PER_ELEMENT,h.subarray(m.offset,m.offset+m.count)),m.count=-1),u.onUploadCallback()}function a(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function o(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=r.get(c);u&&(t.deleteBuffer(u.buffer),r.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const h=r.get(c);(!h||h.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const d=r.get(c);if(d===void 0)r.set(c,i(c,u));else if(d.version<c.version){if(d.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(d.buffer,c,u),d.version=c.version}}return{get:a,remove:o,update:l}}class Ow extends Tn{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const s=e/2,a=n/2,o=Math.floor(r),l=Math.floor(i),c=o+1,u=l+1,d=e/o,h=n/l,m=[],b=[],x=[],v=[];for(let _=0;_<u;_++){const E=_*h-a;for(let T=0;T<c;T++){const A=T*d-s;b.push(A,-E,0),x.push(0,0,1),v.push(T/o),v.push(1-_/l)}}for(let _=0;_<l;_++)for(let E=0;E<o;E++){const T=E+c*_,A=E+c*(_+1),P=E+1+c*(_+1),R=E+1+c*_;m.push(T,A,R),m.push(A,P,R)}this.setIndex(m),this.setAttribute("position",new jt(b,3)),this.setAttribute("normal",new jt(x,3)),this.setAttribute("uv",new jt(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ow(e.width,e.height,e.widthSegments,e.heightSegments)}}var ISe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,kSe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,DSe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,jSe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,LSe=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,USe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,FSe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,BSe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,zSe=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,$Se=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,VSe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,HSe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,WSe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,GSe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,qSe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,KSe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,XSe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,YSe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,JSe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,QSe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,ZSe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,e1e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,t1e=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,n1e=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,r1e=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,i1e=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,s1e=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,a1e=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,o1e=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,l1e=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,c1e="gl_FragColor = linearToOutputTexel( gl_FragColor );",u1e=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,d1e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,f1e=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,h1e=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,p1e=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,m1e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,g1e=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,v1e=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,y1e=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,x1e=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,b1e=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,w1e=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,_1e=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,S1e=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,E1e=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,T1e=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,A1e=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,M1e=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,P1e=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,C1e=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,R1e=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,O1e=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,N1e=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,I1e=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,k1e=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,D1e=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,j1e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,L1e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,U1e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,F1e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,B1e=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,z1e=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,$1e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,V1e=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,H1e=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,W1e=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,G1e=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,q1e=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,K1e=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,X1e=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Y1e=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,J1e=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Q1e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Z1e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,eEe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,tEe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,nEe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,rEe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,iEe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,sEe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,aEe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,oEe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,lEe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,cEe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,uEe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dEe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,fEe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,hEe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,pEe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,mEe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,gEe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,vEe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,yEe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,xEe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,bEe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,wEe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,_Ee=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,SEe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,EEe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,TEe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color *= toneMappingExposure;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,AEe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,MEe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,PEe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,CEe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,REe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,OEe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const NEe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,IEe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,kEe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,DEe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,jEe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,LEe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,UEe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,FEe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,BEe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,zEe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,$Ee=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,VEe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,HEe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,WEe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,GEe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,qEe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,KEe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,XEe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YEe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,JEe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,QEe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,ZEe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,eTe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,tTe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nTe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,rTe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,iTe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sTe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,aTe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,oTe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,lTe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,cTe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,uTe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,dTe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,wn={alphahash_fragment:ISe,alphahash_pars_fragment:kSe,alphamap_fragment:DSe,alphamap_pars_fragment:jSe,alphatest_fragment:LSe,alphatest_pars_fragment:USe,aomap_fragment:FSe,aomap_pars_fragment:BSe,batching_pars_vertex:zSe,batching_vertex:$Se,begin_vertex:VSe,beginnormal_vertex:HSe,bsdfs:WSe,iridescence_fragment:GSe,bumpmap_pars_fragment:qSe,clipping_planes_fragment:KSe,clipping_planes_pars_fragment:XSe,clipping_planes_pars_vertex:YSe,clipping_planes_vertex:JSe,color_fragment:QSe,color_pars_fragment:ZSe,color_pars_vertex:e1e,color_vertex:t1e,common:n1e,cube_uv_reflection_fragment:r1e,defaultnormal_vertex:i1e,displacementmap_pars_vertex:s1e,displacementmap_vertex:a1e,emissivemap_fragment:o1e,emissivemap_pars_fragment:l1e,colorspace_fragment:c1e,colorspace_pars_fragment:u1e,envmap_fragment:d1e,envmap_common_pars_fragment:f1e,envmap_pars_fragment:h1e,envmap_pars_vertex:p1e,envmap_physical_pars_fragment:A1e,envmap_vertex:m1e,fog_vertex:g1e,fog_pars_vertex:v1e,fog_fragment:y1e,fog_pars_fragment:x1e,gradientmap_pars_fragment:b1e,lightmap_fragment:w1e,lightmap_pars_fragment:_1e,lights_lambert_fragment:S1e,lights_lambert_pars_fragment:E1e,lights_pars_begin:T1e,lights_toon_fragment:M1e,lights_toon_pars_fragment:P1e,lights_phong_fragment:C1e,lights_phong_pars_fragment:R1e,lights_physical_fragment:O1e,lights_physical_pars_fragment:N1e,lights_fragment_begin:I1e,lights_fragment_maps:k1e,lights_fragment_end:D1e,logdepthbuf_fragment:j1e,logdepthbuf_pars_fragment:L1e,logdepthbuf_pars_vertex:U1e,logdepthbuf_vertex:F1e,map_fragment:B1e,map_pars_fragment:z1e,map_particle_fragment:$1e,map_particle_pars_fragment:V1e,metalnessmap_fragment:H1e,metalnessmap_pars_fragment:W1e,morphcolor_vertex:G1e,morphnormal_vertex:q1e,morphtarget_pars_vertex:K1e,morphtarget_vertex:X1e,normal_fragment_begin:Y1e,normal_fragment_maps:J1e,normal_pars_fragment:Q1e,normal_pars_vertex:Z1e,normal_vertex:eEe,normalmap_pars_fragment:tEe,clearcoat_normal_fragment_begin:nEe,clearcoat_normal_fragment_maps:rEe,clearcoat_pars_fragment:iEe,iridescence_pars_fragment:sEe,opaque_fragment:aEe,packing:oEe,premultiplied_alpha_fragment:lEe,project_vertex:cEe,dithering_fragment:uEe,dithering_pars_fragment:dEe,roughnessmap_fragment:fEe,roughnessmap_pars_fragment:hEe,shadowmap_pars_fragment:pEe,shadowmap_pars_vertex:mEe,shadowmap_vertex:gEe,shadowmask_pars_fragment:vEe,skinbase_vertex:yEe,skinning_pars_vertex:xEe,skinning_vertex:bEe,skinnormal_vertex:wEe,specularmap_fragment:_Ee,specularmap_pars_fragment:SEe,tonemapping_fragment:EEe,tonemapping_pars_fragment:TEe,transmission_fragment:AEe,transmission_pars_fragment:MEe,uv_pars_fragment:PEe,uv_pars_vertex:CEe,uv_vertex:REe,worldpos_vertex:OEe,background_vert:NEe,background_frag:IEe,backgroundCube_vert:kEe,backgroundCube_frag:DEe,cube_vert:jEe,cube_frag:LEe,depth_vert:UEe,depth_frag:FEe,distanceRGBA_vert:BEe,distanceRGBA_frag:zEe,equirect_vert:$Ee,equirect_frag:VEe,linedashed_vert:HEe,linedashed_frag:WEe,meshbasic_vert:GEe,meshbasic_frag:qEe,meshlambert_vert:KEe,meshlambert_frag:XEe,meshmatcap_vert:YEe,meshmatcap_frag:JEe,meshnormal_vert:QEe,meshnormal_frag:ZEe,meshphong_vert:eTe,meshphong_frag:tTe,meshphysical_vert:nTe,meshphysical_frag:rTe,meshtoon_vert:iTe,meshtoon_frag:sTe,points_vert:aTe,points_frag:oTe,shadow_vert:lTe,shadow_frag:cTe,sprite_vert:uTe,sprite_frag:dTe},ct={common:{diffuse:{value:new St(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Sn},alphaMap:{value:null},alphaMapTransform:{value:new Sn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Sn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Sn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Sn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Sn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Sn},normalScale:{value:new ze(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Sn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Sn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Sn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Sn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new St(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new St(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Sn},alphaTest:{value:0},uvTransform:{value:new Sn}},sprite:{diffuse:{value:new St(16777215)},opacity:{value:1},center:{value:new ze(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Sn},alphaMap:{value:null},alphaMapTransform:{value:new Sn},alphaTest:{value:0}}},fl={basic:{uniforms:Vs([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.fog]),vertexShader:wn.meshbasic_vert,fragmentShader:wn.meshbasic_frag},lambert:{uniforms:Vs([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,ct.lights,{emissive:{value:new St(0)}}]),vertexShader:wn.meshlambert_vert,fragmentShader:wn.meshlambert_frag},phong:{uniforms:Vs([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,ct.lights,{emissive:{value:new St(0)},specular:{value:new St(1118481)},shininess:{value:30}}]),vertexShader:wn.meshphong_vert,fragmentShader:wn.meshphong_frag},standard:{uniforms:Vs([ct.common,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.roughnessmap,ct.metalnessmap,ct.fog,ct.lights,{emissive:{value:new St(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:wn.meshphysical_vert,fragmentShader:wn.meshphysical_frag},toon:{uniforms:Vs([ct.common,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.gradientmap,ct.fog,ct.lights,{emissive:{value:new St(0)}}]),vertexShader:wn.meshtoon_vert,fragmentShader:wn.meshtoon_frag},matcap:{uniforms:Vs([ct.common,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,{matcap:{value:null}}]),vertexShader:wn.meshmatcap_vert,fragmentShader:wn.meshmatcap_frag},points:{uniforms:Vs([ct.points,ct.fog]),vertexShader:wn.points_vert,fragmentShader:wn.points_frag},dashed:{uniforms:Vs([ct.common,ct.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:wn.linedashed_vert,fragmentShader:wn.linedashed_frag},depth:{uniforms:Vs([ct.common,ct.displacementmap]),vertexShader:wn.depth_vert,fragmentShader:wn.depth_frag},normal:{uniforms:Vs([ct.common,ct.bumpmap,ct.normalmap,ct.displacementmap,{opacity:{value:1}}]),vertexShader:wn.meshnormal_vert,fragmentShader:wn.meshnormal_frag},sprite:{uniforms:Vs([ct.sprite,ct.fog]),vertexShader:wn.sprite_vert,fragmentShader:wn.sprite_frag},background:{uniforms:{uvTransform:{value:new Sn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:wn.background_vert,fragmentShader:wn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:wn.backgroundCube_vert,fragmentShader:wn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:wn.cube_vert,fragmentShader:wn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:wn.equirect_vert,fragmentShader:wn.equirect_frag},distanceRGBA:{uniforms:Vs([ct.common,ct.displacementmap,{referencePosition:{value:new ae},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:wn.distanceRGBA_vert,fragmentShader:wn.distanceRGBA_frag},shadow:{uniforms:Vs([ct.lights,ct.fog,{color:{value:new St(0)},opacity:{value:1}}]),vertexShader:wn.shadow_vert,fragmentShader:wn.shadow_frag}};fl.physical={uniforms:Vs([fl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Sn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Sn},clearcoatNormalScale:{value:new ze(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Sn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Sn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Sn},sheen:{value:0},sheenColor:{value:new St(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Sn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Sn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Sn},transmissionSamplerSize:{value:new ze},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Sn},attenuationDistance:{value:0},attenuationColor:{value:new St(0)},specularColor:{value:new St(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Sn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Sn},anisotropyVector:{value:new ze},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Sn}}]),vertexShader:wn.meshphysical_vert,fragmentShader:wn.meshphysical_frag};const OS={r:0,b:0,g:0};function fTe(t,e,n,r,i,s,a){const o=new St(0);let l=s===!0?0:1,c,u,d=null,h=0,m=null;function b(v,_){let E=!1,T=_.isScene===!0?_.background:null;T&&T.isTexture&&(T=(_.backgroundBlurriness>0?n:e).get(T)),T===null?x(o,l):T&&T.isColor&&(x(T,1),E=!0);const A=t.xr.getEnvironmentBlendMode();A==="additive"?r.buffers.color.setClear(0,0,0,1,a):A==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,a),(t.autoClear||E)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),T&&(T.isCubeTexture||T.mapping===fy)?(u===void 0&&(u=new Ci(new Op(1,1,1),new ac({name:"BackgroundCubeMaterial",uniforms:yv(fl.backgroundCube.uniforms),vertexShader:fl.backgroundCube.vertexShader,fragmentShader:fl.backgroundCube.fragmentShader,side:Hi,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(P,R,N){this.matrixWorld.copyPosition(N.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),u.material.uniforms.envMap.value=T,u.material.uniforms.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=_.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,u.material.toneMapped=qn.getTransfer(T.colorSpace)!==dr,(d!==T||h!==T.version||m!==t.toneMapping)&&(u.material.needsUpdate=!0,d=T,h=T.version,m=t.toneMapping),u.layers.enableAll(),v.unshift(u,u.geometry,u.material,0,0,null)):T&&T.isTexture&&(c===void 0&&(c=new Ci(new Ow(2,2),new ac({name:"BackgroundMaterial",uniforms:yv(fl.background.uniforms),vertexShader:fl.background.vertexShader,fragmentShader:fl.background.fragmentShader,side:Sl,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=T,c.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,c.material.toneMapped=qn.getTransfer(T.colorSpace)!==dr,T.matrixAutoUpdate===!0&&T.updateMatrix(),c.material.uniforms.uvTransform.value.copy(T.matrix),(d!==T||h!==T.version||m!==t.toneMapping)&&(c.material.needsUpdate=!0,d=T,h=T.version,m=t.toneMapping),c.layers.enableAll(),v.unshift(c,c.geometry,c.material,0,0,null))}function x(v,_){v.getRGB(OS,kJ(t)),r.buffers.color.setClear(OS.r,OS.g,OS.b,_,a)}return{getClearColor:function(){return o},setClearColor:function(v,_=1){o.set(v),l=_,x(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(v){l=v,x(o,l)},render:b}}function hTe(t,e,n,r){const i=t.getParameter(t.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),a=r.isWebGL2||s!==null,o={},l=v(null);let c=l,u=!1;function d(G,W,K,te,z){let V=!1;if(a){const X=x(te,K,W);c!==X&&(c=X,m(c.object)),V=_(G,te,K,z),V&&E(G,te,K,z)}else{const X=W.wireframe===!0;(c.geometry!==te.id||c.program!==K.id||c.wireframe!==X)&&(c.geometry=te.id,c.program=K.id,c.wireframe=X,V=!0)}z!==null&&n.update(z,t.ELEMENT_ARRAY_BUFFER),(V||u)&&(u=!1,L(G,W,K,te),z!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(z).buffer))}function h(){return r.isWebGL2?t.createVertexArray():s.createVertexArrayOES()}function m(G){return r.isWebGL2?t.bindVertexArray(G):s.bindVertexArrayOES(G)}function b(G){return r.isWebGL2?t.deleteVertexArray(G):s.deleteVertexArrayOES(G)}function x(G,W,K){const te=K.wireframe===!0;let z=o[G.id];z===void 0&&(z={},o[G.id]=z);let V=z[W.id];V===void 0&&(V={},z[W.id]=V);let X=V[te];return X===void 0&&(X=v(h()),V[te]=X),X}function v(G){const W=[],K=[],te=[];for(let z=0;z<i;z++)W[z]=0,K[z]=0,te[z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:W,enabledAttributes:K,attributeDivisors:te,object:G,attributes:{},index:null}}function _(G,W,K,te){const z=c.attributes,V=W.attributes;let X=0;const q=K.getAttributes();for(const Q in q)if(q[Q].location>=0){const ce=z[Q];let ye=V[Q];if(ye===void 0&&(Q==="instanceMatrix"&&G.instanceMatrix&&(ye=G.instanceMatrix),Q==="instanceColor"&&G.instanceColor&&(ye=G.instanceColor)),ce===void 0||ce.attribute!==ye||ye&&ce.data!==ye.data)return!0;X++}return c.attributesNum!==X||c.index!==te}function E(G,W,K,te){const z={},V=W.attributes;let X=0;const q=K.getAttributes();for(const Q in q)if(q[Q].location>=0){let ce=V[Q];ce===void 0&&(Q==="instanceMatrix"&&G.instanceMatrix&&(ce=G.instanceMatrix),Q==="instanceColor"&&G.instanceColor&&(ce=G.instanceColor));const ye={};ye.attribute=ce,ce&&ce.data&&(ye.data=ce.data),z[Q]=ye,X++}c.attributes=z,c.attributesNum=X,c.index=te}function T(){const G=c.newAttributes;for(let W=0,K=G.length;W<K;W++)G[W]=0}function A(G){P(G,0)}function P(G,W){const K=c.newAttributes,te=c.enabledAttributes,z=c.attributeDivisors;K[G]=1,te[G]===0&&(t.enableVertexAttribArray(G),te[G]=1),z[G]!==W&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](G,W),z[G]=W)}function R(){const G=c.newAttributes,W=c.enabledAttributes;for(let K=0,te=W.length;K<te;K++)W[K]!==G[K]&&(t.disableVertexAttribArray(K),W[K]=0)}function N(G,W,K,te,z,V,X){X===!0?t.vertexAttribIPointer(G,W,K,z,V):t.vertexAttribPointer(G,W,K,te,z,V)}function L(G,W,K,te){if(r.isWebGL2===!1&&(G.isInstancedMesh||te.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;T();const z=te.attributes,V=K.getAttributes(),X=W.defaultAttributeValues;for(const q in V){const Q=V[q];if(Q.location>=0){let ie=z[q];if(ie===void 0&&(q==="instanceMatrix"&&G.instanceMatrix&&(ie=G.instanceMatrix),q==="instanceColor"&&G.instanceColor&&(ie=G.instanceColor)),ie!==void 0){const ce=ie.normalized,ye=ie.itemSize,Ce=n.get(ie);if(Ce===void 0)continue;const he=Ce.buffer,De=Ce.type,be=Ce.bytesPerElement,_e=r.isWebGL2===!0&&(De===t.INT||De===t.UNSIGNED_INT||ie.gpuType===IL);if(ie.isInterleavedBufferAttribute){const Ee=ie.data,ee=Ee.stride,Me=ie.offset;if(Ee.isInstancedInterleavedBuffer){for(let xe=0;xe<Q.locationSize;xe++)P(Q.location+xe,Ee.meshPerAttribute);G.isInstancedMesh!==!0&&te._maxInstanceCount===void 0&&(te._maxInstanceCount=Ee.meshPerAttribute*Ee.count)}else for(let xe=0;xe<Q.locationSize;xe++)A(Q.location+xe);t.bindBuffer(t.ARRAY_BUFFER,he);for(let xe=0;xe<Q.locationSize;xe++)N(Q.location+xe,ye/Q.locationSize,De,ce,ee*be,(Me+ye/Q.locationSize*xe)*be,_e)}else{if(ie.isInstancedBufferAttribute){for(let Ee=0;Ee<Q.locationSize;Ee++)P(Q.location+Ee,ie.meshPerAttribute);G.isInstancedMesh!==!0&&te._maxInstanceCount===void 0&&(te._maxInstanceCount=ie.meshPerAttribute*ie.count)}else for(let Ee=0;Ee<Q.locationSize;Ee++)A(Q.location+Ee);t.bindBuffer(t.ARRAY_BUFFER,he);for(let Ee=0;Ee<Q.locationSize;Ee++)N(Q.location+Ee,ye/Q.locationSize,De,ce,ye*be,ye/Q.locationSize*Ee*be,_e)}}else if(X!==void 0){const ce=X[q];if(ce!==void 0)switch(ce.length){case 2:t.vertexAttrib2fv(Q.location,ce);break;case 3:t.vertexAttrib3fv(Q.location,ce);break;case 4:t.vertexAttrib4fv(Q.location,ce);break;default:t.vertexAttrib1fv(Q.location,ce)}}}}R()}function I(){H();for(const G in o){const W=o[G];for(const K in W){const te=W[K];for(const z in te)b(te[z].object),delete te[z];delete W[K]}delete o[G]}}function j(G){if(o[G.id]===void 0)return;const W=o[G.id];for(const K in W){const te=W[K];for(const z in te)b(te[z].object),delete te[z];delete W[K]}delete o[G.id]}function B(G){for(const W in o){const K=o[W];if(K[G.id]===void 0)continue;const te=K[G.id];for(const z in te)b(te[z].object),delete te[z];delete K[G.id]}}function H(){J(),u=!0,c!==l&&(c=l,m(c.object))}function J(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:H,resetDefaultState:J,dispose:I,releaseStatesOfGeometry:j,releaseStatesOfProgram:B,initAttributes:T,enableAttribute:A,disableUnusedAttributes:R}}function pTe(t,e,n,r){const i=r.isWebGL2;let s;function a(u){s=u}function o(u,d){t.drawArrays(s,u,d),n.update(d,s,1)}function l(u,d,h){if(h===0)return;let m,b;if(i)m=t,b="drawArraysInstanced";else if(m=e.get("ANGLE_instanced_arrays"),b="drawArraysInstancedANGLE",m===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[b](s,u,d,h),n.update(d,s,h)}function c(u,d,h){if(h===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let b=0;b<h;b++)this.render(u[b],d[b]);else{m.multiDrawArraysWEBGL(s,u,0,d,0,h);let b=0;for(let x=0;x<h;x++)b+=d[x];n.update(b,s,1)}}this.setMode=a,this.render=o,this.renderInstances=l,this.renderMultiDraw=c}function mTe(t,e,n){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const N=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(N.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(N){if(N==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";N="mediump"}return N==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let o=n.precision!==void 0?n.precision:"highp";const l=s(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);const c=a||e.has("WEBGL_draw_buffers"),u=n.logarithmicDepthBuffer===!0,d=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=t.getParameter(t.MAX_TEXTURE_SIZE),b=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),x=t.getParameter(t.MAX_VERTEX_ATTRIBS),v=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),_=t.getParameter(t.MAX_VARYING_VECTORS),E=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),T=h>0,A=a||e.has("OES_texture_float"),P=T&&A,R=a?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:a,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:m,maxCubemapSize:b,maxAttributes:x,maxVertexUniforms:v,maxVaryings:_,maxFragmentUniforms:E,vertexTextures:T,floatFragmentTextures:A,floatVertexTextures:P,maxSamples:R}}function gTe(t){const e=this;let n=null,r=0,i=!1,s=!1;const a=new su,o=new Sn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){const m=d.length!==0||h||r!==0||i;return i=h,r=d.length,m},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,h){n=u(d,h,0)},this.setState=function(d,h,m){const b=d.clippingPlanes,x=d.clipIntersection,v=d.clipShadows,_=t.get(d);if(!i||b===null||b.length===0||s&&!v)s?u(null):c();else{const E=s?0:r,T=E*4;let A=_.clippingState||null;l.value=A,A=u(b,h,T,m);for(let P=0;P!==T;++P)A[P]=n[P];_.clippingState=A,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=E}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(d,h,m,b){const x=d!==null?d.length:0;let v=null;if(x!==0){if(v=l.value,b!==!0||v===null){const _=m+x*4,E=h.matrixWorldInverse;o.getNormalMatrix(E),(v===null||v.length<_)&&(v=new Float32Array(_));for(let T=0,A=m;T!==x;++T,A+=4)a.copy(d[T]).applyMatrix4(E,o),a.normal.toArray(v,A),v[A+3]=a.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,v}}function vTe(t){let e=new WeakMap;function n(a,o){return o===nb?a.mapping=Eu:o===rb&&(a.mapping=tf),a}function r(a){if(a&&a.isTexture){const o=a.mapping;if(o===nb||o===rb)if(e.has(a)){const l=e.get(a).texture;return n(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new LJ(l.height/2);return c.fromEquirectangularTexture(t,a),e.set(a,c),a.addEventListener("dispose",i),n(c.texture,a.mapping)}else return null}}return a}function i(a){const o=a.target;o.removeEventListener("dispose",i);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class ec extends Pw{constructor(e=-1,n=1,r=1,i=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,a=r+e,o=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,a=s+c*this.view.width,o-=u*this.view.offsetY,l=o-u*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const Ug=4,Xz=[.125,.215,.35,.446,.526,.582],Lh=20,nC=new ec,Yz=new St;let rC=null,iC=0,sC=0;const Oh=(1+Math.sqrt(5))/2,fg=1/Oh,Jz=[new ae(1,1,1),new ae(-1,1,1),new ae(1,1,-1),new ae(-1,1,-1),new ae(0,Oh,fg),new ae(0,Oh,-fg),new ae(fg,0,Oh),new ae(-fg,0,Oh),new ae(Oh,fg,0),new ae(-Oh,fg,0)];class vk{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){rC=this._renderer.getRenderTarget(),iC=this._renderer.getActiveCubeFace(),sC=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=e5(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Zz(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(rC,iC,sC),e.scissorTest=!1,NS(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Eu||e.mapping===tf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),rC=this._renderer.getRenderTarget(),iC=this._renderer.getActiveCubeFace(),sC=this._renderer.getActiveMipmapLevel();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:ei,minFilter:ei,generateMipmaps:!1,type:mv,format:Gs,colorSpace:sc,depthBuffer:!1},i=Qz(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Qz(e,n,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=yTe(s)),this._blurMaterial=xTe(s,e,n)}return i}_compileMaterial(e){const n=new Ci(this._lodPlanes[0],e);this._renderer.compile(n,nC)}_sceneToCubeUV(e,n,r,i){const o=new Nr(90,1,n,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.toneMapping;u.getClearColor(Yz),u.toneMapping=Ql,u.autoClear=!1;const m=new hf({name:"PMREM.Background",side:Hi,depthWrite:!1,depthTest:!1}),b=new Ci(new Op,m);let x=!1;const v=e.background;v?v.isColor&&(m.color.copy(v),e.background=null,x=!0):(m.color.copy(Yz),x=!0);for(let _=0;_<6;_++){const E=_%3;E===0?(o.up.set(0,l[_],0),o.lookAt(c[_],0,0)):E===1?(o.up.set(0,0,l[_]),o.lookAt(0,c[_],0)):(o.up.set(0,l[_],0),o.lookAt(0,0,c[_]));const T=this._cubeSize;NS(i,E*T,_>2?T:0,T,T),u.setRenderTarget(i),x&&u.render(b,o),u.render(e,o)}b.geometry.dispose(),b.material.dispose(),u.toneMapping=h,u.autoClear=d,e.background=v}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===Eu||e.mapping===tf;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=e5()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Zz());const s=i?this._cubemapMaterial:this._equirectMaterial,a=new Ci(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;NS(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(a,nC)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),a=Jz[(i-1)%Jz.length];this._blur(e,i-1,i,s,a)}n.autoClear=r}_blur(e,n,r,i,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,n,r,i,"latitudinal",s),this._halfBlur(a,e,r,r,i,"longitudinal",s)}_halfBlur(e,n,r,i,s,a,o){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new Ci(this._lodPlanes[i],c),h=c.uniforms,m=this._sizeLods[r]-1,b=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Lh-1),x=s/b,v=isFinite(s)?1+Math.floor(u*x):Lh;v>Lh&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${Lh}`);const _=[];let E=0;for(let N=0;N<Lh;++N){const L=N/x,I=Math.exp(-L*L/2);_.push(I),N===0?E+=I:N<v&&(E+=2*I)}for(let N=0;N<_.length;N++)_[N]=_[N]/E;h.envMap.value=e.texture,h.samples.value=v,h.weights.value=_,h.latitudinal.value=a==="latitudinal",o&&(h.poleAxis.value=o);const{_lodMax:T}=this;h.dTheta.value=b,h.mipInt.value=T-r;const A=this._sizeLods[i],P=3*A*(i>T-Ug?i-T+Ug:0),R=4*(this._cubeSize-A);NS(n,P,R,3*A,2*A),l.setRenderTarget(n),l.render(d,nC)}}function yTe(t){const e=[],n=[],r=[];let i=t;const s=t-Ug+1+Xz.length;for(let a=0;a<s;a++){const o=Math.pow(2,i);n.push(o);let l=1/o;a>t-Ug?l=Xz[a-t+Ug-1]:a===0&&(l=0),r.push(l);const c=1/(o-2),u=-c,d=1+c,h=[u,u,d,u,d,d,u,u,d,d,u,d],m=6,b=6,x=3,v=2,_=1,E=new Float32Array(x*b*m),T=new Float32Array(v*b*m),A=new Float32Array(_*b*m);for(let R=0;R<m;R++){const N=R%3*2/3-1,L=R>2?0:-1,I=[N,L,0,N+2/3,L,0,N+2/3,L+1,0,N,L,0,N+2/3,L+1,0,N,L+1,0];E.set(I,x*b*R),T.set(h,v*b*R);const j=[R,R,R,R,R,R];A.set(j,_*b*R)}const P=new Tn;P.setAttribute("position",new Xn(E,x)),P.setAttribute("uv",new Xn(T,v)),P.setAttribute("faceIndex",new Xn(A,_)),e.push(P),i>Ug&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function Qz(t,e,n){const r=new El(t,e,n);return r.texture.mapping=fy,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function NS(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function xTe(t,e,n){const r=new Float32Array(Lh),i=new ae(0,1,0);return new ac({name:"SphericalGaussianBlur",defines:{n:Lh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:KL(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:mu,depthTest:!1,depthWrite:!1})}function Zz(){return new ac({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:KL(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:mu,depthTest:!1,depthWrite:!1})}function e5(){return new ac({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:KL(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:mu,depthTest:!1,depthWrite:!1})}function KL(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function bTe(t){let e=new WeakMap,n=null;function r(o){if(o&&o.isTexture){const l=o.mapping,c=l===nb||l===rb,u=l===Eu||l===tf;if(c||u)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let d=e.get(o);return n===null&&(n=new vk(t)),d=c?n.fromEquirectangular(o,d):n.fromCubemap(o,d),e.set(o,d),d.texture}else{if(e.has(o))return e.get(o).texture;{const d=o.image;if(c&&d&&d.height>0||u&&d&&i(d)){n===null&&(n=new vk(t));const h=c?n.fromEquirectangular(o):n.fromCubemap(o);return e.set(o,h),o.addEventListener("dispose",s),h.texture}else return null}}}return o}function i(o){let l=0;const c=6;for(let u=0;u<c;u++)o[u]!==void 0&&l++;return l===c}function s(o){const l=o.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:a}}function wTe(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?(n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance")):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function _Te(t,e,n,r){const i={},s=new WeakMap;function a(d){const h=d.target;h.index!==null&&e.remove(h.index);for(const b in h.attributes)e.remove(h.attributes[b]);for(const b in h.morphAttributes){const x=h.morphAttributes[b];for(let v=0,_=x.length;v<_;v++)e.remove(x[v])}h.removeEventListener("dispose",a),delete i[h.id];const m=s.get(h);m&&(e.remove(m),s.delete(h)),r.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,n.memory.geometries--}function o(d,h){return i[h.id]===!0||(h.addEventListener("dispose",a),i[h.id]=!0,n.memory.geometries++),h}function l(d){const h=d.attributes;for(const b in h)e.update(h[b],t.ARRAY_BUFFER);const m=d.morphAttributes;for(const b in m){const x=m[b];for(let v=0,_=x.length;v<_;v++)e.update(x[v],t.ARRAY_BUFFER)}}function c(d){const h=[],m=d.index,b=d.attributes.position;let x=0;if(m!==null){const E=m.array;x=m.version;for(let T=0,A=E.length;T<A;T+=3){const P=E[T+0],R=E[T+1],N=E[T+2];h.push(P,R,R,N,N,P)}}else if(b!==void 0){const E=b.array;x=b.version;for(let T=0,A=E.length/3-1;T<A;T+=3){const P=T+0,R=T+1,N=T+2;h.push(P,R,R,N,N,P)}}else return;const v=new(RJ(h)?qL:GL)(h,1);v.version=x;const _=s.get(d);_&&e.remove(_),s.set(d,v)}function u(d){const h=s.get(d);if(h){const m=d.index;m!==null&&h.version<m.version&&c(d)}else c(d);return s.get(d)}return{get:o,update:l,getWireframeAttribute:u}}function STe(t,e,n,r){const i=r.isWebGL2;let s;function a(m){s=m}let o,l;function c(m){o=m.type,l=m.bytesPerElement}function u(m,b){t.drawElements(s,b,o,m*l),n.update(b,s,1)}function d(m,b,x){if(x===0)return;let v,_;if(i)v=t,_="drawElementsInstanced";else if(v=e.get("ANGLE_instanced_arrays"),_="drawElementsInstancedANGLE",v===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[_](s,b,o,m*l,x),n.update(b,s,x)}function h(m,b,x){if(x===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let _=0;_<x;_++)this.render(m[_]/l,b[_]);else{v.multiDrawElementsWEBGL(s,b,0,o,m,0,x);let _=0;for(let E=0;E<x;E++)_+=b[E];n.update(_,s,1)}}this.setMode=a,this.setIndex=c,this.render=u,this.renderInstances=d,this.renderMultiDraw=h}function ETe(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,a,o){switch(n.calls++,a){case t.TRIANGLES:n.triangles+=o*(s/3);break;case t.LINES:n.lines+=o*(s/2);break;case t.LINE_STRIP:n.lines+=o*(s-1);break;case t.LINE_LOOP:n.lines+=o*s;break;case t.POINTS:n.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function TTe(t,e){return t[0]-e[0]}function ATe(t,e){return Math.abs(e[1])-Math.abs(t[1])}function MTe(t,e,n){const r={},i=new Float32Array(8),s=new WeakMap,a=new Kn,o=[];for(let c=0;c<8;c++)o[c]=[c,0];function l(c,u,d){const h=c.morphTargetInfluences;if(e.isWebGL2===!0){const b=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,x=b!==void 0?b.length:0;let v=s.get(u);if(v===void 0||v.count!==x){let W=function(){J.dispose(),s.delete(u),u.removeEventListener("dispose",W)};var m=W;v!==void 0&&v.texture.dispose();const T=u.morphAttributes.position!==void 0,A=u.morphAttributes.normal!==void 0,P=u.morphAttributes.color!==void 0,R=u.morphAttributes.position||[],N=u.morphAttributes.normal||[],L=u.morphAttributes.color||[];let I=0;T===!0&&(I=1),A===!0&&(I=2),P===!0&&(I=3);let j=u.attributes.position.count*I,B=1;j>e.maxTextureSize&&(B=Math.ceil(j/e.maxTextureSize),j=e.maxTextureSize);const H=new Float32Array(j*B*4*x),J=new eA(H,j,B,x);J.type=pl,J.needsUpdate=!0;const G=I*4;for(let K=0;K<x;K++){const te=R[K],z=N[K],V=L[K],X=j*B*4*K;for(let q=0;q<te.count;q++){const Q=q*G;T===!0&&(a.fromBufferAttribute(te,q),H[X+Q+0]=a.x,H[X+Q+1]=a.y,H[X+Q+2]=a.z,H[X+Q+3]=0),A===!0&&(a.fromBufferAttribute(z,q),H[X+Q+4]=a.x,H[X+Q+5]=a.y,H[X+Q+6]=a.z,H[X+Q+7]=0),P===!0&&(a.fromBufferAttribute(V,q),H[X+Q+8]=a.x,H[X+Q+9]=a.y,H[X+Q+10]=a.z,H[X+Q+11]=V.itemSize===4?a.w:1)}}v={count:x,texture:J,size:new ze(j,B)},s.set(u,v),u.addEventListener("dispose",W)}let _=0;for(let T=0;T<h.length;T++)_+=h[T];const E=u.morphTargetsRelative?1:1-_;d.getUniforms().setValue(t,"morphTargetBaseInfluence",E),d.getUniforms().setValue(t,"morphTargetInfluences",h),d.getUniforms().setValue(t,"morphTargetsTexture",v.texture,n),d.getUniforms().setValue(t,"morphTargetsTextureSize",v.size)}else{const b=h===void 0?0:h.length;let x=r[u.id];if(x===void 0||x.length!==b){x=[];for(let A=0;A<b;A++)x[A]=[A,0];r[u.id]=x}for(let A=0;A<b;A++){const P=x[A];P[0]=A,P[1]=h[A]}x.sort(ATe);for(let A=0;A<8;A++)A<b&&x[A][1]?(o[A][0]=x[A][0],o[A][1]=x[A][1]):(o[A][0]=Number.MAX_SAFE_INTEGER,o[A][1]=0);o.sort(TTe);const v=u.morphAttributes.position,_=u.morphAttributes.normal;let E=0;for(let A=0;A<8;A++){const P=o[A],R=P[0],N=P[1];R!==Number.MAX_SAFE_INTEGER&&N?(v&&u.getAttribute("morphTarget"+A)!==v[R]&&u.setAttribute("morphTarget"+A,v[R]),_&&u.getAttribute("morphNormal"+A)!==_[R]&&u.setAttribute("morphNormal"+A,_[R]),i[A]=N,E+=N):(v&&u.hasAttribute("morphTarget"+A)===!0&&u.deleteAttribute("morphTarget"+A),_&&u.hasAttribute("morphNormal"+A)===!0&&u.deleteAttribute("morphNormal"+A),i[A]=0)}const T=u.morphTargetsRelative?1:1-E;d.getUniforms().setValue(t,"morphTargetBaseInfluence",T),d.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:l}}function PTe(t,e,n,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,d=e.get(l,u);if(i.get(d)!==c&&(e.update(d),i.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),i.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const h=l.skeleton;i.get(h)!==c&&(h.update(),i.set(h,c))}return d}function a(){i=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:s,dispose:a}}class XL extends ti{constructor(e,n,r,i,s,a,o,l,c,u){if(u=u!==void 0?u:Wd,u!==Wd&&u!==cp)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===Wd&&(r=lu),r===void 0&&u===cp&&(r=Hd),super(null,i,s,a,o,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=o!==void 0?o:Zr,this.minFilter=l!==void 0?l:Zr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const FJ=new ti,BJ=new XL(1,1);BJ.compareFunction=$L;const zJ=new eA,$J=new WL,VJ=new Cw,t5=[],n5=[],r5=new Float32Array(16),i5=new Float32Array(9),s5=new Float32Array(4);function py(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let s=t5[i];if(s===void 0&&(s=new Float32Array(i),t5[i]=s),e!==0){r.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=n,t[a].toArray(s,o)}return s}function Ni(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Ii(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function tA(t,e){let n=n5[e];n===void 0&&(n=new Int32Array(e),n5[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function CTe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function RTe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ni(n,e))return;t.uniform2fv(this.addr,e),Ii(n,e)}}function OTe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Ni(n,e))return;t.uniform3fv(this.addr,e),Ii(n,e)}}function NTe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ni(n,e))return;t.uniform4fv(this.addr,e),Ii(n,e)}}function ITe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Ni(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Ii(n,e)}else{if(Ni(n,r))return;s5.set(r),t.uniformMatrix2fv(this.addr,!1,s5),Ii(n,r)}}function kTe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Ni(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Ii(n,e)}else{if(Ni(n,r))return;i5.set(r),t.uniformMatrix3fv(this.addr,!1,i5),Ii(n,r)}}function DTe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Ni(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Ii(n,e)}else{if(Ni(n,r))return;r5.set(r),t.uniformMatrix4fv(this.addr,!1,r5),Ii(n,r)}}function jTe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function LTe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ni(n,e))return;t.uniform2iv(this.addr,e),Ii(n,e)}}function UTe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Ni(n,e))return;t.uniform3iv(this.addr,e),Ii(n,e)}}function FTe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ni(n,e))return;t.uniform4iv(this.addr,e),Ii(n,e)}}function BTe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function zTe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ni(n,e))return;t.uniform2uiv(this.addr,e),Ii(n,e)}}function $Te(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Ni(n,e))return;t.uniform3uiv(this.addr,e),Ii(n,e)}}function VTe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ni(n,e))return;t.uniform4uiv(this.addr,e),Ii(n,e)}}function HTe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);const s=this.type===t.SAMPLER_2D_SHADOW?BJ:FJ;n.setTexture2D(e||s,i)}function WTe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||$J,i)}function GTe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||VJ,i)}function qTe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||zJ,i)}function KTe(t){switch(t){case 5126:return CTe;case 35664:return RTe;case 35665:return OTe;case 35666:return NTe;case 35674:return ITe;case 35675:return kTe;case 35676:return DTe;case 5124:case 35670:return jTe;case 35667:case 35671:return LTe;case 35668:case 35672:return UTe;case 35669:case 35673:return FTe;case 5125:return BTe;case 36294:return zTe;case 36295:return $Te;case 36296:return VTe;case 35678:case 36198:case 36298:case 36306:case 35682:return HTe;case 35679:case 36299:case 36307:return WTe;case 35680:case 36300:case 36308:case 36293:return GTe;case 36289:case 36303:case 36311:case 36292:return qTe}}function XTe(t,e){t.uniform1fv(this.addr,e)}function YTe(t,e){const n=py(e,this.size,2);t.uniform2fv(this.addr,n)}function JTe(t,e){const n=py(e,this.size,3);t.uniform3fv(this.addr,n)}function QTe(t,e){const n=py(e,this.size,4);t.uniform4fv(this.addr,n)}function ZTe(t,e){const n=py(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function eAe(t,e){const n=py(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function tAe(t,e){const n=py(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function nAe(t,e){t.uniform1iv(this.addr,e)}function rAe(t,e){t.uniform2iv(this.addr,e)}function iAe(t,e){t.uniform3iv(this.addr,e)}function sAe(t,e){t.uniform4iv(this.addr,e)}function aAe(t,e){t.uniform1uiv(this.addr,e)}function oAe(t,e){t.uniform2uiv(this.addr,e)}function lAe(t,e){t.uniform3uiv(this.addr,e)}function cAe(t,e){t.uniform4uiv(this.addr,e)}function uAe(t,e,n){const r=this.cache,i=e.length,s=tA(n,i);Ni(r,s)||(t.uniform1iv(this.addr,s),Ii(r,s));for(let a=0;a!==i;++a)n.setTexture2D(e[a]||FJ,s[a])}function dAe(t,e,n){const r=this.cache,i=e.length,s=tA(n,i);Ni(r,s)||(t.uniform1iv(this.addr,s),Ii(r,s));for(let a=0;a!==i;++a)n.setTexture3D(e[a]||$J,s[a])}function fAe(t,e,n){const r=this.cache,i=e.length,s=tA(n,i);Ni(r,s)||(t.uniform1iv(this.addr,s),Ii(r,s));for(let a=0;a!==i;++a)n.setTextureCube(e[a]||VJ,s[a])}function hAe(t,e,n){const r=this.cache,i=e.length,s=tA(n,i);Ni(r,s)||(t.uniform1iv(this.addr,s),Ii(r,s));for(let a=0;a!==i;++a)n.setTexture2DArray(e[a]||zJ,s[a])}function pAe(t){switch(t){case 5126:return XTe;case 35664:return YTe;case 35665:return JTe;case 35666:return QTe;case 35674:return ZTe;case 35675:return eAe;case 35676:return tAe;case 5124:case 35670:return nAe;case 35667:case 35671:return rAe;case 35668:case 35672:return iAe;case 35669:case 35673:return sAe;case 5125:return aAe;case 36294:return oAe;case 36295:return lAe;case 36296:return cAe;case 35678:case 36198:case 36298:case 36306:case 35682:return uAe;case 35679:case 36299:case 36307:return dAe;case 35680:case 36300:case 36308:case 36293:return fAe;case 36289:case 36303:case 36311:case 36292:return hAe}}class mAe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=KTe(n.type)}}class gAe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=pAe(n.type)}}class vAe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let s=0,a=i.length;s!==a;++s){const o=i[s];o.setValue(e,n[o.id],r)}}}const aC=/(\w+)(\])?(\[|\.)?/g;function a5(t,e){t.seq.push(e),t.map[e.id]=e}function yAe(t,e,n){const r=t.name,i=r.length;for(aC.lastIndex=0;;){const s=aC.exec(r),a=aC.lastIndex;let o=s[1];const l=s[2]==="]",c=s[3];if(l&&(o=o|0),c===void 0||c==="["&&a+2===i){a5(n,c===void 0?new mAe(o,t,e):new gAe(o,t,e));break}else{let d=n.map[o];d===void 0&&(d=new vAe(o),a5(n,d)),n=d}}}class j1{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(n,i),a=e.getUniformLocation(n,s.name);yAe(s,a,this)}}setValue(e,n,r,i){const s=this.map[n];s!==void 0&&s.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let s=0,a=n.length;s!==a;++s){const o=n[s],l=r[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,s=e.length;i!==s;++i){const a=e[i];a.id in n&&r.push(a)}return r}}function o5(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const xAe=37297;let bAe=0;function wAe(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let a=i;a<s;a++){const o=a+1;r.push(`${o===e?">":" "} ${o}: ${n[a]}`)}return r.join(`
`)}function _Ae(t){const e=qn.getPrimaries(qn.workingColorSpace),n=qn.getPrimaries(t);let r;switch(e===n?r="":e===db&&n===ub?r="LinearDisplayP3ToLinearSRGB":e===ub&&n===db&&(r="LinearSRGBToLinearDisplayP3"),t){case sc:case Mw:return[r,"LinearTransferOETF"];case Pi:case ZT:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[r,"LinearTransferOETF"]}}function l5(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const a=parseInt(s[1]);return n.toUpperCase()+`

`+i+`

`+wAe(t.getShaderSource(e),a)}else return i}function SAe(t,e){const n=_Ae(e);return`vec4 ${t}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function EAe(t,e){let n;switch(e){case rJ:n="Linear";break;case iJ:n="Reinhard";break;case sJ:n="OptimizedCineon";break;case OL:n="ACESFilmic";break;case oJ:n="AgX";break;case aJ:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function TAe(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Fg).join(`
`)}function AAe(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(Fg).join(`
`)}function MAe(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function PAe(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=t.getActiveAttrib(e,i),a=s.name;let o=1;s.type===t.FLOAT_MAT2&&(o=2),s.type===t.FLOAT_MAT3&&(o=3),s.type===t.FLOAT_MAT4&&(o=4),n[a]={type:s.type,location:t.getAttribLocation(e,a),locationSize:o}}return n}function Fg(t){return t!==""}function c5(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function u5(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const CAe=/^[ \t]*#include +<([\w\d./]+)>/gm;function yk(t){return t.replace(CAe,OAe)}const RAe=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function OAe(t,e){let n=wn[e];if(n===void 0){const r=RAe.get(e);if(r!==void 0)n=wn[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return yk(n)}const NAe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function d5(t){return t.replace(NAe,IAe)}function IAe(t,e,n,r){let i="";for(let s=parseInt(e);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function f5(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function kAe(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===XT?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===_x?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===ll&&(e="SHADOWMAP_TYPE_VSM"),e}function DAe(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Eu:case tf:e="ENVMAP_TYPE_CUBE";break;case fy:e="ENVMAP_TYPE_CUBE_UV";break}return e}function jAe(t){let e="ENVMAP_MODE_REFLECTION";return t.envMap&&t.envMapMode===tf&&(e="ENVMAP_MODE_REFRACTION"),e}function LAe(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Aw:e="ENVMAP_BLENDING_MULTIPLY";break;case tJ:e="ENVMAP_BLENDING_MIX";break;case nJ:e="ENVMAP_BLENDING_ADD";break}return e}function UAe(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}function FAe(t,e,n,r){const i=t.getContext(),s=n.defines;let a=n.vertexShader,o=n.fragmentShader;const l=kAe(n),c=DAe(n),u=jAe(n),d=LAe(n),h=UAe(n),m=n.isWebGL2?"":TAe(n),b=AAe(n),x=MAe(s),v=i.createProgram();let _,E,T=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(_=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x].filter(Fg).join(`
`),_.length>0&&(_+=`
`),E=[m,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x].filter(Fg).join(`
`),E.length>0&&(E+=`
`)):(_=[f5(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Fg).join(`
`),E=[m,f5(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Ql?"#define TONE_MAPPING":"",n.toneMapping!==Ql?wn.tonemapping_pars_fragment:"",n.toneMapping!==Ql?EAe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",wn.colorspace_pars_fragment,SAe("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Fg).join(`
`)),a=yk(a),a=c5(a,n),a=u5(a,n),o=yk(o),o=c5(o,n),o=u5(o,n),a=d5(a),o=d5(o),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(T=`#version 300 es
`,_=[b,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,E=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===mk?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===mk?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+E);const A=T+_+a,P=T+E+o,R=o5(i,i.VERTEX_SHADER,A),N=o5(i,i.FRAGMENT_SHADER,P);i.attachShader(v,R),i.attachShader(v,N),n.index0AttributeName!==void 0?i.bindAttribLocation(v,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(v,0,"position"),i.linkProgram(v);function L(H){if(t.debug.checkShaderErrors){const J=i.getProgramInfoLog(v).trim(),G=i.getShaderInfoLog(R).trim(),W=i.getShaderInfoLog(N).trim();let K=!0,te=!0;if(i.getProgramParameter(v,i.LINK_STATUS)===!1)if(K=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,v,R,N);else{const z=l5(i,R,"vertex"),V=l5(i,N,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(v,i.VALIDATE_STATUS)+`

Program Info Log: `+J+`
`+z+`
`+V)}else J!==""?console.warn("THREE.WebGLProgram: Program Info Log:",J):(G===""||W==="")&&(te=!1);te&&(H.diagnostics={runnable:K,programLog:J,vertexShader:{log:G,prefix:_},fragmentShader:{log:W,prefix:E}})}i.deleteShader(R),i.deleteShader(N),I=new j1(i,v),j=PAe(i,v)}let I;this.getUniforms=function(){return I===void 0&&L(this),I};let j;this.getAttributes=function(){return j===void 0&&L(this),j};let B=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return B===!1&&(B=i.getProgramParameter(v,xAe)),B},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(v),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=bAe++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=R,this.fragmentShader=N,this}let BAe=0;class zAe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),s=this._getShaderStage(r),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new $Ae(e),n.set(e,r)),r}}class $Ae{constructor(e){this.id=BAe++,this.code=e,this.usedTimes=0}}function VAe(t,e,n,r,i,s,a){const o=new ep,l=new zAe,c=[],u=i.isWebGL2,d=i.logarithmicDepthBuffer,h=i.vertexTextures;let m=i.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(I){return I===0?"uv":`uv${I}`}function v(I,j,B,H,J){const G=H.fog,W=J.geometry,K=I.isMeshStandardMaterial?H.environment:null,te=(I.isMeshStandardMaterial?n:e).get(I.envMap||K),z=te&&te.mapping===fy?te.image.height:null,V=b[I.type];I.precision!==null&&(m=i.getMaxPrecision(I.precision),m!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",m,"instead."));const X=W.morphAttributes.position||W.morphAttributes.normal||W.morphAttributes.color,q=X!==void 0?X.length:0;let Q=0;W.morphAttributes.position!==void 0&&(Q=1),W.morphAttributes.normal!==void 0&&(Q=2),W.morphAttributes.color!==void 0&&(Q=3);let ie,ce,ye,Ce;if(V){const An=fl[V];ie=An.vertexShader,ce=An.fragmentShader}else ie=I.vertexShader,ce=I.fragmentShader,l.update(I),ye=l.getVertexShaderID(I),Ce=l.getFragmentShaderID(I);const he=t.getRenderTarget(),De=J.isInstancedMesh===!0,be=J.isBatchedMesh===!0,_e=!!I.map,Ee=!!I.matcap,ee=!!te,Me=!!I.aoMap,xe=!!I.lightMap,Le=!!I.bumpMap,Pe=!!I.normalMap,tt=!!I.displacementMap,Ze=!!I.emissiveMap,re=!!I.metalnessMap,Z=!!I.roughnessMap,ge=I.anisotropy>0,$e=I.clearcoat>0,Be=I.iridescence>0,Fe=I.sheen>0,mt=I.transmission>0,Xe=ge&&!!I.anisotropyMap,it=$e&&!!I.clearcoatMap,Nt=$e&&!!I.clearcoatNormalMap,Xt=$e&&!!I.clearcoatRoughnessMap,He=Be&&!!I.iridescenceMap,hn=Be&&!!I.iridescenceThicknessMap,un=Fe&&!!I.sheenColorMap,$t=Fe&&!!I.sheenRoughnessMap,Tt=!!I.specularMap,gt=!!I.specularColorMap,ue=!!I.specularIntensityMap,Ve=mt&&!!I.transmissionMap,ft=mt&&!!I.thicknessMap,dt=!!I.gradientMap,Ge=!!I.alphaMap,de=I.alphaTest>0,Qe=!!I.alphaHash,st=!!I.extensions,zt=!!W.attributes.uv1,We=!!W.attributes.uv2,xt=!!W.attributes.uv3;let Ot=Ql;return I.toneMapped&&(he===null||he.isXRRenderTarget===!0)&&(Ot=t.toneMapping),{isWebGL2:u,shaderID:V,shaderType:I.type,shaderName:I.name,vertexShader:ie,fragmentShader:ce,defines:I.defines,customVertexShaderID:ye,customFragmentShaderID:Ce,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:m,batching:be,instancing:De,instancingColor:De&&J.instanceColor!==null,supportsVertexTextures:h,outputColorSpace:he===null?t.outputColorSpace:he.isXRRenderTarget===!0?he.texture.colorSpace:sc,map:_e,matcap:Ee,envMap:ee,envMapMode:ee&&te.mapping,envMapCubeUVHeight:z,aoMap:Me,lightMap:xe,bumpMap:Le,normalMap:Pe,displacementMap:h&&tt,emissiveMap:Ze,normalMapObjectSpace:Pe&&I.normalMapType===_J,normalMapTangentSpace:Pe&&I.normalMapType===ff,metalnessMap:re,roughnessMap:Z,anisotropy:ge,anisotropyMap:Xe,clearcoat:$e,clearcoatMap:it,clearcoatNormalMap:Nt,clearcoatRoughnessMap:Xt,iridescence:Be,iridescenceMap:He,iridescenceThicknessMap:hn,sheen:Fe,sheenColorMap:un,sheenRoughnessMap:$t,specularMap:Tt,specularColorMap:gt,specularIntensityMap:ue,transmission:mt,transmissionMap:Ve,thicknessMap:ft,gradientMap:dt,opaque:I.transparent===!1&&I.blending===Qh,alphaMap:Ge,alphaTest:de,alphaHash:Qe,combine:I.combine,mapUv:_e&&x(I.map.channel),aoMapUv:Me&&x(I.aoMap.channel),lightMapUv:xe&&x(I.lightMap.channel),bumpMapUv:Le&&x(I.bumpMap.channel),normalMapUv:Pe&&x(I.normalMap.channel),displacementMapUv:tt&&x(I.displacementMap.channel),emissiveMapUv:Ze&&x(I.emissiveMap.channel),metalnessMapUv:re&&x(I.metalnessMap.channel),roughnessMapUv:Z&&x(I.roughnessMap.channel),anisotropyMapUv:Xe&&x(I.anisotropyMap.channel),clearcoatMapUv:it&&x(I.clearcoatMap.channel),clearcoatNormalMapUv:Nt&&x(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Xt&&x(I.clearcoatRoughnessMap.channel),iridescenceMapUv:He&&x(I.iridescenceMap.channel),iridescenceThicknessMapUv:hn&&x(I.iridescenceThicknessMap.channel),sheenColorMapUv:un&&x(I.sheenColorMap.channel),sheenRoughnessMapUv:$t&&x(I.sheenRoughnessMap.channel),specularMapUv:Tt&&x(I.specularMap.channel),specularColorMapUv:gt&&x(I.specularColorMap.channel),specularIntensityMapUv:ue&&x(I.specularIntensityMap.channel),transmissionMapUv:Ve&&x(I.transmissionMap.channel),thicknessMapUv:ft&&x(I.thicknessMap.channel),alphaMapUv:Ge&&x(I.alphaMap.channel),vertexTangents:!!W.attributes.tangent&&(Pe||ge),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!W.attributes.color&&W.attributes.color.itemSize===4,vertexUv1s:zt,vertexUv2s:We,vertexUv3s:xt,pointsUvs:J.isPoints===!0&&!!W.attributes.uv&&(_e||Ge),fog:!!G,useFog:I.fog===!0,fogExp2:G&&G.isFogExp2,flatShading:I.flatShading===!0,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:J.isSkinnedMesh===!0,morphTargets:W.morphAttributes.position!==void 0,morphNormals:W.morphAttributes.normal!==void 0,morphColors:W.morphAttributes.color!==void 0,morphTargetsCount:q,morphTextureStride:Q,numDirLights:j.directional.length,numPointLights:j.point.length,numSpotLights:j.spot.length,numSpotLightMaps:j.spotLightMap.length,numRectAreaLights:j.rectArea.length,numHemiLights:j.hemi.length,numDirLightShadows:j.directionalShadowMap.length,numPointLightShadows:j.pointShadowMap.length,numSpotLightShadows:j.spotShadowMap.length,numSpotLightShadowsWithMaps:j.numSpotLightShadowsWithMaps,numLightProbes:j.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:I.dithering,shadowMapEnabled:t.shadowMap.enabled&&B.length>0,shadowMapType:t.shadowMap.type,toneMapping:Ot,useLegacyLights:t._useLegacyLights,decodeVideoTexture:_e&&I.map.isVideoTexture===!0&&qn.getTransfer(I.map.colorSpace)===dr,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===Fa,flipSided:I.side===Hi,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionDerivatives:st&&I.extensions.derivatives===!0,extensionFragDepth:st&&I.extensions.fragDepth===!0,extensionDrawBuffers:st&&I.extensions.drawBuffers===!0,extensionShaderTextureLOD:st&&I.extensions.shaderTextureLOD===!0,extensionClipCullDistance:st&&I.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()}}function _(I){const j=[];if(I.shaderID?j.push(I.shaderID):(j.push(I.customVertexShaderID),j.push(I.customFragmentShaderID)),I.defines!==void 0)for(const B in I.defines)j.push(B),j.push(I.defines[B]);return I.isRawShaderMaterial===!1&&(E(j,I),T(j,I),j.push(t.outputColorSpace)),j.push(I.customProgramCacheKey),j.join()}function E(I,j){I.push(j.precision),I.push(j.outputColorSpace),I.push(j.envMapMode),I.push(j.envMapCubeUVHeight),I.push(j.mapUv),I.push(j.alphaMapUv),I.push(j.lightMapUv),I.push(j.aoMapUv),I.push(j.bumpMapUv),I.push(j.normalMapUv),I.push(j.displacementMapUv),I.push(j.emissiveMapUv),I.push(j.metalnessMapUv),I.push(j.roughnessMapUv),I.push(j.anisotropyMapUv),I.push(j.clearcoatMapUv),I.push(j.clearcoatNormalMapUv),I.push(j.clearcoatRoughnessMapUv),I.push(j.iridescenceMapUv),I.push(j.iridescenceThicknessMapUv),I.push(j.sheenColorMapUv),I.push(j.sheenRoughnessMapUv),I.push(j.specularMapUv),I.push(j.specularColorMapUv),I.push(j.specularIntensityMapUv),I.push(j.transmissionMapUv),I.push(j.thicknessMapUv),I.push(j.combine),I.push(j.fogExp2),I.push(j.sizeAttenuation),I.push(j.morphTargetsCount),I.push(j.morphAttributeCount),I.push(j.numDirLights),I.push(j.numPointLights),I.push(j.numSpotLights),I.push(j.numSpotLightMaps),I.push(j.numHemiLights),I.push(j.numRectAreaLights),I.push(j.numDirLightShadows),I.push(j.numPointLightShadows),I.push(j.numSpotLightShadows),I.push(j.numSpotLightShadowsWithMaps),I.push(j.numLightProbes),I.push(j.shadowMapType),I.push(j.toneMapping),I.push(j.numClippingPlanes),I.push(j.numClipIntersection),I.push(j.depthPacking)}function T(I,j){o.disableAll(),j.isWebGL2&&o.enable(0),j.supportsVertexTextures&&o.enable(1),j.instancing&&o.enable(2),j.instancingColor&&o.enable(3),j.matcap&&o.enable(4),j.envMap&&o.enable(5),j.normalMapObjectSpace&&o.enable(6),j.normalMapTangentSpace&&o.enable(7),j.clearcoat&&o.enable(8),j.iridescence&&o.enable(9),j.alphaTest&&o.enable(10),j.vertexColors&&o.enable(11),j.vertexAlphas&&o.enable(12),j.vertexUv1s&&o.enable(13),j.vertexUv2s&&o.enable(14),j.vertexUv3s&&o.enable(15),j.vertexTangents&&o.enable(16),j.anisotropy&&o.enable(17),j.alphaHash&&o.enable(18),j.batching&&o.enable(19),I.push(o.mask),o.disableAll(),j.fog&&o.enable(0),j.useFog&&o.enable(1),j.flatShading&&o.enable(2),j.logarithmicDepthBuffer&&o.enable(3),j.skinning&&o.enable(4),j.morphTargets&&o.enable(5),j.morphNormals&&o.enable(6),j.morphColors&&o.enable(7),j.premultipliedAlpha&&o.enable(8),j.shadowMapEnabled&&o.enable(9),j.useLegacyLights&&o.enable(10),j.doubleSided&&o.enable(11),j.flipSided&&o.enable(12),j.useDepthPacking&&o.enable(13),j.dithering&&o.enable(14),j.transmission&&o.enable(15),j.sheen&&o.enable(16),j.opaque&&o.enable(17),j.pointsUvs&&o.enable(18),j.decodeVideoTexture&&o.enable(19),I.push(o.mask)}function A(I){const j=b[I.type];let B;if(j){const H=fl[j];B=DJ.clone(H.uniforms)}else B=I.uniforms;return B}function P(I,j){let B;for(let H=0,J=c.length;H<J;H++){const G=c[H];if(G.cacheKey===j){B=G,++B.usedTimes;break}}return B===void 0&&(B=new FAe(t,j,I,s),c.push(B)),B}function R(I){if(--I.usedTimes===0){const j=c.indexOf(I);c[j]=c[c.length-1],c.pop(),I.destroy()}}function N(I){l.remove(I)}function L(){l.dispose()}return{getParameters:v,getProgramCacheKey:_,getUniforms:A,acquireProgram:P,releaseProgram:R,releaseShaderCache:N,programs:c,dispose:L}}function HAe(){let t=new WeakMap;function e(s){let a=t.get(s);return a===void 0&&(a={},t.set(s,a)),a}function n(s){t.delete(s)}function r(s,a,o){t.get(s)[a]=o}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function WAe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function h5(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function p5(){const t=[];let e=0;const n=[],r=[],i=[];function s(){e=0,n.length=0,r.length=0,i.length=0}function a(d,h,m,b,x,v){let _=t[e];return _===void 0?(_={id:d.id,object:d,geometry:h,material:m,groupOrder:b,renderOrder:d.renderOrder,z:x,group:v},t[e]=_):(_.id=d.id,_.object=d,_.geometry=h,_.material=m,_.groupOrder=b,_.renderOrder=d.renderOrder,_.z=x,_.group=v),e++,_}function o(d,h,m,b,x,v){const _=a(d,h,m,b,x,v);m.transmission>0?r.push(_):m.transparent===!0?i.push(_):n.push(_)}function l(d,h,m,b,x,v){const _=a(d,h,m,b,x,v);m.transmission>0?r.unshift(_):m.transparent===!0?i.unshift(_):n.unshift(_)}function c(d,h){n.length>1&&n.sort(d||WAe),r.length>1&&r.sort(h||h5),i.length>1&&i.sort(h||h5)}function u(){for(let d=e,h=t.length;d<h;d++){const m=t[d];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:n,transmissive:r,transparent:i,init:s,push:o,unshift:l,finish:u,sort:c}}function GAe(){let t=new WeakMap;function e(r,i){const s=t.get(r);let a;return s===void 0?(a=new p5,t.set(r,[a])):i>=s.length?(a=new p5,s.push(a)):a=s[i],a}function n(){t=new WeakMap}return{get:e,dispose:n}}function qAe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new ae,color:new St};break;case"SpotLight":n={position:new ae,direction:new ae,color:new St,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new ae,color:new St,distance:0,decay:0};break;case"HemisphereLight":n={direction:new ae,skyColor:new St,groundColor:new St};break;case"RectAreaLight":n={color:new St,position:new ae,halfWidth:new ae,halfHeight:new ae};break}return t[e.id]=n,n}}}function KAe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ze};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ze};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ze,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let XAe=0;function YAe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function JAe(t,e){const n=new qAe,r=KAe(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new ae);const s=new ae,a=new cn,o=new cn;function l(u,d){let h=0,m=0,b=0;for(let H=0;H<9;H++)i.probe[H].set(0,0,0);let x=0,v=0,_=0,E=0,T=0,A=0,P=0,R=0,N=0,L=0,I=0;u.sort(YAe);const j=d===!0?Math.PI:1;for(let H=0,J=u.length;H<J;H++){const G=u[H],W=G.color,K=G.intensity,te=G.distance,z=G.shadow&&G.shadow.map?G.shadow.map.texture:null;if(G.isAmbientLight)h+=W.r*K*j,m+=W.g*K*j,b+=W.b*K*j;else if(G.isLightProbe){for(let V=0;V<9;V++)i.probe[V].addScaledVector(G.sh.coefficients[V],K);I++}else if(G.isDirectionalLight){const V=n.get(G);if(V.color.copy(G.color).multiplyScalar(G.intensity*j),G.castShadow){const X=G.shadow,q=r.get(G);q.shadowBias=X.bias,q.shadowNormalBias=X.normalBias,q.shadowRadius=X.radius,q.shadowMapSize=X.mapSize,i.directionalShadow[x]=q,i.directionalShadowMap[x]=z,i.directionalShadowMatrix[x]=G.shadow.matrix,A++}i.directional[x]=V,x++}else if(G.isSpotLight){const V=n.get(G);V.position.setFromMatrixPosition(G.matrixWorld),V.color.copy(W).multiplyScalar(K*j),V.distance=te,V.coneCos=Math.cos(G.angle),V.penumbraCos=Math.cos(G.angle*(1-G.penumbra)),V.decay=G.decay,i.spot[_]=V;const X=G.shadow;if(G.map&&(i.spotLightMap[N]=G.map,N++,X.updateMatrices(G),G.castShadow&&L++),i.spotLightMatrix[_]=X.matrix,G.castShadow){const q=r.get(G);q.shadowBias=X.bias,q.shadowNormalBias=X.normalBias,q.shadowRadius=X.radius,q.shadowMapSize=X.mapSize,i.spotShadow[_]=q,i.spotShadowMap[_]=z,R++}_++}else if(G.isRectAreaLight){const V=n.get(G);V.color.copy(W).multiplyScalar(K),V.halfWidth.set(G.width*.5,0,0),V.halfHeight.set(0,G.height*.5,0),i.rectArea[E]=V,E++}else if(G.isPointLight){const V=n.get(G);if(V.color.copy(G.color).multiplyScalar(G.intensity*j),V.distance=G.distance,V.decay=G.decay,G.castShadow){const X=G.shadow,q=r.get(G);q.shadowBias=X.bias,q.shadowNormalBias=X.normalBias,q.shadowRadius=X.radius,q.shadowMapSize=X.mapSize,q.shadowCameraNear=X.camera.near,q.shadowCameraFar=X.camera.far,i.pointShadow[v]=q,i.pointShadowMap[v]=z,i.pointShadowMatrix[v]=G.shadow.matrix,P++}i.point[v]=V,v++}else if(G.isHemisphereLight){const V=n.get(G);V.skyColor.copy(G.color).multiplyScalar(K*j),V.groundColor.copy(G.groundColor).multiplyScalar(K*j),i.hemi[T]=V,T++}}E>0&&(e.isWebGL2?t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ct.LTC_FLOAT_1,i.rectAreaLTC2=ct.LTC_FLOAT_2):(i.rectAreaLTC1=ct.LTC_HALF_1,i.rectAreaLTC2=ct.LTC_HALF_2):t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ct.LTC_FLOAT_1,i.rectAreaLTC2=ct.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=ct.LTC_HALF_1,i.rectAreaLTC2=ct.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=h,i.ambient[1]=m,i.ambient[2]=b;const B=i.hash;(B.directionalLength!==x||B.pointLength!==v||B.spotLength!==_||B.rectAreaLength!==E||B.hemiLength!==T||B.numDirectionalShadows!==A||B.numPointShadows!==P||B.numSpotShadows!==R||B.numSpotMaps!==N||B.numLightProbes!==I)&&(i.directional.length=x,i.spot.length=_,i.rectArea.length=E,i.point.length=v,i.hemi.length=T,i.directionalShadow.length=A,i.directionalShadowMap.length=A,i.pointShadow.length=P,i.pointShadowMap.length=P,i.spotShadow.length=R,i.spotShadowMap.length=R,i.directionalShadowMatrix.length=A,i.pointShadowMatrix.length=P,i.spotLightMatrix.length=R+N-L,i.spotLightMap.length=N,i.numSpotLightShadowsWithMaps=L,i.numLightProbes=I,B.directionalLength=x,B.pointLength=v,B.spotLength=_,B.rectAreaLength=E,B.hemiLength=T,B.numDirectionalShadows=A,B.numPointShadows=P,B.numSpotShadows=R,B.numSpotMaps=N,B.numLightProbes=I,i.version=XAe++)}function c(u,d){let h=0,m=0,b=0,x=0,v=0;const _=d.matrixWorldInverse;for(let E=0,T=u.length;E<T;E++){const A=u[E];if(A.isDirectionalLight){const P=i.directional[h];P.direction.setFromMatrixPosition(A.matrixWorld),s.setFromMatrixPosition(A.target.matrixWorld),P.direction.sub(s),P.direction.transformDirection(_),h++}else if(A.isSpotLight){const P=i.spot[b];P.position.setFromMatrixPosition(A.matrixWorld),P.position.applyMatrix4(_),P.direction.setFromMatrixPosition(A.matrixWorld),s.setFromMatrixPosition(A.target.matrixWorld),P.direction.sub(s),P.direction.transformDirection(_),b++}else if(A.isRectAreaLight){const P=i.rectArea[x];P.position.setFromMatrixPosition(A.matrixWorld),P.position.applyMatrix4(_),o.identity(),a.copy(A.matrixWorld),a.premultiply(_),o.extractRotation(a),P.halfWidth.set(A.width*.5,0,0),P.halfHeight.set(0,A.height*.5,0),P.halfWidth.applyMatrix4(o),P.halfHeight.applyMatrix4(o),x++}else if(A.isPointLight){const P=i.point[m];P.position.setFromMatrixPosition(A.matrixWorld),P.position.applyMatrix4(_),m++}else if(A.isHemisphereLight){const P=i.hemi[v];P.direction.setFromMatrixPosition(A.matrixWorld),P.direction.transformDirection(_),v++}}}return{setup:l,setupView:c,state:i}}function m5(t,e){const n=new JAe(t,e),r=[],i=[];function s(){r.length=0,i.length=0}function a(d){r.push(d)}function o(d){i.push(d)}function l(d){n.setup(r,d)}function c(d){n.setupView(r,d)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:l,setupLightsView:c,pushLight:a,pushShadow:o}}function QAe(t,e){let n=new WeakMap;function r(s,a=0){const o=n.get(s);let l;return o===void 0?(l=new m5(t,e),n.set(s,[l])):a>=o.length?(l=new m5(t,e),o.push(l)):l=o[a],l}function i(){n=new WeakMap}return{get:r,dispose:i}}class YL extends Rs{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=bJ,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class JL extends Rs{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const ZAe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,eMe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function tMe(t,e,n){let r=new Rw;const i=new ze,s=new ze,a=new Kn,o=new YL({depthPacking:wJ}),l=new JL,c={},u=n.maxTextureSize,d={[Sl]:Hi,[Hi]:Sl,[Fa]:Fa},h=new ac({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ze},radius:{value:4}},vertexShader:ZAe,fragmentShader:eMe}),m=h.clone();m.defines.HORIZONTAL_PASS=1;const b=new Tn;b.setAttribute("position",new Xn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new Ci(b,h),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=XT;let _=this.type;this.render=function(R,N,L){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||R.length===0)return;const I=t.getRenderTarget(),j=t.getActiveCubeFace(),B=t.getActiveMipmapLevel(),H=t.state;H.setBlending(mu),H.buffers.color.setClear(1,1,1,1),H.buffers.depth.setTest(!0),H.setScissorTest(!1);const J=_!==ll&&this.type===ll,G=_===ll&&this.type!==ll;for(let W=0,K=R.length;W<K;W++){const te=R[W],z=te.shadow;if(z===void 0){console.warn("THREE.WebGLShadowMap:",te,"has no shadow.");continue}if(z.autoUpdate===!1&&z.needsUpdate===!1)continue;i.copy(z.mapSize);const V=z.getFrameExtents();if(i.multiply(V),s.copy(z.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/V.x),i.x=s.x*V.x,z.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/V.y),i.y=s.y*V.y,z.mapSize.y=s.y)),z.map===null||J===!0||G===!0){const q=this.type!==ll?{minFilter:Zr,magFilter:Zr}:{};z.map!==null&&z.map.dispose(),z.map=new El(i.x,i.y,q),z.map.texture.name=te.name+".shadowMap",z.camera.updateProjectionMatrix()}t.setRenderTarget(z.map),t.clear();const X=z.getViewportCount();for(let q=0;q<X;q++){const Q=z.getViewport(q);a.set(s.x*Q.x,s.y*Q.y,s.x*Q.z,s.y*Q.w),H.viewport(a),z.updateMatrices(te,q),r=z.getFrustum(),A(N,L,z.camera,te,this.type)}z.isPointLightShadow!==!0&&this.type===ll&&E(z,L),z.needsUpdate=!1}_=this.type,v.needsUpdate=!1,t.setRenderTarget(I,j,B)};function E(R,N){const L=e.update(x);h.defines.VSM_SAMPLES!==R.blurSamples&&(h.defines.VSM_SAMPLES=R.blurSamples,m.defines.VSM_SAMPLES=R.blurSamples,h.needsUpdate=!0,m.needsUpdate=!0),R.mapPass===null&&(R.mapPass=new El(i.x,i.y)),h.uniforms.shadow_pass.value=R.map.texture,h.uniforms.resolution.value=R.mapSize,h.uniforms.radius.value=R.radius,t.setRenderTarget(R.mapPass),t.clear(),t.renderBufferDirect(N,null,L,h,x,null),m.uniforms.shadow_pass.value=R.mapPass.texture,m.uniforms.resolution.value=R.mapSize,m.uniforms.radius.value=R.radius,t.setRenderTarget(R.map),t.clear(),t.renderBufferDirect(N,null,L,m,x,null)}function T(R,N,L,I){let j=null;const B=L.isPointLight===!0?R.customDistanceMaterial:R.customDepthMaterial;if(B!==void 0)j=B;else if(j=L.isPointLight===!0?l:o,t.localClippingEnabled&&N.clipShadows===!0&&Array.isArray(N.clippingPlanes)&&N.clippingPlanes.length!==0||N.displacementMap&&N.displacementScale!==0||N.alphaMap&&N.alphaTest>0||N.map&&N.alphaTest>0){const H=j.uuid,J=N.uuid;let G=c[H];G===void 0&&(G={},c[H]=G);let W=G[J];W===void 0&&(W=j.clone(),G[J]=W,N.addEventListener("dispose",P)),j=W}if(j.visible=N.visible,j.wireframe=N.wireframe,I===ll?j.side=N.shadowSide!==null?N.shadowSide:N.side:j.side=N.shadowSide!==null?N.shadowSide:d[N.side],j.alphaMap=N.alphaMap,j.alphaTest=N.alphaTest,j.map=N.map,j.clipShadows=N.clipShadows,j.clippingPlanes=N.clippingPlanes,j.clipIntersection=N.clipIntersection,j.displacementMap=N.displacementMap,j.displacementScale=N.displacementScale,j.displacementBias=N.displacementBias,j.wireframeLinewidth=N.wireframeLinewidth,j.linewidth=N.linewidth,L.isPointLight===!0&&j.isMeshDistanceMaterial===!0){const H=t.properties.get(j);H.light=L}return j}function A(R,N,L,I,j){if(R.visible===!1)return;if(R.layers.test(N.layers)&&(R.isMesh||R.isLine||R.isPoints)&&(R.castShadow||R.receiveShadow&&j===ll)&&(!R.frustumCulled||r.intersectsObject(R))){R.modelViewMatrix.multiplyMatrices(L.matrixWorldInverse,R.matrixWorld);const J=e.update(R),G=R.material;if(Array.isArray(G)){const W=J.groups;for(let K=0,te=W.length;K<te;K++){const z=W[K],V=G[z.materialIndex];if(V&&V.visible){const X=T(R,V,I,j);R.onBeforeShadow(t,R,N,L,J,X,z),t.renderBufferDirect(L,null,J,X,R,z),R.onAfterShadow(t,R,N,L,J,X,z)}}}else if(G.visible){const W=T(R,G,I,j);R.onBeforeShadow(t,R,N,L,J,W,null),t.renderBufferDirect(L,null,J,W,R,null),R.onAfterShadow(t,R,N,L,J,W,null)}}const H=R.children;for(let J=0,G=H.length;J<G;J++)A(H[J],N,L,I,j)}function P(R){R.target.removeEventListener("dispose",P);for(const L in c){const I=c[L],j=R.target.uuid;j in I&&(I[j].dispose(),delete I[j])}}}function nMe(t,e,n){const r=n.isWebGL2;function i(){let de=!1;const Qe=new Kn;let st=null;const zt=new Kn(0,0,0,0);return{setMask:function(We){st!==We&&!de&&(t.colorMask(We,We,We,We),st=We)},setLocked:function(We){de=We},setClear:function(We,xt,Ot,mn,An){An===!0&&(We*=mn,xt*=mn,Ot*=mn),Qe.set(We,xt,Ot,mn),zt.equals(Qe)===!1&&(t.clearColor(We,xt,Ot,mn),zt.copy(Qe))},reset:function(){de=!1,st=null,zt.set(-1,0,0,0)}}}function s(){let de=!1,Qe=null,st=null,zt=null;return{setTest:function(We){We?be(t.DEPTH_TEST):_e(t.DEPTH_TEST)},setMask:function(We){Qe!==We&&!de&&(t.depthMask(We),Qe=We)},setFunc:function(We){if(st!==We){switch(We){case KY:t.depthFunc(t.NEVER);break;case XY:t.depthFunc(t.ALWAYS);break;case YY:t.depthFunc(t.LESS);break;case tb:t.depthFunc(t.LEQUAL);break;case JY:t.depthFunc(t.EQUAL);break;case QY:t.depthFunc(t.GEQUAL);break;case ZY:t.depthFunc(t.GREATER);break;case eJ:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}st=We}},setLocked:function(We){de=We},setClear:function(We){zt!==We&&(t.clearDepth(We),zt=We)},reset:function(){de=!1,Qe=null,st=null,zt=null}}}function a(){let de=!1,Qe=null,st=null,zt=null,We=null,xt=null,Ot=null,mn=null,An=null;return{setTest:function(rn){de||(rn?be(t.STENCIL_TEST):_e(t.STENCIL_TEST))},setMask:function(rn){Qe!==rn&&!de&&(t.stencilMask(rn),Qe=rn)},setFunc:function(rn,Hn,Fn){(st!==rn||zt!==Hn||We!==Fn)&&(t.stencilFunc(rn,Hn,Fn),st=rn,zt=Hn,We=Fn)},setOp:function(rn,Hn,Fn){(xt!==rn||Ot!==Hn||mn!==Fn)&&(t.stencilOp(rn,Hn,Fn),xt=rn,Ot=Hn,mn=Fn)},setLocked:function(rn){de=rn},setClear:function(rn){An!==rn&&(t.clearStencil(rn),An=rn)},reset:function(){de=!1,Qe=null,st=null,zt=null,We=null,xt=null,Ot=null,mn=null,An=null}}}const o=new i,l=new s,c=new a,u=new WeakMap,d=new WeakMap;let h={},m={},b=new WeakMap,x=[],v=null,_=!1,E=null,T=null,A=null,P=null,R=null,N=null,L=null,I=new St(0,0,0),j=0,B=!1,H=null,J=null,G=null,W=null,K=null;const te=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let z=!1,V=0;const X=t.getParameter(t.VERSION);X.indexOf("WebGL")!==-1?(V=parseFloat(/^WebGL (\d)/.exec(X)[1]),z=V>=1):X.indexOf("OpenGL ES")!==-1&&(V=parseFloat(/^OpenGL ES (\d)/.exec(X)[1]),z=V>=2);let q=null,Q={};const ie=t.getParameter(t.SCISSOR_BOX),ce=t.getParameter(t.VIEWPORT),ye=new Kn().fromArray(ie),Ce=new Kn().fromArray(ce);function he(de,Qe,st,zt){const We=new Uint8Array(4),xt=t.createTexture();t.bindTexture(de,xt),t.texParameteri(de,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(de,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Ot=0;Ot<st;Ot++)r&&(de===t.TEXTURE_3D||de===t.TEXTURE_2D_ARRAY)?t.texImage3D(Qe,0,t.RGBA,1,1,zt,0,t.RGBA,t.UNSIGNED_BYTE,We):t.texImage2D(Qe+Ot,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,We);return xt}const De={};De[t.TEXTURE_2D]=he(t.TEXTURE_2D,t.TEXTURE_2D,1),De[t.TEXTURE_CUBE_MAP]=he(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(De[t.TEXTURE_2D_ARRAY]=he(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),De[t.TEXTURE_3D]=he(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),o.setClear(0,0,0,1),l.setClear(1),c.setClear(0),be(t.DEPTH_TEST),l.setFunc(tb),Ze(!1),re(jI),be(t.CULL_FACE),Pe(mu);function be(de){h[de]!==!0&&(t.enable(de),h[de]=!0)}function _e(de){h[de]!==!1&&(t.disable(de),h[de]=!1)}function Ee(de,Qe){return m[de]!==Qe?(t.bindFramebuffer(de,Qe),m[de]=Qe,r&&(de===t.DRAW_FRAMEBUFFER&&(m[t.FRAMEBUFFER]=Qe),de===t.FRAMEBUFFER&&(m[t.DRAW_FRAMEBUFFER]=Qe)),!0):!1}function ee(de,Qe){let st=x,zt=!1;if(de)if(st=b.get(Qe),st===void 0&&(st=[],b.set(Qe,st)),de.isWebGLMultipleRenderTargets){const We=de.texture;if(st.length!==We.length||st[0]!==t.COLOR_ATTACHMENT0){for(let xt=0,Ot=We.length;xt<Ot;xt++)st[xt]=t.COLOR_ATTACHMENT0+xt;st.length=We.length,zt=!0}}else st[0]!==t.COLOR_ATTACHMENT0&&(st[0]=t.COLOR_ATTACHMENT0,zt=!0);else st[0]!==t.BACK&&(st[0]=t.BACK,zt=!0);zt&&(n.isWebGL2?t.drawBuffers(st):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(st))}function Me(de){return v!==de?(t.useProgram(de),v=de,!0):!1}const xe={[Ld]:t.FUNC_ADD,[IY]:t.FUNC_SUBTRACT,[kY]:t.FUNC_REVERSE_SUBTRACT};if(r)xe[BI]=t.MIN,xe[zI]=t.MAX;else{const de=e.get("EXT_blend_minmax");de!==null&&(xe[BI]=de.MIN_EXT,xe[zI]=de.MAX_EXT)}const Le={[DY]:t.ZERO,[jY]:t.ONE,[LY]:t.SRC_COLOR,[aE]:t.SRC_ALPHA,[VY]:t.SRC_ALPHA_SATURATE,[zY]:t.DST_COLOR,[FY]:t.DST_ALPHA,[UY]:t.ONE_MINUS_SRC_COLOR,[oE]:t.ONE_MINUS_SRC_ALPHA,[$Y]:t.ONE_MINUS_DST_COLOR,[BY]:t.ONE_MINUS_DST_ALPHA,[HY]:t.CONSTANT_COLOR,[WY]:t.ONE_MINUS_CONSTANT_COLOR,[GY]:t.CONSTANT_ALPHA,[qY]:t.ONE_MINUS_CONSTANT_ALPHA};function Pe(de,Qe,st,zt,We,xt,Ot,mn,An,rn){if(de===mu){_===!0&&(_e(t.BLEND),_=!1);return}if(_===!1&&(be(t.BLEND),_=!0),de!==NY){if(de!==E||rn!==B){if((T!==Ld||R!==Ld)&&(t.blendEquation(t.FUNC_ADD),T=Ld,R=Ld),rn)switch(de){case Qh:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case LI:t.blendFunc(t.ONE,t.ONE);break;case UI:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case FI:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}else switch(de){case Qh:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case LI:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case UI:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case FI:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}A=null,P=null,N=null,L=null,I.set(0,0,0),j=0,E=de,B=rn}return}We=We||Qe,xt=xt||st,Ot=Ot||zt,(Qe!==T||We!==R)&&(t.blendEquationSeparate(xe[Qe],xe[We]),T=Qe,R=We),(st!==A||zt!==P||xt!==N||Ot!==L)&&(t.blendFuncSeparate(Le[st],Le[zt],Le[xt],Le[Ot]),A=st,P=zt,N=xt,L=Ot),(mn.equals(I)===!1||An!==j)&&(t.blendColor(mn.r,mn.g,mn.b,An),I.copy(mn),j=An),E=de,B=!1}function tt(de,Qe){de.side===Fa?_e(t.CULL_FACE):be(t.CULL_FACE);let st=de.side===Hi;Qe&&(st=!st),Ze(st),de.blending===Qh&&de.transparent===!1?Pe(mu):Pe(de.blending,de.blendEquation,de.blendSrc,de.blendDst,de.blendEquationAlpha,de.blendSrcAlpha,de.blendDstAlpha,de.blendColor,de.blendAlpha,de.premultipliedAlpha),l.setFunc(de.depthFunc),l.setTest(de.depthTest),l.setMask(de.depthWrite),o.setMask(de.colorWrite);const zt=de.stencilWrite;c.setTest(zt),zt&&(c.setMask(de.stencilWriteMask),c.setFunc(de.stencilFunc,de.stencilRef,de.stencilFuncMask),c.setOp(de.stencilFail,de.stencilZFail,de.stencilZPass)),ge(de.polygonOffset,de.polygonOffsetFactor,de.polygonOffsetUnits),de.alphaToCoverage===!0?be(t.SAMPLE_ALPHA_TO_COVERAGE):_e(t.SAMPLE_ALPHA_TO_COVERAGE)}function Ze(de){H!==de&&(de?t.frontFace(t.CW):t.frontFace(t.CCW),H=de)}function re(de){de!==CY?(be(t.CULL_FACE),de!==J&&(de===jI?t.cullFace(t.BACK):de===RY?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):_e(t.CULL_FACE),J=de}function Z(de){de!==G&&(z&&t.lineWidth(de),G=de)}function ge(de,Qe,st){de?(be(t.POLYGON_OFFSET_FILL),(W!==Qe||K!==st)&&(t.polygonOffset(Qe,st),W=Qe,K=st)):_e(t.POLYGON_OFFSET_FILL)}function $e(de){de?be(t.SCISSOR_TEST):_e(t.SCISSOR_TEST)}function Be(de){de===void 0&&(de=t.TEXTURE0+te-1),q!==de&&(t.activeTexture(de),q=de)}function Fe(de,Qe,st){st===void 0&&(q===null?st=t.TEXTURE0+te-1:st=q);let zt=Q[st];zt===void 0&&(zt={type:void 0,texture:void 0},Q[st]=zt),(zt.type!==de||zt.texture!==Qe)&&(q!==st&&(t.activeTexture(st),q=st),t.bindTexture(de,Qe||De[de]),zt.type=de,zt.texture=Qe)}function mt(){const de=Q[q];de!==void 0&&de.type!==void 0&&(t.bindTexture(de.type,null),de.type=void 0,de.texture=void 0)}function Xe(){try{t.compressedTexImage2D.apply(t,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function it(){try{t.compressedTexImage3D.apply(t,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Nt(){try{t.texSubImage2D.apply(t,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Xt(){try{t.texSubImage3D.apply(t,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function He(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function hn(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function un(){try{t.texStorage2D.apply(t,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function $t(){try{t.texStorage3D.apply(t,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Tt(){try{t.texImage2D.apply(t,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function gt(){try{t.texImage3D.apply(t,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function ue(de){ye.equals(de)===!1&&(t.scissor(de.x,de.y,de.z,de.w),ye.copy(de))}function Ve(de){Ce.equals(de)===!1&&(t.viewport(de.x,de.y,de.z,de.w),Ce.copy(de))}function ft(de,Qe){let st=d.get(Qe);st===void 0&&(st=new WeakMap,d.set(Qe,st));let zt=st.get(de);zt===void 0&&(zt=t.getUniformBlockIndex(Qe,de.name),st.set(de,zt))}function dt(de,Qe){const zt=d.get(Qe).get(de);u.get(Qe)!==zt&&(t.uniformBlockBinding(Qe,zt,de.__bindingPointIndex),u.set(Qe,zt))}function Ge(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),r===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),h={},q=null,Q={},m={},b=new WeakMap,x=[],v=null,_=!1,E=null,T=null,A=null,P=null,R=null,N=null,L=null,I=new St(0,0,0),j=0,B=!1,H=null,J=null,G=null,W=null,K=null,ye.set(0,0,t.canvas.width,t.canvas.height),Ce.set(0,0,t.canvas.width,t.canvas.height),o.reset(),l.reset(),c.reset()}return{buffers:{color:o,depth:l,stencil:c},enable:be,disable:_e,bindFramebuffer:Ee,drawBuffers:ee,useProgram:Me,setBlending:Pe,setMaterial:tt,setFlipSided:Ze,setCullFace:re,setLineWidth:Z,setPolygonOffset:ge,setScissorTest:$e,activeTexture:Be,bindTexture:Fe,unbindTexture:mt,compressedTexImage2D:Xe,compressedTexImage3D:it,texImage2D:Tt,texImage3D:gt,updateUBOMapping:ft,uniformBlockBinding:dt,texStorage2D:un,texStorage3D:$t,texSubImage2D:Nt,texSubImage3D:Xt,compressedTexSubImage2D:He,compressedTexSubImage3D:hn,scissor:ue,viewport:Ve,reset:Ge}}function rMe(t,e,n,r,i,s,a){const o=i.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new WeakMap;let d;const h=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(re,Z){return m?new OffscreenCanvas(re,Z):hb("canvas")}function x(re,Z,ge,$e){let Be=1;if((re.width>$e||re.height>$e)&&(Be=$e/Math.max(re.width,re.height)),Be<1||Z===!0)if(typeof HTMLImageElement<"u"&&re instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&re instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&re instanceof ImageBitmap){const Fe=Z?uE:Math.floor,mt=Fe(Be*re.width),Xe=Fe(Be*re.height);d===void 0&&(d=b(mt,Xe));const it=ge?b(mt,Xe):d;return it.width=mt,it.height=Xe,it.getContext("2d").drawImage(re,0,0,mt,Xe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+re.width+"x"+re.height+") to ("+mt+"x"+Xe+")."),it}else return"data"in re&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+re.width+"x"+re.height+")."),re;return re}function v(re){return gk(re.width)&&gk(re.height)}function _(re){return o?!1:re.wrapS!==As||re.wrapT!==As||re.minFilter!==Zr&&re.minFilter!==ei}function E(re,Z){return re.generateMipmaps&&Z&&re.minFilter!==Zr&&re.minFilter!==ei}function T(re){t.generateMipmap(re)}function A(re,Z,ge,$e,Be=!1){if(o===!1)return Z;if(re!==null){if(t[re]!==void 0)return t[re];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+re+"'")}let Fe=Z;if(Z===t.RED&&(ge===t.FLOAT&&(Fe=t.R32F),ge===t.HALF_FLOAT&&(Fe=t.R16F),ge===t.UNSIGNED_BYTE&&(Fe=t.R8)),Z===t.RED_INTEGER&&(ge===t.UNSIGNED_BYTE&&(Fe=t.R8UI),ge===t.UNSIGNED_SHORT&&(Fe=t.R16UI),ge===t.UNSIGNED_INT&&(Fe=t.R32UI),ge===t.BYTE&&(Fe=t.R8I),ge===t.SHORT&&(Fe=t.R16I),ge===t.INT&&(Fe=t.R32I)),Z===t.RG&&(ge===t.FLOAT&&(Fe=t.RG32F),ge===t.HALF_FLOAT&&(Fe=t.RG16F),ge===t.UNSIGNED_BYTE&&(Fe=t.RG8)),Z===t.RGBA){const mt=Be?cb:qn.getTransfer($e);ge===t.FLOAT&&(Fe=t.RGBA32F),ge===t.HALF_FLOAT&&(Fe=t.RGBA16F),ge===t.UNSIGNED_BYTE&&(Fe=mt===dr?t.SRGB8_ALPHA8:t.RGBA8),ge===t.UNSIGNED_SHORT_4_4_4_4&&(Fe=t.RGBA4),ge===t.UNSIGNED_SHORT_5_5_5_1&&(Fe=t.RGB5_A1)}return(Fe===t.R16F||Fe===t.R32F||Fe===t.RG16F||Fe===t.RG32F||Fe===t.RGBA16F||Fe===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Fe}function P(re,Z,ge){return E(re,ge)===!0||re.isFramebufferTexture&&re.minFilter!==Zr&&re.minFilter!==ei?Math.log2(Math.max(Z.width,Z.height))+1:re.mipmaps!==void 0&&re.mipmaps.length>0?re.mipmaps.length:re.isCompressedTexture&&Array.isArray(re.image)?Z.mipmaps.length:1}function R(re){return re===Zr||re===lE||re===Sx?t.NEAREST:t.LINEAR}function N(re){const Z=re.target;Z.removeEventListener("dispose",N),I(Z),Z.isVideoTexture&&u.delete(Z)}function L(re){const Z=re.target;Z.removeEventListener("dispose",L),B(Z)}function I(re){const Z=r.get(re);if(Z.__webglInit===void 0)return;const ge=re.source,$e=h.get(ge);if($e){const Be=$e[Z.__cacheKey];Be.usedTimes--,Be.usedTimes===0&&j(re),Object.keys($e).length===0&&h.delete(ge)}r.remove(re)}function j(re){const Z=r.get(re);t.deleteTexture(Z.__webglTexture);const ge=re.source,$e=h.get(ge);delete $e[Z.__cacheKey],a.memory.textures--}function B(re){const Z=re.texture,ge=r.get(re),$e=r.get(Z);if($e.__webglTexture!==void 0&&(t.deleteTexture($e.__webglTexture),a.memory.textures--),re.depthTexture&&re.depthTexture.dispose(),re.isWebGLCubeRenderTarget)for(let Be=0;Be<6;Be++){if(Array.isArray(ge.__webglFramebuffer[Be]))for(let Fe=0;Fe<ge.__webglFramebuffer[Be].length;Fe++)t.deleteFramebuffer(ge.__webglFramebuffer[Be][Fe]);else t.deleteFramebuffer(ge.__webglFramebuffer[Be]);ge.__webglDepthbuffer&&t.deleteRenderbuffer(ge.__webglDepthbuffer[Be])}else{if(Array.isArray(ge.__webglFramebuffer))for(let Be=0;Be<ge.__webglFramebuffer.length;Be++)t.deleteFramebuffer(ge.__webglFramebuffer[Be]);else t.deleteFramebuffer(ge.__webglFramebuffer);if(ge.__webglDepthbuffer&&t.deleteRenderbuffer(ge.__webglDepthbuffer),ge.__webglMultisampledFramebuffer&&t.deleteFramebuffer(ge.__webglMultisampledFramebuffer),ge.__webglColorRenderbuffer)for(let Be=0;Be<ge.__webglColorRenderbuffer.length;Be++)ge.__webglColorRenderbuffer[Be]&&t.deleteRenderbuffer(ge.__webglColorRenderbuffer[Be]);ge.__webglDepthRenderbuffer&&t.deleteRenderbuffer(ge.__webglDepthRenderbuffer)}if(re.isWebGLMultipleRenderTargets)for(let Be=0,Fe=Z.length;Be<Fe;Be++){const mt=r.get(Z[Be]);mt.__webglTexture&&(t.deleteTexture(mt.__webglTexture),a.memory.textures--),r.remove(Z[Be])}r.remove(Z),r.remove(re)}let H=0;function J(){H=0}function G(){const re=H;return re>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+re+" texture units while this GPU supports only "+i.maxTextures),H+=1,re}function W(re){const Z=[];return Z.push(re.wrapS),Z.push(re.wrapT),Z.push(re.wrapR||0),Z.push(re.magFilter),Z.push(re.minFilter),Z.push(re.anisotropy),Z.push(re.internalFormat),Z.push(re.format),Z.push(re.type),Z.push(re.generateMipmaps),Z.push(re.premultiplyAlpha),Z.push(re.flipY),Z.push(re.unpackAlignment),Z.push(re.colorSpace),Z.join()}function K(re,Z){const ge=r.get(re);if(re.isVideoTexture&&tt(re),re.isRenderTargetTexture===!1&&re.version>0&&ge.__version!==re.version){const $e=re.image;if($e===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if($e.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ye(ge,re,Z);return}}n.bindTexture(t.TEXTURE_2D,ge.__webglTexture,t.TEXTURE0+Z)}function te(re,Z){const ge=r.get(re);if(re.version>0&&ge.__version!==re.version){ye(ge,re,Z);return}n.bindTexture(t.TEXTURE_2D_ARRAY,ge.__webglTexture,t.TEXTURE0+Z)}function z(re,Z){const ge=r.get(re);if(re.version>0&&ge.__version!==re.version){ye(ge,re,Z);return}n.bindTexture(t.TEXTURE_3D,ge.__webglTexture,t.TEXTURE0+Z)}function V(re,Z){const ge=r.get(re);if(re.version>0&&ge.__version!==re.version){Ce(ge,re,Z);return}n.bindTexture(t.TEXTURE_CUBE_MAP,ge.__webglTexture,t.TEXTURE0+Z)}const X={[ib]:t.REPEAT,[As]:t.CLAMP_TO_EDGE,[sb]:t.MIRRORED_REPEAT},q={[Zr]:t.NEAREST,[lE]:t.NEAREST_MIPMAP_NEAREST,[Sx]:t.NEAREST_MIPMAP_LINEAR,[ei]:t.LINEAR,[NL]:t.LINEAR_MIPMAP_NEAREST,[nf]:t.LINEAR_MIPMAP_LINEAR},Q={[SJ]:t.NEVER,[CJ]:t.ALWAYS,[EJ]:t.LESS,[$L]:t.LEQUAL,[TJ]:t.EQUAL,[PJ]:t.GEQUAL,[AJ]:t.GREATER,[MJ]:t.NOTEQUAL};function ie(re,Z,ge){if(ge?(t.texParameteri(re,t.TEXTURE_WRAP_S,X[Z.wrapS]),t.texParameteri(re,t.TEXTURE_WRAP_T,X[Z.wrapT]),(re===t.TEXTURE_3D||re===t.TEXTURE_2D_ARRAY)&&t.texParameteri(re,t.TEXTURE_WRAP_R,X[Z.wrapR]),t.texParameteri(re,t.TEXTURE_MAG_FILTER,q[Z.magFilter]),t.texParameteri(re,t.TEXTURE_MIN_FILTER,q[Z.minFilter])):(t.texParameteri(re,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(re,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(re===t.TEXTURE_3D||re===t.TEXTURE_2D_ARRAY)&&t.texParameteri(re,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(Z.wrapS!==As||Z.wrapT!==As)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(re,t.TEXTURE_MAG_FILTER,R(Z.magFilter)),t.texParameteri(re,t.TEXTURE_MIN_FILTER,R(Z.minFilter)),Z.minFilter!==Zr&&Z.minFilter!==ei&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),Z.compareFunction&&(t.texParameteri(re,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(re,t.TEXTURE_COMPARE_FUNC,Q[Z.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const $e=e.get("EXT_texture_filter_anisotropic");if(Z.magFilter===Zr||Z.minFilter!==Sx&&Z.minFilter!==nf||Z.type===pl&&e.has("OES_texture_float_linear")===!1||o===!1&&Z.type===mv&&e.has("OES_texture_half_float_linear")===!1)return;(Z.anisotropy>1||r.get(Z).__currentAnisotropy)&&(t.texParameterf(re,$e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Z.anisotropy,i.getMaxAnisotropy())),r.get(Z).__currentAnisotropy=Z.anisotropy)}}function ce(re,Z){let ge=!1;re.__webglInit===void 0&&(re.__webglInit=!0,Z.addEventListener("dispose",N));const $e=Z.source;let Be=h.get($e);Be===void 0&&(Be={},h.set($e,Be));const Fe=W(Z);if(Fe!==re.__cacheKey){Be[Fe]===void 0&&(Be[Fe]={texture:t.createTexture(),usedTimes:0},a.memory.textures++,ge=!0),Be[Fe].usedTimes++;const mt=Be[re.__cacheKey];mt!==void 0&&(Be[re.__cacheKey].usedTimes--,mt.usedTimes===0&&j(Z)),re.__cacheKey=Fe,re.__webglTexture=Be[Fe].texture}return ge}function ye(re,Z,ge){let $e=t.TEXTURE_2D;(Z.isDataArrayTexture||Z.isCompressedArrayTexture)&&($e=t.TEXTURE_2D_ARRAY),Z.isData3DTexture&&($e=t.TEXTURE_3D);const Be=ce(re,Z),Fe=Z.source;n.bindTexture($e,re.__webglTexture,t.TEXTURE0+ge);const mt=r.get(Fe);if(Fe.version!==mt.__version||Be===!0){n.activeTexture(t.TEXTURE0+ge);const Xe=qn.getPrimaries(qn.workingColorSpace),it=Z.colorSpace===Ba?null:qn.getPrimaries(Z.colorSpace),Nt=Z.colorSpace===Ba||Xe===it?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,Z.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,Z.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Nt);const Xt=_(Z)&&v(Z.image)===!1;let He=x(Z.image,Xt,!1,i.maxTextureSize);He=Ze(Z,He);const hn=v(He)||o,un=s.convert(Z.format,Z.colorSpace);let $t=s.convert(Z.type),Tt=A(Z.internalFormat,un,$t,Z.colorSpace,Z.isVideoTexture);ie($e,Z,hn);let gt;const ue=Z.mipmaps,Ve=o&&Z.isVideoTexture!==!0&&Tt!==FL,ft=mt.__version===void 0||Be===!0,dt=P(Z,He,hn);if(Z.isDepthTexture)Tt=t.DEPTH_COMPONENT,o?Z.type===pl?Tt=t.DEPTH_COMPONENT32F:Z.type===lu?Tt=t.DEPTH_COMPONENT24:Z.type===Hd?Tt=t.DEPTH24_STENCIL8:Tt=t.DEPTH_COMPONENT16:Z.type===pl&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Z.format===Wd&&Tt===t.DEPTH_COMPONENT&&Z.type!==JT&&Z.type!==lu&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Z.type=lu,$t=s.convert(Z.type)),Z.format===cp&&Tt===t.DEPTH_COMPONENT&&(Tt=t.DEPTH_STENCIL,Z.type!==Hd&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Z.type=Hd,$t=s.convert(Z.type))),ft&&(Ve?n.texStorage2D(t.TEXTURE_2D,1,Tt,He.width,He.height):n.texImage2D(t.TEXTURE_2D,0,Tt,He.width,He.height,0,un,$t,null));else if(Z.isDataTexture)if(ue.length>0&&hn){Ve&&ft&&n.texStorage2D(t.TEXTURE_2D,dt,Tt,ue[0].width,ue[0].height);for(let Ge=0,de=ue.length;Ge<de;Ge++)gt=ue[Ge],Ve?n.texSubImage2D(t.TEXTURE_2D,Ge,0,0,gt.width,gt.height,un,$t,gt.data):n.texImage2D(t.TEXTURE_2D,Ge,Tt,gt.width,gt.height,0,un,$t,gt.data);Z.generateMipmaps=!1}else Ve?(ft&&n.texStorage2D(t.TEXTURE_2D,dt,Tt,He.width,He.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,He.width,He.height,un,$t,He.data)):n.texImage2D(t.TEXTURE_2D,0,Tt,He.width,He.height,0,un,$t,He.data);else if(Z.isCompressedTexture)if(Z.isCompressedArrayTexture){Ve&&ft&&n.texStorage3D(t.TEXTURE_2D_ARRAY,dt,Tt,ue[0].width,ue[0].height,He.depth);for(let Ge=0,de=ue.length;Ge<de;Ge++)gt=ue[Ge],Z.format!==Gs?un!==null?Ve?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Ge,0,0,0,gt.width,gt.height,He.depth,un,gt.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,Ge,Tt,gt.width,gt.height,He.depth,0,gt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ve?n.texSubImage3D(t.TEXTURE_2D_ARRAY,Ge,0,0,0,gt.width,gt.height,He.depth,un,$t,gt.data):n.texImage3D(t.TEXTURE_2D_ARRAY,Ge,Tt,gt.width,gt.height,He.depth,0,un,$t,gt.data)}else{Ve&&ft&&n.texStorage2D(t.TEXTURE_2D,dt,Tt,ue[0].width,ue[0].height);for(let Ge=0,de=ue.length;Ge<de;Ge++)gt=ue[Ge],Z.format!==Gs?un!==null?Ve?n.compressedTexSubImage2D(t.TEXTURE_2D,Ge,0,0,gt.width,gt.height,un,gt.data):n.compressedTexImage2D(t.TEXTURE_2D,Ge,Tt,gt.width,gt.height,0,gt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ve?n.texSubImage2D(t.TEXTURE_2D,Ge,0,0,gt.width,gt.height,un,$t,gt.data):n.texImage2D(t.TEXTURE_2D,Ge,Tt,gt.width,gt.height,0,un,$t,gt.data)}else if(Z.isDataArrayTexture)Ve?(ft&&n.texStorage3D(t.TEXTURE_2D_ARRAY,dt,Tt,He.width,He.height,He.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,He.width,He.height,He.depth,un,$t,He.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,Tt,He.width,He.height,He.depth,0,un,$t,He.data);else if(Z.isData3DTexture)Ve?(ft&&n.texStorage3D(t.TEXTURE_3D,dt,Tt,He.width,He.height,He.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,He.width,He.height,He.depth,un,$t,He.data)):n.texImage3D(t.TEXTURE_3D,0,Tt,He.width,He.height,He.depth,0,un,$t,He.data);else if(Z.isFramebufferTexture){if(ft)if(Ve)n.texStorage2D(t.TEXTURE_2D,dt,Tt,He.width,He.height);else{let Ge=He.width,de=He.height;for(let Qe=0;Qe<dt;Qe++)n.texImage2D(t.TEXTURE_2D,Qe,Tt,Ge,de,0,un,$t,null),Ge>>=1,de>>=1}}else if(ue.length>0&&hn){Ve&&ft&&n.texStorage2D(t.TEXTURE_2D,dt,Tt,ue[0].width,ue[0].height);for(let Ge=0,de=ue.length;Ge<de;Ge++)gt=ue[Ge],Ve?n.texSubImage2D(t.TEXTURE_2D,Ge,0,0,un,$t,gt):n.texImage2D(t.TEXTURE_2D,Ge,Tt,un,$t,gt);Z.generateMipmaps=!1}else Ve?(ft&&n.texStorage2D(t.TEXTURE_2D,dt,Tt,He.width,He.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,un,$t,He)):n.texImage2D(t.TEXTURE_2D,0,Tt,un,$t,He);E(Z,hn)&&T($e),mt.__version=Fe.version,Z.onUpdate&&Z.onUpdate(Z)}re.__version=Z.version}function Ce(re,Z,ge){if(Z.image.length!==6)return;const $e=ce(re,Z),Be=Z.source;n.bindTexture(t.TEXTURE_CUBE_MAP,re.__webglTexture,t.TEXTURE0+ge);const Fe=r.get(Be);if(Be.version!==Fe.__version||$e===!0){n.activeTexture(t.TEXTURE0+ge);const mt=qn.getPrimaries(qn.workingColorSpace),Xe=Z.colorSpace===Ba?null:qn.getPrimaries(Z.colorSpace),it=Z.colorSpace===Ba||mt===Xe?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,Z.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,Z.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,it);const Nt=Z.isCompressedTexture||Z.image[0].isCompressedTexture,Xt=Z.image[0]&&Z.image[0].isDataTexture,He=[];for(let Ge=0;Ge<6;Ge++)!Nt&&!Xt?He[Ge]=x(Z.image[Ge],!1,!0,i.maxCubemapSize):He[Ge]=Xt?Z.image[Ge].image:Z.image[Ge],He[Ge]=Ze(Z,He[Ge]);const hn=He[0],un=v(hn)||o,$t=s.convert(Z.format,Z.colorSpace),Tt=s.convert(Z.type),gt=A(Z.internalFormat,$t,Tt,Z.colorSpace),ue=o&&Z.isVideoTexture!==!0,Ve=Fe.__version===void 0||$e===!0;let ft=P(Z,hn,un);ie(t.TEXTURE_CUBE_MAP,Z,un);let dt;if(Nt){ue&&Ve&&n.texStorage2D(t.TEXTURE_CUBE_MAP,ft,gt,hn.width,hn.height);for(let Ge=0;Ge<6;Ge++){dt=He[Ge].mipmaps;for(let de=0;de<dt.length;de++){const Qe=dt[de];Z.format!==Gs?$t!==null?ue?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,de,0,0,Qe.width,Qe.height,$t,Qe.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,de,gt,Qe.width,Qe.height,0,Qe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ue?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,de,0,0,Qe.width,Qe.height,$t,Tt,Qe.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,de,gt,Qe.width,Qe.height,0,$t,Tt,Qe.data)}}}else{dt=Z.mipmaps,ue&&Ve&&(dt.length>0&&ft++,n.texStorage2D(t.TEXTURE_CUBE_MAP,ft,gt,He[0].width,He[0].height));for(let Ge=0;Ge<6;Ge++)if(Xt){ue?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0,0,0,He[Ge].width,He[Ge].height,$t,Tt,He[Ge].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0,gt,He[Ge].width,He[Ge].height,0,$t,Tt,He[Ge].data);for(let de=0;de<dt.length;de++){const st=dt[de].image[Ge].image;ue?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,de+1,0,0,st.width,st.height,$t,Tt,st.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,de+1,gt,st.width,st.height,0,$t,Tt,st.data)}}else{ue?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0,0,0,$t,Tt,He[Ge]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0,gt,$t,Tt,He[Ge]);for(let de=0;de<dt.length;de++){const Qe=dt[de];ue?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,de+1,0,0,$t,Tt,Qe.image[Ge]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,de+1,gt,$t,Tt,Qe.image[Ge])}}}E(Z,un)&&T(t.TEXTURE_CUBE_MAP),Fe.__version=Be.version,Z.onUpdate&&Z.onUpdate(Z)}re.__version=Z.version}function he(re,Z,ge,$e,Be,Fe){const mt=s.convert(ge.format,ge.colorSpace),Xe=s.convert(ge.type),it=A(ge.internalFormat,mt,Xe,ge.colorSpace);if(!r.get(Z).__hasExternalTextures){const Xt=Math.max(1,Z.width>>Fe),He=Math.max(1,Z.height>>Fe);Be===t.TEXTURE_3D||Be===t.TEXTURE_2D_ARRAY?n.texImage3D(Be,Fe,it,Xt,He,Z.depth,0,mt,Xe,null):n.texImage2D(Be,Fe,it,Xt,He,0,mt,Xe,null)}n.bindFramebuffer(t.FRAMEBUFFER,re),Pe(Z)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,$e,Be,r.get(ge).__webglTexture,0,Le(Z)):(Be===t.TEXTURE_2D||Be>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Be<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,$e,Be,r.get(ge).__webglTexture,Fe),n.bindFramebuffer(t.FRAMEBUFFER,null)}function De(re,Z,ge){if(t.bindRenderbuffer(t.RENDERBUFFER,re),Z.depthBuffer&&!Z.stencilBuffer){let $e=o===!0?t.DEPTH_COMPONENT24:t.DEPTH_COMPONENT16;if(ge||Pe(Z)){const Be=Z.depthTexture;Be&&Be.isDepthTexture&&(Be.type===pl?$e=t.DEPTH_COMPONENT32F:Be.type===lu&&($e=t.DEPTH_COMPONENT24));const Fe=Le(Z);Pe(Z)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Fe,$e,Z.width,Z.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,Fe,$e,Z.width,Z.height)}else t.renderbufferStorage(t.RENDERBUFFER,$e,Z.width,Z.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,re)}else if(Z.depthBuffer&&Z.stencilBuffer){const $e=Le(Z);ge&&Pe(Z)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,$e,t.DEPTH24_STENCIL8,Z.width,Z.height):Pe(Z)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,$e,t.DEPTH24_STENCIL8,Z.width,Z.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,Z.width,Z.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,re)}else{const $e=Z.isWebGLMultipleRenderTargets===!0?Z.texture:[Z.texture];for(let Be=0;Be<$e.length;Be++){const Fe=$e[Be],mt=s.convert(Fe.format,Fe.colorSpace),Xe=s.convert(Fe.type),it=A(Fe.internalFormat,mt,Xe,Fe.colorSpace),Nt=Le(Z);ge&&Pe(Z)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Nt,it,Z.width,Z.height):Pe(Z)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Nt,it,Z.width,Z.height):t.renderbufferStorage(t.RENDERBUFFER,it,Z.width,Z.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function be(re,Z){if(Z&&Z.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,re),!(Z.depthTexture&&Z.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(Z.depthTexture).__webglTexture||Z.depthTexture.image.width!==Z.width||Z.depthTexture.image.height!==Z.height)&&(Z.depthTexture.image.width=Z.width,Z.depthTexture.image.height=Z.height,Z.depthTexture.needsUpdate=!0),K(Z.depthTexture,0);const $e=r.get(Z.depthTexture).__webglTexture,Be=Le(Z);if(Z.depthTexture.format===Wd)Pe(Z)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,$e,0,Be):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,$e,0);else if(Z.depthTexture.format===cp)Pe(Z)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,$e,0,Be):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,$e,0);else throw new Error("Unknown depthTexture format")}function _e(re){const Z=r.get(re),ge=re.isWebGLCubeRenderTarget===!0;if(re.depthTexture&&!Z.__autoAllocateDepthBuffer){if(ge)throw new Error("target.depthTexture not supported in Cube render targets");be(Z.__webglFramebuffer,re)}else if(ge){Z.__webglDepthbuffer=[];for(let $e=0;$e<6;$e++)n.bindFramebuffer(t.FRAMEBUFFER,Z.__webglFramebuffer[$e]),Z.__webglDepthbuffer[$e]=t.createRenderbuffer(),De(Z.__webglDepthbuffer[$e],re,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,Z.__webglFramebuffer),Z.__webglDepthbuffer=t.createRenderbuffer(),De(Z.__webglDepthbuffer,re,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function Ee(re,Z,ge){const $e=r.get(re);Z!==void 0&&he($e.__webglFramebuffer,re,re.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),ge!==void 0&&_e(re)}function ee(re){const Z=re.texture,ge=r.get(re),$e=r.get(Z);re.addEventListener("dispose",L),re.isWebGLMultipleRenderTargets!==!0&&($e.__webglTexture===void 0&&($e.__webglTexture=t.createTexture()),$e.__version=Z.version,a.memory.textures++);const Be=re.isWebGLCubeRenderTarget===!0,Fe=re.isWebGLMultipleRenderTargets===!0,mt=v(re)||o;if(Be){ge.__webglFramebuffer=[];for(let Xe=0;Xe<6;Xe++)if(o&&Z.mipmaps&&Z.mipmaps.length>0){ge.__webglFramebuffer[Xe]=[];for(let it=0;it<Z.mipmaps.length;it++)ge.__webglFramebuffer[Xe][it]=t.createFramebuffer()}else ge.__webglFramebuffer[Xe]=t.createFramebuffer()}else{if(o&&Z.mipmaps&&Z.mipmaps.length>0){ge.__webglFramebuffer=[];for(let Xe=0;Xe<Z.mipmaps.length;Xe++)ge.__webglFramebuffer[Xe]=t.createFramebuffer()}else ge.__webglFramebuffer=t.createFramebuffer();if(Fe)if(i.drawBuffers){const Xe=re.texture;for(let it=0,Nt=Xe.length;it<Nt;it++){const Xt=r.get(Xe[it]);Xt.__webglTexture===void 0&&(Xt.__webglTexture=t.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&re.samples>0&&Pe(re)===!1){const Xe=Fe?Z:[Z];ge.__webglMultisampledFramebuffer=t.createFramebuffer(),ge.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,ge.__webglMultisampledFramebuffer);for(let it=0;it<Xe.length;it++){const Nt=Xe[it];ge.__webglColorRenderbuffer[it]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,ge.__webglColorRenderbuffer[it]);const Xt=s.convert(Nt.format,Nt.colorSpace),He=s.convert(Nt.type),hn=A(Nt.internalFormat,Xt,He,Nt.colorSpace,re.isXRRenderTarget===!0),un=Le(re);t.renderbufferStorageMultisample(t.RENDERBUFFER,un,hn,re.width,re.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+it,t.RENDERBUFFER,ge.__webglColorRenderbuffer[it])}t.bindRenderbuffer(t.RENDERBUFFER,null),re.depthBuffer&&(ge.__webglDepthRenderbuffer=t.createRenderbuffer(),De(ge.__webglDepthRenderbuffer,re,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Be){n.bindTexture(t.TEXTURE_CUBE_MAP,$e.__webglTexture),ie(t.TEXTURE_CUBE_MAP,Z,mt);for(let Xe=0;Xe<6;Xe++)if(o&&Z.mipmaps&&Z.mipmaps.length>0)for(let it=0;it<Z.mipmaps.length;it++)he(ge.__webglFramebuffer[Xe][it],re,Z,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,it);else he(ge.__webglFramebuffer[Xe],re,Z,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0);E(Z,mt)&&T(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Fe){const Xe=re.texture;for(let it=0,Nt=Xe.length;it<Nt;it++){const Xt=Xe[it],He=r.get(Xt);n.bindTexture(t.TEXTURE_2D,He.__webglTexture),ie(t.TEXTURE_2D,Xt,mt),he(ge.__webglFramebuffer,re,Xt,t.COLOR_ATTACHMENT0+it,t.TEXTURE_2D,0),E(Xt,mt)&&T(t.TEXTURE_2D)}n.unbindTexture()}else{let Xe=t.TEXTURE_2D;if((re.isWebGL3DRenderTarget||re.isWebGLArrayRenderTarget)&&(o?Xe=re.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Xe,$e.__webglTexture),ie(Xe,Z,mt),o&&Z.mipmaps&&Z.mipmaps.length>0)for(let it=0;it<Z.mipmaps.length;it++)he(ge.__webglFramebuffer[it],re,Z,t.COLOR_ATTACHMENT0,Xe,it);else he(ge.__webglFramebuffer,re,Z,t.COLOR_ATTACHMENT0,Xe,0);E(Z,mt)&&T(Xe),n.unbindTexture()}re.depthBuffer&&_e(re)}function Me(re){const Z=v(re)||o,ge=re.isWebGLMultipleRenderTargets===!0?re.texture:[re.texture];for(let $e=0,Be=ge.length;$e<Be;$e++){const Fe=ge[$e];if(E(Fe,Z)){const mt=re.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,Xe=r.get(Fe).__webglTexture;n.bindTexture(mt,Xe),T(mt),n.unbindTexture()}}}function xe(re){if(o&&re.samples>0&&Pe(re)===!1){const Z=re.isWebGLMultipleRenderTargets?re.texture:[re.texture],ge=re.width,$e=re.height;let Be=t.COLOR_BUFFER_BIT;const Fe=[],mt=re.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Xe=r.get(re),it=re.isWebGLMultipleRenderTargets===!0;if(it)for(let Nt=0;Nt<Z.length;Nt++)n.bindFramebuffer(t.FRAMEBUFFER,Xe.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Nt,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Xe.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Nt,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Xe.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Xe.__webglFramebuffer);for(let Nt=0;Nt<Z.length;Nt++){Fe.push(t.COLOR_ATTACHMENT0+Nt),re.depthBuffer&&Fe.push(mt);const Xt=Xe.__ignoreDepthValues!==void 0?Xe.__ignoreDepthValues:!1;if(Xt===!1&&(re.depthBuffer&&(Be|=t.DEPTH_BUFFER_BIT),re.stencilBuffer&&(Be|=t.STENCIL_BUFFER_BIT)),it&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Xe.__webglColorRenderbuffer[Nt]),Xt===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[mt]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[mt])),it){const He=r.get(Z[Nt]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,He,0)}t.blitFramebuffer(0,0,ge,$e,0,0,ge,$e,Be,t.NEAREST),c&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,Fe)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),it)for(let Nt=0;Nt<Z.length;Nt++){n.bindFramebuffer(t.FRAMEBUFFER,Xe.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Nt,t.RENDERBUFFER,Xe.__webglColorRenderbuffer[Nt]);const Xt=r.get(Z[Nt]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Xe.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Nt,t.TEXTURE_2D,Xt,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Xe.__webglMultisampledFramebuffer)}}function Le(re){return Math.min(i.maxSamples,re.samples)}function Pe(re){const Z=r.get(re);return o&&re.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Z.__useRenderToTexture!==!1}function tt(re){const Z=a.render.frame;u.get(re)!==Z&&(u.set(re,Z),re.update())}function Ze(re,Z){const ge=re.colorSpace,$e=re.format,Be=re.type;return re.isCompressedTexture===!0||re.isVideoTexture===!0||re.format===cE||ge!==sc&&ge!==Ba&&(qn.getTransfer(ge)===dr?o===!1?e.has("EXT_sRGB")===!0&&$e===Gs?(re.format=cE,re.minFilter=ei,re.generateMipmaps=!1):Z=HL.sRGBToLinear(Z):($e!==Gs||Be!==Zl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ge)),Z}this.allocateTextureUnit=G,this.resetTextureUnits=J,this.setTexture2D=K,this.setTexture2DArray=te,this.setTexture3D=z,this.setTextureCube=V,this.rebindTextures=Ee,this.setupRenderTarget=ee,this.updateRenderTargetMipmap=Me,this.updateMultisampleRenderTarget=xe,this.setupDepthRenderbuffer=_e,this.setupFrameBufferTexture=he,this.useMultisampledRTT=Pe}function HJ(t,e,n){const r=n.isWebGL2;function i(s,a=Ba){let o;const l=qn.getTransfer(a);if(s===Zl)return t.UNSIGNED_BYTE;if(s===kL)return t.UNSIGNED_SHORT_4_4_4_4;if(s===DL)return t.UNSIGNED_SHORT_5_5_5_1;if(s===cJ)return t.BYTE;if(s===uJ)return t.SHORT;if(s===JT)return t.UNSIGNED_SHORT;if(s===IL)return t.INT;if(s===lu)return t.UNSIGNED_INT;if(s===pl)return t.FLOAT;if(s===mv)return r?t.HALF_FLOAT:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===dJ)return t.ALPHA;if(s===Gs)return t.RGBA;if(s===fJ)return t.LUMINANCE;if(s===hJ)return t.LUMINANCE_ALPHA;if(s===Wd)return t.DEPTH_COMPONENT;if(s===cp)return t.DEPTH_STENCIL;if(s===cE)return o=e.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(s===pJ)return t.RED;if(s===jL)return t.RED_INTEGER;if(s===mJ)return t.RG;if(s===LL)return t.RG_INTEGER;if(s===UL)return t.RGBA_INTEGER;if(s===R1||s===O1||s===N1||s===I1)if(l===dr)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(s===R1)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===O1)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===N1)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===I1)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===R1)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===O1)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===N1)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===I1)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===VI||s===HI||s===WI||s===GI)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===VI)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===HI)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===WI)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===GI)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===FL)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===qI||s===KI)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(s===qI)return l===dr?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(s===KI)return l===dr?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===XI||s===YI||s===JI||s===QI||s===ZI||s===ek||s===tk||s===nk||s===rk||s===ik||s===sk||s===ak||s===ok||s===lk)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(s===XI)return l===dr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===YI)return l===dr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===JI)return l===dr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===QI)return l===dr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===ZI)return l===dr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===ek)return l===dr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===tk)return l===dr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===nk)return l===dr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===rk)return l===dr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===ik)return l===dr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===sk)return l===dr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===ak)return l===dr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===ok)return l===dr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===lk)return l===dr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===k1||s===ck||s===uk)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(s===k1)return l===dr?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===ck)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===uk)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===gJ||s===dk||s===fk||s===hk)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(s===k1)return o.COMPRESSED_RED_RGTC1_EXT;if(s===dk)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===fk)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===hk)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Hd?r?t.UNSIGNED_INT_24_8:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):t[s]!==void 0?t[s]:null}return{convert:i}}class WJ extends Nr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let Bg=class extends Dn{constructor(){super(),this.isGroup=!0,this.type="Group"}};const iMe={type:"move"};class oC{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Bg,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Bg,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ae,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ae),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Bg,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ae,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ae),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,s=null,a=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const x of e.hand.values()){const v=n.getJointPose(x,r),_=this._getHandJoint(c,x);v!==null&&(_.matrix.fromArray(v.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=v.radius),_.visible=v!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],h=u.position.distanceTo(d.position),m=.02,b=.005;c.inputState.pinching&&h>m+b?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=m-b&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(iMe)))}return o!==null&&(o.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=a!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new Bg;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class sMe extends Nu{constructor(e,n){super();const r=this;let i=null,s=1,a=null,o="local-floor",l=1,c=null,u=null,d=null,h=null,m=null,b=null;const x=n.getContextAttributes();let v=null,_=null;const E=[],T=[],A=new ze;let P=null;const R=new Nr;R.layers.enable(1),R.viewport=new Kn;const N=new Nr;N.layers.enable(2),N.viewport=new Kn;const L=[R,N],I=new WJ;I.layers.enable(1),I.layers.enable(2);let j=null,B=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ie){let ce=E[ie];return ce===void 0&&(ce=new oC,E[ie]=ce),ce.getTargetRaySpace()},this.getControllerGrip=function(ie){let ce=E[ie];return ce===void 0&&(ce=new oC,E[ie]=ce),ce.getGripSpace()},this.getHand=function(ie){let ce=E[ie];return ce===void 0&&(ce=new oC,E[ie]=ce),ce.getHandSpace()};function H(ie){const ce=T.indexOf(ie.inputSource);if(ce===-1)return;const ye=E[ce];ye!==void 0&&(ye.update(ie.inputSource,ie.frame,c||a),ye.dispatchEvent({type:ie.type,data:ie.inputSource}))}function J(){i.removeEventListener("select",H),i.removeEventListener("selectstart",H),i.removeEventListener("selectend",H),i.removeEventListener("squeeze",H),i.removeEventListener("squeezestart",H),i.removeEventListener("squeezeend",H),i.removeEventListener("end",J),i.removeEventListener("inputsourceschange",G);for(let ie=0;ie<E.length;ie++){const ce=T[ie];ce!==null&&(T[ie]=null,E[ie].disconnect(ce))}j=null,B=null,e.setRenderTarget(v),m=null,h=null,d=null,i=null,_=null,Q.stop(),r.isPresenting=!1,e.setPixelRatio(P),e.setSize(A.width,A.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ie){s=ie,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ie){o=ie,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function(ie){c=ie},this.getBaseLayer=function(){return h!==null?h:m},this.getBinding=function(){return d},this.getFrame=function(){return b},this.getSession=function(){return i},this.setSession=async function(ie){if(i=ie,i!==null){if(v=e.getRenderTarget(),i.addEventListener("select",H),i.addEventListener("selectstart",H),i.addEventListener("selectend",H),i.addEventListener("squeeze",H),i.addEventListener("squeezestart",H),i.addEventListener("squeezeend",H),i.addEventListener("end",J),i.addEventListener("inputsourceschange",G),x.xrCompatible!==!0&&await n.makeXRCompatible(),P=e.getPixelRatio(),e.getSize(A),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const ce={antialias:i.renderState.layers===void 0?x.antialias:!0,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,n,ce),i.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),_=new El(m.framebufferWidth,m.framebufferHeight,{format:Gs,type:Zl,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil})}else{let ce=null,ye=null,Ce=null;x.depth&&(Ce=x.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,ce=x.stencil?cp:Wd,ye=x.stencil?Hd:lu);const he={colorFormat:n.RGBA8,depthFormat:Ce,scaleFactor:s};d=new XRWebGLBinding(i,n),h=d.createProjectionLayer(he),i.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),_=new El(h.textureWidth,h.textureHeight,{format:Gs,type:Zl,depthTexture:new XL(h.textureWidth,h.textureHeight,ye,void 0,void 0,void 0,void 0,void 0,void 0,ce),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0});const De=e.properties.get(_);De.__ignoreDepthValues=h.ignoreDepthValues}_.isXRRenderTarget=!0,this.setFoveation(l),c=null,a=await i.requestReferenceSpace(o),Q.setContext(i),Q.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function G(ie){for(let ce=0;ce<ie.removed.length;ce++){const ye=ie.removed[ce],Ce=T.indexOf(ye);Ce>=0&&(T[Ce]=null,E[Ce].disconnect(ye))}for(let ce=0;ce<ie.added.length;ce++){const ye=ie.added[ce];let Ce=T.indexOf(ye);if(Ce===-1){for(let De=0;De<E.length;De++)if(De>=T.length){T.push(ye),Ce=De;break}else if(T[De]===null){T[De]=ye,Ce=De;break}if(Ce===-1)break}const he=E[Ce];he&&he.connect(ye)}}const W=new ae,K=new ae;function te(ie,ce,ye){W.setFromMatrixPosition(ce.matrixWorld),K.setFromMatrixPosition(ye.matrixWorld);const Ce=W.distanceTo(K),he=ce.projectionMatrix.elements,De=ye.projectionMatrix.elements,be=he[14]/(he[10]-1),_e=he[14]/(he[10]+1),Ee=(he[9]+1)/he[5],ee=(he[9]-1)/he[5],Me=(he[8]-1)/he[0],xe=(De[8]+1)/De[0],Le=be*Me,Pe=be*xe,tt=Ce/(-Me+xe),Ze=tt*-Me;ce.matrixWorld.decompose(ie.position,ie.quaternion,ie.scale),ie.translateX(Ze),ie.translateZ(tt),ie.matrixWorld.compose(ie.position,ie.quaternion,ie.scale),ie.matrixWorldInverse.copy(ie.matrixWorld).invert();const re=be+tt,Z=_e+tt,ge=Le-Ze,$e=Pe+(Ce-Ze),Be=Ee*_e/Z*re,Fe=ee*_e/Z*re;ie.projectionMatrix.makePerspective(ge,$e,Be,Fe,re,Z),ie.projectionMatrixInverse.copy(ie.projectionMatrix).invert()}function z(ie,ce){ce===null?ie.matrixWorld.copy(ie.matrix):ie.matrixWorld.multiplyMatrices(ce.matrixWorld,ie.matrix),ie.matrixWorldInverse.copy(ie.matrixWorld).invert()}this.updateCamera=function(ie){if(i===null)return;I.near=N.near=R.near=ie.near,I.far=N.far=R.far=ie.far,(j!==I.near||B!==I.far)&&(i.updateRenderState({depthNear:I.near,depthFar:I.far}),j=I.near,B=I.far);const ce=ie.parent,ye=I.cameras;z(I,ce);for(let Ce=0;Ce<ye.length;Ce++)z(ye[Ce],ce);ye.length===2?te(I,R,N):I.projectionMatrix.copy(R.projectionMatrix),V(ie,I,ce)};function V(ie,ce,ye){ye===null?ie.matrix.copy(ce.matrixWorld):(ie.matrix.copy(ye.matrixWorld),ie.matrix.invert(),ie.matrix.multiply(ce.matrixWorld)),ie.matrix.decompose(ie.position,ie.quaternion,ie.scale),ie.updateMatrixWorld(!0),ie.projectionMatrix.copy(ce.projectionMatrix),ie.projectionMatrixInverse.copy(ce.projectionMatrixInverse),ie.isPerspectiveCamera&&(ie.fov=vv*2*Math.atan(1/ie.projectionMatrix.elements[5]),ie.zoom=1)}this.getCamera=function(){return I},this.getFoveation=function(){if(!(h===null&&m===null))return l},this.setFoveation=function(ie){l=ie,h!==null&&(h.fixedFoveation=ie),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=ie)};let X=null;function q(ie,ce){if(u=ce.getViewerPose(c||a),b=ce,u!==null){const ye=u.views;m!==null&&(e.setRenderTargetFramebuffer(_,m.framebuffer),e.setRenderTarget(_));let Ce=!1;ye.length!==I.cameras.length&&(I.cameras.length=0,Ce=!0);for(let he=0;he<ye.length;he++){const De=ye[he];let be=null;if(m!==null)be=m.getViewport(De);else{const Ee=d.getViewSubImage(h,De);be=Ee.viewport,he===0&&(e.setRenderTargetTextures(_,Ee.colorTexture,h.ignoreDepthValues?void 0:Ee.depthStencilTexture),e.setRenderTarget(_))}let _e=L[he];_e===void 0&&(_e=new Nr,_e.layers.enable(he),_e.viewport=new Kn,L[he]=_e),_e.matrix.fromArray(De.transform.matrix),_e.matrix.decompose(_e.position,_e.quaternion,_e.scale),_e.projectionMatrix.fromArray(De.projectionMatrix),_e.projectionMatrixInverse.copy(_e.projectionMatrix).invert(),_e.viewport.set(be.x,be.y,be.width,be.height),he===0&&(I.matrix.copy(_e.matrix),I.matrix.decompose(I.position,I.quaternion,I.scale)),Ce===!0&&I.cameras.push(_e)}}for(let ye=0;ye<E.length;ye++){const Ce=T[ye],he=E[ye];Ce!==null&&he!==void 0&&he.update(Ce,ce,c||a)}X&&X(ie,ce),ce.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:ce}),b=null}const Q=new UJ;Q.setAnimationLoop(q),this.setAnimationLoop=function(ie){X=ie},this.dispose=function(){}}}function aMe(t,e){function n(v,_){v.matrixAutoUpdate===!0&&v.updateMatrix(),_.value.copy(v.matrix)}function r(v,_){_.color.getRGB(v.fogColor.value,kJ(t)),_.isFog?(v.fogNear.value=_.near,v.fogFar.value=_.far):_.isFogExp2&&(v.fogDensity.value=_.density)}function i(v,_,E,T,A){_.isMeshBasicMaterial||_.isMeshLambertMaterial?s(v,_):_.isMeshToonMaterial?(s(v,_),d(v,_)):_.isMeshPhongMaterial?(s(v,_),u(v,_)):_.isMeshStandardMaterial?(s(v,_),h(v,_),_.isMeshPhysicalMaterial&&m(v,_,A)):_.isMeshMatcapMaterial?(s(v,_),b(v,_)):_.isMeshDepthMaterial?s(v,_):_.isMeshDistanceMaterial?(s(v,_),x(v,_)):_.isMeshNormalMaterial?s(v,_):_.isLineBasicMaterial?(a(v,_),_.isLineDashedMaterial&&o(v,_)):_.isPointsMaterial?l(v,_,E,T):_.isSpriteMaterial?c(v,_):_.isShadowMaterial?(v.color.value.copy(_.color),v.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function s(v,_){v.opacity.value=_.opacity,_.color&&v.diffuse.value.copy(_.color),_.emissive&&v.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(v.map.value=_.map,n(_.map,v.mapTransform)),_.alphaMap&&(v.alphaMap.value=_.alphaMap,n(_.alphaMap,v.alphaMapTransform)),_.bumpMap&&(v.bumpMap.value=_.bumpMap,n(_.bumpMap,v.bumpMapTransform),v.bumpScale.value=_.bumpScale,_.side===Hi&&(v.bumpScale.value*=-1)),_.normalMap&&(v.normalMap.value=_.normalMap,n(_.normalMap,v.normalMapTransform),v.normalScale.value.copy(_.normalScale),_.side===Hi&&v.normalScale.value.negate()),_.displacementMap&&(v.displacementMap.value=_.displacementMap,n(_.displacementMap,v.displacementMapTransform),v.displacementScale.value=_.displacementScale,v.displacementBias.value=_.displacementBias),_.emissiveMap&&(v.emissiveMap.value=_.emissiveMap,n(_.emissiveMap,v.emissiveMapTransform)),_.specularMap&&(v.specularMap.value=_.specularMap,n(_.specularMap,v.specularMapTransform)),_.alphaTest>0&&(v.alphaTest.value=_.alphaTest);const E=e.get(_).envMap;if(E&&(v.envMap.value=E,v.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=_.reflectivity,v.ior.value=_.ior,v.refractionRatio.value=_.refractionRatio),_.lightMap){v.lightMap.value=_.lightMap;const T=t._useLegacyLights===!0?Math.PI:1;v.lightMapIntensity.value=_.lightMapIntensity*T,n(_.lightMap,v.lightMapTransform)}_.aoMap&&(v.aoMap.value=_.aoMap,v.aoMapIntensity.value=_.aoMapIntensity,n(_.aoMap,v.aoMapTransform))}function a(v,_){v.diffuse.value.copy(_.color),v.opacity.value=_.opacity,_.map&&(v.map.value=_.map,n(_.map,v.mapTransform))}function o(v,_){v.dashSize.value=_.dashSize,v.totalSize.value=_.dashSize+_.gapSize,v.scale.value=_.scale}function l(v,_,E,T){v.diffuse.value.copy(_.color),v.opacity.value=_.opacity,v.size.value=_.size*E,v.scale.value=T*.5,_.map&&(v.map.value=_.map,n(_.map,v.uvTransform)),_.alphaMap&&(v.alphaMap.value=_.alphaMap,n(_.alphaMap,v.alphaMapTransform)),_.alphaTest>0&&(v.alphaTest.value=_.alphaTest)}function c(v,_){v.diffuse.value.copy(_.color),v.opacity.value=_.opacity,v.rotation.value=_.rotation,_.map&&(v.map.value=_.map,n(_.map,v.mapTransform)),_.alphaMap&&(v.alphaMap.value=_.alphaMap,n(_.alphaMap,v.alphaMapTransform)),_.alphaTest>0&&(v.alphaTest.value=_.alphaTest)}function u(v,_){v.specular.value.copy(_.specular),v.shininess.value=Math.max(_.shininess,1e-4)}function d(v,_){_.gradientMap&&(v.gradientMap.value=_.gradientMap)}function h(v,_){v.metalness.value=_.metalness,_.metalnessMap&&(v.metalnessMap.value=_.metalnessMap,n(_.metalnessMap,v.metalnessMapTransform)),v.roughness.value=_.roughness,_.roughnessMap&&(v.roughnessMap.value=_.roughnessMap,n(_.roughnessMap,v.roughnessMapTransform)),e.get(_).envMap&&(v.envMapIntensity.value=_.envMapIntensity)}function m(v,_,E){v.ior.value=_.ior,_.sheen>0&&(v.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),v.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(v.sheenColorMap.value=_.sheenColorMap,n(_.sheenColorMap,v.sheenColorMapTransform)),_.sheenRoughnessMap&&(v.sheenRoughnessMap.value=_.sheenRoughnessMap,n(_.sheenRoughnessMap,v.sheenRoughnessMapTransform))),_.clearcoat>0&&(v.clearcoat.value=_.clearcoat,v.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(v.clearcoatMap.value=_.clearcoatMap,n(_.clearcoatMap,v.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,n(_.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(v.clearcoatNormalMap.value=_.clearcoatNormalMap,n(_.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===Hi&&v.clearcoatNormalScale.value.negate())),_.iridescence>0&&(v.iridescence.value=_.iridescence,v.iridescenceIOR.value=_.iridescenceIOR,v.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(v.iridescenceMap.value=_.iridescenceMap,n(_.iridescenceMap,v.iridescenceMapTransform)),_.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=_.iridescenceThicknessMap,n(_.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),_.transmission>0&&(v.transmission.value=_.transmission,v.transmissionSamplerMap.value=E.texture,v.transmissionSamplerSize.value.set(E.width,E.height),_.transmissionMap&&(v.transmissionMap.value=_.transmissionMap,n(_.transmissionMap,v.transmissionMapTransform)),v.thickness.value=_.thickness,_.thicknessMap&&(v.thicknessMap.value=_.thicknessMap,n(_.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=_.attenuationDistance,v.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(v.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(v.anisotropyMap.value=_.anisotropyMap,n(_.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=_.specularIntensity,v.specularColor.value.copy(_.specularColor),_.specularColorMap&&(v.specularColorMap.value=_.specularColorMap,n(_.specularColorMap,v.specularColorMapTransform)),_.specularIntensityMap&&(v.specularIntensityMap.value=_.specularIntensityMap,n(_.specularIntensityMap,v.specularIntensityMapTransform))}function b(v,_){_.matcap&&(v.matcap.value=_.matcap)}function x(v,_){const E=e.get(_).light;v.referencePosition.value.setFromMatrixPosition(E.matrixWorld),v.nearDistance.value=E.shadow.camera.near,v.farDistance.value=E.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function oMe(t,e,n,r){let i={},s={},a=[];const o=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(E,T){const A=T.program;r.uniformBlockBinding(E,A)}function c(E,T){let A=i[E.id];A===void 0&&(b(E),A=u(E),i[E.id]=A,E.addEventListener("dispose",v));const P=T.program;r.updateUBOMapping(E,P);const R=e.render.frame;s[E.id]!==R&&(h(E),s[E.id]=R)}function u(E){const T=d();E.__bindingPointIndex=T;const A=t.createBuffer(),P=E.__size,R=E.usage;return t.bindBuffer(t.UNIFORM_BUFFER,A),t.bufferData(t.UNIFORM_BUFFER,P,R),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,T,A),A}function d(){for(let E=0;E<o;E++)if(a.indexOf(E)===-1)return a.push(E),E;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(E){const T=i[E.id],A=E.uniforms,P=E.__cache;t.bindBuffer(t.UNIFORM_BUFFER,T);for(let R=0,N=A.length;R<N;R++){const L=Array.isArray(A[R])?A[R]:[A[R]];for(let I=0,j=L.length;I<j;I++){const B=L[I];if(m(B,R,I,P)===!0){const H=B.__offset,J=Array.isArray(B.value)?B.value:[B.value];let G=0;for(let W=0;W<J.length;W++){const K=J[W],te=x(K);typeof K=="number"||typeof K=="boolean"?(B.__data[0]=K,t.bufferSubData(t.UNIFORM_BUFFER,H+G,B.__data)):K.isMatrix3?(B.__data[0]=K.elements[0],B.__data[1]=K.elements[1],B.__data[2]=K.elements[2],B.__data[3]=0,B.__data[4]=K.elements[3],B.__data[5]=K.elements[4],B.__data[6]=K.elements[5],B.__data[7]=0,B.__data[8]=K.elements[6],B.__data[9]=K.elements[7],B.__data[10]=K.elements[8],B.__data[11]=0):(K.toArray(B.__data,G),G+=te.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,H,B.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function m(E,T,A,P){const R=E.value,N=T+"_"+A;if(P[N]===void 0)return typeof R=="number"||typeof R=="boolean"?P[N]=R:P[N]=R.clone(),!0;{const L=P[N];if(typeof R=="number"||typeof R=="boolean"){if(L!==R)return P[N]=R,!0}else if(L.equals(R)===!1)return L.copy(R),!0}return!1}function b(E){const T=E.uniforms;let A=0;const P=16;for(let N=0,L=T.length;N<L;N++){const I=Array.isArray(T[N])?T[N]:[T[N]];for(let j=0,B=I.length;j<B;j++){const H=I[j],J=Array.isArray(H.value)?H.value:[H.value];for(let G=0,W=J.length;G<W;G++){const K=J[G],te=x(K),z=A%P;z!==0&&P-z<te.boundary&&(A+=P-z),H.__data=new Float32Array(te.storage/Float32Array.BYTES_PER_ELEMENT),H.__offset=A,A+=te.storage}}}const R=A%P;return R>0&&(A+=P-R),E.__size=A,E.__cache={},this}function x(E){const T={boundary:0,storage:0};return typeof E=="number"||typeof E=="boolean"?(T.boundary=4,T.storage=4):E.isVector2?(T.boundary=8,T.storage=8):E.isVector3||E.isColor?(T.boundary=16,T.storage=12):E.isVector4?(T.boundary=16,T.storage=16):E.isMatrix3?(T.boundary=48,T.storage=48):E.isMatrix4?(T.boundary=64,T.storage=64):E.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",E),T}function v(E){const T=E.target;T.removeEventListener("dispose",v);const A=a.indexOf(T.__bindingPointIndex);a.splice(A,1),t.deleteBuffer(i[T.id]),delete i[T.id],delete s[T.id]}function _(){for(const E in i)t.deleteBuffer(i[E]);a=[],i={},s={}}return{bind:l,update:c,dispose:_}}class QL{constructor(e={}){const{canvas:n=OJ(),context:r=null,depth:i=!0,stencil:s=!0,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let h;r!==null?h=r.getContextAttributes().alpha:h=a;const m=new Uint32Array(4),b=new Int32Array(4);let x=null,v=null;const _=[],E=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Pi,this._useLegacyLights=!1,this.toneMapping=Ql,this.toneMappingExposure=1;const T=this;let A=!1,P=0,R=0,N=null,L=-1,I=null;const j=new Kn,B=new Kn;let H=null;const J=new St(0);let G=0,W=n.width,K=n.height,te=1,z=null,V=null;const X=new Kn(0,0,W,K),q=new Kn(0,0,W,K);let Q=!1;const ie=new Rw;let ce=!1,ye=!1,Ce=null;const he=new cn,De=new ze,be=new ae,_e={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ee(){return N===null?te:1}let ee=r;function Me(se,we){for(let Ne=0;Ne<se.length;Ne++){const Ie=se[Ne],Re=n.getContext(Ie,we);if(Re!==null)return Re}return null}try{const se={alpha:!0,depth:i,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${KT}`),n.addEventListener("webglcontextlost",Ge,!1),n.addEventListener("webglcontextrestored",de,!1),n.addEventListener("webglcontextcreationerror",Qe,!1),ee===null){const we=["webgl2","webgl","experimental-webgl"];if(T.isWebGL1Renderer===!0&&we.shift(),ee=Me(we,se),ee===null)throw Me(we)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&ee instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),ee.getShaderPrecisionFormat===void 0&&(ee.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(se){throw console.error("THREE.WebGLRenderer: "+se.message),se}let xe,Le,Pe,tt,Ze,re,Z,ge,$e,Be,Fe,mt,Xe,it,Nt,Xt,He,hn,un,$t,Tt,gt,ue,Ve;function ft(){xe=new wTe(ee),Le=new mTe(ee,xe,e),xe.init(Le),gt=new HJ(ee,xe,Le),Pe=new nMe(ee,xe,Le),tt=new ETe(ee),Ze=new HAe,re=new rMe(ee,xe,Pe,Ze,Le,gt,tt),Z=new vTe(T),ge=new bTe(T),$e=new NSe(ee,Le),ue=new hTe(ee,xe,$e,Le),Be=new _Te(ee,$e,tt,ue),Fe=new PTe(ee,Be,$e,tt),un=new MTe(ee,Le,re),Xt=new gTe(Ze),mt=new VAe(T,Z,ge,xe,Le,ue,Xt),Xe=new aMe(T,Ze),it=new GAe,Nt=new QAe(xe,Le),hn=new fTe(T,Z,ge,Pe,Fe,h,l),He=new tMe(T,Fe,Le),Ve=new oMe(ee,tt,Le,Pe),$t=new pTe(ee,xe,tt,Le),Tt=new STe(ee,xe,tt,Le),tt.programs=mt.programs,T.capabilities=Le,T.extensions=xe,T.properties=Ze,T.renderLists=it,T.shadowMap=He,T.state=Pe,T.info=tt}ft();const dt=new sMe(T,ee);this.xr=dt,this.getContext=function(){return ee},this.getContextAttributes=function(){return ee.getContextAttributes()},this.forceContextLoss=function(){const se=xe.get("WEBGL_lose_context");se&&se.loseContext()},this.forceContextRestore=function(){const se=xe.get("WEBGL_lose_context");se&&se.restoreContext()},this.getPixelRatio=function(){return te},this.setPixelRatio=function(se){se!==void 0&&(te=se,this.setSize(W,K,!1))},this.getSize=function(se){return se.set(W,K)},this.setSize=function(se,we,Ne=!0){if(dt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}W=se,K=we,n.width=Math.floor(se*te),n.height=Math.floor(we*te),Ne===!0&&(n.style.width=se+"px",n.style.height=we+"px"),this.setViewport(0,0,se,we)},this.getDrawingBufferSize=function(se){return se.set(W*te,K*te).floor()},this.setDrawingBufferSize=function(se,we,Ne){W=se,K=we,te=Ne,n.width=Math.floor(se*Ne),n.height=Math.floor(we*Ne),this.setViewport(0,0,se,we)},this.getCurrentViewport=function(se){return se.copy(j)},this.getViewport=function(se){return se.copy(X)},this.setViewport=function(se,we,Ne,Ie){se.isVector4?X.set(se.x,se.y,se.z,se.w):X.set(se,we,Ne,Ie),Pe.viewport(j.copy(X).multiplyScalar(te).floor())},this.getScissor=function(se){return se.copy(q)},this.setScissor=function(se,we,Ne,Ie){se.isVector4?q.set(se.x,se.y,se.z,se.w):q.set(se,we,Ne,Ie),Pe.scissor(B.copy(q).multiplyScalar(te).floor())},this.getScissorTest=function(){return Q},this.setScissorTest=function(se){Pe.setScissorTest(Q=se)},this.setOpaqueSort=function(se){z=se},this.setTransparentSort=function(se){V=se},this.getClearColor=function(se){return se.copy(hn.getClearColor())},this.setClearColor=function(){hn.setClearColor.apply(hn,arguments)},this.getClearAlpha=function(){return hn.getClearAlpha()},this.setClearAlpha=function(){hn.setClearAlpha.apply(hn,arguments)},this.clear=function(se=!0,we=!0,Ne=!0){let Ie=0;if(se){let Re=!1;if(N!==null){const vt=N.texture.format;Re=vt===UL||vt===LL||vt===jL}if(Re){const vt=N.texture.type,Ft=vt===Zl||vt===lu||vt===JT||vt===Hd||vt===kL||vt===DL,Wt=hn.getClearColor(),yt=hn.getClearAlpha(),on=Wt.r,Yt=Wt.g,sn=Wt.b;Ft?(m[0]=on,m[1]=Yt,m[2]=sn,m[3]=yt,ee.clearBufferuiv(ee.COLOR,0,m)):(b[0]=on,b[1]=Yt,b[2]=sn,b[3]=yt,ee.clearBufferiv(ee.COLOR,0,b))}else Ie|=ee.COLOR_BUFFER_BIT}we&&(Ie|=ee.DEPTH_BUFFER_BIT),Ne&&(Ie|=ee.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ee.clear(Ie)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Ge,!1),n.removeEventListener("webglcontextrestored",de,!1),n.removeEventListener("webglcontextcreationerror",Qe,!1),it.dispose(),Nt.dispose(),Ze.dispose(),Z.dispose(),ge.dispose(),Fe.dispose(),ue.dispose(),Ve.dispose(),mt.dispose(),dt.dispose(),dt.removeEventListener("sessionstart",An),dt.removeEventListener("sessionend",rn),Ce&&(Ce.dispose(),Ce=null),Hn.stop()};function Ge(se){se.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),A=!0}function de(){console.log("THREE.WebGLRenderer: Context Restored."),A=!1;const se=tt.autoReset,we=He.enabled,Ne=He.autoUpdate,Ie=He.needsUpdate,Re=He.type;ft(),tt.autoReset=se,He.enabled=we,He.autoUpdate=Ne,He.needsUpdate=Ie,He.type=Re}function Qe(se){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",se.statusMessage)}function st(se){const we=se.target;we.removeEventListener("dispose",st),zt(we)}function zt(se){We(se),Ze.remove(se)}function We(se){const we=Ze.get(se).programs;we!==void 0&&(we.forEach(function(Ne){mt.releaseProgram(Ne)}),se.isShaderMaterial&&mt.releaseShaderCache(se))}this.renderBufferDirect=function(se,we,Ne,Ie,Re,vt){we===null&&(we=_e);const Ft=Re.isMesh&&Re.matrixWorld.determinant()<0,Wt=Ry(se,we,Ne,Ie,Re);Pe.setMaterial(Ie,Ft);let yt=Ne.index,on=1;if(Ie.wireframe===!0){if(yt=Be.getWireframeAttribute(Ne),yt===void 0)return;on=2}const Yt=Ne.drawRange,sn=Ne.attributes.position;let Yn=Yt.start*on,mi=(Yt.start+Yt.count)*on;vt!==null&&(Yn=Math.max(Yn,vt.start*on),mi=Math.min(mi,(vt.start+vt.count)*on)),yt!==null?(Yn=Math.max(Yn,0),mi=Math.min(mi,yt.count)):sn!=null&&(Yn=Math.max(Yn,0),mi=Math.min(mi,sn.count));const Jn=mi-Yn;if(Jn<0||Jn===1/0)return;ue.setup(Re,Ie,Wt,Ne,yt);let Mr,Lt=$t;if(yt!==null&&(Mr=$e.get(yt),Lt=Tt,Lt.setIndex(Mr)),Re.isMesh)Ie.wireframe===!0?(Pe.setLineWidth(Ie.wireframeLinewidth*Ee()),Lt.setMode(ee.LINES)):Lt.setMode(ee.TRIANGLES);else if(Re.isLine){let Et=Ie.linewidth;Et===void 0&&(Et=1),Pe.setLineWidth(Et*Ee()),Re.isLineSegments?Lt.setMode(ee.LINES):Re.isLineLoop?Lt.setMode(ee.LINE_LOOP):Lt.setMode(ee.LINE_STRIP)}else Re.isPoints?Lt.setMode(ee.POINTS):Re.isSprite&&Lt.setMode(ee.TRIANGLES);if(Re.isBatchedMesh)Lt.renderMultiDraw(Re._multiDrawStarts,Re._multiDrawCounts,Re._multiDrawCount);else if(Re.isInstancedMesh)Lt.renderInstances(Yn,Jn,Re.count);else if(Ne.isInstancedBufferGeometry){const Et=Ne._maxInstanceCount!==void 0?Ne._maxInstanceCount:1/0,br=Math.min(Ne.instanceCount,Et);Lt.renderInstances(Yn,Jn,br)}else Lt.render(Yn,Jn)};function xt(se,we,Ne){se.transparent===!0&&se.side===Fa&&se.forceSinglePass===!1?(se.side=Hi,se.needsUpdate=!0,Cl(se,we,Ne),se.side=Sl,se.needsUpdate=!0,Cl(se,we,Ne),se.side=Fa):Cl(se,we,Ne)}this.compile=function(se,we,Ne=null){Ne===null&&(Ne=se),v=Nt.get(Ne),v.init(),E.push(v),Ne.traverseVisible(function(Re){Re.isLight&&Re.layers.test(we.layers)&&(v.pushLight(Re),Re.castShadow&&v.pushShadow(Re))}),se!==Ne&&se.traverseVisible(function(Re){Re.isLight&&Re.layers.test(we.layers)&&(v.pushLight(Re),Re.castShadow&&v.pushShadow(Re))}),v.setupLights(T._useLegacyLights);const Ie=new Set;return se.traverse(function(Re){const vt=Re.material;if(vt)if(Array.isArray(vt))for(let Ft=0;Ft<vt.length;Ft++){const Wt=vt[Ft];xt(Wt,Ne,Re),Ie.add(Wt)}else xt(vt,Ne,Re),Ie.add(vt)}),E.pop(),v=null,Ie},this.compileAsync=function(se,we,Ne=null){const Ie=this.compile(se,we,Ne);return new Promise(Re=>{function vt(){if(Ie.forEach(function(Ft){Ze.get(Ft).currentProgram.isReady()&&Ie.delete(Ft)}),Ie.size===0){Re(se);return}setTimeout(vt,10)}xe.get("KHR_parallel_shader_compile")!==null?vt():setTimeout(vt,10)})};let Ot=null;function mn(se){Ot&&Ot(se)}function An(){Hn.stop()}function rn(){Hn.start()}const Hn=new UJ;Hn.setAnimationLoop(mn),typeof self<"u"&&Hn.setContext(self),this.setAnimationLoop=function(se){Ot=se,dt.setAnimationLoop(se),se===null?Hn.stop():Hn.start()},dt.addEventListener("sessionstart",An),dt.addEventListener("sessionend",rn),this.render=function(se,we){if(we!==void 0&&we.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(A===!0)return;se.matrixWorldAutoUpdate===!0&&se.updateMatrixWorld(),we.parent===null&&we.matrixWorldAutoUpdate===!0&&we.updateMatrixWorld(),dt.enabled===!0&&dt.isPresenting===!0&&(dt.cameraAutoUpdate===!0&&dt.updateCamera(we),we=dt.getCamera()),se.isScene===!0&&se.onBeforeRender(T,se,we,N),v=Nt.get(se,E.length),v.init(),E.push(v),he.multiplyMatrices(we.projectionMatrix,we.matrixWorldInverse),ie.setFromProjectionMatrix(he),ye=this.localClippingEnabled,ce=Xt.init(this.clippingPlanes,ye),x=it.get(se,_.length),x.init(),_.push(x),Fn(se,we,0,T.sortObjects),x.finish(),T.sortObjects===!0&&x.sort(z,V),this.info.render.frame++,ce===!0&&Xt.beginShadows();const Ne=v.state.shadowsArray;if(He.render(Ne,se,we),ce===!0&&Xt.endShadows(),this.info.autoReset===!0&&this.info.reset(),hn.render(x,se),v.setupLights(T._useLegacyLights),we.isArrayCamera){const Ie=we.cameras;for(let Re=0,vt=Ie.length;Re<vt;Re++){const Ft=Ie[Re];us(x,se,Ft,Ft.viewport)}}else us(x,se,we);N!==null&&(re.updateMultisampleRenderTarget(N),re.updateRenderTargetMipmap(N)),se.isScene===!0&&se.onAfterRender(T,se,we),ue.resetDefaultState(),L=-1,I=null,E.pop(),E.length>0?v=E[E.length-1]:v=null,_.pop(),_.length>0?x=_[_.length-1]:x=null};function Fn(se,we,Ne,Ie){if(se.visible===!1)return;if(se.layers.test(we.layers)){if(se.isGroup)Ne=se.renderOrder;else if(se.isLOD)se.autoUpdate===!0&&se.update(we);else if(se.isLight)v.pushLight(se),se.castShadow&&v.pushShadow(se);else if(se.isSprite){if(!se.frustumCulled||ie.intersectsSprite(se)){Ie&&be.setFromMatrixPosition(se.matrixWorld).applyMatrix4(he);const Ft=Fe.update(se),Wt=se.material;Wt.visible&&x.push(se,Ft,Wt,Ne,be.z,null)}}else if((se.isMesh||se.isLine||se.isPoints)&&(!se.frustumCulled||ie.intersectsObject(se))){const Ft=Fe.update(se),Wt=se.material;if(Ie&&(se.boundingSphere!==void 0?(se.boundingSphere===null&&se.computeBoundingSphere(),be.copy(se.boundingSphere.center)):(Ft.boundingSphere===null&&Ft.computeBoundingSphere(),be.copy(Ft.boundingSphere.center)),be.applyMatrix4(se.matrixWorld).applyMatrix4(he)),Array.isArray(Wt)){const yt=Ft.groups;for(let on=0,Yt=yt.length;on<Yt;on++){const sn=yt[on],Yn=Wt[sn.materialIndex];Yn&&Yn.visible&&x.push(se,Ft,Yn,Ne,be.z,sn)}}else Wt.visible&&x.push(se,Ft,Wt,Ne,be.z,null)}}const vt=se.children;for(let Ft=0,Wt=vt.length;Ft<Wt;Ft++)Fn(vt[Ft],we,Ne,Ie)}function us(se,we,Ne,Ie){const Re=se.opaque,vt=se.transmissive,Ft=se.transparent;v.setupLightsView(Ne),ce===!0&&Xt.setGlobalState(T.clippingPlanes,Ne),vt.length>0&&Ao(Re,vt,we,Ne),Ie&&Pe.viewport(j.copy(Ie)),Re.length>0&&Mo(Re,we,Ne),vt.length>0&&Mo(vt,we,Ne),Ft.length>0&&Mo(Ft,we,Ne),Pe.buffers.depth.setTest(!0),Pe.buffers.depth.setMask(!0),Pe.buffers.color.setMask(!0),Pe.setPolygonOffset(!1)}function Ao(se,we,Ne,Ie){if((Ne.isScene===!0?Ne.overrideMaterial:null)!==null)return;const vt=Le.isWebGL2;Ce===null&&(Ce=new El(1,1,{generateMipmaps:!0,type:xe.has("EXT_color_buffer_half_float")?mv:Zl,minFilter:nf,samples:vt?4:0})),T.getDrawingBufferSize(De),vt?Ce.setSize(De.x,De.y):Ce.setSize(uE(De.x),uE(De.y));const Ft=T.getRenderTarget();T.setRenderTarget(Ce),T.getClearColor(J),G=T.getClearAlpha(),G<1&&T.setClearColor(16777215,.5),T.clear();const Wt=T.toneMapping;T.toneMapping=Ql,Mo(se,Ne,Ie),re.updateMultisampleRenderTarget(Ce),re.updateRenderTargetMipmap(Ce);let yt=!1;for(let on=0,Yt=we.length;on<Yt;on++){const sn=we[on],Yn=sn.object,mi=sn.geometry,Jn=sn.material,Mr=sn.group;if(Jn.side===Fa&&Yn.layers.test(Ie.layers)){const Lt=Jn.side;Jn.side=Hi,Jn.needsUpdate=!0,xa(Yn,Ne,Ie,mi,Jn,Mr),Jn.side=Lt,Jn.needsUpdate=!0,yt=!0}}yt===!0&&(re.updateMultisampleRenderTarget(Ce),re.updateRenderTargetMipmap(Ce)),T.setRenderTarget(Ft),T.setClearColor(J,G),T.toneMapping=Wt}function Mo(se,we,Ne){const Ie=we.isScene===!0?we.overrideMaterial:null;for(let Re=0,vt=se.length;Re<vt;Re++){const Ft=se[Re],Wt=Ft.object,yt=Ft.geometry,on=Ie===null?Ft.material:Ie,Yt=Ft.group;Wt.layers.test(Ne.layers)&&xa(Wt,we,Ne,yt,on,Yt)}}function xa(se,we,Ne,Ie,Re,vt){se.onBeforeRender(T,we,Ne,Ie,Re,vt),se.modelViewMatrix.multiplyMatrices(Ne.matrixWorldInverse,se.matrixWorld),se.normalMatrix.getNormalMatrix(se.modelViewMatrix),Re.onBeforeRender(T,we,Ne,Ie,se,vt),Re.transparent===!0&&Re.side===Fa&&Re.forceSinglePass===!1?(Re.side=Hi,Re.needsUpdate=!0,T.renderBufferDirect(Ne,we,Ie,Re,se,vt),Re.side=Sl,Re.needsUpdate=!0,T.renderBufferDirect(Ne,we,Ie,Re,se,vt),Re.side=Fa):T.renderBufferDirect(Ne,we,Ie,Re,se,vt),se.onAfterRender(T,we,Ne,Ie,Re,vt)}function Cl(se,we,Ne){we.isScene!==!0&&(we=_e);const Ie=Ze.get(se),Re=v.state.lights,vt=v.state.shadowsArray,Ft=Re.state.version,Wt=mt.getParameters(se,Re.state,vt,we,Ne),yt=mt.getProgramCacheKey(Wt);let on=Ie.programs;Ie.environment=se.isMeshStandardMaterial?we.environment:null,Ie.fog=we.fog,Ie.envMap=(se.isMeshStandardMaterial?ge:Z).get(se.envMap||Ie.environment),on===void 0&&(se.addEventListener("dispose",st),on=new Map,Ie.programs=on);let Yt=on.get(yt);if(Yt!==void 0){if(Ie.currentProgram===Yt&&Ie.lightsStateVersion===Ft)return Vp(se,Wt),Yt}else Wt.uniforms=mt.getUniforms(se),se.onBuild(Ne,Wt,T),se.onBeforeCompile(Wt,T),Yt=mt.acquireProgram(Wt,yt),on.set(yt,Yt),Ie.uniforms=Wt.uniforms;const sn=Ie.uniforms;return(!se.isShaderMaterial&&!se.isRawShaderMaterial||se.clipping===!0)&&(sn.clippingPlanes=Xt.uniform),Vp(se,Wt),Ie.needsLights=Hp(se),Ie.lightsStateVersion=Ft,Ie.needsLights&&(sn.ambientLightColor.value=Re.state.ambient,sn.lightProbe.value=Re.state.probe,sn.directionalLights.value=Re.state.directional,sn.directionalLightShadows.value=Re.state.directionalShadow,sn.spotLights.value=Re.state.spot,sn.spotLightShadows.value=Re.state.spotShadow,sn.rectAreaLights.value=Re.state.rectArea,sn.ltc_1.value=Re.state.rectAreaLTC1,sn.ltc_2.value=Re.state.rectAreaLTC2,sn.pointLights.value=Re.state.point,sn.pointLightShadows.value=Re.state.pointShadow,sn.hemisphereLights.value=Re.state.hemi,sn.directionalShadowMap.value=Re.state.directionalShadowMap,sn.directionalShadowMatrix.value=Re.state.directionalShadowMatrix,sn.spotShadowMap.value=Re.state.spotShadowMap,sn.spotLightMatrix.value=Re.state.spotLightMatrix,sn.spotLightMap.value=Re.state.spotLightMap,sn.pointShadowMap.value=Re.state.pointShadowMap,sn.pointShadowMatrix.value=Re.state.pointShadowMatrix),Ie.currentProgram=Yt,Ie.uniformsList=null,Yt}function $p(se){if(se.uniformsList===null){const we=se.currentProgram.getUniforms();se.uniformsList=j1.seqWithValue(we.seq,se.uniforms)}return se.uniformsList}function Vp(se,we){const Ne=Ze.get(se);Ne.outputColorSpace=we.outputColorSpace,Ne.batching=we.batching,Ne.instancing=we.instancing,Ne.instancingColor=we.instancingColor,Ne.skinning=we.skinning,Ne.morphTargets=we.morphTargets,Ne.morphNormals=we.morphNormals,Ne.morphColors=we.morphColors,Ne.morphTargetsCount=we.morphTargetsCount,Ne.numClippingPlanes=we.numClippingPlanes,Ne.numIntersection=we.numClipIntersection,Ne.vertexAlphas=we.vertexAlphas,Ne.vertexTangents=we.vertexTangents,Ne.toneMapping=we.toneMapping}function Ry(se,we,Ne,Ie,Re){we.isScene!==!0&&(we=_e),re.resetTextureUnits();const vt=we.fog,Ft=Ie.isMeshStandardMaterial?we.environment:null,Wt=N===null?T.outputColorSpace:N.isXRRenderTarget===!0?N.texture.colorSpace:sc,yt=(Ie.isMeshStandardMaterial?ge:Z).get(Ie.envMap||Ft),on=Ie.vertexColors===!0&&!!Ne.attributes.color&&Ne.attributes.color.itemSize===4,Yt=!!Ne.attributes.tangent&&(!!Ie.normalMap||Ie.anisotropy>0),sn=!!Ne.morphAttributes.position,Yn=!!Ne.morphAttributes.normal,mi=!!Ne.morphAttributes.color;let Jn=Ql;Ie.toneMapped&&(N===null||N.isXRRenderTarget===!0)&&(Jn=T.toneMapping);const Mr=Ne.morphAttributes.position||Ne.morphAttributes.normal||Ne.morphAttributes.color,Lt=Mr!==void 0?Mr.length:0,Et=Ze.get(Ie),br=v.state.lights;if(ce===!0&&(ye===!0||se!==I)){const gi=se===I&&Ie.id===L;Xt.setState(Ie,se,gi)}let yn=!1;Ie.version===Et.__version?(Et.needsLights&&Et.lightsStateVersion!==br.state.version||Et.outputColorSpace!==Wt||Re.isBatchedMesh&&Et.batching===!1||!Re.isBatchedMesh&&Et.batching===!0||Re.isInstancedMesh&&Et.instancing===!1||!Re.isInstancedMesh&&Et.instancing===!0||Re.isSkinnedMesh&&Et.skinning===!1||!Re.isSkinnedMesh&&Et.skinning===!0||Re.isInstancedMesh&&Et.instancingColor===!0&&Re.instanceColor===null||Re.isInstancedMesh&&Et.instancingColor===!1&&Re.instanceColor!==null||Et.envMap!==yt||Ie.fog===!0&&Et.fog!==vt||Et.numClippingPlanes!==void 0&&(Et.numClippingPlanes!==Xt.numPlanes||Et.numIntersection!==Xt.numIntersection)||Et.vertexAlphas!==on||Et.vertexTangents!==Yt||Et.morphTargets!==sn||Et.morphNormals!==Yn||Et.morphColors!==mi||Et.toneMapping!==Jn||Le.isWebGL2===!0&&Et.morphTargetsCount!==Lt)&&(yn=!0):(yn=!0,Et.__version=Ie.version);let wr=Et.currentProgram;yn===!0&&(wr=Cl(Ie,we,Re));let Ka=!1,qi=!1,Pr=!1;const nr=wr.getUniforms(),Os=Et.uniforms;if(Pe.useProgram(wr.program)&&(Ka=!0,qi=!0,Pr=!0),Ie.id!==L&&(L=Ie.id,qi=!0),Ka||I!==se){nr.setValue(ee,"projectionMatrix",se.projectionMatrix),nr.setValue(ee,"viewMatrix",se.matrixWorldInverse);const gi=nr.map.cameraPosition;gi!==void 0&&gi.setValue(ee,be.setFromMatrixPosition(se.matrixWorld)),Le.logarithmicDepthBuffer&&nr.setValue(ee,"logDepthBufFC",2/(Math.log(se.far+1)/Math.LN2)),(Ie.isMeshPhongMaterial||Ie.isMeshToonMaterial||Ie.isMeshLambertMaterial||Ie.isMeshBasicMaterial||Ie.isMeshStandardMaterial||Ie.isShaderMaterial)&&nr.setValue(ee,"isOrthographic",se.isOrthographicCamera===!0),I!==se&&(I=se,qi=!0,Pr=!0)}if(Re.isSkinnedMesh){nr.setOptional(ee,Re,"bindMatrix"),nr.setOptional(ee,Re,"bindMatrixInverse");const gi=Re.skeleton;gi&&(Le.floatVertexTextures?(gi.boneTexture===null&&gi.computeBoneTexture(),nr.setValue(ee,"boneTexture",gi.boneTexture,re)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}Re.isBatchedMesh&&(nr.setOptional(ee,Re,"batchingTexture"),nr.setValue(ee,"batchingTexture",Re._matricesTexture,re));const Uu=Ne.morphAttributes;if((Uu.position!==void 0||Uu.normal!==void 0||Uu.color!==void 0&&Le.isWebGL2===!0)&&un.update(Re,Ne,wr),(qi||Et.receiveShadow!==Re.receiveShadow)&&(Et.receiveShadow=Re.receiveShadow,nr.setValue(ee,"receiveShadow",Re.receiveShadow)),Ie.isMeshGouraudMaterial&&Ie.envMap!==null&&(Os.envMap.value=yt,Os.flipEnvMap.value=yt.isCubeTexture&&yt.isRenderTargetTexture===!1?-1:1),qi&&(nr.setValue(ee,"toneMappingExposure",T.toneMappingExposure),Et.needsLights&&Po(Os,Pr),vt&&Ie.fog===!0&&Xe.refreshFogUniforms(Os,vt),Xe.refreshMaterialUniforms(Os,Ie,te,K,Ce),j1.upload(ee,$p(Et),Os,re)),Ie.isShaderMaterial&&Ie.uniformsNeedUpdate===!0&&(j1.upload(ee,$p(Et),Os,re),Ie.uniformsNeedUpdate=!1),Ie.isSpriteMaterial&&nr.setValue(ee,"center",Re.center),nr.setValue(ee,"modelViewMatrix",Re.modelViewMatrix),nr.setValue(ee,"normalMatrix",Re.normalMatrix),nr.setValue(ee,"modelMatrix",Re.matrixWorld),Ie.isShaderMaterial||Ie.isRawShaderMaterial){const gi=Ie.uniformsGroups;for(let Rl=0,ds=gi.length;Rl<ds;Rl++)if(Le.isWebGL2){const Fu=gi[Rl];Ve.update(Fu,wr),Ve.bind(Fu,wr)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return wr}function Po(se,we){se.ambientLightColor.needsUpdate=we,se.lightProbe.needsUpdate=we,se.directionalLights.needsUpdate=we,se.directionalLightShadows.needsUpdate=we,se.pointLights.needsUpdate=we,se.pointLightShadows.needsUpdate=we,se.spotLights.needsUpdate=we,se.spotLightShadows.needsUpdate=we,se.rectAreaLights.needsUpdate=we,se.hemisphereLights.needsUpdate=we}function Hp(se){return se.isMeshLambertMaterial||se.isMeshToonMaterial||se.isMeshPhongMaterial||se.isMeshStandardMaterial||se.isShadowMaterial||se.isShaderMaterial&&se.lights===!0}this.getActiveCubeFace=function(){return P},this.getActiveMipmapLevel=function(){return R},this.getRenderTarget=function(){return N},this.setRenderTargetTextures=function(se,we,Ne){Ze.get(se.texture).__webglTexture=we,Ze.get(se.depthTexture).__webglTexture=Ne;const Ie=Ze.get(se);Ie.__hasExternalTextures=!0,Ie.__hasExternalTextures&&(Ie.__autoAllocateDepthBuffer=Ne===void 0,Ie.__autoAllocateDepthBuffer||xe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ie.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(se,we){const Ne=Ze.get(se);Ne.__webglFramebuffer=we,Ne.__useDefaultFramebuffer=we===void 0},this.setRenderTarget=function(se,we=0,Ne=0){N=se,P=we,R=Ne;let Ie=!0,Re=null,vt=!1,Ft=!1;if(se){const yt=Ze.get(se);yt.__useDefaultFramebuffer!==void 0?(Pe.bindFramebuffer(ee.FRAMEBUFFER,null),Ie=!1):yt.__webglFramebuffer===void 0?re.setupRenderTarget(se):yt.__hasExternalTextures&&re.rebindTextures(se,Ze.get(se.texture).__webglTexture,Ze.get(se.depthTexture).__webglTexture);const on=se.texture;(on.isData3DTexture||on.isDataArrayTexture||on.isCompressedArrayTexture)&&(Ft=!0);const Yt=Ze.get(se).__webglFramebuffer;se.isWebGLCubeRenderTarget?(Array.isArray(Yt[we])?Re=Yt[we][Ne]:Re=Yt[we],vt=!0):Le.isWebGL2&&se.samples>0&&re.useMultisampledRTT(se)===!1?Re=Ze.get(se).__webglMultisampledFramebuffer:Array.isArray(Yt)?Re=Yt[Ne]:Re=Yt,j.copy(se.viewport),B.copy(se.scissor),H=se.scissorTest}else j.copy(X).multiplyScalar(te).floor(),B.copy(q).multiplyScalar(te).floor(),H=Q;if(Pe.bindFramebuffer(ee.FRAMEBUFFER,Re)&&Le.drawBuffers&&Ie&&Pe.drawBuffers(se,Re),Pe.viewport(j),Pe.scissor(B),Pe.setScissorTest(H),vt){const yt=Ze.get(se.texture);ee.framebufferTexture2D(ee.FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_CUBE_MAP_POSITIVE_X+we,yt.__webglTexture,Ne)}else if(Ft){const yt=Ze.get(se.texture),on=we||0;ee.framebufferTextureLayer(ee.FRAMEBUFFER,ee.COLOR_ATTACHMENT0,yt.__webglTexture,Ne||0,on)}L=-1},this.readRenderTargetPixels=function(se,we,Ne,Ie,Re,vt,Ft){if(!(se&&se.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Wt=Ze.get(se).__webglFramebuffer;if(se.isWebGLCubeRenderTarget&&Ft!==void 0&&(Wt=Wt[Ft]),Wt){Pe.bindFramebuffer(ee.FRAMEBUFFER,Wt);try{const yt=se.texture,on=yt.format,Yt=yt.type;if(on!==Gs&&gt.convert(on)!==ee.getParameter(ee.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const sn=Yt===mv&&(xe.has("EXT_color_buffer_half_float")||Le.isWebGL2&&xe.has("EXT_color_buffer_float"));if(Yt!==Zl&&gt.convert(Yt)!==ee.getParameter(ee.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Yt===pl&&(Le.isWebGL2||xe.has("OES_texture_float")||xe.has("WEBGL_color_buffer_float")))&&!sn){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}we>=0&&we<=se.width-Ie&&Ne>=0&&Ne<=se.height-Re&&ee.readPixels(we,Ne,Ie,Re,gt.convert(on),gt.convert(Yt),vt)}finally{const yt=N!==null?Ze.get(N).__webglFramebuffer:null;Pe.bindFramebuffer(ee.FRAMEBUFFER,yt)}}},this.copyFramebufferToTexture=function(se,we,Ne=0){const Ie=Math.pow(2,-Ne),Re=Math.floor(we.image.width*Ie),vt=Math.floor(we.image.height*Ie);re.setTexture2D(we,0),ee.copyTexSubImage2D(ee.TEXTURE_2D,Ne,0,0,se.x,se.y,Re,vt),Pe.unbindTexture()},this.copyTextureToTexture=function(se,we,Ne,Ie=0){const Re=we.image.width,vt=we.image.height,Ft=gt.convert(Ne.format),Wt=gt.convert(Ne.type);re.setTexture2D(Ne,0),ee.pixelStorei(ee.UNPACK_FLIP_Y_WEBGL,Ne.flipY),ee.pixelStorei(ee.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ne.premultiplyAlpha),ee.pixelStorei(ee.UNPACK_ALIGNMENT,Ne.unpackAlignment),we.isDataTexture?ee.texSubImage2D(ee.TEXTURE_2D,Ie,se.x,se.y,Re,vt,Ft,Wt,we.image.data):we.isCompressedTexture?ee.compressedTexSubImage2D(ee.TEXTURE_2D,Ie,se.x,se.y,we.mipmaps[0].width,we.mipmaps[0].height,Ft,we.mipmaps[0].data):ee.texSubImage2D(ee.TEXTURE_2D,Ie,se.x,se.y,Ft,Wt,we.image),Ie===0&&Ne.generateMipmaps&&ee.generateMipmap(ee.TEXTURE_2D),Pe.unbindTexture()},this.copyTextureToTexture3D=function(se,we,Ne,Ie,Re=0){if(T.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const vt=se.max.x-se.min.x+1,Ft=se.max.y-se.min.y+1,Wt=se.max.z-se.min.z+1,yt=gt.convert(Ie.format),on=gt.convert(Ie.type);let Yt;if(Ie.isData3DTexture)re.setTexture3D(Ie,0),Yt=ee.TEXTURE_3D;else if(Ie.isDataArrayTexture||Ie.isCompressedArrayTexture)re.setTexture2DArray(Ie,0),Yt=ee.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ee.pixelStorei(ee.UNPACK_FLIP_Y_WEBGL,Ie.flipY),ee.pixelStorei(ee.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ie.premultiplyAlpha),ee.pixelStorei(ee.UNPACK_ALIGNMENT,Ie.unpackAlignment);const sn=ee.getParameter(ee.UNPACK_ROW_LENGTH),Yn=ee.getParameter(ee.UNPACK_IMAGE_HEIGHT),mi=ee.getParameter(ee.UNPACK_SKIP_PIXELS),Jn=ee.getParameter(ee.UNPACK_SKIP_ROWS),Mr=ee.getParameter(ee.UNPACK_SKIP_IMAGES),Lt=Ne.isCompressedTexture?Ne.mipmaps[Re]:Ne.image;ee.pixelStorei(ee.UNPACK_ROW_LENGTH,Lt.width),ee.pixelStorei(ee.UNPACK_IMAGE_HEIGHT,Lt.height),ee.pixelStorei(ee.UNPACK_SKIP_PIXELS,se.min.x),ee.pixelStorei(ee.UNPACK_SKIP_ROWS,se.min.y),ee.pixelStorei(ee.UNPACK_SKIP_IMAGES,se.min.z),Ne.isDataTexture||Ne.isData3DTexture?ee.texSubImage3D(Yt,Re,we.x,we.y,we.z,vt,Ft,Wt,yt,on,Lt.data):Ne.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ee.compressedTexSubImage3D(Yt,Re,we.x,we.y,we.z,vt,Ft,Wt,yt,Lt.data)):ee.texSubImage3D(Yt,Re,we.x,we.y,we.z,vt,Ft,Wt,yt,on,Lt),ee.pixelStorei(ee.UNPACK_ROW_LENGTH,sn),ee.pixelStorei(ee.UNPACK_IMAGE_HEIGHT,Yn),ee.pixelStorei(ee.UNPACK_SKIP_PIXELS,mi),ee.pixelStorei(ee.UNPACK_SKIP_ROWS,Jn),ee.pixelStorei(ee.UNPACK_SKIP_IMAGES,Mr),Re===0&&Ie.generateMipmaps&&ee.generateMipmap(Yt),Pe.unbindTexture()},this.initTexture=function(se){se.isCubeTexture?re.setTextureCube(se,0):se.isData3DTexture?re.setTexture3D(se,0):se.isDataArrayTexture||se.isCompressedArrayTexture?re.setTexture2DArray(se,0):re.setTexture2D(se,0),Pe.unbindTexture()},this.resetState=function(){P=0,R=0,N=null,Pe.reset(),ue.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ml}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===ZT?"display-p3":"srgb",n.unpackColorSpace=qn.workingColorSpace===Mw?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Pi?Gd:zL}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Gd?Pi:sc}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class GJ extends QL{}GJ.prototype.isWebGL1Renderer=!0;class nA{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new St(e),this.density=n}clone(){return new nA(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class rA{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new St(e),this.near=n,this.far=r}clone(){return new rA(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class ZL extends Dn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}}class iA{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=fb,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Ha()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ha()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ha()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const $s=new ae;class up{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)$s.fromBufferAttribute(this,n),$s.applyMatrix4(e),this.setXYZ(n,$s.x,$s.y,$s.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)$s.fromBufferAttribute(this,n),$s.applyNormalMatrix(e),this.setXYZ(n,$s.x,$s.y,$s.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)$s.fromBufferAttribute(this,n),$s.transformDirection(e),this.setXYZ(n,$s.x,$s.y,$s.z);return this}setX(e,n){return this.normalized&&(n=_n(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=_n(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=_n(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=_n(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=pa(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=pa(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=pa(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=pa(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=_n(n,this.array),r=_n(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=_n(n,this.array),r=_n(r,this.array),i=_n(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=_n(n,this.array),r=_n(r,this.array),i=_n(i,this.array),s=_n(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return new Xn(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new up(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class e3 extends Rs{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new St(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let hg;const j0=new ae,pg=new ae,mg=new ae,gg=new ze,L0=new ze,qJ=new cn,IS=new ae,U0=new ae,kS=new ae,g5=new ze,lC=new ze,v5=new ze;class KJ extends Dn{constructor(e=new e3){if(super(),this.isSprite=!0,this.type="Sprite",hg===void 0){hg=new Tn;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new iA(n,5);hg.setIndex([0,1,2,0,2,3]),hg.setAttribute("position",new up(r,3,0,!1)),hg.setAttribute("uv",new up(r,2,3,!1))}this.geometry=hg,this.material=e,this.center=new ze(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),pg.setFromMatrixScale(this.matrixWorld),qJ.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),mg.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&pg.multiplyScalar(-mg.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const a=this.center;DS(IS.set(-.5,-.5,0),mg,a,pg,i,s),DS(U0.set(.5,-.5,0),mg,a,pg,i,s),DS(kS.set(.5,.5,0),mg,a,pg,i,s),g5.set(0,0),lC.set(1,0),v5.set(1,1);let o=e.ray.intersectTriangle(IS,U0,kS,!1,j0);if(o===null&&(DS(U0.set(-.5,.5,0),mg,a,pg,i,s),lC.set(0,1),o=e.ray.intersectTriangle(IS,kS,U0,!1,j0),o===null))return;const l=e.ray.origin.distanceTo(j0);l<e.near||l>e.far||n.push({distance:l,point:j0.clone(),uv:ha.getInterpolation(j0,IS,U0,kS,g5,lC,v5,new ze),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function DS(t,e,n,r,i,s){gg.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(L0.x=s*gg.x-i*gg.y,L0.y=i*gg.x+s*gg.y):L0.copy(gg),t.copy(e),t.x+=L0.x,t.y+=L0.y,t.applyMatrix4(qJ)}const jS=new ae,y5=new ae;class XJ extends Dn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,r=0){n=Math.abs(n);const i=this.levels;let s;for(s=0;s<i.length&&!(n<i[s].distance);s++);return i.splice(s,0,{distance:n,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,i;for(r=1,i=n.length;r<i;r++){let s=n[r].distance;if(n[r].object.visible&&(s-=s*n[r].hysteresis),e<s)break}return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){jS.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(jS);this.getObjectForDistance(i).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){jS.setFromMatrixPosition(e.matrixWorld),y5.setFromMatrixPosition(this.matrixWorld);const r=jS.distanceTo(y5)/e.zoom;n[0].object.visible=!0;let i,s;for(i=1,s=n.length;i<s;i++){let a=n[i].distance;if(n[i].object.visible&&(a-=a*n[i].hysteresis),r>=a)n[i-1].object.visible=!1,n[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)n[i].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const a=r[i];n.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return n}}const x5=new ae,b5=new Kn,w5=new Kn,lMe=new ae,_5=new cn,LS=new ae,cC=new Cs,S5=new cn,uC=new Rp;class YJ extends Ci{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=$I,this.bindMatrix=new cn,this.bindMatrixInverse=new cn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ys),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,LS),this.boundingBox.expandByPoint(LS)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Cs),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,LS),this.boundingSphere.expandByPoint(LS)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),cC.copy(this.boundingSphere),cC.applyMatrix4(i),e.ray.intersectsSphere(cC)!==!1&&(S5.copy(i).invert(),uC.copy(e.ray).applyMatrix4(S5),!(this.boundingBox!==null&&uC.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,uC)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Kn,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===$I?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===lJ?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,i=this.geometry;b5.fromBufferAttribute(i.attributes.skinIndex,e),w5.fromBufferAttribute(i.attributes.skinWeight,e),x5.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const a=w5.getComponent(s);if(a!==0){const o=b5.getComponent(s);_5.multiplyMatrices(r.bones[o].matrixWorld,r.boneInverses[o]),n.addScaledVector(lMe.copy(x5).applyMatrix4(_5),a)}}return n.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,n){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,n)}}class t3 extends Dn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class tp extends ti{constructor(e=null,n=1,r=1,i,s,a,o,l,c=Zr,u=Zr,d,h){super(null,a,o,l,c,u,i,s,d,h),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const E5=new cn,cMe=new cn;class sA{constructor(e=[],n=[]){this.uuid=Ha(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new cn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new cn;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const o=e[s]?e[s].matrixWorld:cMe;E5.multiplyMatrices(o,n[s]),E5.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new sA(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new tp(n,e,e,Gs,pl);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let a=n[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new t3),this.bones.push(a),this.boneInverses.push(new cn().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,s=n.length;i<s;i++){const a=n[i];e.bones.push(a.uuid);const o=r[i];e.boneInverses.push(o.toArray())}return e}}class xv extends Xn{constructor(e,n,r,i=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const vg=new cn,T5=new cn,US=[],A5=new Ys,uMe=new cn,F0=new Ci,B0=new Cs;class JJ extends Ci{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new xv(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,uMe)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new Ys),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,vg),A5.copy(e.boundingBox).applyMatrix4(vg),this.boundingBox.union(A5)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new Cs),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,vg),B0.copy(e.boundingSphere).applyMatrix4(vg),this.boundingSphere.union(B0)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const r=this.matrixWorld,i=this.count;if(F0.geometry=this.geometry,F0.material=this.material,F0.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),B0.copy(this.boundingSphere),B0.applyMatrix4(r),e.ray.intersectsSphere(B0)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,vg),T5.multiplyMatrices(r,vg),F0.matrixWorld=T5,F0.raycast(e,US);for(let a=0,o=US.length;a<o;a++){const l=US[a];l.instanceId=s,l.object=this,n.push(l)}US.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new xv(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function dMe(t,e){return t.z-e.z}function fMe(t,e){return e.z-t.z}class hMe{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n){const r=this.pool,i=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1});const s=r[this.index];i.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=n}reset(){this.list.length=0,this.index=0}}const yg="batchId",Ad=new cn,M5=new cn,pMe=new cn,P5=new cn,dC=new Rw,FS=new Ys,mh=new Cs,z0=new ae,fC=new hMe,ws=new Ci,BS=[];function mMe(t,e,n=0){const r=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const i=t.count;for(let s=0;s<i;s++)for(let a=0;a<r;a++)e.setComponent(s+n,a,t.getComponent(s,a))}else e.array.set(t.array,n*r);e.needsUpdate=!0}class QJ extends Ci{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,n,r=n*2,i){super(new Tn,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=n,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),r=new tp(n,e,e,Gs,pl);this._matricesTexture=r}_initializeGeometry(e){const n=this.geometry,r=this._maxVertexCount,i=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const o in e.attributes){const l=e.getAttribute(o),{array:c,itemSize:u,normalized:d}=l,h=new c.constructor(r*u),m=new l.constructor(h,u,d);m.setUsage(l.usage),n.setAttribute(o,m)}if(e.getIndex()!==null){const o=r>65536?new Uint32Array(s):new Uint16Array(s);n.setIndex(new Xn(o,1))}const a=i>65536?new Uint32Array(r):new Uint16Array(r);n.setAttribute(yg,new Xn(a,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(yg))throw new Error(`BatchedMesh: Geometry cannot use attribute "${yg}"`);const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in n.attributes){if(r===yg)continue;if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=n.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ys);const e=this._geometryCount,n=this.boundingBox,r=this._active;n.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,Ad),this.getBoundingBoxAt(i,FS).applyMatrix4(Ad),n.union(FS))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Cs);const e=this._geometryCount,n=this.boundingSphere,r=this._active;n.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,Ad),this.getBoundingSphereAt(i,mh).applyMatrix4(Ad),n.union(mh))}addGeometry(e,n=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const a=this._reservedRanges,o=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=a[a.length-1]),n===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=n,s===null?i.vertexStart=0:i.vertexStart=s.vertexStart+s.vertexCount;const c=e.getIndex(),u=c!==null;if(u&&(r===-1?i.indexCount=c.count:i.indexCount=r,s===null?i.indexStart=0:i.indexStart=s.indexStart+s.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const d=this._visibility,h=this._active,m=this._matricesTexture,b=this._matricesTexture.image.data;d.push(!0),h.push(!0);const x=this._geometryCount;this._geometryCount++,pMe.toArray(b,x*16),m.needsUpdate=!0,a.push(i),o.push({start:u?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Ys,sphereInitialized:!1,sphere:new Cs});const v=this.geometry.getAttribute(yg);for(let _=0;_<i.vertexCount;_++)v.setX(i.vertexStart+_,x);return v.needsUpdate=!0,this.setGeometryAt(x,e),x}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),a=n.getIndex(),o=this._reservedRanges[e];if(i&&a.count>o.indexCount||n.attributes.position.count>o.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=o.vertexStart,c=o.vertexCount;for(const m in r.attributes){if(m===yg)continue;const b=n.getAttribute(m),x=r.getAttribute(m);mMe(b,x,l);const v=b.itemSize;for(let _=b.count,E=c;_<E;_++){const T=l+_;for(let A=0;A<v;A++)x.setComponent(T,A,0)}x.needsUpdate=!0}if(i){const m=o.indexStart;for(let b=0;b<a.count;b++)s.setX(m+b,l+a.getX(b));for(let b=a.count,x=o.indexCount;b<x;b++)s.setX(m+b,l);s.needsUpdate=!0}const u=this._bounds[e];n.boundingBox!==null?(u.box.copy(n.boundingBox),u.boxInitialized=!0):u.boxInitialized=!1,n.boundingSphere!==null?(u.sphere.copy(n.boundingSphere),u.sphereInitialized=!0):u.sphereInitialized=!1;const d=this._drawRanges[e],h=n.getAttribute("position");return d.count=i?a.count:h.count,this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._active;return e>=n.length||n[e]===!1?this:(n[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,n){if(this._active[e]===!1)return this;const i=this._bounds[e],s=i.box,a=this.geometry;if(i.boxInitialized===!1){s.makeEmpty();const o=a.index,l=a.attributes.position,c=this._drawRanges[e];for(let u=c.start,d=c.start+c.count;u<d;u++){let h=u;o&&(h=o.getX(h)),s.expandByPoint(z0.fromBufferAttribute(l,h))}i.boxInitialized=!0}return n.copy(s),n}getBoundingSphereAt(e,n){if(this._active[e]===!1)return this;const i=this._bounds[e],s=i.sphere,a=this.geometry;if(i.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,FS),FS.getCenter(s.center);const o=a.index,l=a.attributes.position,c=this._drawRanges[e];let u=0;for(let d=c.start,h=c.start+c.count;d<h;d++){let m=d;o&&(m=o.getX(m)),z0.fromBufferAttribute(l,m),u=Math.max(u,s.center.distanceToSquared(z0))}s.radius=Math.sqrt(u),i.sphereInitialized=!0}return n.copy(s),n}setMatrixAt(e,n){const r=this._active,i=this._matricesTexture,s=this._matricesTexture.image.data,a=this._geometryCount;return e>=a||r[e]===!1?this:(n.toArray(s,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,n){const r=this._active,i=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||r[e]===!1?null:n.fromArray(i,e*16)}setVisibleAt(e,n){const r=this._visibility,i=this._active,s=this._geometryCount;return e>=s||i[e]===!1||r[e]===n?this:(r[e]=n,this._visibilityChanged=!0,this)}getVisibleAt(e){const n=this._visibility,r=this._active,i=this._geometryCount;return e>=i||r[e]===!1?!1:n[e]}raycast(e,n){const r=this._visibility,i=this._active,s=this._drawRanges,a=this._geometryCount,o=this.matrixWorld,l=this.geometry;ws.material=this.material,ws.geometry.index=l.index,ws.geometry.attributes=l.attributes,ws.geometry.boundingBox===null&&(ws.geometry.boundingBox=new Ys),ws.geometry.boundingSphere===null&&(ws.geometry.boundingSphere=new Cs);for(let c=0;c<a;c++){if(!r[c]||!i[c])continue;const u=s[c];ws.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(c,ws.matrixWorld).premultiply(o),this.getBoundingBoxAt(c,ws.geometry.boundingBox),this.getBoundingSphereAt(c,ws.geometry.boundingSphere),ws.raycast(e,BS);for(let d=0,h=BS.length;d<h;d++){const m=BS[d];m.object=this,m.batchId=c,n.push(m)}BS.length=0}ws.material=null,ws.geometry.index=null,ws.geometry.attributes={},ws.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(n=>({...n})),this._reservedRanges=e._reservedRanges.map(n=>({...n})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(n=>({boxInitialized:n.boxInitialized,box:n.box.clone(),sphereInitialized:n.sphereInitialized,sphere:n.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,n,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=i.getIndex(),o=a===null?1:a.array.BYTES_PER_ELEMENT,l=this._visibility,c=this._multiDrawStarts,u=this._multiDrawCounts,d=this._drawRanges,h=this.perObjectFrustumCulled;h&&(P5.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),dC.setFromProjectionMatrix(P5,e.isWebGPURenderer?gv:ml));let m=0;if(this.sortObjects){M5.copy(this.matrixWorld).invert(),z0.setFromMatrixPosition(r.matrixWorld).applyMatrix4(M5);for(let v=0,_=l.length;v<_;v++)if(l[v]){this.getMatrixAt(v,Ad),this.getBoundingSphereAt(v,mh).applyMatrix4(Ad);let E=!1;if(h&&(E=!dC.intersectsSphere(mh)),!E){const T=z0.distanceTo(mh.center);fC.push(d[v],T)}}const b=fC.list,x=this.customSort;x===null?b.sort(s.transparent?fMe:dMe):x.call(this,b,r);for(let v=0,_=b.length;v<_;v++){const E=b[v];c[m]=E.start*o,u[m]=E.count,m++}fC.reset()}else for(let b=0,x=l.length;b<x;b++)if(l[b]){let v=!1;if(h&&(this.getMatrixAt(b,Ad),this.getBoundingSphereAt(b,mh).applyMatrix4(Ad),v=!dC.intersectsSphere(mh)),!v){const _=d[b];c[m]=_.start*o,u[m]=_.count,m++}}this._multiDrawCount=m,this._visibilityChanged=!1}onBeforeShadow(e,n,r,i,s,a){this.onBeforeRender(e,null,i,s,a)}}class Js extends Rs{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new St(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const C5=new ae,R5=new ae,O5=new cn,hC=new Rp,zS=new Cs;let rf=class extends Dn{constructor(e=new Tn,n=new Js){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,s=n.count;i<s;i++)C5.fromBufferAttribute(n,i-1),R5.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=C5.distanceTo(R5);e.setAttribute("lineDistance",new jt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),zS.copy(r.boundingSphere),zS.applyMatrix4(i),zS.radius+=s,e.ray.intersectsSphere(zS)===!1)return;O5.copy(i).invert(),hC.copy(e.ray).applyMatrix4(O5);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=new ae,u=new ae,d=new ae,h=new ae,m=this.isLineSegments?2:1,b=r.index,v=r.attributes.position;if(b!==null){const _=Math.max(0,a.start),E=Math.min(b.count,a.start+a.count);for(let T=_,A=E-1;T<A;T+=m){const P=b.getX(T),R=b.getX(T+1);if(c.fromBufferAttribute(v,P),u.fromBufferAttribute(v,R),hC.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const L=e.ray.origin.distanceTo(h);L<e.near||L>e.far||n.push({distance:L,point:d.clone().applyMatrix4(this.matrixWorld),index:T,face:null,faceIndex:null,object:this})}}else{const _=Math.max(0,a.start),E=Math.min(v.count,a.start+a.count);for(let T=_,A=E-1;T<A;T+=m){if(c.fromBufferAttribute(v,T),u.fromBufferAttribute(v,T+1),hC.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const R=e.ray.origin.distanceTo(h);R<e.near||R>e.far||n.push({distance:R,point:d.clone().applyMatrix4(this.matrixWorld),index:T,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}};const N5=new ae,I5=new ae;class uc extends rf{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,s=n.count;i<s;i+=2)N5.fromBufferAttribute(n,i),I5.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+N5.distanceTo(I5);e.setAttribute("lineDistance",new jt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class ZJ extends rf{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class n3 extends Rs{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new St(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const k5=new cn,xk=new Rp,$S=new Cs,VS=new ae;class eQ extends Dn{constructor(e=new Tn,n=new n3){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,a=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),$S.copy(r.boundingSphere),$S.applyMatrix4(i),$S.radius+=s,e.ray.intersectsSphere($S)===!1)return;k5.copy(i).invert(),xk.copy(e.ray).applyMatrix4(k5);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=r.index,d=r.attributes.position;if(c!==null){const h=Math.max(0,a.start),m=Math.min(c.count,a.start+a.count);for(let b=h,x=m;b<x;b++){const v=c.getX(b);VS.fromBufferAttribute(d,v),D5(VS,v,l,i,e,n,this)}}else{const h=Math.max(0,a.start),m=Math.min(d.count,a.start+a.count);for(let b=h,x=m;b<x;b++)VS.fromBufferAttribute(d,b),D5(VS,b,l,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function D5(t,e,n,r,i,s,a){const o=xk.distanceSqToPoint(t);if(o<n){const l=new ae;xk.closestPointToPoint(t,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,object:a})}}class gMe extends ti{constructor(e,n,r,i,s,a,o,l,c){super(e,n,r,i,s,a,o,l,c),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:ei,this.magFilter=s!==void 0?s:ei,this.generateMipmaps=!1;const u=this;function d(){u.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class vMe extends ti{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=Zr,this.minFilter=Zr,this.generateMipmaps=!1,this.needsUpdate=!0}}class aA extends ti{constructor(e,n,r,i,s,a,o,l,c,u,d,h){super(null,a,o,l,c,u,i,s,d,h),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class yMe extends aA{constructor(e,n,r,i,s,a){super(e,n,r,s,a),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=As}}class xMe extends aA{constructor(e,n,r){super(void 0,e[0].width,e[0].height,n,r,Eu),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class bMe extends ti{constructor(e,n,r,i,s,a,o,l,c){super(e,n,r,i,s,a,o,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}let Tl=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),s=0;n.push(0);for(let a=1;a<=e;a++)r=this.getPoint(a/e),s+=r.distanceTo(i),n.push(s),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let i=0;const s=r.length;let a;n?a=n:a=e*r[s-1];let o=0,l=s-1,c;for(;o<=l;)if(i=Math.floor(o+(l-o)/2),c=r[i]-a,c<0)o=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===a)return i/(s-1);const u=r[i],h=r[i+1]-u,m=(a-u)/h;return(i+m)/(s-1)}getTangent(e,n){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const a=this.getPoint(i),o=this.getPoint(s),l=n||(a.isVector2?new ze:new ae);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new ae,i=[],s=[],a=[],o=new ae,l=new cn;for(let m=0;m<=e;m++){const b=m/e;i[m]=this.getTangentAt(b,new ae)}s[0]=new ae,a[0]=new ae;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),d=Math.abs(i[0].y),h=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),d<=c&&(c=d,r.set(0,1,0)),h<=c&&r.set(0,0,1),o.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],o),a[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),a[m]=a[m-1].clone(),o.crossVectors(i[m-1],i[m]),o.length()>Number.EPSILON){o.normalize();const b=Math.acos(Hr(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(o,b))}a[m].crossVectors(i[m],s[m])}if(n===!0){let m=Math.acos(Hr(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(o.crossVectors(s[0],s[e]))>0&&(m=-m);for(let b=1;b<=e;b++)s[b].applyMatrix4(l.makeRotationAxis(i[b],m*b)),a[b].crossVectors(i[b],s[b])}return{tangents:i,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}};class oA extends Tl{constructor(e=0,n=0,r=1,i=1,s=0,a=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=o,this.aRotation=l}getPoint(e,n){const r=n||new ze,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(a?s=0:s=i),this.aClockwise===!0&&!a&&(s===i?s=-i:s=s-i);const o=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=l-this.aX,m=c-this.aY;l=h*u-m*d+this.aX,c=h*d+m*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class tQ extends oA{constructor(e,n,r,i,s,a){super(e,n,r,r,i,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function r3(){let t=0,e=0,n=0,r=0;function i(s,a,o,l){t=s,e=o,n=-3*s+3*a-2*o-l,r=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,c){i(a,o,c*(o-s),c*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,c,u,d){let h=(a-s)/c-(o-s)/(c+u)+(o-a)/u,m=(o-a)/u-(l-a)/(u+d)+(l-o)/d;h*=u,m*=u,i(a,o,h,m)},calc:function(s){const a=s*s,o=a*s;return t+e*s+n*a+r*o}}}const HS=new ae,pC=new r3,mC=new r3,gC=new r3;class nQ extends Tl{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new ae){const r=n,i=this.points,s=i.length,a=(s-(this.closed?0:1))*e;let o=Math.floor(a),l=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:l===0&&o===s-1&&(o=s-2,l=1);let c,u;this.closed||o>0?c=i[(o-1)%s]:(HS.subVectors(i[0],i[1]).add(i[0]),c=HS);const d=i[o%s],h=i[(o+1)%s];if(this.closed||o+2<s?u=i[(o+2)%s]:(HS.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=HS),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let b=Math.pow(c.distanceToSquared(d),m),x=Math.pow(d.distanceToSquared(h),m),v=Math.pow(h.distanceToSquared(u),m);x<1e-4&&(x=1),b<1e-4&&(b=x),v<1e-4&&(v=x),pC.initNonuniformCatmullRom(c.x,d.x,h.x,u.x,b,x,v),mC.initNonuniformCatmullRom(c.y,d.y,h.y,u.y,b,x,v),gC.initNonuniformCatmullRom(c.z,d.z,h.z,u.z,b,x,v)}else this.curveType==="catmullrom"&&(pC.initCatmullRom(c.x,d.x,h.x,u.x,this.tension),mC.initCatmullRom(c.y,d.y,h.y,u.y,this.tension),gC.initCatmullRom(c.z,d.z,h.z,u.z,this.tension));return r.set(pC.calc(l),mC.calc(l),gC.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new ae().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function j5(t,e,n,r,i){const s=(r-e)*.5,a=(i-n)*.5,o=t*t,l=t*o;return(2*n-2*r+s+a)*l+(-3*n+3*r-2*s-a)*o+s*t+n}function wMe(t,e){const n=1-t;return n*n*e}function _Me(t,e){return 2*(1-t)*t*e}function SMe(t,e){return t*t*e}function Ax(t,e,n,r){return wMe(t,e)+_Me(t,n)+SMe(t,r)}function EMe(t,e){const n=1-t;return n*n*n*e}function TMe(t,e){const n=1-t;return 3*n*n*t*e}function AMe(t,e){return 3*(1-t)*t*t*e}function MMe(t,e){return t*t*t*e}function Mx(t,e,n,r,i){return EMe(t,e)+TMe(t,n)+AMe(t,r)+MMe(t,i)}class i3 extends Tl{constructor(e=new ze,n=new ze,r=new ze,i=new ze){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new ze){const r=n,i=this.v0,s=this.v1,a=this.v2,o=this.v3;return r.set(Mx(e,i.x,s.x,a.x,o.x),Mx(e,i.y,s.y,a.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class rQ extends Tl{constructor(e=new ae,n=new ae,r=new ae,i=new ae){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new ae){const r=n,i=this.v0,s=this.v1,a=this.v2,o=this.v3;return r.set(Mx(e,i.x,s.x,a.x,o.x),Mx(e,i.y,s.y,a.y,o.y),Mx(e,i.z,s.z,a.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class s3 extends Tl{constructor(e=new ze,n=new ze){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new ze){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new ze){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class iQ extends Tl{constructor(e=new ae,n=new ae){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new ae){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new ae){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class a3 extends Tl{constructor(e=new ze,n=new ze,r=new ze){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new ze){const r=n,i=this.v0,s=this.v1,a=this.v2;return r.set(Ax(e,i.x,s.x,a.x),Ax(e,i.y,s.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class lA extends Tl{constructor(e=new ae,n=new ae,r=new ae){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new ae){const r=n,i=this.v0,s=this.v1,a=this.v2;return r.set(Ax(e,i.x,s.x,a.x),Ax(e,i.y,s.y,a.y),Ax(e,i.z,s.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class o3 extends Tl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new ze){const r=n,i=this.points,s=(i.length-1)*e,a=Math.floor(s),o=s-a,l=i[a===0?a:a-1],c=i[a],u=i[a>i.length-2?i.length-1:a+1],d=i[a>i.length-3?i.length-1:a+2];return r.set(j5(o,l.x,c.x,u.x,d.x),j5(o,l.y,c.y,u.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new ze().fromArray(i))}return this}}var dE=Object.freeze({__proto__:null,ArcCurve:tQ,CatmullRomCurve3:nQ,CubicBezierCurve:i3,CubicBezierCurve3:rQ,EllipseCurve:oA,LineCurve:s3,LineCurve3:iQ,QuadraticBezierCurve:a3,QuadraticBezierCurve3:lA,SplineCurve:o3});class sQ extends Tl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new dE[r](n,e))}return this}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const a=i[s]-r,o=this.curves[s],l=o.getLength(),c=l===0?0:1-a/l;return o.getPointAt(c,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const a=s[i],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,l=a.getPoints(o);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(n.push(u),r=u)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new dE[i.type]().fromJSON(i))}return this}}let pb=class extends sQ{constructor(e){super(),this.type="Path",this.currentPoint=new ze,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new s3(this.currentPoint.clone(),new ze(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const s=new a3(this.currentPoint.clone(),new ze(e,n),new ze(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,s,a){const o=new i3(this.currentPoint.clone(),new ze(e,n),new ze(r,i),new ze(s,a));return this.curves.push(o),this.currentPoint.set(s,a),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new o3(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,s,a){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,n+l,r,i,s,a),this}absarc(e,n,r,i,s,a){return this.absellipse(e,n,r,r,i,s,a),this}ellipse(e,n,r,i,s,a,o,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,n+u,r,i,s,a,o,l),this}absellipse(e,n,r,i,s,a,o,l){const c=new oA(e,n,r,i,s,a,o,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class Nw extends Tn{constructor(e=[new ze(0,-.5),new ze(.5,0),new ze(0,.5)],n=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:i},n=Math.floor(n),i=Hr(i,0,Math.PI*2);const s=[],a=[],o=[],l=[],c=[],u=1/n,d=new ae,h=new ze,m=new ae,b=new ae,x=new ae;let v=0,_=0;for(let E=0;E<=e.length-1;E++)switch(E){case 0:v=e[E+1].x-e[E].x,_=e[E+1].y-e[E].y,m.x=_*1,m.y=-v,m.z=_*0,x.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(x.x,x.y,x.z);break;default:v=e[E+1].x-e[E].x,_=e[E+1].y-e[E].y,m.x=_*1,m.y=-v,m.z=_*0,b.copy(m),m.x+=x.x,m.y+=x.y,m.z+=x.z,m.normalize(),l.push(m.x,m.y,m.z),x.copy(b)}for(let E=0;E<=n;E++){const T=r+E*u*i,A=Math.sin(T),P=Math.cos(T);for(let R=0;R<=e.length-1;R++){d.x=e[R].x*A,d.y=e[R].y,d.z=e[R].x*P,a.push(d.x,d.y,d.z),h.x=E/n,h.y=R/(e.length-1),o.push(h.x,h.y);const N=l[3*R+0]*A,L=l[3*R+1],I=l[3*R+0]*P;c.push(N,L,I)}}for(let E=0;E<n;E++)for(let T=0;T<e.length-1;T++){const A=T+E*e.length,P=A,R=A+e.length,N=A+e.length+1,L=A+1;s.push(P,R,L),s.push(N,L,R)}this.setIndex(s),this.setAttribute("position",new jt(a,3)),this.setAttribute("uv",new jt(o,2)),this.setAttribute("normal",new jt(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nw(e.points,e.segments,e.phiStart,e.phiLength)}}class cA extends Nw{constructor(e=1,n=1,r=4,i=8){const s=new pb;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:r,radialSegments:i}}static fromJSON(e){return new cA(e.radius,e.length,e.capSegments,e.radialSegments)}}class uA extends Tn{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const s=[],a=[],o=[],l=[],c=new ae,u=new ze;a.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let d=0,h=3;d<=n;d++,h+=3){const m=r+d/n*i;c.x=e*Math.cos(m),c.y=e*Math.sin(m),a.push(c.x,c.y,c.z),o.push(0,0,1),u.x=(a[h]/e+1)/2,u.y=(a[h+1]/e+1)/2,l.push(u.x,u.y)}for(let d=1;d<=n;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new jt(a,3)),this.setAttribute("normal",new jt(o,3)),this.setAttribute("uv",new jt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uA(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class my extends Tn{constructor(e=1,n=1,r=1,i=32,s=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const u=[],d=[],h=[],m=[];let b=0;const x=[],v=r/2;let _=0;E(),a===!1&&(e>0&&T(!0),n>0&&T(!1)),this.setIndex(u),this.setAttribute("position",new jt(d,3)),this.setAttribute("normal",new jt(h,3)),this.setAttribute("uv",new jt(m,2));function E(){const A=new ae,P=new ae;let R=0;const N=(n-e)/r;for(let L=0;L<=s;L++){const I=[],j=L/s,B=j*(n-e)+e;for(let H=0;H<=i;H++){const J=H/i,G=J*l+o,W=Math.sin(G),K=Math.cos(G);P.x=B*W,P.y=-j*r+v,P.z=B*K,d.push(P.x,P.y,P.z),A.set(W,N,K).normalize(),h.push(A.x,A.y,A.z),m.push(J,1-j),I.push(b++)}x.push(I)}for(let L=0;L<i;L++)for(let I=0;I<s;I++){const j=x[I][L],B=x[I+1][L],H=x[I+1][L+1],J=x[I][L+1];u.push(j,B,J),u.push(B,H,J),R+=6}c.addGroup(_,R,0),_+=R}function T(A){const P=b,R=new ze,N=new ae;let L=0;const I=A===!0?e:n,j=A===!0?1:-1;for(let H=1;H<=i;H++)d.push(0,v*j,0),h.push(0,j,0),m.push(.5,.5),b++;const B=b;for(let H=0;H<=i;H++){const G=H/i*l+o,W=Math.cos(G),K=Math.sin(G);N.x=I*K,N.y=v*j,N.z=I*W,d.push(N.x,N.y,N.z),h.push(0,j,0),R.x=W*.5+.5,R.y=K*.5*j+.5,m.push(R.x,R.y),b++}for(let H=0;H<i;H++){const J=P+H,G=B+H;A===!0?u.push(G,G+1,J):u.push(G+1,G,J),L+=3}c.addGroup(_,L,A===!0?1:2),_+=L}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new my(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class dA extends my{constructor(e=1,n=1,r=32,i=1,s=!1,a=0,o=Math.PI*2){super(0,e,n,r,i,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new dA(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class pf extends Tn{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const s=[],a=[];o(i),c(r),u(),this.setAttribute("position",new jt(s,3)),this.setAttribute("normal",new jt(s.slice(),3)),this.setAttribute("uv",new jt(a,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function o(E){const T=new ae,A=new ae,P=new ae;for(let R=0;R<n.length;R+=3)m(n[R+0],T),m(n[R+1],A),m(n[R+2],P),l(T,A,P,E)}function l(E,T,A,P){const R=P+1,N=[];for(let L=0;L<=R;L++){N[L]=[];const I=E.clone().lerp(A,L/R),j=T.clone().lerp(A,L/R),B=R-L;for(let H=0;H<=B;H++)H===0&&L===R?N[L][H]=I:N[L][H]=I.clone().lerp(j,H/B)}for(let L=0;L<R;L++)for(let I=0;I<2*(R-L)-1;I++){const j=Math.floor(I/2);I%2===0?(h(N[L][j+1]),h(N[L+1][j]),h(N[L][j])):(h(N[L][j+1]),h(N[L+1][j+1]),h(N[L+1][j]))}}function c(E){const T=new ae;for(let A=0;A<s.length;A+=3)T.x=s[A+0],T.y=s[A+1],T.z=s[A+2],T.normalize().multiplyScalar(E),s[A+0]=T.x,s[A+1]=T.y,s[A+2]=T.z}function u(){const E=new ae;for(let T=0;T<s.length;T+=3){E.x=s[T+0],E.y=s[T+1],E.z=s[T+2];const A=v(E)/2/Math.PI+.5,P=_(E)/Math.PI+.5;a.push(A,1-P)}b(),d()}function d(){for(let E=0;E<a.length;E+=6){const T=a[E+0],A=a[E+2],P=a[E+4],R=Math.max(T,A,P),N=Math.min(T,A,P);R>.9&&N<.1&&(T<.2&&(a[E+0]+=1),A<.2&&(a[E+2]+=1),P<.2&&(a[E+4]+=1))}}function h(E){s.push(E.x,E.y,E.z)}function m(E,T){const A=E*3;T.x=e[A+0],T.y=e[A+1],T.z=e[A+2]}function b(){const E=new ae,T=new ae,A=new ae,P=new ae,R=new ze,N=new ze,L=new ze;for(let I=0,j=0;I<s.length;I+=9,j+=6){E.set(s[I+0],s[I+1],s[I+2]),T.set(s[I+3],s[I+4],s[I+5]),A.set(s[I+6],s[I+7],s[I+8]),R.set(a[j+0],a[j+1]),N.set(a[j+2],a[j+3]),L.set(a[j+4],a[j+5]),P.copy(E).add(T).add(A).divideScalar(3);const B=v(P);x(R,j+0,E,B),x(N,j+2,T,B),x(L,j+4,A,B)}}function x(E,T,A,P){P<0&&E.x===1&&(a[T]=E.x-1),A.x===0&&A.z===0&&(a[T]=P/2/Math.PI+.5)}function v(E){return Math.atan2(E.z,-E.x)}function _(E){return Math.atan2(-E.y,Math.sqrt(E.x*E.x+E.z*E.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pf(e.vertices,e.indices,e.radius,e.details)}}class fA extends pf{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new fA(e.radius,e.detail)}}const WS=new ae,GS=new ae,vC=new ae,qS=new ha;class aQ extends Tn{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const i=Math.pow(10,4),s=Math.cos(Zh*n),a=e.getIndex(),o=e.getAttribute("position"),l=a?a.count:o.count,c=[0,0,0],u=["a","b","c"],d=new Array(3),h={},m=[];for(let b=0;b<l;b+=3){a?(c[0]=a.getX(b),c[1]=a.getX(b+1),c[2]=a.getX(b+2)):(c[0]=b,c[1]=b+1,c[2]=b+2);const{a:x,b:v,c:_}=qS;if(x.fromBufferAttribute(o,c[0]),v.fromBufferAttribute(o,c[1]),_.fromBufferAttribute(o,c[2]),qS.getNormal(vC),d[0]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,d[1]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,d[2]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let E=0;E<3;E++){const T=(E+1)%3,A=d[E],P=d[T],R=qS[u[E]],N=qS[u[T]],L=`${A}_${P}`,I=`${P}_${A}`;I in h&&h[I]?(vC.dot(h[I].normal)<=s&&(m.push(R.x,R.y,R.z),m.push(N.x,N.y,N.z)),h[I]=null):L in h||(h[L]={index0:c[E],index1:c[T],normal:vC.clone()})}}for(const b in h)if(h[b]){const{index0:x,index1:v}=h[b];WS.fromBufferAttribute(o,x),GS.fromBufferAttribute(o,v),m.push(WS.x,WS.y,WS.z),m.push(GS.x,GS.y,GS.z)}this.setAttribute("position",new jt(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}let np=class extends pb{constructor(e){super(e),this.uuid=Ha(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new pb().fromJSON(i))}return this}};const PMe={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let s=oQ(t,0,i,n,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,c,u,d,h,m;if(r&&(s=IMe(t,e,s,n)),t.length>80*n){o=c=t[0],l=u=t[1];for(let b=n;b<i;b+=n)d=t[b],h=t[b+1],d<o&&(o=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);m=Math.max(c-o,u-l),m=m!==0?32767/m:0}return mb(s,a,n,o,l,m,0),a}};function oQ(t,e,n,r,i){let s,a;if(i===HMe(t,e,n,r)>0)for(s=e;s<n;s+=r)a=L5(s,t[s],t[s+1],a);else for(s=n-r;s>=e;s-=r)a=L5(s,t[s],t[s+1],a);return a&&hA(a,a.next)&&(vb(a),a=a.next),a}function dp(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(hA(n,n.next)||Dr(n.prev,n,n.next)===0)){if(vb(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function mb(t,e,n,r,i,s,a){if(!t)return;!a&&s&&UMe(t,r,i,s);let o=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,s?RMe(t,r,i,s):CMe(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),vb(t),t=c.next,o=c.next;continue}if(t=c,t===o){a?a===1?(t=OMe(dp(t),e,n),mb(t,e,n,r,i,s,2)):a===2&&NMe(t,e,n,r,i,s):mb(dp(t),e,n,r,i,s,1);break}}}function CMe(t){const e=t.prev,n=t,r=t.next;if(Dr(e,n,r)>=0)return!1;const i=e.x,s=n.x,a=r.x,o=e.y,l=n.y,c=r.y,u=i<s?i<a?i:a:s<a?s:a,d=o<l?o<c?o:c:l<c?l:c,h=i>s?i>a?i:a:s>a?s:a,m=o>l?o>c?o:c:l>c?l:c;let b=r.next;for(;b!==e;){if(b.x>=u&&b.x<=h&&b.y>=d&&b.y<=m&&zg(i,o,s,l,a,c,b.x,b.y)&&Dr(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function RMe(t,e,n,r){const i=t.prev,s=t,a=t.next;if(Dr(i,s,a)>=0)return!1;const o=i.x,l=s.x,c=a.x,u=i.y,d=s.y,h=a.y,m=o<l?o<c?o:c:l<c?l:c,b=u<d?u<h?u:h:d<h?d:h,x=o>l?o>c?o:c:l>c?l:c,v=u>d?u>h?u:h:d>h?d:h,_=bk(m,b,e,n,r),E=bk(x,v,e,n,r);let T=t.prevZ,A=t.nextZ;for(;T&&T.z>=_&&A&&A.z<=E;){if(T.x>=m&&T.x<=x&&T.y>=b&&T.y<=v&&T!==i&&T!==a&&zg(o,u,l,d,c,h,T.x,T.y)&&Dr(T.prev,T,T.next)>=0||(T=T.prevZ,A.x>=m&&A.x<=x&&A.y>=b&&A.y<=v&&A!==i&&A!==a&&zg(o,u,l,d,c,h,A.x,A.y)&&Dr(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;T&&T.z>=_;){if(T.x>=m&&T.x<=x&&T.y>=b&&T.y<=v&&T!==i&&T!==a&&zg(o,u,l,d,c,h,T.x,T.y)&&Dr(T.prev,T,T.next)>=0)return!1;T=T.prevZ}for(;A&&A.z<=E;){if(A.x>=m&&A.x<=x&&A.y>=b&&A.y<=v&&A!==i&&A!==a&&zg(o,u,l,d,c,h,A.x,A.y)&&Dr(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function OMe(t,e,n){let r=t;do{const i=r.prev,s=r.next.next;!hA(i,s)&&lQ(i,r,r.next,s)&&gb(i,s)&&gb(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),vb(r),vb(r.next),r=t=s),r=r.next}while(r!==t);return dp(r)}function NMe(t,e,n,r,i,s){let a=t;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&zMe(a,o)){let l=cQ(a,o);a=dp(a,a.next),l=dp(l,l.next),mb(a,e,n,r,i,s,0),mb(l,e,n,r,i,s,0);return}o=o.next}a=a.next}while(a!==t)}function IMe(t,e,n,r){const i=[];let s,a,o,l,c;for(s=0,a=e.length;s<a;s++)o=e[s]*r,l=s<a-1?e[s+1]*r:t.length,c=oQ(t,o,l,r,!1),c===c.next&&(c.steiner=!0),i.push(BMe(c));for(i.sort(kMe),s=0;s<i.length;s++)n=DMe(i[s],n);return n}function kMe(t,e){return t.x-e.x}function DMe(t,e){const n=jMe(t,e);if(!n)return e;const r=cQ(n,t);return dp(r,r.next),dp(n,n.next)}function jMe(t,e){let n=e,r=-1/0,i;const s=t.x,a=t.y;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){const h=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(h<=s&&h>r&&(r=h,i=n.x<n.next.x?n:n.next,h===s))return i}n=n.next}while(n!==e);if(!i)return null;const o=i,l=i.x,c=i.y;let u=1/0,d;n=i;do s>=n.x&&n.x>=l&&s!==n.x&&zg(a<c?s:r,a,l,c,a<c?r:s,a,n.x,n.y)&&(d=Math.abs(a-n.y)/(s-n.x),gb(n,t)&&(d<u||d===u&&(n.x>i.x||n.x===i.x&&LMe(i,n)))&&(i=n,u=d)),n=n.next;while(n!==o);return i}function LMe(t,e){return Dr(t.prev,t,e.prev)<0&&Dr(e.next,t,t.next)<0}function UMe(t,e,n,r){let i=t;do i.z===0&&(i.z=bk(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,FMe(i)}function FMe(t){let e,n,r,i,s,a,o,l,c=1;do{for(n=t,t=null,s=null,a=0;n;){for(a++,r=n,o=0,e=0;e<c&&(o++,r=r.nextZ,!!r);e++);for(l=c;o>0||l>0&&r;)o!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,o--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,c*=2}while(a>1);return t}function bk(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function BMe(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function zg(t,e,n,r,i,s,a,o){return(i-a)*(e-o)>=(t-a)*(s-o)&&(t-a)*(r-o)>=(n-a)*(e-o)&&(n-a)*(s-o)>=(i-a)*(r-o)}function zMe(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!$Me(t,e)&&(gb(t,e)&&gb(e,t)&&VMe(t,e)&&(Dr(t.prev,t,e.prev)||Dr(t,e.prev,e))||hA(t,e)&&Dr(t.prev,t,t.next)>0&&Dr(e.prev,e,e.next)>0)}function Dr(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function hA(t,e){return t.x===e.x&&t.y===e.y}function lQ(t,e,n,r){const i=XS(Dr(t,e,n)),s=XS(Dr(t,e,r)),a=XS(Dr(n,r,t)),o=XS(Dr(n,r,e));return!!(i!==s&&a!==o||i===0&&KS(t,n,e)||s===0&&KS(t,r,e)||a===0&&KS(n,t,r)||o===0&&KS(n,e,r))}function KS(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function XS(t){return t>0?1:t<0?-1:0}function $Me(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&lQ(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function gb(t,e){return Dr(t.prev,t,t.next)<0?Dr(t,e,t.next)>=0&&Dr(t,t.prev,e)>=0:Dr(t,e,t.prev)<0||Dr(t,t.next,e)<0}function VMe(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function cQ(t,e){const n=new wk(t.i,t.x,t.y),r=new wk(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function L5(t,e,n,r){const i=new wk(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function vb(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function wk(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function HMe(t,e,n,r){let i=0;for(let s=e,a=n-r;s<n;s+=r)i+=(t[a]-t[s])*(t[s+1]+t[a+1]),a=s;return i}class tc{static area(e){const n=e.length;let r=0;for(let i=n-1,s=0;s<n;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return tc.area(e)<0}static triangulateShape(e,n){const r=[],i=[],s=[];U5(e),F5(r,e);let a=e.length;n.forEach(U5);for(let l=0;l<n.length;l++)i.push(a),a+=n[l].length,F5(r,n[l]);const o=PMe.triangulate(r,i);for(let l=0;l<o.length;l+=3)s.push(o.slice(l,l+3));return s}}function U5(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function F5(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class pA extends Tn{constructor(e=new np([new ze(.5,.5),new ze(-.5,.5),new ze(-.5,-.5),new ze(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let o=0,l=e.length;o<l;o++){const c=e[o];a(c)}this.setAttribute("position",new jt(i,3)),this.setAttribute("uv",new jt(s,2)),this.computeVertexNormals();function a(o){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,u=n.steps!==void 0?n.steps:1,d=n.depth!==void 0?n.depth:1;let h=n.bevelEnabled!==void 0?n.bevelEnabled:!0,m=n.bevelThickness!==void 0?n.bevelThickness:.2,b=n.bevelSize!==void 0?n.bevelSize:m-.1,x=n.bevelOffset!==void 0?n.bevelOffset:0,v=n.bevelSegments!==void 0?n.bevelSegments:3;const _=n.extrudePath,E=n.UVGenerator!==void 0?n.UVGenerator:WMe;let T,A=!1,P,R,N,L;_&&(T=_.getSpacedPoints(u),A=!0,h=!1,P=_.computeFrenetFrames(u,!1),R=new ae,N=new ae,L=new ae),h||(v=0,m=0,b=0,x=0);const I=o.extractPoints(c);let j=I.shape;const B=I.holes;if(!tc.isClockWise(j)){j=j.reverse();for(let ee=0,Me=B.length;ee<Me;ee++){const xe=B[ee];tc.isClockWise(xe)&&(B[ee]=xe.reverse())}}const J=tc.triangulateShape(j,B),G=j;for(let ee=0,Me=B.length;ee<Me;ee++){const xe=B[ee];j=j.concat(xe)}function W(ee,Me,xe){return Me||console.error("THREE.ExtrudeGeometry: vec does not exist"),ee.clone().addScaledVector(Me,xe)}const K=j.length,te=J.length;function z(ee,Me,xe){let Le,Pe,tt;const Ze=ee.x-Me.x,re=ee.y-Me.y,Z=xe.x-ee.x,ge=xe.y-ee.y,$e=Ze*Ze+re*re,Be=Ze*ge-re*Z;if(Math.abs(Be)>Number.EPSILON){const Fe=Math.sqrt($e),mt=Math.sqrt(Z*Z+ge*ge),Xe=Me.x-re/Fe,it=Me.y+Ze/Fe,Nt=xe.x-ge/mt,Xt=xe.y+Z/mt,He=((Nt-Xe)*ge-(Xt-it)*Z)/(Ze*ge-re*Z);Le=Xe+Ze*He-ee.x,Pe=it+re*He-ee.y;const hn=Le*Le+Pe*Pe;if(hn<=2)return new ze(Le,Pe);tt=Math.sqrt(hn/2)}else{let Fe=!1;Ze>Number.EPSILON?Z>Number.EPSILON&&(Fe=!0):Ze<-Number.EPSILON?Z<-Number.EPSILON&&(Fe=!0):Math.sign(re)===Math.sign(ge)&&(Fe=!0),Fe?(Le=-re,Pe=Ze,tt=Math.sqrt($e)):(Le=Ze,Pe=re,tt=Math.sqrt($e/2))}return new ze(Le/tt,Pe/tt)}const V=[];for(let ee=0,Me=G.length,xe=Me-1,Le=ee+1;ee<Me;ee++,xe++,Le++)xe===Me&&(xe=0),Le===Me&&(Le=0),V[ee]=z(G[ee],G[xe],G[Le]);const X=[];let q,Q=V.concat();for(let ee=0,Me=B.length;ee<Me;ee++){const xe=B[ee];q=[];for(let Le=0,Pe=xe.length,tt=Pe-1,Ze=Le+1;Le<Pe;Le++,tt++,Ze++)tt===Pe&&(tt=0),Ze===Pe&&(Ze=0),q[Le]=z(xe[Le],xe[tt],xe[Ze]);X.push(q),Q=Q.concat(q)}for(let ee=0;ee<v;ee++){const Me=ee/v,xe=m*Math.cos(Me*Math.PI/2),Le=b*Math.sin(Me*Math.PI/2)+x;for(let Pe=0,tt=G.length;Pe<tt;Pe++){const Ze=W(G[Pe],V[Pe],Le);he(Ze.x,Ze.y,-xe)}for(let Pe=0,tt=B.length;Pe<tt;Pe++){const Ze=B[Pe];q=X[Pe];for(let re=0,Z=Ze.length;re<Z;re++){const ge=W(Ze[re],q[re],Le);he(ge.x,ge.y,-xe)}}}const ie=b+x;for(let ee=0;ee<K;ee++){const Me=h?W(j[ee],Q[ee],ie):j[ee];A?(N.copy(P.normals[0]).multiplyScalar(Me.x),R.copy(P.binormals[0]).multiplyScalar(Me.y),L.copy(T[0]).add(N).add(R),he(L.x,L.y,L.z)):he(Me.x,Me.y,0)}for(let ee=1;ee<=u;ee++)for(let Me=0;Me<K;Me++){const xe=h?W(j[Me],Q[Me],ie):j[Me];A?(N.copy(P.normals[ee]).multiplyScalar(xe.x),R.copy(P.binormals[ee]).multiplyScalar(xe.y),L.copy(T[ee]).add(N).add(R),he(L.x,L.y,L.z)):he(xe.x,xe.y,d/u*ee)}for(let ee=v-1;ee>=0;ee--){const Me=ee/v,xe=m*Math.cos(Me*Math.PI/2),Le=b*Math.sin(Me*Math.PI/2)+x;for(let Pe=0,tt=G.length;Pe<tt;Pe++){const Ze=W(G[Pe],V[Pe],Le);he(Ze.x,Ze.y,d+xe)}for(let Pe=0,tt=B.length;Pe<tt;Pe++){const Ze=B[Pe];q=X[Pe];for(let re=0,Z=Ze.length;re<Z;re++){const ge=W(Ze[re],q[re],Le);A?he(ge.x,ge.y+T[u-1].y,T[u-1].x+xe):he(ge.x,ge.y,d+xe)}}}ce(),ye();function ce(){const ee=i.length/3;if(h){let Me=0,xe=K*Me;for(let Le=0;Le<te;Le++){const Pe=J[Le];De(Pe[2]+xe,Pe[1]+xe,Pe[0]+xe)}Me=u+v*2,xe=K*Me;for(let Le=0;Le<te;Le++){const Pe=J[Le];De(Pe[0]+xe,Pe[1]+xe,Pe[2]+xe)}}else{for(let Me=0;Me<te;Me++){const xe=J[Me];De(xe[2],xe[1],xe[0])}for(let Me=0;Me<te;Me++){const xe=J[Me];De(xe[0]+K*u,xe[1]+K*u,xe[2]+K*u)}}r.addGroup(ee,i.length/3-ee,0)}function ye(){const ee=i.length/3;let Me=0;Ce(G,Me),Me+=G.length;for(let xe=0,Le=B.length;xe<Le;xe++){const Pe=B[xe];Ce(Pe,Me),Me+=Pe.length}r.addGroup(ee,i.length/3-ee,1)}function Ce(ee,Me){let xe=ee.length;for(;--xe>=0;){const Le=xe;let Pe=xe-1;Pe<0&&(Pe=ee.length-1);for(let tt=0,Ze=u+v*2;tt<Ze;tt++){const re=K*tt,Z=K*(tt+1),ge=Me+Le+re,$e=Me+Pe+re,Be=Me+Pe+Z,Fe=Me+Le+Z;be(ge,$e,Be,Fe)}}}function he(ee,Me,xe){l.push(ee),l.push(Me),l.push(xe)}function De(ee,Me,xe){_e(ee),_e(Me),_e(xe);const Le=i.length/3,Pe=E.generateTopUV(r,i,Le-3,Le-2,Le-1);Ee(Pe[0]),Ee(Pe[1]),Ee(Pe[2])}function be(ee,Me,xe,Le){_e(ee),_e(Me),_e(Le),_e(Me),_e(xe),_e(Le);const Pe=i.length/3,tt=E.generateSideWallUV(r,i,Pe-6,Pe-3,Pe-2,Pe-1);Ee(tt[0]),Ee(tt[1]),Ee(tt[3]),Ee(tt[1]),Ee(tt[2]),Ee(tt[3])}function _e(ee){i.push(l[ee*3+0]),i.push(l[ee*3+1]),i.push(l[ee*3+2])}function Ee(ee){s.push(ee.x),s.push(ee.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return GMe(n,r,e)}static fromJSON(e,n){const r=[];for(let s=0,a=e.shapes.length;s<a;s++){const o=n[e.shapes[s]];r.push(o)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new dE[i.type]().fromJSON(i)),new pA(r,e.options)}}const WMe={generateTopUV:function(t,e,n,r,i){const s=e[n*3],a=e[n*3+1],o=e[r*3],l=e[r*3+1],c=e[i*3],u=e[i*3+1];return[new ze(s,a),new ze(o,l),new ze(c,u)]},generateSideWallUV:function(t,e,n,r,i,s){const a=e[n*3],o=e[n*3+1],l=e[n*3+2],c=e[r*3],u=e[r*3+1],d=e[r*3+2],h=e[i*3],m=e[i*3+1],b=e[i*3+2],x=e[s*3],v=e[s*3+1],_=e[s*3+2];return Math.abs(o-u)<Math.abs(a-c)?[new ze(a,1-l),new ze(c,1-d),new ze(h,1-b),new ze(x,1-_)]:[new ze(o,1-l),new ze(u,1-d),new ze(m,1-b),new ze(v,1-_)]}};function GMe(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const s=t[r];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class mA extends pf{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new mA(e.radius,e.detail)}}class Iw extends pf{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Iw(e.radius,e.detail)}}class gA extends Tn{constructor(e=.5,n=1,r=32,i=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:a},r=Math.max(3,r),i=Math.max(1,i);const o=[],l=[],c=[],u=[];let d=e;const h=(n-e)/i,m=new ae,b=new ze;for(let x=0;x<=i;x++){for(let v=0;v<=r;v++){const _=s+v/r*a;m.x=d*Math.cos(_),m.y=d*Math.sin(_),l.push(m.x,m.y,m.z),c.push(0,0,1),b.x=(m.x/n+1)/2,b.y=(m.y/n+1)/2,u.push(b.x,b.y)}d+=h}for(let x=0;x<i;x++){const v=x*(r+1);for(let _=0;_<r;_++){const E=_+v,T=E,A=E+r+1,P=E+r+2,R=E+1;o.push(T,A,R),o.push(A,P,R)}}this.setIndex(o),this.setAttribute("position",new jt(l,3)),this.setAttribute("normal",new jt(c,3)),this.setAttribute("uv",new jt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gA(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class vA extends Tn{constructor(e=new np([new ze(0,.5),new ze(-.5,-.5),new ze(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],s=[],a=[];let o=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(o,l,u),o+=l,l=0;this.setIndex(r),this.setAttribute("position",new jt(i,3)),this.setAttribute("normal",new jt(s,3)),this.setAttribute("uv",new jt(a,2));function c(u){const d=i.length/3,h=u.extractPoints(n);let m=h.shape;const b=h.holes;tc.isClockWise(m)===!1&&(m=m.reverse());for(let v=0,_=b.length;v<_;v++){const E=b[v];tc.isClockWise(E)===!0&&(b[v]=E.reverse())}const x=tc.triangulateShape(m,b);for(let v=0,_=b.length;v<_;v++){const E=b[v];m=m.concat(E)}for(let v=0,_=m.length;v<_;v++){const E=m[v];i.push(E.x,E.y,0),s.push(0,0,1),a.push(E.x,E.y)}for(let v=0,_=x.length;v<_;v++){const E=x[v],T=E[0]+d,A=E[1]+d,P=E[2]+d;r.push(T,A,P),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return qMe(n,e)}static fromJSON(e,n){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const a=n[e.shapes[i]];r.push(a)}return new vA(r,e.curveSegments)}}function qMe(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class kw extends Tn{constructor(e=1,n=32,r=16,i=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:s,thetaStart:a,thetaLength:o},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(a+o,Math.PI);let c=0;const u=[],d=new ae,h=new ae,m=[],b=[],x=[],v=[];for(let _=0;_<=r;_++){const E=[],T=_/r;let A=0;_===0&&a===0?A=.5/n:_===r&&l===Math.PI&&(A=-.5/n);for(let P=0;P<=n;P++){const R=P/n;d.x=-e*Math.cos(i+R*s)*Math.sin(a+T*o),d.y=e*Math.cos(a+T*o),d.z=e*Math.sin(i+R*s)*Math.sin(a+T*o),b.push(d.x,d.y,d.z),h.copy(d).normalize(),x.push(h.x,h.y,h.z),v.push(R+A,1-T),E.push(c++)}u.push(E)}for(let _=0;_<r;_++)for(let E=0;E<n;E++){const T=u[_][E+1],A=u[_][E],P=u[_+1][E],R=u[_+1][E+1];(_!==0||a>0)&&m.push(T,A,R),(_!==r-1||l<Math.PI)&&m.push(A,P,R)}this.setIndex(m),this.setAttribute("position",new jt(b,3)),this.setAttribute("normal",new jt(x,3)),this.setAttribute("uv",new jt(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kw(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class yA extends pf{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new yA(e.radius,e.detail)}}class xA extends Tn{constructor(e=1,n=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const a=[],o=[],l=[],c=[],u=new ae,d=new ae,h=new ae;for(let m=0;m<=r;m++)for(let b=0;b<=i;b++){const x=b/i*s,v=m/r*Math.PI*2;d.x=(e+n*Math.cos(v))*Math.cos(x),d.y=(e+n*Math.cos(v))*Math.sin(x),d.z=n*Math.sin(v),o.push(d.x,d.y,d.z),u.x=e*Math.cos(x),u.y=e*Math.sin(x),h.subVectors(d,u).normalize(),l.push(h.x,h.y,h.z),c.push(b/i),c.push(m/r)}for(let m=1;m<=r;m++)for(let b=1;b<=i;b++){const x=(i+1)*m+b-1,v=(i+1)*(m-1)+b-1,_=(i+1)*(m-1)+b,E=(i+1)*m+b;a.push(x,v,E),a.push(v,_,E)}this.setIndex(a),this.setAttribute("position",new jt(o,3)),this.setAttribute("normal",new jt(l,3)),this.setAttribute("uv",new jt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xA(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class bA extends Tn{constructor(e=1,n=.4,r=64,i=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:i,p:s,q:a},r=Math.floor(r),i=Math.floor(i);const o=[],l=[],c=[],u=[],d=new ae,h=new ae,m=new ae,b=new ae,x=new ae,v=new ae,_=new ae;for(let T=0;T<=r;++T){const A=T/r*s*Math.PI*2;E(A,s,a,e,m),E(A+.01,s,a,e,b),v.subVectors(b,m),_.addVectors(b,m),x.crossVectors(v,_),_.crossVectors(x,v),x.normalize(),_.normalize();for(let P=0;P<=i;++P){const R=P/i*Math.PI*2,N=-n*Math.cos(R),L=n*Math.sin(R);d.x=m.x+(N*_.x+L*x.x),d.y=m.y+(N*_.y+L*x.y),d.z=m.z+(N*_.z+L*x.z),l.push(d.x,d.y,d.z),h.subVectors(d,m).normalize(),c.push(h.x,h.y,h.z),u.push(T/r),u.push(P/i)}}for(let T=1;T<=r;T++)for(let A=1;A<=i;A++){const P=(i+1)*(T-1)+(A-1),R=(i+1)*T+(A-1),N=(i+1)*T+A,L=(i+1)*(T-1)+A;o.push(P,R,L),o.push(R,N,L)}this.setIndex(o),this.setAttribute("position",new jt(l,3)),this.setAttribute("normal",new jt(c,3)),this.setAttribute("uv",new jt(u,2));function E(T,A,P,R,N){const L=Math.cos(T),I=Math.sin(T),j=P/A*T,B=Math.cos(j);N.x=R*(2+B)*.5*L,N.y=R*(2+B)*I*.5,N.z=R*Math.sin(j)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bA(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class wA extends Tn{constructor(e=new lA(new ae(-1,-1,0),new ae(-1,1,0),new ae(1,1,0)),n=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:i,closed:s};const a=e.computeFrenetFrames(n,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new ae,l=new ae,c=new ze;let u=new ae;const d=[],h=[],m=[],b=[];x(),this.setIndex(b),this.setAttribute("position",new jt(d,3)),this.setAttribute("normal",new jt(h,3)),this.setAttribute("uv",new jt(m,2));function x(){for(let T=0;T<n;T++)v(T);v(s===!1?n:0),E(),_()}function v(T){u=e.getPointAt(T/n,u);const A=a.normals[T],P=a.binormals[T];for(let R=0;R<=i;R++){const N=R/i*Math.PI*2,L=Math.sin(N),I=-Math.cos(N);l.x=I*A.x+L*P.x,l.y=I*A.y+L*P.y,l.z=I*A.z+L*P.z,l.normalize(),h.push(l.x,l.y,l.z),o.x=u.x+r*l.x,o.y=u.y+r*l.y,o.z=u.z+r*l.z,d.push(o.x,o.y,o.z)}}function _(){for(let T=1;T<=n;T++)for(let A=1;A<=i;A++){const P=(i+1)*(T-1)+(A-1),R=(i+1)*T+(A-1),N=(i+1)*T+A,L=(i+1)*(T-1)+A;b.push(P,R,L),b.push(R,N,L)}}function E(){for(let T=0;T<=n;T++)for(let A=0;A<=i;A++)c.x=T/n,c.y=A/i,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new wA(new dE[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class uQ extends Tn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,i=new ae,s=new ae;if(e.index!==null){const a=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const d=l[c],h=d.start,m=d.count;for(let b=h,x=h+m;b<x;b+=3)for(let v=0;v<3;v++){const _=o.getX(b+v),E=o.getX(b+(v+1)%3);i.fromBufferAttribute(a,_),s.fromBufferAttribute(a,E),B5(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let o=0,l=a.count/3;o<l;o++)for(let c=0;c<3;c++){const u=3*o+c,d=3*o+(c+1)%3;i.fromBufferAttribute(a,u),s.fromBufferAttribute(a,d),B5(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new jt(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function B5(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r),n.add(i),!0)}var z5=Object.freeze({__proto__:null,BoxGeometry:Op,CapsuleGeometry:cA,CircleGeometry:uA,ConeGeometry:dA,CylinderGeometry:my,DodecahedronGeometry:fA,EdgesGeometry:aQ,ExtrudeGeometry:pA,IcosahedronGeometry:mA,LatheGeometry:Nw,OctahedronGeometry:Iw,PlaneGeometry:Ow,PolyhedronGeometry:pf,RingGeometry:gA,ShapeGeometry:vA,SphereGeometry:kw,TetrahedronGeometry:yA,TorusGeometry:xA,TorusKnotGeometry:bA,TubeGeometry:wA,WireframeGeometry:uQ});class dQ extends Rs{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new St(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class fQ extends ac{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class l3 extends Rs{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new St(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new St(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ff,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class hQ extends l3{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ze(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Hr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new St(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new St(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new St(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class pQ extends Rs{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new St(16777215),this.specular=new St(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new St(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ff,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Aw,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class mQ extends Rs{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new St(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new St(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ff,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class gQ extends Rs{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ff,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class vQ extends Rs{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new St(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new St(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ff,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Aw,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class yQ extends Rs{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new St(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ff,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class xQ extends Js{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Hh(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function bQ(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function wQ(t){function e(i,s){return t[i]-t[s]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function _k(t,e,n){const r=t.length,i=new t.constructor(r);for(let s=0,a=0;a!==r;++s){const o=n[s]*e;for(let l=0;l!==e;++l)i[a++]=t[o+l]}return i}function c3(t,e,n,r){let i=1,s=t[0];for(;s!==void 0&&s[r]===void 0;)s=t[i++];if(s===void 0)return;let a=s[r];if(a!==void 0)if(Array.isArray(a))do a=s[r],a!==void 0&&(e.push(s.time),n.push.apply(n,a)),s=t[i++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[r],a!==void 0&&(e.push(s.time),a.toArray(n,n.length)),s=t[i++];while(s!==void 0);else do a=s[r],a!==void 0&&(e.push(s.time),n.push(a)),s=t[i++];while(s!==void 0)}function KMe(t,e,n,r,i=30){const s=t.clone();s.name=e;const a=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),d=[],h=[];for(let m=0;m<c.times.length;++m){const b=c.times[m]*i;if(!(b<n||b>=r)){d.push(c.times[m]);for(let x=0;x<u;++x)h.push(c.values[m*u+x])}}d.length!==0&&(c.times=Hh(d,c.times.constructor),c.values=Hh(h,c.values.constructor),a.push(c))}s.tracks=a;let o=1/0;for(let l=0;l<s.tracks.length;++l)o>s.tracks[l].times[0]&&(o=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*o);return s.resetDuration(),s}function XMe(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,s=e/r;for(let a=0;a<i;++a){const o=n.tracks[a],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const c=t.tracks.find(function(_){return _.name===o.name&&_.ValueTypeName===l});if(c===void 0)continue;let u=0;const d=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let h=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=m/3);const b=o.times.length-1;let x;if(s<=o.times[0]){const _=u,E=d-u;x=o.values.slice(_,E)}else if(s>=o.times[b]){const _=b*d+u,E=_+d-u;x=o.values.slice(_,E)}else{const _=o.createInterpolant(),E=u,T=d-u;_.evaluate(s),x=_.resultBuffer.slice(E,T)}l==="quaternion"&&new os().fromArray(x).normalize().conjugate().toArray(x);const v=c.times.length;for(let _=0;_<v;++_){const E=_*m+h;if(l==="quaternion")os.multiplyQuaternionsFlat(c.values,E,x,0,c.values,E);else{const T=m-h*2;for(let A=0;A<T;++A)c.values[E+A]-=x[A]}}}return t.blendMode=BL,t}const YMe={convertArray:Hh,isTypedArray:bQ,getKeyframeOrder:wQ,sortedArray:_k,flattenJSON:c3,subclip:KMe,makeClipAdditive:XMe};class Dw{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],s=n[r-1];e:{t:{let a;n:{r:if(!(e<i)){for(let o=r+2;;){if(i===void 0){if(e<s)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===o)break;if(s=i,i=n[++r],e<i)break t}a=n.length;break n}if(!(e>=s)){const o=n[1];e<o&&(r=2,s=o);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=n[--r-1],e>=s)break t}a=r,r=0;break n}break e}for(;r<a;){const o=r+a>>>1;e<n[o]?a=o:r=o+1}if(i=n[r],s=n[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let a=0;a!==i;++a)n[a]=r[s+a];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class _Q extends Dw{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:zh,endingEnd:zh}}intervalChanged_(e,n,r){const i=this.parameterPositions;let s=e-2,a=e+1,o=i[s],l=i[a];if(o===void 0)switch(this.getSettings_().endingStart){case $h:s=e,o=2*n-r;break;case lb:s=i.length-2,o=n+i[s]-i[s+1];break;default:s=e,o=r}if(l===void 0)switch(this.getSettings_().endingEnd){case $h:a=e,l=2*r-n;break;case lb:a=1,l=r+i[1]-i[0];break;default:a=e-1,l=n}const c=(r-n)*.5,u=this.valueSize;this._weightPrev=c/(n-o),this._weightNext=c/(l-r),this._offsetPrev=s*u,this._offsetNext=a*u}interpolate_(e,n,r,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,m=this._weightNext,b=(r-n)/(i-n),x=b*b,v=x*b,_=-h*v+2*h*x-h*b,E=(1+h)*v+(-1.5-2*h)*x+(-.5+h)*b+1,T=(-1-m)*v+(1.5+m)*x+.5*b,A=m*v-m*x;for(let P=0;P!==o;++P)s[P]=_*a[u+P]+E*a[c+P]+T*a[l+P]+A*a[d+P];return s}}class u3 extends Dw{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=(r-n)/(i-n),d=1-u;for(let h=0;h!==o;++h)s[h]=a[c+h]*d+a[l+h]*u;return s}}class SQ extends Dw{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Al{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Hh(n,this.TimeBufferType),this.values=Hh(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:Hh(e.times,Array),values:Hh(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new SQ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new u3(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new _Q(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case ab:n=this.InterpolantFactoryMethodDiscrete;break;case ob:n=this.InterpolantFactoryMethodLinear;break;case D1:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ab;case this.InterpolantFactoryMethodLinear:return ob;case this.InterpolantFactoryMethodSmooth:return D1}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let s=0,a=i-1;for(;s!==i&&r[s]<e;)++s;for(;a!==-1&&r[a]>n;)--a;if(++a,s!==0||a!==i){s>=a&&(a=Math.max(a,1),s=a-1);const o=this.getValueSize();this.times=r.slice(s,a),this.values=this.values.slice(s*o,a*o)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==s;o++){const l=r[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,a),e=!1;break}a=l}if(i!==void 0&&bQ(i))for(let o=0,l=i.length;o!==l;++o){const c=i[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===D1,s=e.length-1;let a=1;for(let o=1;o<s;++o){let l=!1;const c=e[o],u=e[o+1];if(c!==u&&(o!==1||c!==e[0]))if(i)l=!0;else{const d=o*r,h=d-r,m=d+r;for(let b=0;b!==r;++b){const x=n[d+b];if(x!==n[h+b]||x!==n[m+b]){l=!0;break}}}if(l){if(o!==a){e[a]=e[o];const d=o*r,h=a*r;for(let m=0;m!==r;++m)n[h+m]=n[d+m]}++a}}if(s>0){e[a]=e[s];for(let o=s*r,l=a*r,c=0;c!==r;++c)n[l+c]=n[o+c];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=n.slice(0,a*r)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}Al.prototype.TimeBufferType=Float32Array;Al.prototype.ValueBufferType=Float32Array;Al.prototype.DefaultInterpolation=ob;class Np extends Al{}Np.prototype.ValueTypeName="bool";Np.prototype.ValueBufferType=Array;Np.prototype.DefaultInterpolation=ab;Np.prototype.InterpolantFactoryMethodLinear=void 0;Np.prototype.InterpolantFactoryMethodSmooth=void 0;class d3 extends Al{}d3.prototype.ValueTypeName="color";class yb extends Al{}yb.prototype.ValueTypeName="number";class EQ extends Dw{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=(r-n)/(i-n);let c=e*o;for(let u=c+o;c!==u;c+=4)os.slerpFlat(s,0,a,c-o,a,c,l);return s}}class gy extends Al{InterpolantFactoryMethodLinear(e){return new EQ(this.times,this.values,this.getValueSize(),e)}}gy.prototype.ValueTypeName="quaternion";gy.prototype.DefaultInterpolation=ob;gy.prototype.InterpolantFactoryMethodSmooth=void 0;class Ip extends Al{}Ip.prototype.ValueTypeName="string";Ip.prototype.ValueBufferType=Array;Ip.prototype.DefaultInterpolation=ab;Ip.prototype.InterpolantFactoryMethodLinear=void 0;Ip.prototype.InterpolantFactoryMethodSmooth=void 0;class xb extends Al{}xb.prototype.ValueTypeName="vector";class bb{constructor(e,n=-1,r,i=QT){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=Ha(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let a=0,o=r.length;a!==o;++a)n.push(QMe(r[a]).scale(i));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=r.length;s!==a;++s)n.push(Al.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const s=n.length,a=[];for(let o=0;o<s;o++){let l=[],c=[];l.push((o+s-1)%s,o,(o+1)%s),c.push(0,1,0);const u=wQ(l);l=_k(l,1,u),c=_k(c,1,u),!i&&l[0]===0&&(l.push(s),c.push(c[0])),a.push(new yb(".morphTargetInfluences["+n[o].name+"]",l,c).scale(1/r))}return new this(e,-1,a)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const c=e[o],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let h=i[d];h||(i[d]=h=[]),h.push(c)}}const a=[];for(const o in i)a.push(this.CreateFromMorphTargetSequence(o,i[o],n,r));return a}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(d,h,m,b,x){if(m.length!==0){const v=[],_=[];c3(m,v,_,b),v.length!==0&&x.push(new d(h,v,_))}},i=[],s=e.name||"default",a=e.fps||30,o=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const h=c[d].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const m={};let b;for(b=0;b<h.length;b++)if(h[b].morphTargets)for(let x=0;x<h[b].morphTargets.length;x++)m[h[b].morphTargets[x]]=-1;for(const x in m){const v=[],_=[];for(let E=0;E!==h[b].morphTargets.length;++E){const T=h[b];v.push(T.time),_.push(T.morphTarget===x?1:0)}i.push(new yb(".morphTargetInfluence["+x+"]",v,_))}l=m.length*a}else{const m=".bones["+n[d].name+"]";r(xb,m+".position",h,"pos",i),r(gy,m+".quaternion",h,"rot",i),r(xb,m+".scale",h,"scl",i)}}return i.length===0?null:new this(s,l,i,o)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function JMe(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return yb;case"vector":case"vector2":case"vector3":case"vector4":return xb;case"color":return d3;case"quaternion":return gy;case"bool":case"boolean":return Np;case"string":return Ip}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function QMe(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=JMe(t.type);if(t.times===void 0){const n=[],r=[];c3(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const cu={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class f3{constructor(e,n,r){const i=this;let s=!1,a=0,o=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(u){o++,s===!1&&i.onStart!==void 0&&i.onStart(u,a,o),s=!0},this.itemEnd=function(u){a++,i.onProgress!==void 0&&i.onProgress(u,a,o),a===o&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=c.length;d<h;d+=2){const m=c[d],b=c[d+1];if(m.global&&(m.lastIndex=0),m.test(u))return b}return null}}}const TQ=new f3;class va{constructor(e){this.manager=e!==void 0?e:TQ,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,s){r.load(e,i,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}va.DEFAULT_MATERIAL_NAME="__DEFAULT";const Qc={};class ZMe extends Error{constructor(e,n){super(e),this.response=n}}class Tu extends va{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=cu.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(Qc[e]!==void 0){Qc[e].push({onLoad:n,onProgress:r,onError:i});return}Qc[e]=[],Qc[e].push({onLoad:n,onProgress:r,onError:i});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(a).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Qc[e],d=c.body.getReader(),h=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),m=h?parseInt(h):0,b=m!==0;let x=0;const v=new ReadableStream({start(_){E();function E(){d.read().then(({done:T,value:A})=>{if(T)_.close();else{x+=A.byteLength;const P=new ProgressEvent("progress",{lengthComputable:b,loaded:x,total:m});for(let R=0,N=u.length;R<N;R++){const L=u[R];L.onProgress&&L.onProgress(P)}_.enqueue(A),E()}})}}});return new Response(v)}else throw new ZMe(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,o));case"json":return c.json();default:if(o===void 0)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(o),h=d&&d[1]?d[1].toLowerCase():void 0,m=new TextDecoder(h);return c.arrayBuffer().then(b=>m.decode(b))}}}).then(c=>{cu.add(e,c);const u=Qc[e];delete Qc[e];for(let d=0,h=u.length;d<h;d++){const m=u[d];m.onLoad&&m.onLoad(c)}}).catch(c=>{const u=Qc[e];if(u===void 0)throw this.manager.itemError(e),c;delete Qc[e];for(let d=0,h=u.length;d<h;d++){const m=u[d];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class ePe extends va{constructor(e){super(e)}load(e,n,r,i){const s=this,a=new Tu(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{n(s.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=[];for(let r=0;r<e.length;r++){const i=bb.parse(e[r]);n.push(i)}return n}}class tPe extends va{constructor(e){super(e)}load(e,n,r,i){const s=this,a=[],o=new aA,l=new Tu(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(d){l.load(e[d],function(h){const m=s.parse(h,!0);a[d]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(o.minFilter=ei),o.image=a,o.format=m.format,o.needsUpdate=!0,n&&n(o))},r,i)}if(Array.isArray(e))for(let d=0,h=e.length;d<h;++d)u(d);else l.load(e,function(d){const h=s.parse(d,!0);if(h.isCubemap){const m=h.mipmaps.length/h.mipmapCount;for(let b=0;b<m;b++){a[b]={mipmaps:[]};for(let x=0;x<h.mipmapCount;x++)a[b].mipmaps.push(h.mipmaps[b*h.mipmapCount+x]),a[b].format=h.format,a[b].width=h.width,a[b].height=h.height}o.image=a}else o.image.width=h.width,o.image.height=h.height,o.mipmaps=h.mipmaps;h.mipmapCount===1&&(o.minFilter=ei),o.format=h.format,o.needsUpdate=!0,n&&n(o)},r,i);return o}}class wb extends va{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=cu.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(a),s.manager.itemEnd(e)},0),a;const o=hb("img");function l(){u(),cu.add(e,this),n&&n(this),s.manager.itemEnd(e)}function c(d){u(),i&&i(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){o.removeEventListener("load",l,!1),o.removeEventListener("error",c,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class nPe extends va{constructor(e){super(e)}load(e,n,r,i){const s=new Cw;s.colorSpace=Pi;const a=new wb(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function l(c){a.load(e[c],function(u){s.images[c]=u,o++,o===6&&(s.needsUpdate=!0,n&&n(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class rPe extends va{constructor(e){super(e)}load(e,n,r,i){const s=this,a=new tp,o=new Tu(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(s.withCredentials),o.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(i!==void 0)i(u);else{console.error(u);return}}c.image!==void 0?a.image=c.image:c.data!==void 0&&(a.image.width=c.width,a.image.height=c.height,a.image.data=c.data),a.wrapS=c.wrapS!==void 0?c.wrapS:As,a.wrapT=c.wrapT!==void 0?c.wrapT:As,a.magFilter=c.magFilter!==void 0?c.magFilter:ei,a.minFilter=c.minFilter!==void 0?c.minFilter:ei,a.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?a.colorSpace=c.colorSpace:c.encoding!==void 0&&(a.encoding=c.encoding),c.flipY!==void 0&&(a.flipY=c.flipY),c.format!==void 0&&(a.format=c.format),c.type!==void 0&&(a.type=c.type),c.mipmaps!==void 0&&(a.mipmaps=c.mipmaps,a.minFilter=nf),c.mipmapCount===1&&(a.minFilter=ei),c.generateMipmaps!==void 0&&(a.generateMipmaps=c.generateMipmaps),a.needsUpdate=!0,n&&n(a,c)},r,i),a}}class AQ extends va{constructor(e){super(e)}load(e,n,r,i){const s=new ti,a=new wb(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,n!==void 0&&n(s)},r,i),s}}class mf extends Dn{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new St(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class MQ extends mf{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Dn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new St(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const yC=new cn,$5=new ae,V5=new ae;class h3{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ze(512,512),this.map=null,this.mapPass=null,this.matrix=new cn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Rw,this._frameExtents=new ze(1,1),this._viewportCount=1,this._viewports=[new Kn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;$5.setFromMatrixPosition(e.matrixWorld),n.position.copy($5),V5.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(V5),n.updateMatrixWorld(),yC.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(yC),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(yC)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class iPe extends h3{constructor(){super(new Nr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=vv*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(r!==n.fov||i!==n.aspect||s!==n.far)&&(n.fov=r,n.aspect=i,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class PQ extends mf{constructor(e,n,r=0,i=Math.PI/3,s=0,a=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Dn.DEFAULT_UP),this.updateMatrix(),this.target=new Dn,this.distance=r,this.angle=i,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new iPe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const H5=new cn,$0=new ae,xC=new ae;class sPe extends h3{constructor(){super(new Nr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ze(4,2),this._viewportCount=6,this._viewports=[new Kn(2,1,1,1),new Kn(0,1,1,1),new Kn(3,1,1,1),new Kn(1,1,1,1),new Kn(3,0,1,1),new Kn(1,0,1,1)],this._cubeDirections=[new ae(1,0,0),new ae(-1,0,0),new ae(0,0,1),new ae(0,0,-1),new ae(0,1,0),new ae(0,-1,0)],this._cubeUps=[new ae(0,1,0),new ae(0,1,0),new ae(0,1,0),new ae(0,1,0),new ae(0,0,1),new ae(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),$0.setFromMatrixPosition(e.matrixWorld),r.position.copy($0),xC.copy(r.position),xC.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(xC),r.updateMatrixWorld(),i.makeTranslation(-$0.x,-$0.y,-$0.z),H5.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(H5)}}class CQ extends mf{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new sPe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class aPe extends h3{constructor(){super(new ec(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class RQ extends mf{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Dn.DEFAULT_UP),this.updateMatrix(),this.target=new Dn,this.shadow=new aPe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class OQ extends mf{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class NQ extends mf{constructor(e,n,r=10,i=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class IQ{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ae)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,i=e.y,s=e.z,a=this.coefficients;return n.copy(a[0]).multiplyScalar(.282095),n.addScaledVector(a[1],.488603*i),n.addScaledVector(a[2],.488603*s),n.addScaledVector(a[3],.488603*r),n.addScaledVector(a[4],1.092548*(r*i)),n.addScaledVector(a[5],1.092548*(i*s)),n.addScaledVector(a[6],.315392*(3*s*s-1)),n.addScaledVector(a[7],1.092548*(r*s)),n.addScaledVector(a[8],.546274*(r*r-i*i)),n}getIrradianceAt(e,n){const r=e.x,i=e.y,s=e.z,a=this.coefficients;return n.copy(a[0]).multiplyScalar(.886227),n.addScaledVector(a[1],2*.511664*i),n.addScaledVector(a[2],2*.511664*s),n.addScaledVector(a[3],2*.511664*r),n.addScaledVector(a[4],2*.429043*r*i),n.addScaledVector(a[5],2*.429043*i*s),n.addScaledVector(a[6],.743125*s*s-.247708),n.addScaledVector(a[7],2*.429043*r*s),n.addScaledVector(a[8],.429043*(r*r-i*i)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}static getBasisAt(e,n){const r=e.x,i=e.y,s=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*s,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*r*s,n[8]=.546274*(r*r-i*i)}}class kQ extends mf{constructor(e=new IQ,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class _A extends va{constructor(e){super(e),this.textures={}}load(e,n,r,i){const s=this,a=new Tu(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{n(s.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=this.textures;function r(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const i=_A.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new St().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(i.uniforms[s]={},a.type){case"t":i.uniforms[s].value=r(a.value);break;case"c":i.uniforms[s].value=new St().setHex(a.value);break;case"v2":i.uniforms[s].value=new ze().fromArray(a.value);break;case"v3":i.uniforms[s].value=new ae().fromArray(a.value);break;case"v4":i.uniforms[s].value=new Kn().fromArray(a.value);break;case"m3":i.uniforms[s].value=new Sn().fromArray(a.value);break;case"m4":i.uniforms[s].value=new cn().fromArray(a.value);break;default:i.uniforms[s].value=a.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new ze().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new ze().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:dQ,SpriteMaterial:e3,RawShaderMaterial:fQ,ShaderMaterial:ac,PointsMaterial:n3,MeshPhysicalMaterial:hQ,MeshStandardMaterial:l3,MeshPhongMaterial:pQ,MeshToonMaterial:mQ,MeshNormalMaterial:gQ,MeshLambertMaterial:vQ,MeshDepthMaterial:YL,MeshDistanceMaterial:JL,MeshBasicMaterial:hf,MeshMatcapMaterial:yQ,LineDashedMaterial:xQ,LineBasicMaterial:Js,Material:Rs};return new n[e]}}class Sk{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class DQ extends Tn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class jQ extends va{constructor(e){super(e)}load(e,n,r,i){const s=this,a=new Tu(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{n(s.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n={},r={};function i(m,b){if(n[b]!==void 0)return n[b];const v=m.interleavedBuffers[b],_=s(m,v.buffer),E=Lg(v.type,_),T=new iA(E,v.stride);return T.uuid=v.uuid,n[b]=T,T}function s(m,b){if(r[b]!==void 0)return r[b];const v=m.arrayBuffers[b],_=new Uint32Array(v).buffer;return r[b]=_,_}const a=e.isInstancedBufferGeometry?new DQ:new Tn,o=e.data.index;if(o!==void 0){const m=Lg(o.type,o.array);a.setIndex(new Xn(m,1))}const l=e.data.attributes;for(const m in l){const b=l[m];let x;if(b.isInterleavedBufferAttribute){const v=i(e.data,b.data);x=new up(v,b.itemSize,b.offset,b.normalized)}else{const v=Lg(b.type,b.array),_=b.isInstancedBufferAttribute?xv:Xn;x=new _(v,b.itemSize,b.normalized)}b.name!==void 0&&(x.name=b.name),b.usage!==void 0&&x.setUsage(b.usage),a.setAttribute(m,x)}const c=e.data.morphAttributes;if(c)for(const m in c){const b=c[m],x=[];for(let v=0,_=b.length;v<_;v++){const E=b[v];let T;if(E.isInterleavedBufferAttribute){const A=i(e.data,E.data);T=new up(A,E.itemSize,E.offset,E.normalized)}else{const A=Lg(E.type,E.array);T=new Xn(A,E.itemSize,E.normalized)}E.name!==void 0&&(T.name=E.name),x.push(T)}a.morphAttributes[m]=x}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let m=0,b=d.length;m!==b;++m){const x=d[m];a.addGroup(x.start,x.count,x.materialIndex)}const h=e.data.boundingSphere;if(h!==void 0){const m=new ae;h.center!==void 0&&m.fromArray(h.center),a.boundingSphere=new Cs(m,h.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class oPe extends va{constructor(e){super(e)}load(e,n,r,i){const s=this,a=this.path===""?Sk.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new Tu(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(d){i!==void 0&&i(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,n)},r,i)}async loadAsync(e,n){const r=this,i=this.path===""?Sk.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Tu(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,n),o=JSON.parse(a),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(o)}parse(e,n){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),a=this.parseImages(e.images,function(){n!==void 0&&n(c)}),o=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,s,l,o,r),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),n!==void 0){let d=!1;for(const h in a)if(a[h].data instanceof HTMLImageElement){d=!0;break}d===!1&&n(c)}return c}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,i,o,a,n),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const n={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new np().fromJSON(e[r]);n[s.uuid]=s}return n}parseSkeletons(e,n){const r={},i={};if(n.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=new sA().fromJSON(e[s],i);r[o.uuid]=o}return r}parseGeometries(e,n){const r={};if(e!==void 0){const i=new jQ;for(let s=0,a=e.length;s<a;s++){let o;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(l);break;default:l.type in z5?o=z5[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),l.userData!==void 0&&(o.userData=l.userData),r[l.uuid]=o}}return r}parseMaterials(e,n){const r={},i={};if(e!==void 0){const s=new _A;s.setTextures(n);for(let a=0,o=e.length;a<o;a++){const l=e[a];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=bb.parse(i);n[s.uuid]=s}return n}parseImages(e,n){const r=this,i={};let s;function a(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return a(u)}else return l.data?{data:Lg(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new f3(n);s=new wb(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const d=e[c],h=d.url;if(Array.isArray(h)){const m=[];for(let b=0,x=h.length;b<x;b++){const v=h[b],_=o(v);_!==null&&(_ instanceof HTMLImageElement?m.push(_):m.push(new tp(_.data,_.width,_.height)))}i[d.uuid]=new Vh(m)}else{const m=o(d.url);i[d.uuid]=new Vh(m)}}}return i}async parseImagesAsync(e){const n=this,r={};let i;async function s(a){if(typeof a=="string"){const o=a,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:n.resourcePath+o;return await i.loadAsync(l)}else return a.data?{data:Lg(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){i=new wb(this.manager),i.setCrossOrigin(this.crossOrigin);for(let a=0,o=e.length;a<o;a++){const l=e[a],c=l.url;if(Array.isArray(c)){const u=[];for(let d=0,h=c.length;d<h;d++){const m=c[d],b=await s(m);b!==null&&(b instanceof HTMLImageElement?u.push(b):u.push(new tp(b.data,b.width,b.height)))}r[l.uuid]=new Vh(u)}else{const u=await s(l.url);r[l.uuid]=new Vh(u)}}}return r}parseTextures(e,n){function r(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const i={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=e[s];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),n[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=n[o.image],c=l.data;let u;Array.isArray(c)?(u=new Cw,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new tp:u=new ti,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=o.uuid,o.name!==void 0&&(u.name=o.name),o.mapping!==void 0&&(u.mapping=r(o.mapping,lPe)),o.channel!==void 0&&(u.channel=o.channel),o.offset!==void 0&&u.offset.fromArray(o.offset),o.repeat!==void 0&&u.repeat.fromArray(o.repeat),o.center!==void 0&&u.center.fromArray(o.center),o.rotation!==void 0&&(u.rotation=o.rotation),o.wrap!==void 0&&(u.wrapS=r(o.wrap[0],W5),u.wrapT=r(o.wrap[1],W5)),o.format!==void 0&&(u.format=o.format),o.internalFormat!==void 0&&(u.internalFormat=o.internalFormat),o.type!==void 0&&(u.type=o.type),o.colorSpace!==void 0&&(u.colorSpace=o.colorSpace),o.encoding!==void 0&&(u.encoding=o.encoding),o.minFilter!==void 0&&(u.minFilter=r(o.minFilter,G5)),o.magFilter!==void 0&&(u.magFilter=r(o.magFilter,G5)),o.anisotropy!==void 0&&(u.anisotropy=o.anisotropy),o.flipY!==void 0&&(u.flipY=o.flipY),o.generateMipmaps!==void 0&&(u.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(u.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(u.compareFunction=o.compareFunction),o.userData!==void 0&&(u.userData=o.userData),i[o.uuid]=u}return i}parseObject(e,n,r,i,s){let a;function o(h){return n[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),n[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){const m=[];for(let b=0,x=h.length;b<x;b++){const v=h[b];r[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),m.push(r[v])}return m}return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),r[h]}}function c(h){return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),i[h]}let u,d;switch(e.type){case"Scene":a=new ZL,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new St(e.background):a.background=c(e.background)),e.environment!==void 0&&(a.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new rA(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new nA(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":a=new Nr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new ec(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new OQ(e.color,e.intensity);break;case"DirectionalLight":a=new RQ(e.color,e.intensity);break;case"PointLight":a=new CQ(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new NQ(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new PQ(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new MQ(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new kQ().fromJSON(e);break;case"SkinnedMesh":u=o(e.geometry),d=l(e.material),a=new YJ(u,d),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":u=o(e.geometry),d=l(e.material),a=new Ci(u,d);break;case"InstancedMesh":u=o(e.geometry),d=l(e.material);const h=e.count,m=e.instanceMatrix,b=e.instanceColor;a=new JJ(u,d,h),a.instanceMatrix=new xv(new Float32Array(m.array),16),b!==void 0&&(a.instanceColor=new xv(new Float32Array(b.array),b.itemSize));break;case"BatchedMesh":u=o(e.geometry),d=l(e.material),a=new QJ(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,d),a.geometry=u,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._visibility=e.visibility,a._active=e.active,a._bounds=e.bounds.map(x=>{const v=new Ys;v.min.fromArray(x.boxMin),v.max.fromArray(x.boxMax);const _=new Cs;return _.radius=x.sphereRadius,_.center.fromArray(x.sphereCenter),{boxInitialized:x.boxInitialized,box:v,sphereInitialized:x.sphereInitialized,sphere:_}}),a._maxGeometryCount=e.maxGeometryCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._geometryCount=e.geometryCount,a._matricesTexture=c(e.matricesTexture.uuid);break;case"LOD":a=new XJ;break;case"Line":a=new rf(o(e.geometry),l(e.material));break;case"LineLoop":a=new ZJ(o(e.geometry),l(e.material));break;case"LineSegments":a=new uc(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":a=new eQ(o(e.geometry),l(e.material));break;case"Sprite":a=new KJ(l(e.material));break;case"Group":a=new Bg;break;case"Bone":a=new t3;break;default:a=new Dn}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const h=e.children;for(let m=0;m<h.length;m++)a.add(this.parseObject(h[m],n,r,i,s))}if(e.animations!==void 0){const h=e.animations;for(let m=0;m<h.length;m++){const b=h[m];a.animations.push(s[b])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const h=e.levels;for(let m=0;m<h.length;m++){const b=h[m],x=a.getObjectByProperty("uuid",b.object);x!==void 0&&a.addLevel(x,b.distance,b.hysteresis)}}return a}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=n[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const lPe={UVMapping:YT,CubeReflectionMapping:Eu,CubeRefractionMapping:tf,EquirectangularReflectionMapping:nb,EquirectangularRefractionMapping:rb,CubeUVReflectionMapping:fy},W5={RepeatWrapping:ib,ClampToEdgeWrapping:As,MirroredRepeatWrapping:sb},G5={NearestFilter:Zr,NearestMipmapNearestFilter:lE,NearestMipmapLinearFilter:Sx,LinearFilter:ei,LinearMipmapNearestFilter:NL,LinearMipmapLinearFilter:nf};class cPe extends va{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=cu.get(e);if(a!==void 0){if(s.manager.itemStart(e),a.then){a.then(c=>{n&&n(c),s.manager.itemEnd(e)}).catch(c=>{i&&i(c)});return}return setTimeout(function(){n&&n(a),s.manager.itemEnd(e)},0),a}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader;const l=fetch(e,o).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return cu.add(e,c),n&&n(c),s.manager.itemEnd(e),c}).catch(function(c){i&&i(c),cu.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});cu.add(e,l),s.manager.itemStart(e)}}let YS;class p3{static getContext(){return YS===void 0&&(YS=new(window.AudioContext||window.webkitAudioContext)),YS}static setContext(e){YS=e}}class uPe extends va{constructor(e){super(e)}load(e,n,r,i){const s=this,a=new Tu(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{const c=l.slice(0);p3.getContext().decodeAudioData(c,function(d){n(d)}).catch(o)}catch(c){o(c)}},r,i);function o(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const q5=new cn,K5=new cn,gh=new cn;class dPe{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Nr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Nr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,gh.copy(e.projectionMatrix);const i=n.eyeSep/2,s=i*n.near/n.focus,a=n.near*Math.tan(Zh*n.fov*.5)/n.zoom;let o,l;K5.elements[12]=-i,q5.elements[12]=i,o=-a*n.aspect+s,l=a*n.aspect+s,gh.elements[0]=2*n.near/(l-o),gh.elements[8]=(l+o)/(l-o),this.cameraL.projectionMatrix.copy(gh),o=-a*n.aspect-s,l=a*n.aspect-s,gh.elements[0]=2*n.near/(l-o),gh.elements[8]=(l+o)/(l-o),this.cameraR.projectionMatrix.copy(gh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(K5),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(q5)}}class m3{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=X5(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=X5();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function X5(){return(typeof performance>"u"?Date:performance).now()}const vh=new ae,Y5=new os,fPe=new ae,yh=new ae;class hPe extends Dn{constructor(){super(),this.type="AudioListener",this.context=p3.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new m3}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(vh,Y5,fPe),yh.set(0,0,-1).applyQuaternion(Y5),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(vh.x,i),n.positionY.linearRampToValueAtTime(vh.y,i),n.positionZ.linearRampToValueAtTime(vh.z,i),n.forwardX.linearRampToValueAtTime(yh.x,i),n.forwardY.linearRampToValueAtTime(yh.y,i),n.forwardZ.linearRampToValueAtTime(yh.z,i),n.upX.linearRampToValueAtTime(r.x,i),n.upY.linearRampToValueAtTime(r.y,i),n.upZ.linearRampToValueAtTime(r.z,i)}else n.setPosition(vh.x,vh.y,vh.z),n.setOrientation(yh.x,yh.y,yh.z,r.x,r.y,r.z)}}class LQ extends Dn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const xh=new ae,J5=new os,pPe=new ae,bh=new ae;class mPe extends LQ{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(xh,J5,pPe),bh.set(0,0,1).applyQuaternion(J5);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(xh.x,r),n.positionY.linearRampToValueAtTime(xh.y,r),n.positionZ.linearRampToValueAtTime(xh.z,r),n.orientationX.linearRampToValueAtTime(bh.x,r),n.orientationY.linearRampToValueAtTime(bh.y,r),n.orientationZ.linearRampToValueAtTime(bh.z,r)}else n.setPosition(xh.x,xh.y,xh.z),n.setOrientation(bh.x,bh.y,bh.z)}}class gPe{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class UQ{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,s,a;switch(n){case"quaternion":i=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,s=e*i+i;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==i;++o)r[s+o]=r[o];a=n}else{a+=n;const o=n/a;this._mixBufferRegion(r,s,0,o,i)}this.cumulativeWeight=a}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(r,i,l,1-s,n)}a>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let l=n,c=n+n;l!==c;++l)if(r[l]!==r[l+n]){o.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let s=r,a=i;s!==a;++s)n[s]=n[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,s){if(i>=.5)for(let a=0;a!==s;++a)e[n+a]=e[r+a]}_slerp(e,n,r,i){os.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,s){const a=this._workIndex*s;os.multiplyQuaternionsFlat(e,a,e,n,e,r),os.slerpFlat(e,n,e,n,e,a,i)}_lerp(e,n,r,i,s){const a=1-i;for(let o=0;o!==s;++o){const l=n+o;e[l]=e[l]*a+e[r+o]*i}}_lerpAdditive(e,n,r,i,s){for(let a=0;a!==s;++a){const o=n+a;e[o]=e[o]+e[r+a]*i}}}const g3="\\[\\]\\.:\\/",vPe=new RegExp("["+g3+"]","g"),v3="[^"+g3+"]",yPe="[^"+g3.replace("\\.","")+"]",xPe=/((?:WC+[\/:])*)/.source.replace("WC",v3),bPe=/(WCOD+)?/.source.replace("WCOD",yPe),wPe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",v3),_Pe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",v3),SPe=new RegExp("^"+xPe+bPe+wPe+_Pe+"$"),EPe=["material","materials","bones","map"];class TPe{constructor(e,n,r){const i=r||In.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class In{constructor(e,n,r){this.path=n,this.parsedPath=r||In.parseTrackName(n),this.node=In.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new In.Composite(e,n,r):new In(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(vPe,"")}static parseTrackName(e){const n=SPe.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);EPe.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(s){for(let a=0;a<s.length;a++){const o=s[a];if(o.name===n||o.uuid===n)return o;const l=r(o.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let s=n.propertyIndex;if(e||(e=In.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let c=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const a=e[i];if(a===void 0){const c=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}In.Composite=TPe;In.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};In.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};In.prototype.GetterByBindingType=[In.prototype._getValue_direct,In.prototype._getValue_array,In.prototype._getValue_arrayElement,In.prototype._getValue_toArray];In.prototype.SetterByBindingTypeAndVersioning=[[In.prototype._setValue_direct,In.prototype._setValue_direct_setNeedsUpdate,In.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[In.prototype._setValue_array,In.prototype._setValue_array_setNeedsUpdate,In.prototype._setValue_array_setMatrixWorldNeedsUpdate],[In.prototype._setValue_arrayElement,In.prototype._setValue_arrayElement_setNeedsUpdate,In.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[In.prototype._setValue_fromArray,In.prototype._setValue_fromArray_setNeedsUpdate,In.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class APe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ha(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,a=s.length;let o,l=e.length,c=this.nCachedObjects_;for(let u=0,d=arguments.length;u!==d;++u){const h=arguments[u],m=h.uuid;let b=n[m];if(b===void 0){b=l++,n[m]=b,e.push(h);for(let x=0,v=a;x!==v;++x)s[x].push(new In(h,r[x],i[x]))}else if(b<c){o=e[b];const x=--c,v=e[x];n[v.uuid]=b,e[b]=v,n[m]=x,e[x]=h;for(let _=0,E=a;_!==E;++_){const T=s[_],A=T[x];let P=T[b];T[b]=A,P===void 0&&(P=new In(h,r[_],i[_])),T[x]=P}}else e[b]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const l=arguments[a],c=l.uuid,u=n[c];if(u!==void 0&&u>=s){const d=s++,h=e[d];n[h.uuid]=u,e[u]=h,n[c]=d,e[d]=l;for(let m=0,b=i;m!==b;++m){const x=r[m],v=x[d],_=x[u];x[u]=v,x[d]=_}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,a=e.length;for(let o=0,l=arguments.length;o!==l;++o){const c=arguments[o],u=c.uuid,d=n[u];if(d!==void 0)if(delete n[u],d<s){const h=--s,m=e[h],b=--a,x=e[b];n[m.uuid]=d,e[d]=m,n[x.uuid]=h,e[h]=x,e.pop();for(let v=0,_=i;v!==_;++v){const E=r[v],T=E[h],A=E[b];E[d]=T,E[h]=A,E.pop()}}else{const h=--a,m=e[h];h>0&&(n[m.uuid]=d),e[d]=m,e.pop();for(let b=0,x=i;b!==x;++b){const v=r[b];v[d]=v[h],v.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const a=this._paths,o=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,d=new Array(c);i=s.length,r[e]=i,a.push(e),o.push(n),s.push(d);for(let h=u,m=l.length;h!==m;++h){const b=l[h];d[h]=new In(b,e,n)}return d}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,a=this._bindings,o=a.length-1,l=a[o],c=e[o];n[c]=r,a[r]=l,a.pop(),s[r]=s[o],s.pop(),i[r]=i[o],i.pop()}}}class FQ{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const s=n.tracks,a=s.length,o=new Array(a),l={endingStart:zh,endingEnd:zh};for(let c=0;c!==a;++c){const u=s[c].createInterpolant(null);o[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=yJ,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,s=e._clip.duration,a=s/i,o=i/s;e.warp(1,a,n),this.warp(o,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,s=i.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/a,c[1]=n/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?n=0:(this._startTime=null,n=r*l)}n*=this._updateTimeScale(e);const a=this._updateTime(n),o=this._updateWeight(e);if(o>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case BL:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(a),c[u].accumulateAdditive(o);break;case QT:default:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(a),c[u].accumulate(i,o)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const a=r===xJ;if(e===0)return s===-1?i:a&&(s&1)===1?n-i:i;if(r===vJ){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),i>=n||i<0){const o=Math.floor(i/n);i-=n*o,s+=Math.abs(o);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(a&&(s&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=$h,i.endingEnd=$h):(e?i.endingStart=this.zeroSlopeAtStart?$h:zh:i.endingStart=lb,n?i.endingEnd=this.zeroSlopeAtEnd?$h:zh:i.endingEnd=lb)}_scheduleFading(e,n,r){const i=this._mixer,s=i.time;let a=this._weightInterpolant;a===null&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=s,l[0]=n,o[1]=s+e,l[1]=r,this}}const MPe=new Float32Array(1);class PPe extends Nu{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,a=e._propertyBindings,o=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let d=0;d!==s;++d){const h=i[d],m=h.name;let b=u[m];if(b!==void 0)++b.referenceCount,a[d]=b;else{if(b=a[d],b!==void 0){b._cacheIndex===null&&(++b.referenceCount,this._addInactiveBinding(b,l,m));continue}const x=n&&n._propertyBindings[d].binding.parsedPath;b=new UQ(In.create(r,m,x),h.ValueTypeName,h.getValueSize()),++b.referenceCount,this._addInactiveBinding(b,l,m),a[d]=b}o[d].resultBuffer=b.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,s=this._actionsByClip;let a=s[n];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,o=a[s],l=o.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const d=o.actionByRoot,h=(e._localRoot||this._root).uuid;delete d[h],l.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,s=this._bindings;let a=i[n];a===void 0&&(a={},i[n]=a),a[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,a=this._bindingsByRootAndName,o=a[i],l=n[n.length-1],c=e._cacheIndex;l._cacheIndex=c,n[c]=l,n.pop(),delete o[s],Object.keys(o).length===0&&delete a[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new u3(new Float32Array(2),new Float32Array(2),1,MPe),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=n[i];e.__cacheIndex=i,n[i]=e,s.__cacheIndex=r,n[r]=s}clipAction(e,n,r){const i=n||this._root,s=i.uuid;let a=typeof e=="string"?bb.findByName(i,e):e;const o=a!==null?a.uuid:e,l=this._actionsByClip[o];let c=null;if(r===void 0&&(a!==null?r=a.blendMode:r=QT),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===r)return d;c=l.knownActions[0],a===null&&(a=c._clip)}if(a===null)return null;const u=new FQ(this,a,n,r);return this._bindAction(u,c),this._addInactiveAction(u,o,s),u}existingAction(e,n){const r=n||this._root,i=r.uuid,s=typeof e=="string"?bb.findByName(r,e):e,a=s?s.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let c=0;c!==r;++c)n[c]._update(i,e,s,a);const o=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)o[c].apply(a);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const a=s.knownActions;for(let o=0,l=a.length;o!==l;++o){const c=a[o];this._deactivateAction(c);const u=c._cacheIndex,d=n[n.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,n[u]=d,n.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const a in r){const o=r[a].actionByRoot,l=o[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[n];if(s!==void 0)for(const a in s){const o=s[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class y3{constructor(e){this.value=e}clone(){return new y3(this.value.clone===void 0?this.value:this.value.clone())}}let CPe=0;class RPe extends Nu{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:CPe++}),this.name="",this.usage=fb,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,i=n.length;r<i;r++){const s=Array.isArray(n[r])?n[r]:[n[r]];for(let a=0;a<s.length;a++)this.uniforms.push(s[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class OPe extends iA{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class NPe{constructor(e,n,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class BQ{constructor(e,n,r=0,i=1/0){this.ray=new Rp(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new ep,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,r=[]){return Ek(e,this,r,n),r.sort(Q5),r}intersectObjects(e,n=!0,r=[]){for(let i=0,s=e.length;i<s;i++)Ek(e[i],this,r,n);return r.sort(Q5),r}}function Q5(t,e){return t.distance-e.distance}function Ek(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),r===!0){const i=t.children;for(let s=0,a=i.length;s<a;s++)Ek(i[s],e,n,!0)}}class Tk{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Hr(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class IPe{constructor(e=1,n=0,r=0){return this.radius=e,this.theta=n,this.y=r,this}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}const Z5=new ze;class kPe{constructor(e=new ze(1/0,1/0),n=new ze(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=Z5.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Z5).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const e$=new ae,JS=new ae;class DPe{constructor(e=new ae,n=new ae){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){e$.subVectors(e,this.start),JS.subVectors(this.end,this.start);const r=JS.dot(JS);let s=JS.dot(e$)/r;return n&&(s=Hr(s,0,1)),s}closestPointToPoint(e,n,r){const i=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const t$=new ae;class jPe extends Dn{constructor(e,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new Tn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,o=1,l=32;a<l;a++,o++){const c=a/l*Math.PI*2,u=o/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new jt(i,3));const s=new Js({fog:!1,toneMapped:!1});this.cone=new uc(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),t$.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t$),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Md=new ae,QS=new cn,bC=new cn;class LPe extends uc{constructor(e){const n=zQ(e),r=new Tn,i=[],s=[],a=new St(0,0,1),o=new St(0,1,0);for(let c=0;c<n.length;c++){const u=n[c];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(a.r,a.g,a.b),s.push(o.r,o.g,o.b))}r.setAttribute("position",new jt(i,3)),r.setAttribute("color",new jt(s,3));const l=new Js({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,i=r.getAttribute("position");bC.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<n.length;s++){const o=n[s];o.parent&&o.parent.isBone&&(QS.multiplyMatrices(bC,o.matrixWorld),Md.setFromMatrixPosition(QS),i.setXYZ(a,Md.x,Md.y,Md.z),QS.multiplyMatrices(bC,o.parent.matrixWorld),Md.setFromMatrixPosition(QS),i.setXYZ(a+1,Md.x,Md.y,Md.z),a+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function zQ(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,zQ(t.children[n]));return e}class UPe extends Ci{constructor(e,n,r){const i=new kw(n,4,2),s=new hf({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const FPe=new ae,n$=new St,r$=new St;class BPe extends Dn{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new Iw(n);i.rotateY(Math.PI*.5),this.material=new hf({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),a=new Float32Array(s.count*3);i.setAttribute("color",new Xn(a,3)),this.add(new Ci(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");n$.copy(this.light.color),r$.copy(this.light.groundColor);for(let r=0,i=n.count;r<i;r++){const s=r<i/2?n$:r$;n.setXYZ(r,s.r,s.g,s.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(FPe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class zPe extends uc{constructor(e=10,n=10,r=4473924,i=8947848){r=new St(r),i=new St(i);const s=n/2,a=e/n,o=e/2,l=[],c=[];for(let h=0,m=0,b=-o;h<=n;h++,b+=a){l.push(-o,0,b,o,0,b),l.push(b,0,-o,b,0,o);const x=h===s?r:i;x.toArray(c,m),m+=3,x.toArray(c,m),m+=3,x.toArray(c,m),m+=3,x.toArray(c,m),m+=3}const u=new Tn;u.setAttribute("position",new jt(l,3)),u.setAttribute("color",new jt(c,3));const d=new Js({vertexColors:!0,toneMapped:!1});super(u,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class $Pe extends uc{constructor(e=10,n=16,r=8,i=64,s=4473924,a=8947848){s=new St(s),a=new St(a);const o=[],l=[];if(n>1)for(let d=0;d<n;d++){const h=d/n*(Math.PI*2),m=Math.sin(h)*e,b=Math.cos(h)*e;o.push(0,0,0),o.push(m,0,b);const x=d&1?s:a;l.push(x.r,x.g,x.b),l.push(x.r,x.g,x.b)}for(let d=0;d<r;d++){const h=d&1?s:a,m=e-e/r*d;for(let b=0;b<i;b++){let x=b/i*(Math.PI*2),v=Math.sin(x)*m,_=Math.cos(x)*m;o.push(v,0,_),l.push(h.r,h.g,h.b),x=(b+1)/i*(Math.PI*2),v=Math.sin(x)*m,_=Math.cos(x)*m,o.push(v,0,_),l.push(h.r,h.g,h.b)}}const c=new Tn;c.setAttribute("position",new jt(o,3)),c.setAttribute("color",new jt(l,3));const u=new Js({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const i$=new ae,ZS=new ae,s$=new ae;class VPe extends Dn{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let i=new Tn;i.setAttribute("position",new jt([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new Js({fog:!1,toneMapped:!1});this.lightPlane=new rf(i,s),this.add(this.lightPlane),i=new Tn,i.setAttribute("position",new jt([0,0,0,0,0,1],3)),this.targetLine=new rf(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),i$.setFromMatrixPosition(this.light.matrixWorld),ZS.setFromMatrixPosition(this.light.target.matrixWorld),s$.subVectors(ZS,i$),this.lightPlane.lookAt(ZS),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(ZS),this.targetLine.scale.z=s$.length()}}const e1=new ae,Br=new Pw;class HPe extends uc{constructor(e){const n=new Tn,r=new Js({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],a={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(b,x){l(b),l(x)}function l(b){i.push(0,0,0),s.push(0,0,0),a[b]===void 0&&(a[b]=[]),a[b].push(i.length/3-1)}n.setAttribute("position",new jt(i,3)),n.setAttribute("color",new jt(s,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const c=new St(16755200),u=new St(16711680),d=new St(43775),h=new St(16777215),m=new St(3355443);this.setColors(c,u,d,h,m)}setColors(e,n,r,i,s){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,n.r,n.g,n.b),o.setXYZ(25,n.r,n.g,n.b),o.setXYZ(26,n.r,n.g,n.b),o.setXYZ(27,n.r,n.g,n.b),o.setXYZ(28,n.r,n.g,n.b),o.setXYZ(29,n.r,n.g,n.b),o.setXYZ(30,n.r,n.g,n.b),o.setXYZ(31,n.r,n.g,n.b),o.setXYZ(32,r.r,r.g,r.b),o.setXYZ(33,r.r,r.g,r.b),o.setXYZ(34,r.r,r.g,r.b),o.setXYZ(35,r.r,r.g,r.b),o.setXYZ(36,r.r,r.g,r.b),o.setXYZ(37,r.r,r.g,r.b),o.setXYZ(38,i.r,i.g,i.b),o.setXYZ(39,i.r,i.g,i.b),o.setXYZ(40,s.r,s.g,s.b),o.setXYZ(41,s.r,s.g,s.b),o.setXYZ(42,s.r,s.g,s.b),o.setXYZ(43,s.r,s.g,s.b),o.setXYZ(44,s.r,s.g,s.b),o.setXYZ(45,s.r,s.g,s.b),o.setXYZ(46,s.r,s.g,s.b),o.setXYZ(47,s.r,s.g,s.b),o.setXYZ(48,s.r,s.g,s.b),o.setXYZ(49,s.r,s.g,s.b),o.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;Br.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Jr("c",n,e,Br,0,0,-1),Jr("t",n,e,Br,0,0,1),Jr("n1",n,e,Br,-r,-i,-1),Jr("n2",n,e,Br,r,-i,-1),Jr("n3",n,e,Br,-r,i,-1),Jr("n4",n,e,Br,r,i,-1),Jr("f1",n,e,Br,-r,-i,1),Jr("f2",n,e,Br,r,-i,1),Jr("f3",n,e,Br,-r,i,1),Jr("f4",n,e,Br,r,i,1),Jr("u1",n,e,Br,r*.7,i*1.1,-1),Jr("u2",n,e,Br,-r*.7,i*1.1,-1),Jr("u3",n,e,Br,0,i*2,-1),Jr("cf1",n,e,Br,-r,0,1),Jr("cf2",n,e,Br,r,0,1),Jr("cf3",n,e,Br,0,-i,1),Jr("cf4",n,e,Br,0,i,1),Jr("cn1",n,e,Br,-r,0,-1),Jr("cn2",n,e,Br,r,0,-1),Jr("cn3",n,e,Br,0,-i,-1),Jr("cn4",n,e,Br,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Jr(t,e,n,r,i,s,a){e1.set(i,s,a).unproject(r);const o=e[t];if(o!==void 0){const l=n.getAttribute("position");for(let c=0,u=o.length;c<u;c++)l.setXYZ(o[c],e1.x,e1.y,e1.z)}}const t1=new Ys;class WPe extends uc{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),s=new Tn;s.setIndex(new Xn(r,1)),s.setAttribute("position",new Xn(i,3)),super(s,new Js({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&t1.setFromObject(this.object),t1.isEmpty())return;const n=t1.min,r=t1.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=n.x,s[4]=r.y,s[5]=r.z,s[6]=n.x,s[7]=n.y,s[8]=r.z,s[9]=r.x,s[10]=n.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=n.z,s[15]=n.x,s[16]=r.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=r.x,s[22]=n.y,s[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class GPe extends uc{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Tn;s.setIndex(new Xn(r,1)),s.setAttribute("position",new jt(i,3)),super(s,new Js({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class qPe extends rf{constructor(e,n=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new Tn;a.setAttribute("position",new jt(s,3)),a.computeBoundingSphere(),super(a,new Js({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Tn;l.setAttribute("position",new jt(o,3)),l.computeBoundingSphere(),this.add(new Ci(l,new hf({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const a$=new ae;let n1,wC;class KPe extends Dn{constructor(e=new ae(0,0,1),n=new ae(0,0,0),r=1,i=16776960,s=r*.2,a=s*.2){super(),this.type="ArrowHelper",n1===void 0&&(n1=new Tn,n1.setAttribute("position",new jt([0,0,0,0,1,0],3)),wC=new my(0,.5,1,5,1),wC.translate(0,-.5,0)),this.position.copy(n),this.line=new rf(n1,new Js({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ci(wC,new hf({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{a$.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(a$,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class XPe extends uc{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Tn;i.setAttribute("position",new jt(n,3)),i.setAttribute("color",new jt(r,3));const s=new Js({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,n,r){const i=new St,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(n),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class YPe{constructor(){this.type="ShapePath",this.color=new St,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new pb,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,i){return this.currentPath.quadraticCurveTo(e,n,r,i),this}bezierCurveTo(e,n,r,i,s,a){return this.currentPath.bezierCurveTo(e,n,r,i,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(_){const E=[];for(let T=0,A=_.length;T<A;T++){const P=_[T],R=new np;R.curves=P.curves,E.push(R)}return E}function r(_,E){const T=E.length;let A=!1;for(let P=T-1,R=0;R<T;P=R++){let N=E[P],L=E[R],I=L.x-N.x,j=L.y-N.y;if(Math.abs(j)>Number.EPSILON){if(j<0&&(N=E[R],I=-I,L=E[P],j=-j),_.y<N.y||_.y>L.y)continue;if(_.y===N.y){if(_.x===N.x)return!0}else{const B=j*(_.x-N.x)-I*(_.y-N.y);if(B===0)return!0;if(B<0)continue;A=!A}}else{if(_.y!==N.y)continue;if(L.x<=_.x&&_.x<=N.x||N.x<=_.x&&_.x<=L.x)return!0}}return A}const i=tc.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,o,l;const c=[];if(s.length===1)return o=s[0],l=new np,l.curves=o.curves,c.push(l),c;let u=!i(s[0].getPoints());u=e?!u:u;const d=[],h=[];let m=[],b=0,x;h[b]=void 0,m[b]=[];for(let _=0,E=s.length;_<E;_++)o=s[_],x=o.getPoints(),a=i(x),a=e?!a:a,a?(!u&&h[b]&&b++,h[b]={s:new np,p:x},h[b].s.curves=o.curves,u&&b++,m[b]=[]):m[b].push({h:o,p:x[0]});if(!h[0])return n(s);if(h.length>1){let _=!1,E=0;for(let T=0,A=h.length;T<A;T++)d[T]=[];for(let T=0,A=h.length;T<A;T++){const P=m[T];for(let R=0;R<P.length;R++){const N=P[R];let L=!0;for(let I=0;I<h.length;I++)r(N.p,h[I].p)&&(T!==I&&E++,L?(L=!1,d[I].push(N)):_=!0);L&&d[T].push(N)}}E>0&&_===!1&&(m=d)}let v;for(let _=0,E=h.length;_<E;_++){l=h[_].s,c.push(l),v=m[_];for(let T=0,A=v.length;T<A;T++)l.holes.push(v[T].h)}return c}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:KT}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=KT);const JPe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:OL,AddEquation:Ld,AddOperation:nJ,AdditiveAnimationBlendMode:BL,AdditiveBlending:LI,AgXToneMapping:oJ,AlphaFormat:dJ,AlwaysCompare:CJ,AlwaysDepth:XY,AlwaysStencilFunc:pk,AmbientLight:OQ,AnimationAction:FQ,AnimationClip:bb,AnimationLoader:ePe,AnimationMixer:PPe,AnimationObjectGroup:APe,AnimationUtils:YMe,ArcCurve:tQ,ArrayCamera:WJ,ArrowHelper:KPe,AttachedBindMode:$I,Audio:LQ,AudioAnalyser:gPe,AudioContext:p3,AudioListener:hPe,AudioLoader:uPe,AxesHelper:XPe,BackSide:Hi,BasicDepthPacking:bJ,BasicShadowMap:OY,BatchedMesh:QJ,Bone:t3,BooleanKeyframeTrack:Np,Box2:kPe,Box3:Ys,Box3Helper:GPe,BoxGeometry:Op,BoxHelper:WPe,BufferAttribute:Xn,BufferGeometry:Tn,BufferGeometryLoader:jQ,ByteType:cJ,Cache:cu,Camera:Pw,CameraHelper:HPe,CanvasTexture:bMe,CapsuleGeometry:cA,CatmullRomCurve3:nQ,CineonToneMapping:sJ,CircleGeometry:uA,ClampToEdgeWrapping:As,Clock:m3,Color:St,ColorKeyframeTrack:d3,ColorManagement:qn,CompressedArrayTexture:yMe,CompressedCubeTexture:xMe,CompressedTexture:aA,CompressedTextureLoader:tPe,ConeGeometry:dA,ConstantAlphaFactor:GY,ConstantColorFactor:HY,CubeCamera:jJ,CubeReflectionMapping:Eu,CubeRefractionMapping:tf,CubeTexture:Cw,CubeTextureLoader:nPe,CubeUVReflectionMapping:fy,CubicBezierCurve:i3,CubicBezierCurve3:rQ,CubicInterpolant:_Q,CullFaceBack:jI,CullFaceFront:RY,CullFaceFrontBack:o_e,CullFaceNone:CY,Curve:Tl,CurvePath:sQ,CustomBlending:NY,CustomToneMapping:aJ,CylinderGeometry:my,Cylindrical:IPe,Data3DTexture:WL,DataArrayTexture:eA,DataTexture:tp,DataTextureLoader:rPe,DataUtils:vSe,DecrementStencilOp:x_e,DecrementWrapStencilOp:w_e,DefaultLoadingManager:TQ,DepthFormat:Wd,DepthStencilFormat:cp,DepthTexture:XL,DetachedBindMode:lJ,DirectionalLight:RQ,DirectionalLightHelper:VPe,DiscreteInterpolant:SQ,DisplayP3ColorSpace:ZT,DodecahedronGeometry:fA,DoubleSide:Fa,DstAlphaFactor:FY,DstColorFactor:zY,DynamicCopyUsage:j_e,DynamicDrawUsage:R_e,DynamicReadUsage:I_e,EdgesGeometry:aQ,EllipseCurve:oA,EqualCompare:TJ,EqualDepth:JY,EqualStencilFunc:T_e,EquirectangularReflectionMapping:nb,EquirectangularRefractionMapping:rb,Euler:hy,EventDispatcher:Nu,ExtrudeGeometry:pA,FileLoader:Tu,Float16BufferAttribute:SSe,Float32BufferAttribute:jt,Float64BufferAttribute:ESe,FloatType:pl,Fog:rA,FogExp2:nA,FramebufferTexture:vMe,FrontSide:Sl,Frustum:Rw,GLBufferAttribute:NPe,GLSL1:U_e,GLSL3:mk,GreaterCompare:AJ,GreaterDepth:ZY,GreaterEqualCompare:PJ,GreaterEqualDepth:QY,GreaterEqualStencilFunc:C_e,GreaterStencilFunc:M_e,GridHelper:zPe,Group:Bg,HalfFloatType:mv,HemisphereLight:MQ,HemisphereLightHelper:BPe,IcosahedronGeometry:mA,ImageBitmapLoader:cPe,ImageLoader:wb,ImageUtils:HL,IncrementStencilOp:y_e,IncrementWrapStencilOp:b_e,InstancedBufferAttribute:xv,InstancedBufferGeometry:DQ,InstancedInterleavedBuffer:OPe,InstancedMesh:JJ,Int16BufferAttribute:wSe,Int32BufferAttribute:_Se,Int8BufferAttribute:ySe,IntType:IL,InterleavedBuffer:iA,InterleavedBufferAttribute:up,Interpolant:Dw,InterpolateDiscrete:ab,InterpolateLinear:ob,InterpolateSmooth:D1,InvertStencilOp:__e,KeepStencilOp:Rh,KeyframeTrack:Al,LOD:XJ,LatheGeometry:Nw,Layers:ep,LessCompare:EJ,LessDepth:YY,LessEqualCompare:$L,LessEqualDepth:tb,LessEqualStencilFunc:A_e,LessStencilFunc:E_e,Light:mf,LightProbe:kQ,Line:rf,Line3:DPe,LineBasicMaterial:Js,LineCurve:s3,LineCurve3:iQ,LineDashedMaterial:xQ,LineLoop:ZJ,LineSegments:uc,LinearDisplayP3ColorSpace:Mw,LinearEncoding:zL,LinearFilter:ei,LinearInterpolant:u3,LinearMipMapLinearFilter:f_e,LinearMipMapNearestFilter:d_e,LinearMipmapLinearFilter:nf,LinearMipmapNearestFilter:NL,LinearSRGBColorSpace:sc,LinearToneMapping:rJ,LinearTransfer:cb,Loader:va,LoaderUtils:Sk,LoadingManager:f3,LoopOnce:vJ,LoopPingPong:xJ,LoopRepeat:yJ,LuminanceAlphaFormat:hJ,LuminanceFormat:fJ,MOUSE:Ph,Material:Rs,MaterialLoader:_A,MathUtils:Z_e,Matrix3:Sn,Matrix4:cn,MaxEquation:zI,Mesh:Ci,MeshBasicMaterial:hf,MeshDepthMaterial:YL,MeshDistanceMaterial:JL,MeshLambertMaterial:vQ,MeshMatcapMaterial:yQ,MeshNormalMaterial:gQ,MeshPhongMaterial:pQ,MeshPhysicalMaterial:hQ,MeshStandardMaterial:l3,MeshToonMaterial:mQ,MinEquation:BI,MirroredRepeatWrapping:sb,MixOperation:tJ,MultiplyBlending:FI,MultiplyOperation:Aw,NearestFilter:Zr,NearestMipMapLinearFilter:u_e,NearestMipMapNearestFilter:c_e,NearestMipmapLinearFilter:Sx,NearestMipmapNearestFilter:lE,NeverCompare:SJ,NeverDepth:KY,NeverStencilFunc:S_e,NoBlending:mu,NoColorSpace:Ba,NoToneMapping:Ql,NormalAnimationBlendMode:QT,NormalBlending:Qh,NotEqualCompare:MJ,NotEqualDepth:eJ,NotEqualStencilFunc:P_e,NumberKeyframeTrack:yb,Object3D:Dn,ObjectLoader:oPe,ObjectSpaceNormalMap:_J,OctahedronGeometry:Iw,OneFactor:jY,OneMinusConstantAlphaFactor:qY,OneMinusConstantColorFactor:WY,OneMinusDstAlphaFactor:BY,OneMinusDstColorFactor:$Y,OneMinusSrcAlphaFactor:oE,OneMinusSrcColorFactor:UY,OrthographicCamera:ec,P3Primaries:db,PCFShadowMap:XT,PCFSoftShadowMap:_x,PMREMGenerator:vk,Path:pb,PerspectiveCamera:Nr,Plane:su,PlaneGeometry:Ow,PlaneHelper:qPe,PointLight:CQ,PointLightHelper:UPe,Points:eQ,PointsMaterial:n3,PolarGridHelper:$Pe,PolyhedronGeometry:pf,PositionalAudio:mPe,PropertyBinding:In,PropertyMixer:UQ,QuadraticBezierCurve:a3,QuadraticBezierCurve3:lA,Quaternion:os,QuaternionKeyframeTrack:gy,QuaternionLinearInterpolant:EQ,RED_GREEN_RGTC2_Format:fk,RED_RGTC1_Format:gJ,REVISION:KT,RGBADepthPacking:wJ,RGBAFormat:Gs,RGBAIntegerFormat:UL,RGBA_ASTC_10x10_Format:ak,RGBA_ASTC_10x5_Format:rk,RGBA_ASTC_10x6_Format:ik,RGBA_ASTC_10x8_Format:sk,RGBA_ASTC_12x10_Format:ok,RGBA_ASTC_12x12_Format:lk,RGBA_ASTC_4x4_Format:XI,RGBA_ASTC_5x4_Format:YI,RGBA_ASTC_5x5_Format:JI,RGBA_ASTC_6x5_Format:QI,RGBA_ASTC_6x6_Format:ZI,RGBA_ASTC_8x5_Format:ek,RGBA_ASTC_8x6_Format:tk,RGBA_ASTC_8x8_Format:nk,RGBA_BPTC_Format:k1,RGBA_ETC2_EAC_Format:KI,RGBA_PVRTC_2BPPV1_Format:GI,RGBA_PVRTC_4BPPV1_Format:WI,RGBA_S3TC_DXT1_Format:O1,RGBA_S3TC_DXT3_Format:N1,RGBA_S3TC_DXT5_Format:I1,RGB_BPTC_SIGNED_Format:ck,RGB_BPTC_UNSIGNED_Format:uk,RGB_ETC1_Format:FL,RGB_ETC2_Format:qI,RGB_PVRTC_2BPPV1_Format:HI,RGB_PVRTC_4BPPV1_Format:VI,RGB_S3TC_DXT1_Format:R1,RGFormat:mJ,RGIntegerFormat:LL,RawShaderMaterial:fQ,Ray:Rp,Raycaster:BQ,Rec709Primaries:ub,RectAreaLight:NQ,RedFormat:pJ,RedIntegerFormat:jL,ReinhardToneMapping:iJ,RenderTarget:NJ,RepeatWrapping:ib,ReplaceStencilOp:v_e,ReverseSubtractEquation:kY,RingGeometry:gA,SIGNED_RED_GREEN_RGTC2_Format:hk,SIGNED_RED_RGTC1_Format:dk,SRGBColorSpace:Pi,SRGBTransfer:dr,Scene:ZL,ShaderChunk:wn,ShaderLib:fl,ShaderMaterial:ac,ShadowMaterial:dQ,Shape:np,ShapeGeometry:vA,ShapePath:YPe,ShapeUtils:tc,ShortType:uJ,Skeleton:sA,SkeletonHelper:LPe,SkinnedMesh:YJ,Source:Vh,Sphere:Cs,SphereGeometry:kw,Spherical:Tk,SphericalHarmonics3:IQ,SplineCurve:o3,SpotLight:PQ,SpotLightHelper:jPe,Sprite:KJ,SpriteMaterial:e3,SrcAlphaFactor:aE,SrcAlphaSaturateFactor:VY,SrcColorFactor:LY,StaticCopyUsage:D_e,StaticDrawUsage:fb,StaticReadUsage:N_e,StereoCamera:dPe,StreamCopyUsage:L_e,StreamDrawUsage:O_e,StreamReadUsage:k_e,StringKeyframeTrack:Ip,SubtractEquation:IY,SubtractiveBlending:UI,TOUCH:Ch,TangentSpaceNormalMap:ff,TetrahedronGeometry:yA,Texture:ti,TextureLoader:AQ,TorusGeometry:xA,TorusKnotGeometry:bA,Triangle:ha,TriangleFanDrawMode:m_e,TriangleStripDrawMode:p_e,TrianglesDrawMode:h_e,TubeGeometry:wA,TwoPassDoubleSide:l_e,UVMapping:YT,Uint16BufferAttribute:GL,Uint32BufferAttribute:qL,Uint8BufferAttribute:xSe,Uint8ClampedBufferAttribute:bSe,Uniform:y3,UniformsGroup:RPe,UniformsLib:ct,UniformsUtils:DJ,UnsignedByteType:Zl,UnsignedInt248Type:Hd,UnsignedIntType:lu,UnsignedShort4444Type:kL,UnsignedShort5551Type:DL,UnsignedShortType:JT,VSMShadowMap:ll,Vector2:ze,Vector3:ae,Vector4:Kn,VectorKeyframeTrack:xb,VideoTexture:gMe,WebGL1Renderer:GJ,WebGL3DRenderTarget:sSe,WebGLArrayRenderTarget:iSe,WebGLCoordinateSystem:ml,WebGLCubeRenderTarget:LJ,WebGLMultipleRenderTargets:aSe,WebGLRenderTarget:El,WebGLRenderer:QL,WebGLUtils:HJ,WebGPUCoordinateSystem:gv,WireframeGeometry:uQ,WrapAroundEnding:lb,ZeroCurvatureEnding:zh,ZeroFactor:DY,ZeroSlopeEnding:$h,ZeroStencilOp:g_e,_SRGBAFormat:cE,createCanvasElement:OJ,sRGBEncoding:Gd},Symbol.toStringTag,{value:"Module"}));var _C={exports:{}},Pd={};var o$;function QPe(){return o$||(o$=1,Pd.ConcurrentRoot=1,Pd.ContinuousEventPriority=4,Pd.DefaultEventPriority=16,Pd.DiscreteEventPriority=1,Pd.IdleEventPriority=536870912,Pd.LegacyRoot=0),Pd}var l$;function ZPe(){return l$||(l$=1,_C.exports=QPe()),_C.exports}var $g=ZPe();function eCe(t){let e;const n=new Set,r=(c,u)=>{const d=typeof c=="function"?c(e):c;if(d!==e){const h=e;e=u?d:Object.assign({},e,d),n.forEach(m=>m(e,h))}},i=()=>e,s=(c,u=i,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=u(e);function m(){const b=u(e);if(!d(h,b)){const x=h;c(h=b,x)}}return n.add(m),()=>n.delete(m)},l={setState:r,getState:i,subscribe:(c,u,d)=>u||d?s(c,u,d):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return e=t(r,i,l),l}const tCe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),c$=tCe?M.useEffect:M.useLayoutEffect;function nCe(t){const e=typeof t=="function"?eCe(t):t,n=(r=e.getState,i=Object.is)=>{const[,s]=M.useReducer(v=>v+1,0),a=e.getState(),o=M.useRef(a),l=M.useRef(r),c=M.useRef(i),u=M.useRef(!1),d=M.useRef();d.current===void 0&&(d.current=r(a));let h,m=!1;(o.current!==a||l.current!==r||c.current!==i||u.current)&&(h=r(a),m=!i(d.current,h)),c$(()=>{m&&(d.current=h),o.current=a,l.current=r,c.current=i,u.current=!1});const b=M.useRef(a);c$(()=>{const v=()=>{try{const E=e.getState(),T=l.current(E);c.current(d.current,T)||(o.current=E,d.current=T,s())}catch{u.current=!0,s()}},_=e.subscribe(v);return e.getState()!==b.current&&v(),_},[]);const x=m?h:d.current;return M.useDebugValue(x),x};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}const rCe=t=>typeof t=="object"&&typeof t.then=="function",Wh=[];function $Q(t,e,n=(r,i)=>r===i){if(t===e)return!0;if(!t||!e)return!1;const r=t.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!n(t[i],e[i]))return!1;return!0}function VQ(t,e=null,n=!1,r={}){e===null&&(e=[t]);for(const s of Wh)if($Q(e,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!n)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=Wh.indexOf(i);s!==-1&&Wh.splice(s,1)},promise:(rCe(t)?t:t(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(Wh.push(i),!n)throw i.promise}const iCe=(t,e,n)=>VQ(t,e,!1,n),sCe=(t,e,n)=>{VQ(t,e,!0,n)},aCe=t=>{if(t===void 0||t.length===0)Wh.splice(0,Wh.length);else{const e=Wh.find(n=>$Q(t,n.keys,n.equal));e&&e.remove()}};var SC={exports:{}},EC={exports:{}},TC={};var u$;function oCe(){return u$||(u$=1,(function(t){function e(z,V){var X=z.length;z.push(V);e:for(;0<X;){var q=X-1>>>1,Q=z[q];if(0<i(Q,V))z[q]=V,z[X]=Q,X=q;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var V=z[0],X=z.pop();if(X!==V){z[0]=X;e:for(var q=0,Q=z.length,ie=Q>>>1;q<ie;){var ce=2*(q+1)-1,ye=z[ce],Ce=ce+1,he=z[Ce];if(0>i(ye,X))Ce<Q&&0>i(he,ye)?(z[q]=he,z[Ce]=X,q=Ce):(z[q]=ye,z[ce]=X,q=ce);else if(Ce<Q&&0>i(he,X))z[q]=he,z[Ce]=X,q=Ce;else break e}}return V}function i(z,V){var X=z.sortIndex-V.sortIndex;return X!==0?X:z.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,m=!1,b=!1,x=!1,v=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(z){for(var V=n(c);V!==null;){if(V.callback===null)r(c);else if(V.startTime<=z)r(c),V.sortIndex=V.expirationTime,e(l,V);else break;V=n(c)}}function A(z){if(x=!1,T(z),!b)if(n(l)!==null)b=!0,K(P);else{var V=n(c);V!==null&&te(A,V.startTime-z)}}function P(z,V){b=!1,x&&(x=!1,_(L),L=-1),m=!0;var X=h;try{for(T(V),d=n(l);d!==null&&(!(d.expirationTime>V)||z&&!B());){var q=d.callback;if(typeof q=="function"){d.callback=null,h=d.priorityLevel;var Q=q(d.expirationTime<=V);V=t.unstable_now(),typeof Q=="function"?d.callback=Q:d===n(l)&&r(l),T(V)}else r(l);d=n(l)}if(d!==null)var ie=!0;else{var ce=n(c);ce!==null&&te(A,ce.startTime-V),ie=!1}return ie}finally{d=null,h=X,m=!1}}var R=!1,N=null,L=-1,I=5,j=-1;function B(){return!(t.unstable_now()-j<I)}function H(){if(N!==null){var z=t.unstable_now();j=z;var V=!0;try{V=N(!0,z)}finally{V?J():(R=!1,N=null)}}else R=!1}var J;if(typeof E=="function")J=function(){E(H)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,W=G.port2;G.port1.onmessage=H,J=function(){W.postMessage(null)}}else J=function(){v(H,0)};function K(z){N=z,R||(R=!0,J())}function te(z,V){L=v(function(){z(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){b||m||(b=!0,K(P))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(h){case 1:case 2:case 3:var V=3;break;default:V=h}var X=h;h=V;try{return z()}finally{h=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,V){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var X=h;h=z;try{return V()}finally{h=X}},t.unstable_scheduleCallback=function(z,V,X){var q=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?q+X:q):X=q,z){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=X+Q,z={id:u++,callback:V,priorityLevel:z,startTime:X,expirationTime:Q,sortIndex:-1},X>q?(z.sortIndex=X,e(c,z),n(l)===null&&z===n(c)&&(x?(_(L),L=-1):x=!0,te(A,X-q))):(z.sortIndex=Q,e(l,z),b||m||(b=!0,K(P))),z},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(z){var V=h;return function(){var X=h;h=V;try{return z.apply(this,arguments)}finally{h=X}}}})(TC)),TC}var d$;function lCe(){return d$||(d$=1,EC.exports=oCe()),EC.exports}var AC,f$;function cCe(){return f$||(f$=1,AC=function(e){var n={},r=lw(),i=lCe(),s=Object.assign;function a(y){for(var w="https://reactjs.org/docs/error-decoder.html?invariant="+y,C=1;C<arguments.length;C++)w+="&args[]="+encodeURIComponent(arguments[C]);return"Minified React error #"+y+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),b=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),P=Symbol.iterator;function R(y){return y===null||typeof y!="object"?null:(y=P&&y[P]||y["@@iterator"],typeof y=="function"?y:null)}function N(y){if(y==null)return null;if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y;switch(y){case u:return"Fragment";case c:return"Portal";case h:return"Profiler";case d:return"StrictMode";case v:return"Suspense";case _:return"SuspenseList"}if(typeof y=="object")switch(y.$$typeof){case b:return(y.displayName||"Context")+".Consumer";case m:return(y._context.displayName||"Context")+".Provider";case x:var w=y.render;return y=y.displayName,y||(y=w.displayName||w.name||"",y=y!==""?"ForwardRef("+y+")":"ForwardRef"),y;case E:return w=y.displayName||null,w!==null?w:N(y.type)||"Memo";case T:w=y._payload,y=y._init;try{return N(y(w))}catch{}}return null}function L(y){var w=y.type;switch(y.tag){case 24:return"Cache";case 9:return(w.displayName||"Context")+".Consumer";case 10:return(w._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return y=w.render,y=y.displayName||y.name||"",w.displayName||(y!==""?"ForwardRef("+y+")":"ForwardRef");case 7:return"Fragment";case 5:return w;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return N(w);case 8:return w===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w}return null}function I(y){var w=y,C=y;if(y.alternate)for(;w.return;)w=w.return;else{y=w;do w=y,(w.flags&4098)!==0&&(C=w.return),y=w.return;while(y)}return w.tag===3?C:null}function j(y){if(I(y)!==y)throw Error(a(188))}function B(y){var w=y.alternate;if(!w){if(w=I(y),w===null)throw Error(a(188));return w!==y?null:y}for(var C=y,k=w;;){var U=C.return;if(U===null)break;var $=U.alternate;if($===null){if(k=U.return,k!==null){C=k;continue}break}if(U.child===$.child){for($=U.child;$;){if($===C)return j(U),y;if($===k)return j(U),w;$=$.sibling}throw Error(a(188))}if(C.return!==k.return)C=U,k=$;else{for(var oe=!1,me=U.child;me;){if(me===C){oe=!0,C=U,k=$;break}if(me===k){oe=!0,k=U,C=$;break}me=me.sibling}if(!oe){for(me=$.child;me;){if(me===C){oe=!0,C=$,k=U;break}if(me===k){oe=!0,k=$,C=U;break}me=me.sibling}if(!oe)throw Error(a(189))}}if(C.alternate!==k)throw Error(a(190))}if(C.tag!==3)throw Error(a(188));return C.stateNode.current===C?y:w}function H(y){return y=B(y),y!==null?J(y):null}function J(y){if(y.tag===5||y.tag===6)return y;for(y=y.child;y!==null;){var w=J(y);if(w!==null)return w;y=y.sibling}return null}function G(y){if(y.tag===5||y.tag===6)return y;for(y=y.child;y!==null;){if(y.tag!==4){var w=G(y);if(w!==null)return w}y=y.sibling}return null}var W=Array.isArray,K=e.getPublicInstance,te=e.getRootHostContext,z=e.getChildHostContext,V=e.prepareForCommit,X=e.resetAfterCommit,q=e.createInstance,Q=e.appendInitialChild,ie=e.finalizeInitialChildren,ce=e.prepareUpdate,ye=e.shouldSetTextContent,Ce=e.createTextInstance,he=e.scheduleTimeout,De=e.cancelTimeout,be=e.noTimeout,_e=e.isPrimaryRenderer,Ee=e.supportsMutation,ee=e.supportsPersistence,Me=e.supportsHydration,xe=e.getInstanceFromNode,Le=e.preparePortalMount,Pe=e.getCurrentEventPriority,tt=e.detachDeletedInstance,Ze=e.supportsMicrotasks,re=e.scheduleMicrotask,Z=e.supportsTestSelectors,ge=e.findFiberRoot,$e=e.getBoundingRect,Be=e.getTextContent,Fe=e.isHiddenSubtree,mt=e.matchAccessibilityRole,Xe=e.setFocusIfFocusable,it=e.setupIntersectionObserver,Nt=e.appendChild,Xt=e.appendChildToContainer,He=e.commitTextUpdate,hn=e.commitMount,un=e.commitUpdate,$t=e.insertBefore,Tt=e.insertInContainerBefore,gt=e.removeChild,ue=e.removeChildFromContainer,Ve=e.resetTextContent,ft=e.hideInstance,dt=e.hideTextInstance,Ge=e.unhideInstance,de=e.unhideTextInstance,Qe=e.clearContainer,st=e.cloneInstance,zt=e.createContainerChildSet,We=e.appendChildToContainerChildSet,xt=e.finalizeContainerChildren,Ot=e.replaceContainerChildren,mn=e.cloneHiddenInstance,An=e.cloneHiddenTextInstance,rn=e.canHydrateInstance,Hn=e.canHydrateTextInstance,Fn=e.canHydrateSuspenseInstance,us=e.isSuspenseInstancePending,Ao=e.isSuspenseInstanceFallback,Mo=e.registerSuspenseInstanceRetry,xa=e.getNextHydratableSibling,Cl=e.getFirstHydratableChild,$p=e.getFirstHydratableChildWithinContainer,Vp=e.getFirstHydratableChildWithinSuspenseInstance,Ry=e.hydrateInstance,Po=e.hydrateTextInstance,Hp=e.hydrateSuspenseInstance,se=e.getNextHydratableInstanceAfterSuspenseInstance,we=e.commitHydratedContainer,Ne=e.commitHydratedSuspenseInstance,Ie=e.clearSuspenseBoundary,Re=e.clearSuspenseBoundaryFromContainer,vt=e.shouldDeleteUnhydratedTailInstances,Ft=e.didNotMatchHydratedContainerTextInstance,Wt=e.didNotMatchHydratedTextInstance,yt;function on(y){if(yt===void 0)try{throw Error()}catch(C){var w=C.stack.trim().match(/\n( *(at )?)/);yt=w&&w[1]||""}return`
`+yt+y}var Yt=!1;function sn(y,w){if(!y||Yt)return"";Yt=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(w)if(w=function(){throw Error()},Object.defineProperty(w.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(w,[])}catch(nt){var k=nt}Reflect.construct(y,[],w)}else{try{w.call()}catch(nt){k=nt}y.call(w.prototype)}else{try{throw Error()}catch(nt){k=nt}y()}}catch(nt){if(nt&&k&&typeof nt.stack=="string"){for(var U=nt.stack.split(`
`),$=k.stack.split(`
`),oe=U.length-1,me=$.length-1;1<=oe&&0<=me&&U[oe]!==$[me];)me--;for(;1<=oe&&0<=me;oe--,me--)if(U[oe]!==$[me]){if(oe!==1||me!==1)do if(oe--,me--,0>me||U[oe]!==$[me]){var je=`
`+U[oe].replace(" at new "," at ");return y.displayName&&je.includes("<anonymous>")&&(je=je.replace("<anonymous>",y.displayName)),je}while(1<=oe&&0<=me);break}}}finally{Yt=!1,Error.prepareStackTrace=C}return(y=y?y.displayName||y.name:"")?on(y):""}var Yn=Object.prototype.hasOwnProperty,mi=[],Jn=-1;function Mr(y){return{current:y}}function Lt(y){0>Jn||(y.current=mi[Jn],mi[Jn]=null,Jn--)}function Et(y,w){Jn++,mi[Jn]=y.current,y.current=w}var br={},yn=Mr(br),wr=Mr(!1),Ka=br;function qi(y,w){var C=y.type.contextTypes;if(!C)return br;var k=y.stateNode;if(k&&k.__reactInternalMemoizedUnmaskedChildContext===w)return k.__reactInternalMemoizedMaskedChildContext;var U={},$;for($ in C)U[$]=w[$];return k&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=w,y.__reactInternalMemoizedMaskedChildContext=U),U}function Pr(y){return y=y.childContextTypes,y!=null}function nr(){Lt(wr),Lt(yn)}function Os(y,w,C){if(yn.current!==br)throw Error(a(168));Et(yn,w),Et(wr,C)}function Uu(y,w,C){var k=y.stateNode;if(w=w.childContextTypes,typeof k.getChildContext!="function")return C;k=k.getChildContext();for(var U in k)if(!(U in w))throw Error(a(108,L(y)||"Unknown",U));return s({},C,k)}function gi(y){return y=(y=y.stateNode)&&y.__reactInternalMemoizedMergedChildContext||br,Ka=yn.current,Et(yn,y),Et(wr,wr.current),!0}function Rl(y,w,C){var k=y.stateNode;if(!k)throw Error(a(169));C?(y=Uu(y,w,Ka),k.__reactInternalMemoizedMergedChildContext=y,Lt(wr),Lt(yn),Et(yn,y)):Lt(wr),Et(wr,C)}var ds=Math.clz32?Math.clz32:pM,Fu=Math.log,_f=Math.LN2;function pM(y){return y>>>=0,y===0?32:31-(Fu(y)/_f|0)|0}var Bu=64,Rn=4194304;function zu(y){switch(y&-y){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return y&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return y}}function Sf(y,w){var C=y.pendingLanes;if(C===0)return 0;var k=0,U=y.suspendedLanes,$=y.pingedLanes,oe=C&268435455;if(oe!==0){var me=oe&~U;me!==0?k=zu(me):($&=oe,$!==0&&(k=zu($)))}else oe=C&~U,oe!==0?k=zu(oe):$!==0&&(k=zu($));if(k===0)return 0;if(w!==0&&w!==k&&(w&U)===0&&(U=k&-k,$=w&-w,U>=$||U===16&&($&4194240)!==0))return w;if((k&4)!==0&&(k|=C&16),w=y.entangledLanes,w!==0)for(y=y.entanglements,w&=k;0<w;)C=31-ds(w),U=1<<C,k|=y[C],w&=~U;return k}function Oy(y,w){switch(y){case 1:case 2:case 4:return w+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jw(y,w){for(var C=y.suspendedLanes,k=y.pingedLanes,U=y.expirationTimes,$=y.pendingLanes;0<$;){var oe=31-ds($),me=1<<oe,je=U[oe];je===-1?((me&C)===0||(me&k)!==0)&&(U[oe]=Oy(me,w)):je<=w&&(y.expiredLanes|=me),$&=~me}}function Wp(y){return y=y.pendingLanes&-1073741825,y!==0?y:y&1073741824?1073741824:0}function Gp(y){for(var w=[],C=0;31>C;C++)w.push(y);return w}function pc(y,w,C){y.pendingLanes|=w,w!==536870912&&(y.suspendedLanes=0,y.pingedLanes=0),y=y.eventTimes,w=31-ds(w),y[w]=C}function qp(y,w){var C=y.pendingLanes&~w;y.pendingLanes=w,y.suspendedLanes=0,y.pingedLanes=0,y.expiredLanes&=w,y.mutableReadLanes&=w,y.entangledLanes&=w,w=y.entanglements;var k=y.eventTimes;for(y=y.expirationTimes;0<C;){var U=31-ds(C),$=1<<U;w[U]=0,k[U]=-1,y[U]=-1,C&=~$}}function Xa(y,w){var C=y.entangledLanes|=w;for(y=y.entanglements;C;){var k=31-ds(C),U=1<<k;U&w|y[k]&w&&(y[k]|=w),C&=~U}}var xn=0;function Co(y){return y&=-y,1<y?4<y?(y&268435455)!==0?16:536870912:4:1}var mc=i.unstable_scheduleCallback,$u=i.unstable_cancelCallback,Ol=i.unstable_shouldYield,mM=i.unstable_requestPaint,Kr=i.unstable_now,gc=i.unstable_ImmediatePriority,gM=i.unstable_UserBlockingPriority,Kp=i.unstable_NormalPriority,Xp=i.unstable_IdlePriority,Ef=null,Ya=null;function Tf(y){if(Ya&&typeof Ya.onCommitFiberRoot=="function")try{Ya.onCommitFiberRoot(Ef,y,void 0,(y.current.flags&128)===128)}catch{}}function Af(y,w){return y===w&&(y!==0||1/y===1/w)||y!==y&&w!==w}var Ki=typeof Object.is=="function"?Object.is:Af,Zs=null,Yp=!1,Ny=!1;function Jp(y){Zs===null?Zs=[y]:Zs.push(y)}function Qp(y){Yp=!0,Jp(y)}function ea(){if(!Ny&&Zs!==null){Ny=!0;var y=0,w=xn;try{var C=Zs;for(xn=1;y<C.length;y++){var k=C[y];do k=k(!0);while(k!==null)}Zs=null,Yp=!1}catch(U){throw Zs!==null&&(Zs=Zs.slice(y+1)),mc(gc,ea),U}finally{xn=w,Ny=!1}}return null}var Qw=o.ReactCurrentBatchConfig;function ba(y,w){if(Ki(y,w))return!0;if(typeof y!="object"||y===null||typeof w!="object"||w===null)return!1;var C=Object.keys(y),k=Object.keys(w);if(C.length!==k.length)return!1;for(k=0;k<C.length;k++){var U=C[k];if(!Yn.call(w,U)||!Ki(y[U],w[U]))return!1}return!0}function Iy(y){switch(y.tag){case 5:return on(y.type);case 16:return on("Lazy");case 13:return on("Suspense");case 19:return on("SuspenseList");case 0:case 2:case 15:return y=sn(y.type,!1),y;case 11:return y=sn(y.type.render,!1),y;case 1:return y=sn(y.type,!0),y;default:return""}}function fs(y,w){if(y&&y.defaultProps){w=s({},w),y=y.defaultProps;for(var C in y)w[C]===void 0&&(w[C]=y[C]);return w}return w}var Mf=Mr(null),vc=null,Ro=null,Zp=null;function Xi(){Zp=Ro=vc=null}function yc(y,w,C){_e?(Et(Mf,w._currentValue),w._currentValue=C):(Et(Mf,w._currentValue2),w._currentValue2=C)}function Pf(y){var w=Mf.current;Lt(Mf),_e?y._currentValue=w:y._currentValue2=w}function xc(y,w,C){for(;y!==null;){var k=y.alternate;if((y.childLanes&w)!==w?(y.childLanes|=w,k!==null&&(k.childLanes|=w)):k!==null&&(k.childLanes&w)!==w&&(k.childLanes|=w),y===C)break;y=y.return}}function Vu(y,w){vc=y,Zp=Ro=null,y=y.dependencies,y!==null&&y.firstContext!==null&&((y.lanes&w)!==0&&(si=!0),y.firstContext=null)}function hs(y){var w=_e?y._currentValue:y._currentValue2;if(Zp!==y)if(y={context:y,memoizedValue:w,next:null},Ro===null){if(vc===null)throw Error(a(308));Ro=y,vc.dependencies={lanes:0,firstContext:y}}else Ro=Ro.next=y;return w}var ta=null,na=!1;function Hu(y){y.updateQueue={baseState:y.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ky(y,w){y=y.updateQueue,w.updateQueue===y&&(w.updateQueue={baseState:y.baseState,firstBaseUpdate:y.firstBaseUpdate,lastBaseUpdate:y.lastBaseUpdate,shared:y.shared,effects:y.effects})}function Oo(y,w){return{eventTime:y,lane:w,tag:0,payload:null,callback:null,next:null}}function Nl(y,w){var C=y.updateQueue;C!==null&&(C=C.shared,Rr!==null&&(y.mode&1)!==0&&(gn&2)===0?(y=C.interleaved,y===null?(w.next=w,ta===null?ta=[C]:ta.push(C)):(w.next=y.next,y.next=w),C.interleaved=w):(y=C.pending,y===null?w.next=w:(w.next=y.next,y.next=w),C.pending=w))}function em(y,w,C){if(w=w.updateQueue,w!==null&&(w=w.shared,(C&4194240)!==0)){var k=w.lanes;k&=y.pendingLanes,C|=k,w.lanes=C,Xa(y,C)}}function tm(y,w){var C=y.updateQueue,k=y.alternate;if(k!==null&&(k=k.updateQueue,C===k)){var U=null,$=null;if(C=C.firstBaseUpdate,C!==null){do{var oe={eventTime:C.eventTime,lane:C.lane,tag:C.tag,payload:C.payload,callback:C.callback,next:null};$===null?U=$=oe:$=$.next=oe,C=C.next}while(C!==null);$===null?U=$=w:$=$.next=w}else U=$=w;C={baseState:k.baseState,firstBaseUpdate:U,lastBaseUpdate:$,shared:k.shared,effects:k.effects},y.updateQueue=C;return}y=C.lastBaseUpdate,y===null?C.firstBaseUpdate=w:y.next=w,C.lastBaseUpdate=w}function nm(y,w,C,k){var U=y.updateQueue;na=!1;var $=U.firstBaseUpdate,oe=U.lastBaseUpdate,me=U.shared.pending;if(me!==null){U.shared.pending=null;var je=me,nt=je.next;je.next=null,oe===null?$=nt:oe.next=nt,oe=je;var _t=y.alternate;_t!==null&&(_t=_t.updateQueue,me=_t.lastBaseUpdate,me!==oe&&(me===null?_t.firstBaseUpdate=nt:me.next=nt,_t.lastBaseUpdate=je))}if($!==null){var dn=U.baseState;oe=0,_t=nt=je=null,me=$;do{var Vt=me.lane,vn=me.eventTime;if((k&Vt)===Vt){_t!==null&&(_t=_t.next={eventTime:vn,lane:0,tag:me.tag,payload:me.payload,callback:me.callback,next:null});e:{var pt=y,_i=me;switch(Vt=w,vn=C,_i.tag){case 1:if(pt=_i.payload,typeof pt=="function"){dn=pt.call(vn,dn,Vt);break e}dn=pt;break e;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=_i.payload,Vt=typeof pt=="function"?pt.call(vn,dn,Vt):pt,Vt==null)break e;dn=s({},dn,Vt);break e;case 2:na=!0}}me.callback!==null&&me.lane!==0&&(y.flags|=64,Vt=U.effects,Vt===null?U.effects=[me]:Vt.push(me))}else vn={eventTime:vn,lane:Vt,tag:me.tag,payload:me.payload,callback:me.callback,next:null},_t===null?(nt=_t=vn,je=dn):_t=_t.next=vn,oe|=Vt;if(me=me.next,me===null){if(me=U.shared.pending,me===null)break;Vt=me,me=Vt.next,Vt.next=null,U.lastBaseUpdate=Vt,U.shared.pending=null}}while(!0);if(_t===null&&(je=dn),U.baseState=je,U.firstBaseUpdate=nt,U.lastBaseUpdate=_t,w=U.shared.interleaved,w!==null){U=w;do oe|=U.lane,U=U.next;while(U!==w)}else $===null&&(U.shared.lanes=0);eo|=oe,y.lanes=oe,y.memoizedState=dn}}function Zw(y,w,C){if(y=w.effects,w.effects=null,y!==null)for(w=0;w<y.length;w++){var k=y[w],U=k.callback;if(U!==null){if(k.callback=null,k=C,typeof U!="function")throw Error(a(191,U));U.call(k)}}}var e_=new r.Component().refs;function Dy(y,w,C,k){w=y.memoizedState,C=C(k,w),C=C==null?w:s({},w,C),y.memoizedState=C,y.lanes===0&&(y.updateQueue.baseState=C)}var rm={isMounted:function(y){return(y=y._reactInternals)?I(y)===y:!1},enqueueSetState:function(y,w,C){y=y._reactInternals;var k=On(),U=Ma(y),$=Oo(k,U);$.payload=w,C!=null&&($.callback=C),Nl(y,$),w=Li(y,U,k),w!==null&&em(w,y,U)},enqueueReplaceState:function(y,w,C){y=y._reactInternals;var k=On(),U=Ma(y),$=Oo(k,U);$.tag=1,$.payload=w,C!=null&&($.callback=C),Nl(y,$),w=Li(y,U,k),w!==null&&em(w,y,U)},enqueueForceUpdate:function(y,w){y=y._reactInternals;var C=On(),k=Ma(y),U=Oo(C,k);U.tag=2,w!=null&&(U.callback=w),Nl(y,U),w=Li(y,k,C),w!==null&&em(w,y,k)}};function jy(y,w,C,k,U,$,oe){return y=y.stateNode,typeof y.shouldComponentUpdate=="function"?y.shouldComponentUpdate(k,$,oe):w.prototype&&w.prototype.isPureReactComponent?!ba(C,k)||!ba(U,$):!0}function t_(y,w,C){var k=!1,U=br,$=w.contextType;return typeof $=="object"&&$!==null?$=hs($):(U=Pr(w)?Ka:yn.current,k=w.contextTypes,$=(k=k!=null)?qi(y,U):br),w=new w(C,$),y.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=rm,y.stateNode=w,w._reactInternals=y,k&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=U,y.__reactInternalMemoizedMaskedChildContext=$),w}function n_(y,w,C,k){y=w.state,typeof w.componentWillReceiveProps=="function"&&w.componentWillReceiveProps(C,k),typeof w.UNSAFE_componentWillReceiveProps=="function"&&w.UNSAFE_componentWillReceiveProps(C,k),w.state!==y&&rm.enqueueReplaceState(w,w.state,null)}function Ly(y,w,C,k){var U=y.stateNode;U.props=C,U.state=y.memoizedState,U.refs=e_,Hu(y);var $=w.contextType;typeof $=="object"&&$!==null?U.context=hs($):($=Pr(w)?Ka:yn.current,U.context=qi(y,$)),U.state=y.memoizedState,$=w.getDerivedStateFromProps,typeof $=="function"&&(Dy(y,w,$,C),U.state=y.memoizedState),typeof w.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(w=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),w!==U.state&&rm.enqueueReplaceState(U,U.state,null),nm(y,C,U,k),U.state=y.memoizedState),typeof U.componentDidMount=="function"&&(y.flags|=4194308)}var Wu=[],Il=0,im=null,sm=0,ra=[],Ns=0,bc=null,No=1,Io="";function wc(y,w){Wu[Il++]=sm,Wu[Il++]=im,im=y,sm=w}function r_(y,w,C){ra[Ns++]=No,ra[Ns++]=Io,ra[Ns++]=bc,bc=y;var k=No;y=Io;var U=32-ds(k)-1;k&=~(1<<U),C+=1;var $=32-ds(w)+U;if(30<$){var oe=U-U%5;$=(k&(1<<oe)-1).toString(32),k>>=oe,U-=oe,No=1<<32-ds(w)+U|C<<U|k,Io=$+y}else No=1<<$|C<<U|k,Io=y}function Uy(y){y.return!==null&&(wc(y,1),r_(y,1,0))}function Fy(y){for(;y===im;)im=Wu[--Il],Wu[Il]=null,sm=Wu[--Il],Wu[Il]=null;for(;y===bc;)bc=ra[--Ns],ra[Ns]=null,Io=ra[--Ns],ra[Ns]=null,No=ra[--Ns],ra[Ns]=null}var Yi=null,vi=null,lr=!1,Gu=!1,ia=null;function By(y,w){var C=Fs(5,null,null,0);C.elementType="DELETED",C.stateNode=w,C.return=y,w=y.deletions,w===null?(y.deletions=[C],y.flags|=16):w.push(C)}function zy(y,w){switch(y.tag){case 5:return w=rn(w,y.type,y.pendingProps),w!==null?(y.stateNode=w,Yi=y,vi=Cl(w),!0):!1;case 6:return w=Hn(w,y.pendingProps),w!==null?(y.stateNode=w,Yi=y,vi=null,!0):!1;case 13:if(w=Fn(w),w!==null){var C=bc!==null?{id:No,overflow:Io}:null;return y.memoizedState={dehydrated:w,treeContext:C,retryLane:1073741824},C=Fs(18,null,null,0),C.stateNode=w,C.return=y,y.child=C,Yi=y,vi=null,!0}return!1;default:return!1}}function am(y){return(y.mode&1)!==0&&(y.flags&128)===0}function kl(y){if(lr){var w=vi;if(w){var C=w;if(!zy(y,w)){if(am(y))throw Error(a(418));w=xa(C);var k=Yi;w&&zy(y,w)?By(k,C):(y.flags=y.flags&-4097|2,lr=!1,Yi=y)}}else{if(am(y))throw Error(a(418));y.flags=y.flags&-4097|2,lr=!1,Yi=y}}}function i_(y){for(y=y.return;y!==null&&y.tag!==5&&y.tag!==3&&y.tag!==13;)y=y.return;Yi=y}function Cf(y){if(!Me||y!==Yi)return!1;if(!lr)return i_(y),lr=!0,!1;if(y.tag!==3&&(y.tag!==5||vt(y.type)&&!ye(y.type,y.memoizedProps))){var w=vi;if(w){if(am(y)){for(y=vi;y;)y=xa(y);throw Error(a(418))}for(;w;)By(y,w),w=xa(w)}}if(i_(y),y.tag===13){if(!Me)throw Error(a(316));if(y=y.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(a(317));vi=se(y)}else vi=Yi?xa(y.stateNode):null;return!0}function qu(){Me&&(vi=Yi=null,Gu=lr=!1)}function om(y){ia===null?ia=[y]:ia.push(y)}function Ku(y,w,C){if(y=C.ref,y!==null&&typeof y!="function"&&typeof y!="object"){if(C._owner){if(C=C._owner,C){if(C.tag!==1)throw Error(a(309));var k=C.stateNode}if(!k)throw Error(a(147,y));var U=k,$=""+y;return w!==null&&w.ref!==null&&typeof w.ref=="function"&&w.ref._stringRef===$?w.ref:(w=function(oe){var me=U.refs;me===e_&&(me=U.refs={}),oe===null?delete me[$]:me[$]=oe},w._stringRef=$,w)}if(typeof y!="string")throw Error(a(284));if(!C._owner)throw Error(a(290,y))}return y}function Dl(y,w){throw y=Object.prototype.toString.call(w),Error(a(31,y==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":y))}function Xu(y){var w=y._init;return w(y._payload)}function s_(y){function w(Ae,ve){if(y){var ke=Ae.deletions;ke===null?(Ae.deletions=[ve],Ae.flags|=16):ke.push(ve)}}function C(Ae,ve){if(!y)return null;for(;ve!==null;)w(Ae,ve),ve=ve.sibling;return null}function k(Ae,ve){for(Ae=new Map;ve!==null;)ve.key!==null?Ae.set(ve.key,ve):Ae.set(ve.index,ve),ve=ve.sibling;return Ae}function U(Ae,ve){return Ae=qo(Ae,ve),Ae.index=0,Ae.sibling=null,Ae}function $(Ae,ve,ke){return Ae.index=ke,y?(ke=Ae.alternate,ke!==null?(ke=ke.index,ke<ve?(Ae.flags|=2,ve):ke):(Ae.flags|=2,ve)):(Ae.flags|=1048576,ve)}function oe(Ae){return y&&Ae.alternate===null&&(Ae.flags|=2),Ae}function me(Ae,ve,ke,ht){return ve===null||ve.tag!==6?(ve=km(ke,Ae.mode,ht),ve.return=Ae,ve):(ve=U(ve,ke),ve.return=Ae,ve)}function je(Ae,ve,ke,ht){var Dt=ke.type;return Dt===u?_t(Ae,ve,ke.props.children,ht,ke.key):ve!==null&&(ve.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===T&&Xu(Dt)===ve.type)?(ht=U(ve,ke.props),ht.ref=Ku(Ae,ve,ke),ht.return=Ae,ht):(ht=Im(ke.type,ke.key,ke.props,null,Ae.mode,ht),ht.ref=Ku(Ae,ve,ke),ht.return=Ae,ht)}function nt(Ae,ve,ke,ht){return ve===null||ve.tag!==4||ve.stateNode.containerInfo!==ke.containerInfo||ve.stateNode.implementation!==ke.implementation?(ve=Dm(ke,Ae.mode,ht),ve.return=Ae,ve):(ve=U(ve,ke.children||[]),ve.return=Ae,ve)}function _t(Ae,ve,ke,ht,Dt){return ve===null||ve.tag!==7?(ve=Vc(ke,Ae.mode,ht,Dt),ve.return=Ae,ve):(ve=U(ve,ke),ve.return=Ae,ve)}function dn(Ae,ve,ke){if(typeof ve=="string"&&ve!==""||typeof ve=="number")return ve=km(""+ve,Ae.mode,ke),ve.return=Ae,ve;if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case l:return ke=Im(ve.type,ve.key,ve.props,null,Ae.mode,ke),ke.ref=Ku(Ae,null,ve),ke.return=Ae,ke;case c:return ve=Dm(ve,Ae.mode,ke),ve.return=Ae,ve;case T:var ht=ve._init;return dn(Ae,ht(ve._payload),ke)}if(W(ve)||R(ve))return ve=Vc(ve,Ae.mode,ke,null),ve.return=Ae,ve;Dl(Ae,ve)}return null}function Vt(Ae,ve,ke,ht){var Dt=ve!==null?ve.key:null;if(typeof ke=="string"&&ke!==""||typeof ke=="number")return Dt!==null?null:me(Ae,ve,""+ke,ht);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case l:return ke.key===Dt?je(Ae,ve,ke,ht):null;case c:return ke.key===Dt?nt(Ae,ve,ke,ht):null;case T:return Dt=ke._init,Vt(Ae,ve,Dt(ke._payload),ht)}if(W(ke)||R(ke))return Dt!==null?null:_t(Ae,ve,ke,ht,null);Dl(Ae,ke)}return null}function vn(Ae,ve,ke,ht,Dt){if(typeof ht=="string"&&ht!==""||typeof ht=="number")return Ae=Ae.get(ke)||null,me(ve,Ae,""+ht,Dt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case l:return Ae=Ae.get(ht.key===null?ke:ht.key)||null,je(ve,Ae,ht,Dt);case c:return Ae=Ae.get(ht.key===null?ke:ht.key)||null,nt(ve,Ae,ht,Dt);case T:var pn=ht._init;return vn(Ae,ve,ke,pn(ht._payload),Dt)}if(W(ht)||R(ht))return Ae=Ae.get(ke)||null,_t(ve,Ae,ht,Dt,null);Dl(ve,ht)}return null}function pt(Ae,ve,ke,ht){for(var Dt=null,pn=null,fn=ve,Cn=ve=0,Ur=null;fn!==null&&Cn<ke.length;Cn++){fn.index>Cn?(Ur=fn,fn=null):Ur=fn.sibling;var Pn=Vt(Ae,fn,ke[Cn],ht);if(Pn===null){fn===null&&(fn=Ur);break}y&&fn&&Pn.alternate===null&&w(Ae,fn),ve=$(Pn,ve,Cn),pn===null?Dt=Pn:pn.sibling=Pn,pn=Pn,fn=Ur}if(Cn===ke.length)return C(Ae,fn),lr&&wc(Ae,Cn),Dt;if(fn===null){for(;Cn<ke.length;Cn++)fn=dn(Ae,ke[Cn],ht),fn!==null&&(ve=$(fn,ve,Cn),pn===null?Dt=fn:pn.sibling=fn,pn=fn);return lr&&wc(Ae,Cn),Dt}for(fn=k(Ae,fn);Cn<ke.length;Cn++)Ur=vn(fn,Ae,Cn,ke[Cn],ht),Ur!==null&&(y&&Ur.alternate!==null&&fn.delete(Ur.key===null?Cn:Ur.key),ve=$(Ur,ve,Cn),pn===null?Dt=Ur:pn.sibling=Ur,pn=Ur);return y&&fn.forEach(function(Ko){return w(Ae,Ko)}),lr&&wc(Ae,Cn),Dt}function _i(Ae,ve,ke,ht){var Dt=R(ke);if(typeof Dt!="function")throw Error(a(150));if(ke=Dt.call(ke),ke==null)throw Error(a(151));for(var pn=Dt=null,fn=ve,Cn=ve=0,Ur=null,Pn=ke.next();fn!==null&&!Pn.done;Cn++,Pn=ke.next()){fn.index>Cn?(Ur=fn,fn=null):Ur=fn.sibling;var Ko=Vt(Ae,fn,Pn.value,ht);if(Ko===null){fn===null&&(fn=Ur);break}y&&fn&&Ko.alternate===null&&w(Ae,fn),ve=$(Ko,ve,Cn),pn===null?Dt=Ko:pn.sibling=Ko,pn=Ko,fn=Ur}if(Pn.done)return C(Ae,fn),lr&&wc(Ae,Cn),Dt;if(fn===null){for(;!Pn.done;Cn++,Pn=ke.next())Pn=dn(Ae,Pn.value,ht),Pn!==null&&(ve=$(Pn,ve,Cn),pn===null?Dt=Pn:pn.sibling=Pn,pn=Pn);return lr&&wc(Ae,Cn),Dt}for(fn=k(Ae,fn);!Pn.done;Cn++,Pn=ke.next())Pn=vn(fn,Ae,Cn,Pn.value,ht),Pn!==null&&(y&&Pn.alternate!==null&&fn.delete(Pn.key===null?Cn:Pn.key),ve=$(Pn,ve,Cn),pn===null?Dt=Pn:pn.sibling=Pn,pn=Pn);return y&&fn.forEach(function(y0){return w(Ae,y0)}),lr&&wc(Ae,Cn),Dt}function Bs(Ae,ve,ke,ht){if(typeof ke=="object"&&ke!==null&&ke.type===u&&ke.key===null&&(ke=ke.props.children),typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case l:e:{for(var Dt=ke.key,pn=ve;pn!==null;){if(pn.key===Dt){if(Dt=ke.type,Dt===u){if(pn.tag===7){C(Ae,pn.sibling),ve=U(pn,ke.props.children),ve.return=Ae,Ae=ve;break e}}else if(pn.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===T&&Xu(Dt)===pn.type){C(Ae,pn.sibling),ve=U(pn,ke.props),ve.ref=Ku(Ae,pn,ke),ve.return=Ae,Ae=ve;break e}C(Ae,pn);break}else w(Ae,pn);pn=pn.sibling}ke.type===u?(ve=Vc(ke.props.children,Ae.mode,ht,ke.key),ve.return=Ae,Ae=ve):(ht=Im(ke.type,ke.key,ke.props,null,Ae.mode,ht),ht.ref=Ku(Ae,ve,ke),ht.return=Ae,Ae=ht)}return oe(Ae);case c:e:{for(pn=ke.key;ve!==null;){if(ve.key===pn)if(ve.tag===4&&ve.stateNode.containerInfo===ke.containerInfo&&ve.stateNode.implementation===ke.implementation){C(Ae,ve.sibling),ve=U(ve,ke.children||[]),ve.return=Ae,Ae=ve;break e}else{C(Ae,ve);break}else w(Ae,ve);ve=ve.sibling}ve=Dm(ke,Ae.mode,ht),ve.return=Ae,Ae=ve}return oe(Ae);case T:return pn=ke._init,Bs(Ae,ve,pn(ke._payload),ht)}if(W(ke))return pt(Ae,ve,ke,ht);if(R(ke))return _i(Ae,ve,ke,ht);Dl(Ae,ke)}return typeof ke=="string"&&ke!==""||typeof ke=="number"?(ke=""+ke,ve!==null&&ve.tag===6?(C(Ae,ve.sibling),ve=U(ve,ke),ve.return=Ae,Ae=ve):(C(Ae,ve),ve=km(ke,Ae.mode,ht),ve.return=Ae,Ae=ve),oe(Ae)):C(Ae,ve)}return Bs}var ko=s_(!0),a_=s_(!1),Yu={},ps=Mr(Yu),_c=Mr(Yu),Sc=Mr(Yu);function wa(y){if(y===Yu)throw Error(a(174));return y}function lm(y,w){Et(Sc,w),Et(_c,y),Et(ps,Yu),y=te(w),Lt(ps),Et(ps,y)}function Ju(){Lt(ps),Lt(_c),Lt(Sc)}function o_(y){var w=wa(Sc.current),C=wa(ps.current);w=z(C,y.type,w),C!==w&&(Et(_c,y),Et(ps,w))}function $y(y){_c.current===y&&(Lt(ps),Lt(_c))}var mr=Mr(0);function cm(y){for(var w=y;w!==null;){if(w.tag===13){var C=w.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||us(C)||Ao(C)))return w}else if(w.tag===19&&w.memoizedProps.revealOrder!==void 0){if((w.flags&128)!==0)return w}else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===y)break;for(;w.sibling===null;){if(w.return===null||w.return===y)return null;w=w.return}w.sibling.return=w.return,w=w.sibling}return null}var Is=[];function Ec(){for(var y=0;y<Is.length;y++){var w=Is[y];_e?w._workInProgressVersionPrimary=null:w._workInProgressVersionSecondary=null}Is.length=0}var Rf=o.ReactCurrentDispatcher,ks=o.ReactCurrentBatchConfig,Tc=0,gr=null,ni=null,ri=null,um=!1,Ja=!1,Ac=0,Of=0;function ii(){throw Error(a(321))}function dm(y,w){if(w===null)return!1;for(var C=0;C<w.length&&C<y.length;C++)if(!Ki(y[C],w[C]))return!1;return!0}function Qu(y,w,C,k,U,$){if(Tc=$,gr=w,w.memoizedState=null,w.updateQueue=null,w.lanes=0,Rf.current=y===null||y.memoizedState===null?Ky:Xy,y=C(k,U),Ja){$=0;do{if(Ja=!1,Ac=0,25<=$)throw Error(a(301));$+=1,ri=ni=null,w.updateQueue=null,Rf.current=Yy,y=C(k,U)}while(Ja)}if(Rf.current=nd,w=ni!==null&&ni.next!==null,Tc=0,ri=ni=gr=null,um=!1,w)throw Error(a(300));return y}function jl(){var y=Ac!==0;return Ac=0,y}function _a(){var y={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ri===null?gr.memoizedState=ri=y:ri=ri.next=y,ri}function Sa(){if(ni===null){var y=gr.alternate;y=y!==null?y.memoizedState:null}else y=ni.next;var w=ri===null?gr.memoizedState:ri.next;if(w!==null)ri=w,ni=y;else{if(y===null)throw Error(a(310));ni=y,y={memoizedState:ni.memoizedState,baseState:ni.baseState,baseQueue:ni.baseQueue,queue:ni.queue,next:null},ri===null?gr.memoizedState=ri=y:ri=ri.next=y}return ri}function Qa(y,w){return typeof w=="function"?w(y):w}function Nf(y){var w=Sa(),C=w.queue;if(C===null)throw Error(a(311));C.lastRenderedReducer=y;var k=ni,U=k.baseQueue,$=C.pending;if($!==null){if(U!==null){var oe=U.next;U.next=$.next,$.next=oe}k.baseQueue=U=$,C.pending=null}if(U!==null){$=U.next,k=k.baseState;var me=oe=null,je=null,nt=$;do{var _t=nt.lane;if((Tc&_t)===_t)je!==null&&(je=je.next={lane:0,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null}),k=nt.hasEagerState?nt.eagerState:y(k,nt.action);else{var dn={lane:_t,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null};je===null?(me=je=dn,oe=k):je=je.next=dn,gr.lanes|=_t,eo|=_t}nt=nt.next}while(nt!==null&&nt!==$);je===null?oe=k:je.next=me,Ki(k,w.memoizedState)||(si=!0),w.memoizedState=k,w.baseState=oe,w.baseQueue=je,C.lastRenderedState=k}if(y=C.interleaved,y!==null){U=y;do $=U.lane,gr.lanes|=$,eo|=$,U=U.next;while(U!==y)}else U===null&&(C.lanes=0);return[w.memoizedState,C.dispatch]}function If(y){var w=Sa(),C=w.queue;if(C===null)throw Error(a(311));C.lastRenderedReducer=y;var k=C.dispatch,U=C.pending,$=w.memoizedState;if(U!==null){C.pending=null;var oe=U=U.next;do $=y($,oe.action),oe=oe.next;while(oe!==U);Ki($,w.memoizedState)||(si=!0),w.memoizedState=$,w.baseQueue===null&&(w.baseState=$),C.lastRenderedState=$}return[$,k]}function Vy(){}function Hy(y,w){var C=gr,k=Sa(),U=w(),$=!Ki(k.memoizedState,U);if($&&(k.memoizedState=U,si=!0),k=k.queue,Zu(Do.bind(null,C,k,y),[y]),k.getSnapshot!==w||$||ri!==null&&ri.memoizedState.tag&1){if(C.flags|=2048,Df(9,Gy.bind(null,C,k,U,w),void 0,null),Rr===null)throw Error(a(349));(Tc&30)!==0||Wy(C,w,U)}return U}function Wy(y,w,C){y.flags|=16384,y={getSnapshot:w,value:C},w=gr.updateQueue,w===null?(w={lastEffect:null,stores:null},gr.updateQueue=w,w.stores=[y]):(C=w.stores,C===null?w.stores=[y]:C.push(y))}function Gy(y,w,C,k){w.value=C,w.getSnapshot=k,fm(w)&&Li(y,1,-1)}function Do(y,w,C){return C(function(){fm(w)&&Li(y,1,-1)})}function fm(y){var w=y.getSnapshot;y=y.value;try{var C=w();return!Ki(y,C)}catch{return!0}}function kf(y){var w=_a();return typeof y=="function"&&(y=y()),w.memoizedState=w.baseState=y,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:y},w.queue=y,y=y.dispatch=vM.bind(null,gr,y),[w.memoizedState,y]}function Df(y,w,C,k){return y={tag:y,create:w,destroy:C,deps:k,next:null},w=gr.updateQueue,w===null?(w={lastEffect:null,stores:null},gr.updateQueue=w,w.lastEffect=y.next=y):(C=w.lastEffect,C===null?w.lastEffect=y.next=y:(k=C.next,C.next=y,y.next=k,w.lastEffect=y)),y}function l_(){return Sa().memoizedState}function Ll(y,w,C,k){var U=_a();gr.flags|=y,U.memoizedState=Df(1|w,C,void 0,k===void 0?null:k)}function hm(y,w,C,k){var U=Sa();k=k===void 0?null:k;var $=void 0;if(ni!==null){var oe=ni.memoizedState;if($=oe.destroy,k!==null&&dm(k,oe.deps)){U.memoizedState=Df(w,C,$,k);return}}gr.flags|=y,U.memoizedState=Df(1|w,C,$,k)}function pm(y,w){return Ll(8390656,8,y,w)}function Zu(y,w){return hm(2048,8,y,w)}function Qn(y,w){return hm(4,2,y,w)}function mm(y,w){return hm(4,4,y,w)}function jf(y,w){if(typeof w=="function")return y=y(),w(y),function(){w(null)};if(w!=null)return y=y(),w.current=y,function(){w.current=null}}function ed(y,w,C){return C=C!=null?C.concat([y]):null,hm(4,4,jf.bind(null,w,y),C)}function gm(){}function vm(y,w){var C=Sa();w=w===void 0?null:w;var k=C.memoizedState;return k!==null&&w!==null&&dm(w,k[1])?k[0]:(C.memoizedState=[y,w],y)}function td(y,w){var C=Sa();w=w===void 0?null:w;var k=C.memoizedState;return k!==null&&w!==null&&dm(w,k[1])?k[0]:(y=y(),C.memoizedState=[y,w],y)}function ym(y,w){var C=xn;xn=C!==0&&4>C?C:4,y(!0);var k=ks.transition;ks.transition={};try{y(!1),w()}finally{xn=C,ks.transition=k}}function Mc(){return Sa().memoizedState}function c_(y,w,C){var k=Ma(y);C={lane:k,action:C,hasEagerState:!1,eagerState:null,next:null},u_(y)?qy(w,C):(Lf(y,w,C),C=On(),y=Li(y,k,C),y!==null&&Uf(y,w,k))}function vM(y,w,C){var k=Ma(y),U={lane:k,action:C,hasEagerState:!1,eagerState:null,next:null};if(u_(y))qy(w,U);else{Lf(y,w,U);var $=y.alternate;if(y.lanes===0&&($===null||$.lanes===0)&&($=w.lastRenderedReducer,$!==null))try{var oe=w.lastRenderedState,me=$(oe,C);if(U.hasEagerState=!0,U.eagerState=me,Ki(me,oe))return}catch{}C=On(),y=Li(y,k,C),y!==null&&Uf(y,w,k)}}function u_(y){var w=y.alternate;return y===gr||w!==null&&w===gr}function qy(y,w){Ja=um=!0;var C=y.pending;C===null?w.next=w:(w.next=C.next,C.next=w),y.pending=w}function Lf(y,w,C){Rr!==null&&(y.mode&1)!==0&&(gn&2)===0?(y=w.interleaved,y===null?(C.next=C,ta===null?ta=[w]:ta.push(w)):(C.next=y.next,y.next=C),w.interleaved=C):(y=w.pending,y===null?C.next=C:(C.next=y.next,y.next=C),w.pending=C)}function Uf(y,w,C){if((C&4194240)!==0){var k=w.lanes;k&=y.pendingLanes,C|=k,w.lanes=C,Xa(y,C)}}var nd={readContext:hs,useCallback:ii,useContext:ii,useEffect:ii,useImperativeHandle:ii,useInsertionEffect:ii,useLayoutEffect:ii,useMemo:ii,useReducer:ii,useRef:ii,useState:ii,useDebugValue:ii,useDeferredValue:ii,useTransition:ii,useMutableSource:ii,useSyncExternalStore:ii,useId:ii,unstable_isNewReconciler:!1},Ky={readContext:hs,useCallback:function(y,w){return _a().memoizedState=[y,w===void 0?null:w],y},useContext:hs,useEffect:pm,useImperativeHandle:function(y,w,C){return C=C!=null?C.concat([y]):null,Ll(4194308,4,jf.bind(null,w,y),C)},useLayoutEffect:function(y,w){return Ll(4194308,4,y,w)},useInsertionEffect:function(y,w){return Ll(4,2,y,w)},useMemo:function(y,w){var C=_a();return w=w===void 0?null:w,y=y(),C.memoizedState=[y,w],y},useReducer:function(y,w,C){var k=_a();return w=C!==void 0?C(w):w,k.memoizedState=k.baseState=w,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:y,lastRenderedState:w},k.queue=y,y=y.dispatch=c_.bind(null,gr,y),[k.memoizedState,y]},useRef:function(y){var w=_a();return y={current:y},w.memoizedState=y},useState:kf,useDebugValue:gm,useDeferredValue:function(y){var w=kf(y),C=w[0],k=w[1];return pm(function(){var U=ks.transition;ks.transition={};try{k(y)}finally{ks.transition=U}},[y]),C},useTransition:function(){var y=kf(!1),w=y[0];return y=ym.bind(null,y[1]),_a().memoizedState=y,[w,y]},useMutableSource:function(){},useSyncExternalStore:function(y,w,C){var k=gr,U=_a();if(lr){if(C===void 0)throw Error(a(407));C=C()}else{if(C=w(),Rr===null)throw Error(a(349));(Tc&30)!==0||Wy(k,w,C)}U.memoizedState=C;var $={value:C,getSnapshot:w};return U.queue=$,pm(Do.bind(null,k,$,y),[y]),k.flags|=2048,Df(9,Gy.bind(null,k,$,C,w),void 0,null),C},useId:function(){var y=_a(),w=Rr.identifierPrefix;if(lr){var C=Io,k=No;C=(k&~(1<<32-ds(k)-1)).toString(32)+C,w=":"+w+"R"+C,C=Ac++,0<C&&(w+="H"+C.toString(32)),w+=":"}else C=Of++,w=":"+w+"r"+C.toString(32)+":";return y.memoizedState=w},unstable_isNewReconciler:!1},Xy={readContext:hs,useCallback:vm,useContext:hs,useEffect:Zu,useImperativeHandle:ed,useInsertionEffect:Qn,useLayoutEffect:mm,useMemo:td,useReducer:Nf,useRef:l_,useState:function(){return Nf(Qa)},useDebugValue:gm,useDeferredValue:function(y){var w=Nf(Qa),C=w[0],k=w[1];return Zu(function(){var U=ks.transition;ks.transition={};try{k(y)}finally{ks.transition=U}},[y]),C},useTransition:function(){var y=Nf(Qa)[0],w=Sa().memoizedState;return[y,w]},useMutableSource:Vy,useSyncExternalStore:Hy,useId:Mc,unstable_isNewReconciler:!1},Yy={readContext:hs,useCallback:vm,useContext:hs,useEffect:Zu,useImperativeHandle:ed,useInsertionEffect:Qn,useLayoutEffect:mm,useMemo:td,useReducer:If,useRef:l_,useState:function(){return If(Qa)},useDebugValue:gm,useDeferredValue:function(y){var w=If(Qa),C=w[0],k=w[1];return Zu(function(){var U=ks.transition;ks.transition={};try{k(y)}finally{ks.transition=U}},[y]),C},useTransition:function(){var y=If(Qa)[0],w=Sa().memoizedState;return[y,w]},useMutableSource:Vy,useSyncExternalStore:Hy,useId:Mc,unstable_isNewReconciler:!1};function Jy(y,w){try{var C="",k=w;do C+=Iy(k),k=k.return;while(k);var U=C}catch($){U=`
Error generating stack: `+$.message+`
`+$.stack}return{value:y,source:w,stack:U}}function xm(y,w){try{console.error(w.value)}catch(C){setTimeout(function(){throw C})}}var yM=typeof WeakMap=="function"?WeakMap:Map;function d_(y,w,C){C=Oo(-1,C),C.tag=3,C.payload={element:null};var k=w.value;return C.callback=function(){ld||(ld=!0,ir=k),xm(y,w)},C}function bm(y,w,C){C=Oo(-1,C),C.tag=3;var k=y.type.getDerivedStateFromError;if(typeof k=="function"){var U=w.value;C.payload=function(){return k(U)},C.callback=function(){xm(y,w)}}var $=y.stateNode;return $!==null&&typeof $.componentDidCatch=="function"&&(C.callback=function(){xm(y,w),typeof k!="function"&&(Aa===null?Aa=new Set([this]):Aa.add(this));var oe=w.stack;this.componentDidCatch(w.value,{componentStack:oe!==null?oe:""})}),C}function jo(y,w,C){var k=y.pingCache;if(k===null){k=y.pingCache=new yM;var U=new Set;k.set(w,U)}else U=k.get(w),U===void 0&&(U=new Set,k.set(w,U));U.has(C)||(U.add(C),y=m0.bind(null,y,w,C),w.then(y,y))}function Qy(y){do{var w;if((w=y.tag===13)&&(w=y.memoizedState,w=w!==null?w.dehydrated!==null:!0),w)return y;y=y.return}while(y!==null);return null}function Pc(y,w,C,k,U){return(y.mode&1)===0?(y===w?y.flags|=65536:(y.flags|=128,C.flags|=131072,C.flags&=-52805,C.tag===1&&(C.alternate===null?C.tag=17:(w=Oo(-1,1),w.tag=2,Nl(C,w))),C.lanes|=1),y):(y.flags|=65536,y.lanes=U,y)}function Xr(y){y.flags|=4}function rd(y,w){if(y!==null&&y.child===w.child)return!0;if((w.flags&16)!==0)return!1;for(y=w.child;y!==null;){if((y.flags&12854)!==0||(y.subtreeFlags&12854)!==0)return!1;y=y.sibling}return!0}var Ds,Cc,wm,_m;if(Ee)Ds=function(y,w){for(var C=w.child;C!==null;){if(C.tag===5||C.tag===6)Q(y,C.stateNode);else if(C.tag!==4&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===w)break;for(;C.sibling===null;){if(C.return===null||C.return===w)return;C=C.return}C.sibling.return=C.return,C=C.sibling}},Cc=function(){},wm=function(y,w,C,k,U){if(y=y.memoizedProps,y!==k){var $=w.stateNode,oe=wa(ps.current);C=ce($,C,y,k,U,oe),(w.updateQueue=C)&&Xr(w)}},_m=function(y,w,C,k){C!==k&&Xr(w)};else if(ee){Ds=function(y,w,C,k){for(var U=w.child;U!==null;){if(U.tag===5){var $=U.stateNode;C&&k&&($=mn($,U.type,U.memoizedProps,U)),Q(y,$)}else if(U.tag===6)$=U.stateNode,C&&k&&($=An($,U.memoizedProps,U)),Q(y,$);else if(U.tag!==4){if(U.tag===22&&U.memoizedState!==null)$=U.child,$!==null&&($.return=U),Ds(y,U,!0,!0);else if(U.child!==null){U.child.return=U,U=U.child;continue}}if(U===w)break;for(;U.sibling===null;){if(U.return===null||U.return===w)return;U=U.return}U.sibling.return=U.return,U=U.sibling}};var Ul=function(y,w,C,k){for(var U=w.child;U!==null;){if(U.tag===5){var $=U.stateNode;C&&k&&($=mn($,U.type,U.memoizedProps,U)),We(y,$)}else if(U.tag===6)$=U.stateNode,C&&k&&($=An($,U.memoizedProps,U)),We(y,$);else if(U.tag!==4){if(U.tag===22&&U.memoizedState!==null)$=U.child,$!==null&&($.return=U),Ul(y,U,!0,!0);else if(U.child!==null){U.child.return=U,U=U.child;continue}}if(U===w)break;for(;U.sibling===null;){if(U.return===null||U.return===w)return;U=U.return}U.sibling.return=U.return,U=U.sibling}};Cc=function(y,w){var C=w.stateNode;if(!rd(y,w)){y=C.containerInfo;var k=zt(y);Ul(k,w,!1,!1),C.pendingChildren=k,Xr(w),xt(y,k)}},wm=function(y,w,C,k,U){var $=y.stateNode,oe=y.memoizedProps;if((y=rd(y,w))&&oe===k)w.stateNode=$;else{var me=w.stateNode,je=wa(ps.current),nt=null;oe!==k&&(nt=ce(me,C,oe,k,U,je)),y&&nt===null?w.stateNode=$:($=st($,nt,C,oe,k,w,y,me),ie($,C,k,U,je)&&Xr(w),w.stateNode=$,y?Xr(w):Ds($,w,!1,!1))}},_m=function(y,w,C,k){C!==k?(y=wa(Sc.current),C=wa(ps.current),w.stateNode=Ce(k,y,C,w),Xr(w)):w.stateNode=y.stateNode}}else Cc=function(){},wm=function(){},_m=function(){};function Lo(y,w){if(!lr)switch(y.tailMode){case"hidden":w=y.tail;for(var C=null;w!==null;)w.alternate!==null&&(C=w),w=w.sibling;C===null?y.tail=null:C.sibling=null;break;case"collapsed":C=y.tail;for(var k=null;C!==null;)C.alternate!==null&&(k=C),C=C.sibling;k===null?w||y.tail===null?y.tail=null:y.tail.sibling=null:k.sibling=null}}function Cr(y){var w=y.alternate!==null&&y.alternate.child===y.child,C=0,k=0;if(w)for(var U=y.child;U!==null;)C|=U.lanes|U.childLanes,k|=U.subtreeFlags&14680064,k|=U.flags&14680064,U.return=y,U=U.sibling;else for(U=y.child;U!==null;)C|=U.lanes|U.childLanes,k|=U.subtreeFlags,k|=U.flags,U.return=y,U=U.sibling;return y.subtreeFlags|=k,y.childLanes=C,w}function Sm(y,w,C){var k=w.pendingProps;switch(Fy(w),w.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cr(w),null;case 1:return Pr(w.type)&&nr(),Cr(w),null;case 3:return k=w.stateNode,Ju(),Lt(wr),Lt(yn),Ec(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(y===null||y.child===null)&&(Cf(w)?Xr(w):y===null||y.memoizedState.isDehydrated&&(w.flags&256)===0||(w.flags|=1024,ia!==null&&(Jf(ia),ia=null))),Cc(y,w),Cr(w),null;case 5:$y(w),C=wa(Sc.current);var U=w.type;if(y!==null&&w.stateNode!=null)wm(y,w,U,k,C),y.ref!==w.ref&&(w.flags|=512,w.flags|=2097152);else{if(!k){if(w.stateNode===null)throw Error(a(166));return Cr(w),null}if(y=wa(ps.current),Cf(w)){if(!Me)throw Error(a(175));y=Ry(w.stateNode,w.type,w.memoizedProps,C,y,w,!Gu),w.updateQueue=y,y!==null&&Xr(w)}else{var $=q(U,k,C,y,w);Ds($,w,!1,!1),w.stateNode=$,ie($,U,k,C,y)&&Xr(w)}w.ref!==null&&(w.flags|=512,w.flags|=2097152)}return Cr(w),null;case 6:if(y&&w.stateNode!=null)_m(y,w,y.memoizedProps,k);else{if(typeof k!="string"&&w.stateNode===null)throw Error(a(166));if(y=wa(Sc.current),C=wa(ps.current),Cf(w)){if(!Me)throw Error(a(176));if(y=w.stateNode,k=w.memoizedProps,(C=Po(y,k,w,!Gu))&&(U=Yi,U!==null))switch($=(U.mode&1)!==0,U.tag){case 3:Ft(U.stateNode.containerInfo,y,k,$);break;case 5:Wt(U.type,U.memoizedProps,U.stateNode,y,k,$)}C&&Xr(w)}else w.stateNode=Ce(k,y,C,w)}return Cr(w),null;case 13:if(Lt(mr),k=w.memoizedState,lr&&vi!==null&&(w.mode&1)!==0&&(w.flags&128)===0){for(y=vi;y;)y=xa(y);return qu(),w.flags|=98560,w}if(k!==null&&k.dehydrated!==null){if(k=Cf(w),y===null){if(!k)throw Error(a(318));if(!Me)throw Error(a(344));if(y=w.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(a(317));Hp(y,w)}else qu(),(w.flags&128)===0&&(w.memoizedState=null),w.flags|=4;return Cr(w),null}return ia!==null&&(Jf(ia),ia=null),(w.flags&128)!==0?(w.lanes=C,w):(k=k!==null,C=!1,y===null?Cf(w):C=y.memoizedState!==null,k&&!C&&(w.child.flags|=8192,(w.mode&1)!==0&&(y===null||(mr.current&1)!==0?Sr===0&&(Sr=3):Rm())),w.updateQueue!==null&&(w.flags|=4),Cr(w),null);case 4:return Ju(),Cc(y,w),y===null&&Le(w.stateNode.containerInfo),Cr(w),null;case 10:return Pf(w.type._context),Cr(w),null;case 17:return Pr(w.type)&&nr(),Cr(w),null;case 19:if(Lt(mr),U=w.memoizedState,U===null)return Cr(w),null;if(k=(w.flags&128)!==0,$=U.rendering,$===null)if(k)Lo(U,!1);else{if(Sr!==0||y!==null&&(y.flags&128)!==0)for(y=w.child;y!==null;){if($=cm(y),$!==null){for(w.flags|=128,Lo(U,!1),y=$.updateQueue,y!==null&&(w.updateQueue=y,w.flags|=4),w.subtreeFlags=0,y=C,k=w.child;k!==null;)C=k,U=y,C.flags&=14680066,$=C.alternate,$===null?(C.childLanes=0,C.lanes=U,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=$.childLanes,C.lanes=$.lanes,C.child=$.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=$.memoizedProps,C.memoizedState=$.memoizedState,C.updateQueue=$.updateQueue,C.type=$.type,U=$.dependencies,C.dependencies=U===null?null:{lanes:U.lanes,firstContext:U.firstContext}),k=k.sibling;return Et(mr,mr.current&1|2),w.child}y=y.sibling}U.tail!==null&&Kr()>zl&&(w.flags|=128,k=!0,Lo(U,!1),w.lanes=4194304)}else{if(!k)if(y=cm($),y!==null){if(w.flags|=128,k=!0,y=y.updateQueue,y!==null&&(w.updateQueue=y,w.flags|=4),Lo(U,!0),U.tail===null&&U.tailMode==="hidden"&&!$.alternate&&!lr)return Cr(w),null}else 2*Kr()-U.renderingStartTime>zl&&C!==1073741824&&(w.flags|=128,k=!0,Lo(U,!1),w.lanes=4194304);U.isBackwards?($.sibling=w.child,w.child=$):(y=U.last,y!==null?y.sibling=$:w.child=$,U.last=$)}return U.tail!==null?(w=U.tail,U.rendering=w,U.tail=w.sibling,U.renderingStartTime=Kr(),w.sibling=null,y=mr.current,Et(mr,k?y&1|2:y&1),w):(Cr(w),null);case 22:case 23:return Qf(),k=w.memoizedState!==null,y!==null&&y.memoizedState!==null!==k&&(w.flags|=8192),k&&(w.mode&1)!==0?(ji&1073741824)!==0&&(Cr(w),Ee&&w.subtreeFlags&6&&(w.flags|=8192)):Cr(w),null;case 24:return null;case 25:return null}throw Error(a(156,w.tag))}var Zy=o.ReactCurrentOwner,si=!1;function _r(y,w,C,k){w.child=y===null?a_(w,null,C,k):ko(w,y.child,C,k)}function Zn(y,w,C,k,U){C=C.render;var $=w.ref;return Vu(w,U),k=Qu(y,w,C,k,$,U),C=jl(),y!==null&&!si?(w.updateQueue=y.updateQueue,w.flags&=-2053,y.lanes&=~U,ms(y,w,U)):(lr&&C&&Uy(w),w.flags|=1,_r(y,w,k,U),w.child)}function Wn(y,w,C,k,U){if(y===null){var $=C.type;return typeof $=="function"&&!Nm($)&&$.defaultProps===void 0&&C.compare===null&&C.defaultProps===void 0?(w.tag=15,w.type=$,Uo(y,w,$,k,U)):(y=Im(C.type,null,k,w,w.mode,U),y.ref=w.ref,y.return=w,w.child=y)}if($=y.child,(y.lanes&U)===0){var oe=$.memoizedProps;if(C=C.compare,C=C!==null?C:ba,C(oe,k)&&y.ref===w.ref)return ms(y,w,U)}return w.flags|=1,y=qo($,k),y.ref=w.ref,y.return=w,w.child=y}function Uo(y,w,C,k,U){if(y!==null&&ba(y.memoizedProps,k)&&y.ref===w.ref)if(si=!1,(y.lanes&U)!==0)(y.flags&131072)!==0&&(si=!0);else return w.lanes=y.lanes,ms(y,w,U);return Fo(y,w,C,k,U)}function yi(y,w,C){var k=w.pendingProps,U=k.children,$=y!==null?y.memoizedState:null;if(k.mode==="hidden")if((w.mode&1)===0)w.memoizedState={baseLanes:0,cachePool:null},Et(Uc,ji),ji|=C;else if((C&1073741824)!==0)w.memoizedState={baseLanes:0,cachePool:null},k=$!==null?$.baseLanes:C,Et(Uc,ji),ji|=k;else return y=$!==null?$.baseLanes|C:C,w.lanes=w.childLanes=1073741824,w.memoizedState={baseLanes:y,cachePool:null},w.updateQueue=null,Et(Uc,ji),ji|=y,null;else $!==null?(k=$.baseLanes|C,w.memoizedState=null):k=C,Et(Uc,ji),ji|=k;return _r(y,w,U,C),w.child}function Ji(y,w){var C=w.ref;(y===null&&C!==null||y!==null&&y.ref!==C)&&(w.flags|=512,w.flags|=2097152)}function Fo(y,w,C,k,U){var $=Pr(C)?Ka:yn.current;return $=qi(w,$),Vu(w,U),C=Qu(y,w,C,k,$,U),k=jl(),y!==null&&!si?(w.updateQueue=y.updateQueue,w.flags&=-2053,y.lanes&=~U,ms(y,w,U)):(lr&&k&&Uy(w),w.flags|=1,_r(y,w,C,U),w.child)}function Rc(y,w,C,k,U){if(Pr(C)){var $=!0;gi(w)}else $=!1;if(Vu(w,U),w.stateNode===null)y!==null&&(y.alternate=null,w.alternate=null,w.flags|=2),t_(w,C,k),Ly(w,C,k,U),k=!0;else if(y===null){var oe=w.stateNode,me=w.memoizedProps;oe.props=me;var je=oe.context,nt=C.contextType;typeof nt=="object"&&nt!==null?nt=hs(nt):(nt=Pr(C)?Ka:yn.current,nt=qi(w,nt));var _t=C.getDerivedStateFromProps,dn=typeof _t=="function"||typeof oe.getSnapshotBeforeUpdate=="function";dn||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(me!==k||je!==nt)&&n_(w,oe,k,nt),na=!1;var Vt=w.memoizedState;oe.state=Vt,nm(w,k,oe,U),je=w.memoizedState,me!==k||Vt!==je||wr.current||na?(typeof _t=="function"&&(Dy(w,C,_t,k),je=w.memoizedState),(me=na||jy(w,C,me,k,Vt,je,nt))?(dn||typeof oe.UNSAFE_componentWillMount!="function"&&typeof oe.componentWillMount!="function"||(typeof oe.componentWillMount=="function"&&oe.componentWillMount(),typeof oe.UNSAFE_componentWillMount=="function"&&oe.UNSAFE_componentWillMount()),typeof oe.componentDidMount=="function"&&(w.flags|=4194308)):(typeof oe.componentDidMount=="function"&&(w.flags|=4194308),w.memoizedProps=k,w.memoizedState=je),oe.props=k,oe.state=je,oe.context=nt,k=me):(typeof oe.componentDidMount=="function"&&(w.flags|=4194308),k=!1)}else{oe=w.stateNode,ky(y,w),me=w.memoizedProps,nt=w.type===w.elementType?me:fs(w.type,me),oe.props=nt,dn=w.pendingProps,Vt=oe.context,je=C.contextType,typeof je=="object"&&je!==null?je=hs(je):(je=Pr(C)?Ka:yn.current,je=qi(w,je));var vn=C.getDerivedStateFromProps;(_t=typeof vn=="function"||typeof oe.getSnapshotBeforeUpdate=="function")||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(me!==dn||Vt!==je)&&n_(w,oe,k,je),na=!1,Vt=w.memoizedState,oe.state=Vt,nm(w,k,oe,U);var pt=w.memoizedState;me!==dn||Vt!==pt||wr.current||na?(typeof vn=="function"&&(Dy(w,C,vn,k),pt=w.memoizedState),(nt=na||jy(w,C,nt,k,Vt,pt,je)||!1)?(_t||typeof oe.UNSAFE_componentWillUpdate!="function"&&typeof oe.componentWillUpdate!="function"||(typeof oe.componentWillUpdate=="function"&&oe.componentWillUpdate(k,pt,je),typeof oe.UNSAFE_componentWillUpdate=="function"&&oe.UNSAFE_componentWillUpdate(k,pt,je)),typeof oe.componentDidUpdate=="function"&&(w.flags|=4),typeof oe.getSnapshotBeforeUpdate=="function"&&(w.flags|=1024)):(typeof oe.componentDidUpdate!="function"||me===y.memoizedProps&&Vt===y.memoizedState||(w.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||me===y.memoizedProps&&Vt===y.memoizedState||(w.flags|=1024),w.memoizedProps=k,w.memoizedState=pt),oe.props=k,oe.state=pt,oe.context=je,k=nt):(typeof oe.componentDidUpdate!="function"||me===y.memoizedProps&&Vt===y.memoizedState||(w.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||me===y.memoizedProps&&Vt===y.memoizedState||(w.flags|=1024),k=!1)}return Di(y,w,C,k,$,U)}function Di(y,w,C,k,U,$){Ji(y,w);var oe=(w.flags&128)!==0;if(!k&&!oe)return U&&Rl(w,C,!1),ms(y,w,$);k=w.stateNode,Zy.current=w;var me=oe&&typeof C.getDerivedStateFromError!="function"?null:k.render();return w.flags|=1,y!==null&&oe?(w.child=ko(w,y.child,null,$),w.child=ko(w,null,me,$)):_r(y,w,me,$),w.memoizedState=k.state,U&&Rl(w,C,!0),w.child}function Ff(y){var w=y.stateNode;w.pendingContext?Os(y,w.pendingContext,w.pendingContext!==w.context):w.context&&Os(y,w.context,!1),lm(y,w.containerInfo)}function e0(y,w,C,k,U){return qu(),om(U),w.flags|=256,_r(y,w,C,k),w.child}var Bf={dehydrated:null,treeContext:null,retryLane:0};function Oc(y){return{baseLanes:y,cachePool:null}}function t0(y,w,C){var k=w.pendingProps,U=mr.current,$=!1,oe=(w.flags&128)!==0,me;if((me=oe)||(me=y!==null&&y.memoizedState===null?!1:(U&2)!==0),me?($=!0,w.flags&=-129):(y===null||y.memoizedState!==null)&&(U|=1),Et(mr,U&1),y===null)return kl(w),y=w.memoizedState,y!==null&&(y=y.dehydrated,y!==null)?((w.mode&1)===0?w.lanes=1:Ao(y)?w.lanes=8:w.lanes=1073741824,null):(U=k.children,y=k.fallback,$?(k=w.mode,$=w.child,U={mode:"hidden",children:U},(k&1)===0&&$!==null?($.childLanes=0,$.pendingProps=U):$=th(U,k,0,null),y=Vc(y,k,C,null),$.return=w,y.return=w,$.sibling=y,w.child=$,w.child.memoizedState=Oc(C),w.memoizedState=Bf,y):Ea(w,U));if(U=y.memoizedState,U!==null){if(me=U.dehydrated,me!==null){if(oe)return w.flags&256?(w.flags&=-257,$f(y,w,C,Error(a(422)))):w.memoizedState!==null?(w.child=y.child,w.flags|=128,null):($=k.fallback,U=w.mode,k=th({mode:"visible",children:k.children},U,0,null),$=Vc($,U,C,null),$.flags|=2,k.return=w,$.return=w,k.sibling=$,w.child=k,(w.mode&1)!==0&&ko(w,y.child,null,C),w.child.memoizedState=Oc(C),w.memoizedState=Bf,$);if((w.mode&1)===0)w=$f(y,w,C,null);else if(Ao(me))w=$f(y,w,C,Error(a(419)));else if(k=(C&y.childLanes)!==0,si||k){if(k=Rr,k!==null){switch(C&-C){case 4:$=2;break;case 16:$=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:$=32;break;case 536870912:$=268435456;break;default:$=0}k=($&(k.suspendedLanes|C))!==0?0:$,k!==0&&k!==U.retryLane&&(U.retryLane=k,Li(y,k,-1))}Rm(),w=$f(y,w,C,Error(a(421)))}else us(me)?(w.flags|=128,w.child=y.child,w=g_.bind(null,y),Mo(me,w),w=null):(C=U.treeContext,Me&&(vi=Vp(me),Yi=w,lr=!0,ia=null,Gu=!1,C!==null&&(ra[Ns++]=No,ra[Ns++]=Io,ra[Ns++]=bc,No=C.id,Io=C.overflow,bc=w)),w=Ea(w,w.pendingProps.children),w.flags|=4096);return w}return $?(k=Em(y,w,k.children,k.fallback,C),$=w.child,U=y.child.memoizedState,$.memoizedState=U===null?Oc(C):{baseLanes:U.baseLanes|C,cachePool:null},$.childLanes=y.childLanes&~C,w.memoizedState=Bf,k):(C=zf(y,w,k.children,C),w.memoizedState=null,C)}return $?(k=Em(y,w,k.children,k.fallback,C),$=w.child,U=y.child.memoizedState,$.memoizedState=U===null?Oc(C):{baseLanes:U.baseLanes|C,cachePool:null},$.childLanes=y.childLanes&~C,w.memoizedState=Bf,k):(C=zf(y,w,k.children,C),w.memoizedState=null,C)}function Ea(y,w){return w=th({mode:"visible",children:w},y.mode,0,null),w.return=y,y.child=w}function zf(y,w,C,k){var U=y.child;return y=U.sibling,C=qo(U,{mode:"visible",children:C}),(w.mode&1)===0&&(C.lanes=k),C.return=w,C.sibling=null,y!==null&&(k=w.deletions,k===null?(w.deletions=[y],w.flags|=16):k.push(y)),w.child=C}function Em(y,w,C,k,U){var $=w.mode;y=y.child;var oe=y.sibling,me={mode:"hidden",children:C};return($&1)===0&&w.child!==y?(C=w.child,C.childLanes=0,C.pendingProps=me,w.deletions=null):(C=qo(y,me),C.subtreeFlags=y.subtreeFlags&14680064),oe!==null?k=qo(oe,k):(k=Vc(k,$,U,null),k.flags|=2),k.return=w,C.return=w,C.sibling=k,w.child=C,k}function $f(y,w,C,k){return k!==null&&om(k),ko(w,y.child,null,C),y=Ea(w,w.pendingProps.children),y.flags|=2,w.memoizedState=null,y}function f_(y,w,C){y.lanes|=w;var k=y.alternate;k!==null&&(k.lanes|=w),xc(y.return,w,C)}function Za(y,w,C,k,U){var $=y.memoizedState;$===null?y.memoizedState={isBackwards:w,rendering:null,renderingStartTime:0,last:k,tail:C,tailMode:U}:($.isBackwards=w,$.rendering=null,$.renderingStartTime=0,$.last=k,$.tail=C,$.tailMode=U)}function Nc(y,w,C){var k=w.pendingProps,U=k.revealOrder,$=k.tail;if(_r(y,w,k.children,C),k=mr.current,(k&2)!==0)k=k&1|2,w.flags|=128;else{if(y!==null&&(y.flags&128)!==0)e:for(y=w.child;y!==null;){if(y.tag===13)y.memoizedState!==null&&f_(y,C,w);else if(y.tag===19)f_(y,C,w);else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===w)break e;for(;y.sibling===null;){if(y.return===null||y.return===w)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}k&=1}if(Et(mr,k),(w.mode&1)===0)w.memoizedState=null;else switch(U){case"forwards":for(C=w.child,U=null;C!==null;)y=C.alternate,y!==null&&cm(y)===null&&(U=C),C=C.sibling;C=U,C===null?(U=w.child,w.child=null):(U=C.sibling,C.sibling=null),Za(w,!1,U,C,$);break;case"backwards":for(C=null,U=w.child,w.child=null;U!==null;){if(y=U.alternate,y!==null&&cm(y)===null){w.child=U;break}y=U.sibling,U.sibling=C,C=U,U=y}Za(w,!0,C,null,$);break;case"together":Za(w,!1,null,null,void 0);break;default:w.memoizedState=null}return w.child}function ms(y,w,C){if(y!==null&&(w.dependencies=y.dependencies),eo|=w.lanes,(C&w.childLanes)===0)return null;if(y!==null&&w.child!==y.child)throw Error(a(153));if(w.child!==null){for(y=w.child,C=qo(y,y.pendingProps),w.child=C,C.return=w;y.sibling!==null;)y=y.sibling,C=C.sibling=qo(y,y.pendingProps),C.return=w;C.sibling=null}return w.child}function Tm(y,w,C){switch(w.tag){case 3:Ff(w),qu();break;case 5:o_(w);break;case 1:Pr(w.type)&&gi(w);break;case 4:lm(w,w.stateNode.containerInfo);break;case 10:yc(w,w.type._context,w.memoizedProps.value);break;case 13:var k=w.memoizedState;if(k!==null)return k.dehydrated!==null?(Et(mr,mr.current&1),w.flags|=128,null):(C&w.child.childLanes)!==0?t0(y,w,C):(Et(mr,mr.current&1),y=ms(y,w,C),y!==null?y.sibling:null);Et(mr,mr.current&1);break;case 19:if(k=(C&w.childLanes)!==0,(y.flags&128)!==0){if(k)return Nc(y,w,C);w.flags|=128}var U=w.memoizedState;if(U!==null&&(U.rendering=null,U.tail=null,U.lastEffect=null),Et(mr,mr.current),k)break;return null;case 22:case 23:return w.lanes=0,yi(y,w,C)}return ms(y,w,C)}function Am(y,w){switch(Fy(w),w.tag){case 1:return Pr(w.type)&&nr(),y=w.flags,y&65536?(w.flags=y&-65537|128,w):null;case 3:return Ju(),Lt(wr),Lt(yn),Ec(),y=w.flags,(y&65536)!==0&&(y&128)===0?(w.flags=y&-65537|128,w):null;case 5:return $y(w),null;case 13:if(Lt(mr),y=w.memoizedState,y!==null&&y.dehydrated!==null){if(w.alternate===null)throw Error(a(340));qu()}return y=w.flags,y&65536?(w.flags=y&-65537|128,w):null;case 19:return Lt(mr),null;case 4:return Ju(),null;case 10:return Pf(w.type._context),null;case 22:case 23:return Qf(),null;case 24:return null;default:return null}}var Qi=!1,ai=!1,Ic=typeof WeakSet=="function"?WeakSet:Set,lt=null;function sa(y,w){var C=y.ref;if(C!==null)if(typeof C=="function")try{C(null)}catch(k){es(y,w,k)}else C.current=null}function Bo(y,w,C){try{C()}catch(k){es(y,w,k)}}var n0=!1;function r0(y,w){for(V(y.containerInfo),lt=w;lt!==null;)if(y=lt,w=y.child,(y.subtreeFlags&1028)!==0&&w!==null)w.return=y,lt=w;else for(;lt!==null;){y=lt;try{var C=y.alternate;if((y.flags&1024)!==0)switch(y.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var k=C.memoizedProps,U=C.memoizedState,$=y.stateNode,oe=$.getSnapshotBeforeUpdate(y.elementType===y.type?k:fs(y.type,k),U);$.__reactInternalSnapshotBeforeUpdate=oe}break;case 3:Ee&&Qe(y.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(me){es(y,y.return,me)}if(w=y.sibling,w!==null){w.return=y.return,lt=w;break}lt=y.return}return C=n0,n0=!1,C}function zo(y,w,C){var k=w.updateQueue;if(k=k!==null?k.lastEffect:null,k!==null){var U=k=k.next;do{if((U.tag&y)===y){var $=U.destroy;U.destroy=void 0,$!==void 0&&Bo(w,C,$)}U=U.next}while(U!==k)}}function xi(y,w){if(w=w.updateQueue,w=w!==null?w.lastEffect:null,w!==null){var C=w=w.next;do{if((C.tag&y)===y){var k=C.create;C.destroy=k()}C=C.next}while(C!==w)}}function Zi(y){var w=y.ref;if(w!==null){var C=y.stateNode;y.tag===5?y=K(C):y=C,typeof w=="function"?w(y):w.current=y}}function rr(y,w,C){if(Ya&&typeof Ya.onCommitFiberUnmount=="function")try{Ya.onCommitFiberUnmount(Ef,w)}catch{}switch(w.tag){case 0:case 11:case 14:case 15:if(y=w.updateQueue,y!==null&&(y=y.lastEffect,y!==null)){var k=y=y.next;do{var U=k,$=U.destroy;U=U.tag,$!==void 0&&((U&2)!==0||(U&4)!==0)&&Bo(w,C,$),k=k.next}while(k!==y)}break;case 1:if(sa(w,C),y=w.stateNode,typeof y.componentWillUnmount=="function")try{y.props=w.memoizedProps,y.state=w.memoizedState,y.componentWillUnmount()}catch(oe){es(w,C,oe)}break;case 5:sa(w,C);break;case 4:Ee?a0(y,w,C):ee&&ee&&(w=w.stateNode.containerInfo,C=zt(w),Ot(w,C))}}function aa(y,w,C){for(var k=w;;)if(rr(y,k,C),k.child===null||Ee&&k.tag===4){if(k===w)break;for(;k.sibling===null;){if(k.return===null||k.return===w)return;k=k.return}k.sibling.return=k.return,k=k.sibling}else k.child.return=k,k=k.child}function i0(y){var w=y.alternate;w!==null&&(y.alternate=null,i0(w)),y.child=null,y.deletions=null,y.sibling=null,y.tag===5&&(w=y.stateNode,w!==null&&tt(w)),y.stateNode=null,y.return=null,y.dependencies=null,y.memoizedProps=null,y.memoizedState=null,y.pendingProps=null,y.stateNode=null,y.updateQueue=null}function s0(y){return y.tag===5||y.tag===3||y.tag===4}function Mm(y){e:for(;;){for(;y.sibling===null;){if(y.return===null||s0(y.return))return null;y=y.return}for(y.sibling.return=y.return,y=y.sibling;y.tag!==5&&y.tag!==6&&y.tag!==18;){if(y.flags&2||y.child===null||y.tag===4)continue e;y.child.return=y,y=y.child}if(!(y.flags&2))return y.stateNode}}function Pm(y){if(Ee){e:{for(var w=y.return;w!==null;){if(s0(w))break e;w=w.return}throw Error(a(160))}var C=w;switch(C.tag){case 5:w=C.stateNode,C.flags&32&&(Ve(w),C.flags&=-33),C=Mm(y),id(y,C,w);break;case 3:case 4:w=C.stateNode.containerInfo,C=Mm(y),Cm(y,C,w);break;default:throw Error(a(161))}}}function Cm(y,w,C){var k=y.tag;if(k===5||k===6)y=y.stateNode,w?Tt(C,y,w):Xt(C,y);else if(k!==4&&(y=y.child,y!==null))for(Cm(y,w,C),y=y.sibling;y!==null;)Cm(y,w,C),y=y.sibling}function id(y,w,C){var k=y.tag;if(k===5||k===6)y=y.stateNode,w?$t(C,y,w):Nt(C,y);else if(k!==4&&(y=y.child,y!==null))for(id(y,w,C),y=y.sibling;y!==null;)id(y,w,C),y=y.sibling}function a0(y,w,C){for(var k=w,U=!1,$,oe;;){if(!U){U=k.return;e:for(;;){if(U===null)throw Error(a(160));switch($=U.stateNode,U.tag){case 5:oe=!1;break e;case 3:$=$.containerInfo,oe=!0;break e;case 4:$=$.containerInfo,oe=!0;break e}U=U.return}U=!0}if(k.tag===5||k.tag===6)aa(y,k,C),oe?ue($,k.stateNode):gt($,k.stateNode);else if(k.tag===18)oe?Re($,k.stateNode):Ie($,k.stateNode);else if(k.tag===4){if(k.child!==null){$=k.stateNode.containerInfo,oe=!0,k.child.return=k,k=k.child;continue}}else if(rr(y,k,C),k.child!==null){k.child.return=k,k=k.child;continue}if(k===w)break;for(;k.sibling===null;){if(k.return===null||k.return===w)return;k=k.return,k.tag===4&&(U=!1)}k.sibling.return=k.return,k=k.sibling}}function Fl(y,w){if(Ee){switch(w.tag){case 0:case 11:case 14:case 15:zo(3,w,w.return),xi(3,w),zo(5,w,w.return);return;case 1:return;case 5:var C=w.stateNode;if(C!=null){var k=w.memoizedProps;y=y!==null?y.memoizedProps:k;var U=w.type,$=w.updateQueue;w.updateQueue=null,$!==null&&un(C,$,U,y,k,w)}return;case 6:if(w.stateNode===null)throw Error(a(162));C=w.memoizedProps,He(w.stateNode,y!==null?y.memoizedProps:C,C);return;case 3:Me&&y!==null&&y.memoizedState.isDehydrated&&we(w.stateNode.containerInfo);return;case 12:return;case 13:sd(w);return;case 19:sd(w);return;case 17:return}throw Error(a(163))}switch(w.tag){case 0:case 11:case 14:case 15:zo(3,w,w.return),xi(3,w),zo(5,w,w.return);return;case 12:return;case 13:sd(w);return;case 19:sd(w);return;case 3:Me&&y!==null&&y.memoizedState.isDehydrated&&we(w.stateNode.containerInfo);break;case 22:case 23:return}e:if(ee){switch(w.tag){case 1:case 5:case 6:break e;case 3:case 4:w=w.stateNode,Ot(w.containerInfo,w.pendingChildren);break e}throw Error(a(163))}}function sd(y){var w=y.updateQueue;if(w!==null){y.updateQueue=null;var C=y.stateNode;C===null&&(C=y.stateNode=new Ic),w.forEach(function(k){var U=v_.bind(null,y,k);C.has(k)||(C.add(k),k.then(U,U))})}}function xM(y,w){for(lt=w;lt!==null;){w=lt;var C=w.deletions;if(C!==null)for(var k=0;k<C.length;k++){var U=C[k];try{var $=y;Ee?a0($,U,w):aa($,U,w);var oe=U.alternate;oe!==null&&(oe.return=null),U.return=null}catch(Dt){es(U,w,Dt)}}if(C=w.child,(w.subtreeFlags&12854)!==0&&C!==null)C.return=w,lt=C;else for(;lt!==null;){w=lt;try{var me=w.flags;if(me&32&&Ee&&Ve(w.stateNode),me&512){var je=w.alternate;if(je!==null){var nt=je.ref;nt!==null&&(typeof nt=="function"?nt(null):nt.current=null)}}if(me&8192)switch(w.tag){case 13:if(w.memoizedState!==null){var _t=w.alternate;(_t===null||_t.memoizedState===null)&&(Xf=Kr())}break;case 22:var dn=w.memoizedState!==null,Vt=w.alternate,vn=Vt!==null&&Vt.memoizedState!==null;if(C=w,Ee){e:if(k=C,U=dn,$=null,Ee)for(var pt=k;;){if(pt.tag===5){if($===null){$=pt;var _i=pt.stateNode;U?ft(_i):Ge(pt.stateNode,pt.memoizedProps)}}else if(pt.tag===6){if($===null){var Bs=pt.stateNode;U?dt(Bs):de(Bs,pt.memoizedProps)}}else if((pt.tag!==22&&pt.tag!==23||pt.memoizedState===null||pt===k)&&pt.child!==null){pt.child.return=pt,pt=pt.child;continue}if(pt===k)break;for(;pt.sibling===null;){if(pt.return===null||pt.return===k)break e;$===pt&&($=null),pt=pt.return}$===pt&&($=null),pt.sibling.return=pt.return,pt=pt.sibling}}if(dn&&!vn&&(C.mode&1)!==0){lt=C;for(var Ae=C.child;Ae!==null;){for(C=lt=Ae;lt!==null;){k=lt;var ve=k.child;switch(k.tag){case 0:case 11:case 14:case 15:zo(4,k,k.return);break;case 1:sa(k,k.return);var ke=k.stateNode;if(typeof ke.componentWillUnmount=="function"){var ht=k.return;try{ke.props=k.memoizedProps,ke.state=k.memoizedState,ke.componentWillUnmount()}catch(Dt){es(k,ht,Dt)}}break;case 5:sa(k,k.return);break;case 22:if(k.memoizedState!==null){l0(C);continue}}ve!==null?(ve.return=k,lt=ve):l0(C)}Ae=Ae.sibling}}}switch(me&4102){case 2:Pm(w),w.flags&=-3;break;case 6:Pm(w),w.flags&=-3,Fl(w.alternate,w);break;case 4096:w.flags&=-4097;break;case 4100:w.flags&=-4097,Fl(w.alternate,w);break;case 4:Fl(w.alternate,w)}}catch(Dt){es(w,w.return,Dt)}if(C=w.sibling,C!==null){C.return=w.return,lt=C;break}lt=w.return}}}function Vf(y,w,C){lt=y,Hf(y)}function Hf(y,w,C){for(var k=(y.mode&1)!==0;lt!==null;){var U=lt,$=U.child;if(U.tag===22&&k){var oe=U.memoizedState!==null||Qi;if(!oe){var me=U.alternate,je=me!==null&&me.memoizedState!==null||ai;me=Qi;var nt=ai;if(Qi=oe,(ai=je)&&!nt)for(lt=U;lt!==null;)oe=lt,je=oe.child,oe.tag===22&&oe.memoizedState!==null?kc(U):je!==null?(je.return=oe,lt=je):kc(U);for(;$!==null;)lt=$,Hf($),$=$.sibling;lt=U,Qi=me,ai=nt}o0(y)}else(U.subtreeFlags&8772)!==0&&$!==null?($.return=U,lt=$):o0(y)}}function o0(y){for(;lt!==null;){var w=lt;if((w.flags&8772)!==0){var C=w.alternate;try{if((w.flags&8772)!==0)switch(w.tag){case 0:case 11:case 15:ai||xi(5,w);break;case 1:var k=w.stateNode;if(w.flags&4&&!ai)if(C===null)k.componentDidMount();else{var U=w.elementType===w.type?C.memoizedProps:fs(w.type,C.memoizedProps);k.componentDidUpdate(U,C.memoizedState,k.__reactInternalSnapshotBeforeUpdate)}var $=w.updateQueue;$!==null&&Zw(w,$,k);break;case 3:var oe=w.updateQueue;if(oe!==null){if(C=null,w.child!==null)switch(w.child.tag){case 5:C=K(w.child.stateNode);break;case 1:C=w.child.stateNode}Zw(w,oe,C)}break;case 5:var me=w.stateNode;C===null&&w.flags&4&&hn(me,w.type,w.memoizedProps,w);break;case 6:break;case 4:break;case 12:break;case 13:if(Me&&w.memoizedState===null){var je=w.alternate;if(je!==null){var nt=je.memoizedState;if(nt!==null){var _t=nt.dehydrated;_t!==null&&Ne(_t)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(a(163))}ai||w.flags&512&&Zi(w)}catch(dn){es(w,w.return,dn)}}if(w===y){lt=null;break}if(C=w.sibling,C!==null){C.return=w.return,lt=C;break}lt=w.return}}function l0(y){for(;lt!==null;){var w=lt;if(w===y){lt=null;break}var C=w.sibling;if(C!==null){C.return=w.return,lt=C;break}lt=w.return}}function kc(y){for(;lt!==null;){var w=lt;try{switch(w.tag){case 0:case 11:case 15:var C=w.return;try{xi(4,w)}catch(je){es(w,C,je)}break;case 1:var k=w.stateNode;if(typeof k.componentDidMount=="function"){var U=w.return;try{k.componentDidMount()}catch(je){es(w,U,je)}}var $=w.return;try{Zi(w)}catch(je){es(w,$,je)}break;case 5:var oe=w.return;try{Zi(w)}catch(je){es(w,oe,je)}}}catch(je){es(w,w.return,je)}if(w===y){lt=null;break}var me=w.sibling;if(me!==null){me.return=w.return,lt=me;break}lt=w.return}}var Wf=0,Dc=1,jc=2,$o=3,ad=4;if(typeof Symbol=="function"&&Symbol.for){var Lc=Symbol.for;Wf=Lc("selector.component"),Dc=Lc("selector.has_pseudo_class"),jc=Lc("selector.role"),$o=Lc("selector.test_id"),ad=Lc("selector.text")}function Gf(y){var w=xe(y);if(w!=null){if(typeof w.memoizedProps["data-testname"]!="string")throw Error(a(364));return w}if(y=ge(y),y===null)throw Error(a(362));return y.stateNode.current}function qf(y,w){switch(w.$$typeof){case Wf:if(y.type===w.value)return!0;break;case Dc:e:{w=w.value,y=[y,0];for(var C=0;C<y.length;){var k=y[C++],U=y[C++],$=w[U];if(k.tag!==5||!Fe(k)){for(;$!=null&&qf(k,$);)U++,$=w[U];if(U===w.length){w=!0;break e}else for(k=k.child;k!==null;)y.push(k,U),k=k.sibling}}w=!1}return w;case jc:if(y.tag===5&&mt(y.stateNode,w.value))return!0;break;case ad:if((y.tag===5||y.tag===6)&&(y=Be(y),y!==null&&0<=y.indexOf(w.value)))return!0;break;case $o:if(y.tag===5&&(y=y.memoizedProps["data-testname"],typeof y=="string"&&y.toLowerCase()===w.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Bl(y){switch(y.$$typeof){case Wf:return"<"+(N(y.value)||"Unknown")+">";case Dc:return":has("+(Bl(y)||"")+")";case jc:return'[role="'+y.value+'"]';case ad:return'"'+y.value+'"';case $o:return'[data-testname="'+y.value+'"]';default:throw Error(a(365))}}function js(y,w){var C=[];y=[y,0];for(var k=0;k<y.length;){var U=y[k++],$=y[k++],oe=w[$];if(U.tag!==5||!Fe(U)){for(;oe!=null&&qf(U,oe);)$++,oe=w[$];if($===w.length)C.push(U);else for(U=U.child;U!==null;)y.push(U,$),U=U.sibling}}return C}function Vo(y,w){if(!Z)throw Error(a(363));y=Gf(y),y=js(y,w),w=[],y=Array.from(y);for(var C=0;C<y.length;){var k=y[C++];if(k.tag===5)Fe(k)||w.push(k.stateNode);else for(k=k.child;k!==null;)y.push(k),k=k.sibling}return w}var c0=Math.ceil,Kf=o.ReactCurrentDispatcher,Ta=o.ReactCurrentOwner,Bn=o.ReactCurrentBatchConfig,gn=0,Rr=null,zn=null,cr=0,ji=0,Uc=Mr(0),Sr=0,od=null,eo=0,Ls=0,Fc=0,Ho=null,Lr=null,Xf=0,zl=1/0;function Bc(){zl=Kr()+500}var ld=!1,ir=null,Aa=null,cd=!1,to=null,zc=0,$c=0,Wo=null,er=-1,Er=0;function On(){return(gn&6)!==0?Kr():er!==-1?er:er=Kr()}function Ma(y){return(y.mode&1)===0?1:(gn&2)!==0&&cr!==0?cr&-cr:Qw.transition!==null?(Er===0&&(y=Bu,Bu<<=1,(Bu&4194240)===0&&(Bu=64),Er=y),Er):(y=xn,y!==0?y:Pe())}function Li(y,w,C){if(50<$c)throw $c=0,Wo=null,Error(a(185));var k=$l(y,w);return k===null?null:(pc(k,w,C),((gn&2)===0||k!==Rr)&&(k===Rr&&((gn&2)===0&&(Ls|=w),Sr===4&&wi(k,cr)),gs(k,C),w===1&&gn===0&&(y.mode&1)===0&&(Bc(),Yp&&ea())),k)}function $l(y,w){y.lanes|=w;var C=y.alternate;for(C!==null&&(C.lanes|=w),C=y,y=y.return;y!==null;)y.childLanes|=w,C=y.alternate,C!==null&&(C.childLanes|=w),C=y,y=y.return;return C.tag===3?C.stateNode:null}function gs(y,w){var C=y.callbackNode;Jw(y,w);var k=Sf(y,y===Rr?cr:0);if(k===0)C!==null&&$u(C),y.callbackNode=null,y.callbackPriority=0;else if(w=k&-k,y.callbackPriority!==w){if(C!=null&&$u(C),w===1)y.tag===0?Qp(Us.bind(null,y)):Jp(Us.bind(null,y)),Ze?re(function(){gn===0&&ea()}):mc(gc,ea),C=null;else{switch(Co(k)){case 1:C=gc;break;case 4:C=gM;break;case 16:C=Kp;break;case 536870912:C=Xp;break;default:C=Kp}C=Om(C,bi.bind(null,y))}y.callbackPriority=w,y.callbackNode=C}}function bi(y,w){if(er=-1,Er=0,(gn&6)!==0)throw Error(a(327));var C=y.callbackNode;if(no()&&y.callbackNode!==C)return null;var k=Sf(y,y===Rr?cr:0);if(k===0)return null;if((k&30)!==0||(k&y.expiredLanes)!==0||w)w=Zf(y,k);else{w=k;var U=gn;gn|=2;var $=f0();(Rr!==y||cr!==w)&&(Bc(),Go(y,w));do try{p_();break}catch(me){d0(y,me)}while(!0);Xi(),Kf.current=$,gn=U,zn!==null?w=0:(Rr=null,cr=0,w=Sr)}if(w!==0){if(w===2&&(U=Wp(y),U!==0&&(k=U,w=Yf(y,U))),w===1)throw C=od,Go(y,0),wi(y,k),gs(y,Kr()),C;if(w===6)wi(y,k);else{if(U=y.current.alternate,(k&30)===0&&!u0(U)&&(w=Zf(y,k),w===2&&($=Wp(y),$!==0&&(k=$,w=Yf(y,$))),w===1))throw C=od,Go(y,0),wi(y,k),gs(y,Kr()),C;switch(y.finishedWork=U,y.finishedLanes=k,w){case 0:case 1:throw Error(a(345));case 2:Pa(y,Lr);break;case 3:if(wi(y,k),(k&130023424)===k&&(w=Xf+500-Kr(),10<w)){if(Sf(y,0)!==0)break;if(U=y.suspendedLanes,(U&k)!==k){On(),y.pingedLanes|=y.suspendedLanes&U;break}y.timeoutHandle=he(Pa.bind(null,y,Lr),w);break}Pa(y,Lr);break;case 4:if(wi(y,k),(k&4194240)===k)break;for(w=y.eventTimes,U=-1;0<k;){var oe=31-ds(k);$=1<<oe,oe=w[oe],oe>U&&(U=oe),k&=~$}if(k=U,k=Kr()-k,k=(120>k?120:480>k?480:1080>k?1080:1920>k?1920:3e3>k?3e3:4320>k?4320:1960*c0(k/1960))-k,10<k){y.timeoutHandle=he(Pa.bind(null,y,Lr),k);break}Pa(y,Lr);break;case 5:Pa(y,Lr);break;default:throw Error(a(329))}}}return gs(y,Kr()),y.callbackNode===C?bi.bind(null,y):null}function Yf(y,w){var C=Ho;return y.current.memoizedState.isDehydrated&&(Go(y,w).flags|=256),y=Zf(y,w),y!==2&&(w=Lr,Lr=C,w!==null&&Jf(w)),y}function Jf(y){Lr===null?Lr=y:Lr.push.apply(Lr,y)}function u0(y){for(var w=y;;){if(w.flags&16384){var C=w.updateQueue;if(C!==null&&(C=C.stores,C!==null))for(var k=0;k<C.length;k++){var U=C[k],$=U.getSnapshot;U=U.value;try{if(!Ki($(),U))return!1}catch{return!1}}}if(C=w.child,w.subtreeFlags&16384&&C!==null)C.return=w,w=C;else{if(w===y)break;for(;w.sibling===null;){if(w.return===null||w.return===y)return!0;w=w.return}w.sibling.return=w.return,w=w.sibling}}return!0}function wi(y,w){for(w&=~Fc,w&=~Ls,y.suspendedLanes|=w,y.pingedLanes&=~w,y=y.expirationTimes;0<w;){var C=31-ds(w),k=1<<C;y[C]=-1,w&=~k}}function Us(y){if((gn&6)!==0)throw Error(a(327));no();var w=Sf(y,0);if((w&1)===0)return gs(y,Kr()),null;var C=Zf(y,w);if(y.tag!==0&&C===2){var k=Wp(y);k!==0&&(w=k,C=Yf(y,k))}if(C===1)throw C=od,Go(y,0),wi(y,w),gs(y,Kr()),C;if(C===6)throw Error(a(345));return y.finishedWork=y.current.alternate,y.finishedLanes=w,Pa(y,Lr),gs(y,Kr()),null}function ud(y){to!==null&&to.tag===0&&(gn&6)===0&&no();var w=gn;gn|=1;var C=Bn.transition,k=xn;try{if(Bn.transition=null,xn=1,y)return y()}finally{xn=k,Bn.transition=C,gn=w,(gn&6)===0&&ea()}}function Qf(){ji=Uc.current,Lt(Uc)}function Go(y,w){y.finishedWork=null,y.finishedLanes=0;var C=y.timeoutHandle;if(C!==be&&(y.timeoutHandle=be,De(C)),zn!==null)for(C=zn.return;C!==null;){var k=C;switch(Fy(k),k.tag){case 1:k=k.type.childContextTypes,k!=null&&nr();break;case 3:Ju(),Lt(wr),Lt(yn),Ec();break;case 5:$y(k);break;case 4:Ju();break;case 13:Lt(mr);break;case 19:Lt(mr);break;case 10:Pf(k.type._context);break;case 22:case 23:Qf()}C=C.return}if(Rr=y,zn=y=qo(y.current,null),cr=ji=w,Sr=0,od=null,Fc=Ls=eo=0,Lr=Ho=null,ta!==null){for(w=0;w<ta.length;w++)if(C=ta[w],k=C.interleaved,k!==null){C.interleaved=null;var U=k.next,$=C.pending;if($!==null){var oe=$.next;$.next=U,k.next=oe}C.pending=k}ta=null}return y}function d0(y,w){do{var C=zn;try{if(Xi(),Rf.current=nd,um){for(var k=gr.memoizedState;k!==null;){var U=k.queue;U!==null&&(U.pending=null),k=k.next}um=!1}if(Tc=0,ri=ni=gr=null,Ja=!1,Ac=0,Ta.current=null,C===null||C.return===null){Sr=1,od=w,zn=null;break}e:{var $=y,oe=C.return,me=C,je=w;if(w=cr,me.flags|=32768,je!==null&&typeof je=="object"&&typeof je.then=="function"){var nt=je,_t=me,dn=_t.tag;if((_t.mode&1)===0&&(dn===0||dn===11||dn===15)){var Vt=_t.alternate;Vt?(_t.updateQueue=Vt.updateQueue,_t.memoizedState=Vt.memoizedState,_t.lanes=Vt.lanes):(_t.updateQueue=null,_t.memoizedState=null)}var vn=Qy(oe);if(vn!==null){vn.flags&=-257,Pc(vn,oe,me,$,w),vn.mode&1&&jo($,nt,w),w=vn,je=nt;var pt=w.updateQueue;if(pt===null){var _i=new Set;_i.add(je),w.updateQueue=_i}else pt.add(je);break e}else{if((w&1)===0){jo($,nt,w),Rm();break e}je=Error(a(426))}}else if(lr&&me.mode&1){var Bs=Qy(oe);if(Bs!==null){(Bs.flags&65536)===0&&(Bs.flags|=256),Pc(Bs,oe,me,$,w),om(je);break e}}$=je,Sr!==4&&(Sr=2),Ho===null?Ho=[$]:Ho.push($),je=Jy(je,me),me=oe;do{switch(me.tag){case 3:me.flags|=65536,w&=-w,me.lanes|=w;var Ae=d_(me,je,w);tm(me,Ae);break e;case 1:$=je;var ve=me.type,ke=me.stateNode;if((me.flags&128)===0&&(typeof ve.getDerivedStateFromError=="function"||ke!==null&&typeof ke.componentDidCatch=="function"&&(Aa===null||!Aa.has(ke)))){me.flags|=65536,w&=-w,me.lanes|=w;var ht=bm(me,$,w);tm(me,ht);break e}}me=me.return}while(me!==null)}p0(C)}catch(Dt){w=Dt,zn===C&&C!==null&&(zn=C=C.return);continue}break}while(!0)}function f0(){var y=Kf.current;return Kf.current=nd,y===null?nd:y}function Rm(){(Sr===0||Sr===3||Sr===2)&&(Sr=4),Rr===null||(eo&268435455)===0&&(Ls&268435455)===0||wi(Rr,cr)}function Zf(y,w){var C=gn;gn|=2;var k=f0();Rr===y&&cr===w||Go(y,w);do try{h_();break}catch(U){d0(y,U)}while(!0);if(Xi(),gn=C,Kf.current=k,zn!==null)throw Error(a(261));return Rr=null,cr=0,Sr}function h_(){for(;zn!==null;)h0(zn)}function p_(){for(;zn!==null&&!Ol();)h0(zn)}function h0(y){var w=v0(y.alternate,y,ji);y.memoizedProps=y.pendingProps,w===null?p0(y):zn=w,Ta.current=null}function p0(y){var w=y;do{var C=w.alternate;if(y=w.return,(w.flags&32768)===0){if(C=Sm(C,w,ji),C!==null){zn=C;return}}else{if(C=Am(C,w),C!==null){C.flags&=32767,zn=C;return}if(y!==null)y.flags|=32768,y.subtreeFlags=0,y.deletions=null;else{Sr=6,zn=null;return}}if(w=w.sibling,w!==null){zn=w;return}zn=w=y}while(w!==null);Sr===0&&(Sr=5)}function Pa(y,w){var C=xn,k=Bn.transition;try{Bn.transition=null,xn=1,m_(y,w,C)}finally{Bn.transition=k,xn=C}return null}function m_(y,w,C){do no();while(to!==null);if((gn&6)!==0)throw Error(a(327));var k=y.finishedWork,U=y.finishedLanes;if(k===null)return null;if(y.finishedWork=null,y.finishedLanes=0,k===y.current)throw Error(a(177));y.callbackNode=null,y.callbackPriority=0;var $=k.lanes|k.childLanes;if(qp(y,$),y===Rr&&(zn=Rr=null,cr=0),(k.subtreeFlags&2064)===0&&(k.flags&2064)===0||cd||(cd=!0,Om(Kp,function(){return no(),null})),$=(k.flags&15990)!==0,(k.subtreeFlags&15990)!==0||$){$=Bn.transition,Bn.transition=null;var oe=xn;xn=1;var me=gn;gn|=4,Ta.current=null,r0(y,k),xM(y,k),X(y.containerInfo),y.current=k,Vf(k),mM(),gn=me,xn=oe,Bn.transition=$}else y.current=k;if(cd&&(cd=!1,to=y,zc=U),$=y.pendingLanes,$===0&&(Aa=null),Tf(k.stateNode),gs(y,Kr()),w!==null)for(C=y.onRecoverableError,k=0;k<w.length;k++)C(w[k]);if(ld)throw ld=!1,y=ir,ir=null,y;return(zc&1)!==0&&y.tag!==0&&no(),$=y.pendingLanes,($&1)!==0?y===Wo?$c++:($c=0,Wo=y):$c=0,ea(),null}function no(){if(to!==null){var y=Co(zc),w=Bn.transition,C=xn;try{if(Bn.transition=null,xn=16>y?16:y,to===null)var k=!1;else{if(y=to,to=null,zc=0,(gn&6)!==0)throw Error(a(331));var U=gn;for(gn|=4,lt=y.current;lt!==null;){var $=lt,oe=$.child;if((lt.flags&16)!==0){var me=$.deletions;if(me!==null){for(var je=0;je<me.length;je++){var nt=me[je];for(lt=nt;lt!==null;){var _t=lt;switch(_t.tag){case 0:case 11:case 15:zo(8,_t,$)}var dn=_t.child;if(dn!==null)dn.return=_t,lt=dn;else for(;lt!==null;){_t=lt;var Vt=_t.sibling,vn=_t.return;if(i0(_t),_t===nt){lt=null;break}if(Vt!==null){Vt.return=vn,lt=Vt;break}lt=vn}}}var pt=$.alternate;if(pt!==null){var _i=pt.child;if(_i!==null){pt.child=null;do{var Bs=_i.sibling;_i.sibling=null,_i=Bs}while(_i!==null)}}lt=$}}if(($.subtreeFlags&2064)!==0&&oe!==null)oe.return=$,lt=oe;else e:for(;lt!==null;){if($=lt,($.flags&2048)!==0)switch($.tag){case 0:case 11:case 15:zo(9,$,$.return)}var Ae=$.sibling;if(Ae!==null){Ae.return=$.return,lt=Ae;break e}lt=$.return}}var ve=y.current;for(lt=ve;lt!==null;){oe=lt;var ke=oe.child;if((oe.subtreeFlags&2064)!==0&&ke!==null)ke.return=oe,lt=ke;else e:for(oe=ve;lt!==null;){if(me=lt,(me.flags&2048)!==0)try{switch(me.tag){case 0:case 11:case 15:xi(9,me)}}catch(Dt){es(me,me.return,Dt)}if(me===oe){lt=null;break e}var ht=me.sibling;if(ht!==null){ht.return=me.return,lt=ht;break e}lt=me.return}}if(gn=U,ea(),Ya&&typeof Ya.onPostCommitFiberRoot=="function")try{Ya.onPostCommitFiberRoot(Ef,y)}catch{}k=!0}return k}finally{xn=C,Bn.transition=w}}return!1}function eh(y,w,C){w=Jy(C,w),w=d_(y,w,1),Nl(y,w),w=On(),y=$l(y,1),y!==null&&(pc(y,1,w),gs(y,w))}function es(y,w,C){if(y.tag===3)eh(y,y,C);else for(;w!==null;){if(w.tag===3){eh(w,y,C);break}else if(w.tag===1){var k=w.stateNode;if(typeof w.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(Aa===null||!Aa.has(k))){y=Jy(C,y),y=bm(w,y,1),Nl(w,y),y=On(),w=$l(w,1),w!==null&&(pc(w,1,y),gs(w,y));break}}w=w.return}}function m0(y,w,C){var k=y.pingCache;k!==null&&k.delete(w),w=On(),y.pingedLanes|=y.suspendedLanes&C,Rr===y&&(cr&C)===C&&(Sr===4||Sr===3&&(cr&130023424)===cr&&500>Kr()-Xf?Go(y,0):Fc|=C),gs(y,w)}function g0(y,w){w===0&&((y.mode&1)===0?w=1:(w=Rn,Rn<<=1,(Rn&130023424)===0&&(Rn=4194304)));var C=On();y=$l(y,w),y!==null&&(pc(y,w,C),gs(y,C))}function g_(y){var w=y.memoizedState,C=0;w!==null&&(C=w.retryLane),g0(y,C)}function v_(y,w){var C=0;switch(y.tag){case 13:var k=y.stateNode,U=y.memoizedState;U!==null&&(C=U.retryLane);break;case 19:k=y.stateNode;break;default:throw Error(a(314))}k!==null&&k.delete(w),g0(y,C)}var v0;v0=function(y,w,C){if(y!==null)if(y.memoizedProps!==w.pendingProps||wr.current)si=!0;else{if((y.lanes&C)===0&&(w.flags&128)===0)return si=!1,Tm(y,w,C);si=(y.flags&131072)!==0}else si=!1,lr&&(w.flags&1048576)!==0&&r_(w,sm,w.index);switch(w.lanes=0,w.tag){case 2:var k=w.type;y!==null&&(y.alternate=null,w.alternate=null,w.flags|=2),y=w.pendingProps;var U=qi(w,yn.current);Vu(w,C),U=Qu(null,w,k,y,U,C);var $=jl();return w.flags|=1,typeof U=="object"&&U!==null&&typeof U.render=="function"&&U.$$typeof===void 0?(w.tag=1,w.memoizedState=null,w.updateQueue=null,Pr(k)?($=!0,gi(w)):$=!1,w.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,Hu(w),U.updater=rm,w.stateNode=U,U._reactInternals=w,Ly(w,k,y,C),w=Di(null,w,k,!0,$,C)):(w.tag=0,lr&&$&&Uy(w),_r(null,w,U,C),w=w.child),w;case 16:k=w.elementType;e:{switch(y!==null&&(y.alternate=null,w.alternate=null,w.flags|=2),y=w.pendingProps,U=k._init,k=U(k._payload),w.type=k,U=w.tag=bM(k),y=fs(k,y),U){case 0:w=Fo(null,w,k,y,C);break e;case 1:w=Rc(null,w,k,y,C);break e;case 11:w=Zn(null,w,k,y,C);break e;case 14:w=Wn(null,w,k,fs(k.type,y),C);break e}throw Error(a(306,k,""))}return w;case 0:return k=w.type,U=w.pendingProps,U=w.elementType===k?U:fs(k,U),Fo(y,w,k,U,C);case 1:return k=w.type,U=w.pendingProps,U=w.elementType===k?U:fs(k,U),Rc(y,w,k,U,C);case 3:e:{if(Ff(w),y===null)throw Error(a(387));k=w.pendingProps,$=w.memoizedState,U=$.element,ky(y,w),nm(w,k,null,C);var oe=w.memoizedState;if(k=oe.element,Me&&$.isDehydrated)if($={element:k,isDehydrated:!1,cache:oe.cache,transitions:oe.transitions},w.updateQueue.baseState=$,w.memoizedState=$,w.flags&256){U=Error(a(423)),w=e0(y,w,k,C,U);break e}else if(k!==U){U=Error(a(424)),w=e0(y,w,k,C,U);break e}else for(Me&&(vi=$p(w.stateNode.containerInfo),Yi=w,lr=!0,ia=null,Gu=!1),C=a_(w,null,k,C),w.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling;else{if(qu(),k===U){w=ms(y,w,C);break e}_r(y,w,k,C)}w=w.child}return w;case 5:return o_(w),y===null&&kl(w),k=w.type,U=w.pendingProps,$=y!==null?y.memoizedProps:null,oe=U.children,ye(k,U)?oe=null:$!==null&&ye(k,$)&&(w.flags|=32),Ji(y,w),_r(y,w,oe,C),w.child;case 6:return y===null&&kl(w),null;case 13:return t0(y,w,C);case 4:return lm(w,w.stateNode.containerInfo),k=w.pendingProps,y===null?w.child=ko(w,null,k,C):_r(y,w,k,C),w.child;case 11:return k=w.type,U=w.pendingProps,U=w.elementType===k?U:fs(k,U),Zn(y,w,k,U,C);case 7:return _r(y,w,w.pendingProps,C),w.child;case 8:return _r(y,w,w.pendingProps.children,C),w.child;case 12:return _r(y,w,w.pendingProps.children,C),w.child;case 10:e:{if(k=w.type._context,U=w.pendingProps,$=w.memoizedProps,oe=U.value,yc(w,k,oe),$!==null)if(Ki($.value,oe)){if($.children===U.children&&!wr.current){w=ms(y,w,C);break e}}else for($=w.child,$!==null&&($.return=w);$!==null;){var me=$.dependencies;if(me!==null){oe=$.child;for(var je=me.firstContext;je!==null;){if(je.context===k){if($.tag===1){je=Oo(-1,C&-C),je.tag=2;var nt=$.updateQueue;if(nt!==null){nt=nt.shared;var _t=nt.pending;_t===null?je.next=je:(je.next=_t.next,_t.next=je),nt.pending=je}}$.lanes|=C,je=$.alternate,je!==null&&(je.lanes|=C),xc($.return,C,w),me.lanes|=C;break}je=je.next}}else if($.tag===10)oe=$.type===w.type?null:$.child;else if($.tag===18){if(oe=$.return,oe===null)throw Error(a(341));oe.lanes|=C,me=oe.alternate,me!==null&&(me.lanes|=C),xc(oe,C,w),oe=$.sibling}else oe=$.child;if(oe!==null)oe.return=$;else for(oe=$;oe!==null;){if(oe===w){oe=null;break}if($=oe.sibling,$!==null){$.return=oe.return,oe=$;break}oe=oe.return}$=oe}_r(y,w,U.children,C),w=w.child}return w;case 9:return U=w.type,k=w.pendingProps.children,Vu(w,C),U=hs(U),k=k(U),w.flags|=1,_r(y,w,k,C),w.child;case 14:return k=w.type,U=fs(k,w.pendingProps),U=fs(k.type,U),Wn(y,w,k,U,C);case 15:return Uo(y,w,w.type,w.pendingProps,C);case 17:return k=w.type,U=w.pendingProps,U=w.elementType===k?U:fs(k,U),y!==null&&(y.alternate=null,w.alternate=null,w.flags|=2),w.tag=1,Pr(k)?(y=!0,gi(w)):y=!1,Vu(w,C),t_(w,k,U),Ly(w,k,U,C),Di(null,w,k,!0,y,C);case 19:return Nc(y,w,C);case 22:return yi(y,w,C)}throw Error(a(156,w.tag))};function Om(y,w){return mc(y,w)}function y_(y,w,C,k){this.tag=y,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=w,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fs(y,w,C,k){return new y_(y,w,C,k)}function Nm(y){return y=y.prototype,!(!y||!y.isReactComponent)}function bM(y){if(typeof y=="function")return Nm(y)?1:0;if(y!=null){if(y=y.$$typeof,y===x)return 11;if(y===E)return 14}return 2}function qo(y,w){var C=y.alternate;return C===null?(C=Fs(y.tag,w,y.key,y.mode),C.elementType=y.elementType,C.type=y.type,C.stateNode=y.stateNode,C.alternate=y,y.alternate=C):(C.pendingProps=w,C.type=y.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=y.flags&14680064,C.childLanes=y.childLanes,C.lanes=y.lanes,C.child=y.child,C.memoizedProps=y.memoizedProps,C.memoizedState=y.memoizedState,C.updateQueue=y.updateQueue,w=y.dependencies,C.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext},C.sibling=y.sibling,C.index=y.index,C.ref=y.ref,C}function Im(y,w,C,k,U,$){var oe=2;if(k=y,typeof y=="function")Nm(y)&&(oe=1);else if(typeof y=="string")oe=5;else e:switch(y){case u:return Vc(C.children,U,$,w);case d:oe=8,U|=8;break;case h:return y=Fs(12,C,w,U|2),y.elementType=h,y.lanes=$,y;case v:return y=Fs(13,C,w,U),y.elementType=v,y.lanes=$,y;case _:return y=Fs(19,C,w,U),y.elementType=_,y.lanes=$,y;case A:return th(C,U,$,w);default:if(typeof y=="object"&&y!==null)switch(y.$$typeof){case m:oe=10;break e;case b:oe=9;break e;case x:oe=11;break e;case E:oe=14;break e;case T:oe=16,k=null;break e}throw Error(a(130,y==null?y:typeof y,""))}return w=Fs(oe,C,w,U),w.elementType=y,w.type=k,w.lanes=$,w}function Vc(y,w,C,k){return y=Fs(7,y,k,w),y.lanes=C,y}function th(y,w,C,k){return y=Fs(22,y,k,w),y.elementType=A,y.lanes=C,y.stateNode={},y}function km(y,w,C){return y=Fs(6,y,null,w),y.lanes=C,y}function Dm(y,w,C){return w=Fs(4,y.children!==null?y.children:[],y.key,w),w.lanes=C,w.stateNode={containerInfo:y.containerInfo,pendingChildren:null,implementation:y.implementation},w}function jm(y,w,C,k,U){this.tag=w,this.containerInfo=y,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=be,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gp(0),this.expirationTimes=Gp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gp(0),this.identifierPrefix=k,this.onRecoverableError=U,Me&&(this.mutableSourceEagerHydrationData=null)}function x_(y,w,C,k,U,$,oe,me,je){return y=new jm(y,w,C,me,je),w===1?(w=1,$===!0&&(w|=8)):w=0,$=Fs(3,null,null,w),y.current=$,$.stateNode=y,$.memoizedState={element:k,isDehydrated:C,cache:null,transitions:null},Hu($),y}function b_(y){if(!y)return br;y=y._reactInternals;e:{if(I(y)!==y||y.tag!==1)throw Error(a(170));var w=y;do{switch(w.tag){case 3:w=w.stateNode.context;break e;case 1:if(Pr(w.type)){w=w.stateNode.__reactInternalMemoizedMergedChildContext;break e}}w=w.return}while(w!==null);throw Error(a(171))}if(y.tag===1){var C=y.type;if(Pr(C))return Uu(y,C,w)}return w}function w_(y){var w=y._reactInternals;if(w===void 0)throw typeof y.render=="function"?Error(a(188)):(y=Object.keys(y).join(","),Error(a(268,y)));return y=H(w),y===null?null:y.stateNode}function oa(y,w){if(y=y.memoizedState,y!==null&&y.dehydrated!==null){var C=y.retryLane;y.retryLane=C!==0&&C<w?C:w}}function nh(y,w){oa(y,w),(y=y.alternate)&&oa(y,w)}function Lm(y){return y=H(y),y===null?null:y.stateNode}function __(){return null}return n.attemptContinuousHydration=function(y){if(y.tag===13){var w=On();Li(y,134217728,w),nh(y,134217728)}},n.attemptHydrationAtCurrentPriority=function(y){if(y.tag===13){var w=On(),C=Ma(y);Li(y,C,w),nh(y,C)}},n.attemptSynchronousHydration=function(y){switch(y.tag){case 3:var w=y.stateNode;if(w.current.memoizedState.isDehydrated){var C=zu(w.pendingLanes);C!==0&&(Xa(w,C|1),gs(w,Kr()),(gn&6)===0&&(Bc(),ea()))}break;case 13:var k=On();ud(function(){return Li(y,1,k)}),nh(y,1)}},n.batchedUpdates=function(y,w){var C=gn;gn|=1;try{return y(w)}finally{gn=C,gn===0&&(Bc(),Yp&&ea())}},n.createComponentSelector=function(y){return{$$typeof:Wf,value:y}},n.createContainer=function(y,w,C,k,U,$,oe){return x_(y,w,!1,null,C,k,U,$,oe)},n.createHasPseudoClassSelector=function(y){return{$$typeof:Dc,value:y}},n.createHydrationContainer=function(y,w,C,k,U,$,oe,me,je){return y=x_(C,k,!0,y,U,$,oe,me,je),y.context=b_(null),C=y.current,k=On(),U=Ma(C),$=Oo(k,U),$.callback=w??null,Nl(C,$),y.current.lanes=U,pc(y,U,k),gs(y,k),y},n.createPortal=function(y,w,C){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:k==null?null:""+k,children:y,containerInfo:w,implementation:C}},n.createRoleSelector=function(y){return{$$typeof:jc,value:y}},n.createTestNameSelector=function(y){return{$$typeof:$o,value:y}},n.createTextSelector=function(y){return{$$typeof:ad,value:y}},n.deferredUpdates=function(y){var w=xn,C=Bn.transition;try{return Bn.transition=null,xn=16,y()}finally{xn=w,Bn.transition=C}},n.discreteUpdates=function(y,w,C,k,U){var $=xn,oe=Bn.transition;try{return Bn.transition=null,xn=1,y(w,C,k,U)}finally{xn=$,Bn.transition=oe,gn===0&&Bc()}},n.findAllNodes=Vo,n.findBoundingRects=function(y,w){if(!Z)throw Error(a(363));w=Vo(y,w),y=[];for(var C=0;C<w.length;C++)y.push($e(w[C]));for(w=y.length-1;0<w;w--){C=y[w];for(var k=C.x,U=k+C.width,$=C.y,oe=$+C.height,me=w-1;0<=me;me--)if(w!==me){var je=y[me],nt=je.x,_t=nt+je.width,dn=je.y,Vt=dn+je.height;if(k>=nt&&$>=dn&&U<=_t&&oe<=Vt){y.splice(w,1);break}else if(k!==nt||C.width!==je.width||Vt<$||dn>oe){if(!($!==dn||C.height!==je.height||_t<k||nt>U)){nt>k&&(je.width+=nt-k,je.x=k),_t<U&&(je.width=U-nt),y.splice(w,1);break}}else{dn>$&&(je.height+=dn-$,je.y=$),Vt<oe&&(je.height=oe-dn),y.splice(w,1);break}}}return y},n.findHostInstance=w_,n.findHostInstanceWithNoPortals=function(y){return y=B(y),y=y!==null?G(y):null,y===null?null:y.stateNode},n.findHostInstanceWithWarning=function(y){return w_(y)},n.flushControlled=function(y){var w=gn;gn|=1;var C=Bn.transition,k=xn;try{Bn.transition=null,xn=1,y()}finally{xn=k,Bn.transition=C,gn=w,gn===0&&(Bc(),ea())}},n.flushPassiveEffects=no,n.flushSync=ud,n.focusWithin=function(y,w){if(!Z)throw Error(a(363));for(y=Gf(y),w=js(y,w),w=Array.from(w),y=0;y<w.length;){var C=w[y++];if(!Fe(C)){if(C.tag===5&&Xe(C.stateNode))return!0;for(C=C.child;C!==null;)w.push(C),C=C.sibling}}return!1},n.getCurrentUpdatePriority=function(){return xn},n.getFindAllNodesFailureDescription=function(y,w){if(!Z)throw Error(a(363));var C=0,k=[];y=[Gf(y),0];for(var U=0;U<y.length;){var $=y[U++],oe=y[U++],me=w[oe];if(($.tag!==5||!Fe($))&&(qf($,me)&&(k.push(Bl(me)),oe++,oe>C&&(C=oe)),oe<w.length))for($=$.child;$!==null;)y.push($,oe),$=$.sibling}if(C<w.length){for(y=[];C<w.length;C++)y.push(Bl(w[C]));return`findAllNodes was able to match part of the selector:
  `+(k.join(" > ")+`

No matching component was found for:
  `)+y.join(" > ")}return null},n.getPublicRootInstance=function(y){return y=y.current,y.child?y.child.tag===5?K(y.child.stateNode):y.child.stateNode:null},n.injectIntoDevTools=function(y){if(y={bundleType:y.bundleType,version:y.version,rendererPackageName:y.rendererPackageName,rendererConfig:y.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:Lm,findFiberByHostInstance:y.findFiberByHostInstance||__,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")y=!1;else{var w=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(w.isDisabled||!w.supportsFiber)y=!0;else{try{Ef=w.inject(y),Ya=w}catch{}y=!!w.checkDCE}}return y},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(y,w,C,k){if(!Z)throw Error(a(363));y=Vo(y,w);var U=it(y,C,k).disconnect;return{disconnect:function(){U()}}},n.registerMutableSourceForHydration=function(y,w){var C=w._getVersion;C=C(w._source),y.mutableSourceEagerHydrationData==null?y.mutableSourceEagerHydrationData=[w,C]:y.mutableSourceEagerHydrationData.push(w,C)},n.runWithPriority=function(y,w){var C=xn;try{return xn=y,w()}finally{xn=C}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(y,w,C,k){var U=w.current,$=On(),oe=Ma(U);return C=b_(C),w.context===null?w.context=C:w.pendingContext=C,w=Oo($,oe),w.payload={element:y},k=k===void 0?null:k,k!==null&&(w.callback=k),Nl(U,w),y=Li(U,oe,$),y!==null&&em(y,U,oe),oe},n}),AC}var h$;function uCe(){return h$||(h$=1,SC.exports=cCe()),SC.exports}var dCe=uCe();const fCe=Ln(dCe);var MC={exports:{}},PC={};var p$;function hCe(){return p$||(p$=1,(function(t){function e(z,V){var X=z.length;z.push(V);e:for(;0<X;){var q=X-1>>>1,Q=z[q];if(0<i(Q,V))z[q]=V,z[X]=Q,X=q;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var V=z[0],X=z.pop();if(X!==V){z[0]=X;e:for(var q=0,Q=z.length,ie=Q>>>1;q<ie;){var ce=2*(q+1)-1,ye=z[ce],Ce=ce+1,he=z[Ce];if(0>i(ye,X))Ce<Q&&0>i(he,ye)?(z[q]=he,z[Ce]=X,q=Ce):(z[q]=ye,z[ce]=X,q=ce);else if(Ce<Q&&0>i(he,X))z[q]=he,z[Ce]=X,q=Ce;else break e}}return V}function i(z,V){var X=z.sortIndex-V.sortIndex;return X!==0?X:z.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,m=!1,b=!1,x=!1,v=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(z){for(var V=n(c);V!==null;){if(V.callback===null)r(c);else if(V.startTime<=z)r(c),V.sortIndex=V.expirationTime,e(l,V);else break;V=n(c)}}function A(z){if(x=!1,T(z),!b)if(n(l)!==null)b=!0,K(P);else{var V=n(c);V!==null&&te(A,V.startTime-z)}}function P(z,V){b=!1,x&&(x=!1,_(L),L=-1),m=!0;var X=h;try{for(T(V),d=n(l);d!==null&&(!(d.expirationTime>V)||z&&!B());){var q=d.callback;if(typeof q=="function"){d.callback=null,h=d.priorityLevel;var Q=q(d.expirationTime<=V);V=t.unstable_now(),typeof Q=="function"?d.callback=Q:d===n(l)&&r(l),T(V)}else r(l);d=n(l)}if(d!==null)var ie=!0;else{var ce=n(c);ce!==null&&te(A,ce.startTime-V),ie=!1}return ie}finally{d=null,h=X,m=!1}}var R=!1,N=null,L=-1,I=5,j=-1;function B(){return!(t.unstable_now()-j<I)}function H(){if(N!==null){var z=t.unstable_now();j=z;var V=!0;try{V=N(!0,z)}finally{V?J():(R=!1,N=null)}}else R=!1}var J;if(typeof E=="function")J=function(){E(H)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,W=G.port2;G.port1.onmessage=H,J=function(){W.postMessage(null)}}else J=function(){v(H,0)};function K(z){N=z,R||(R=!0,J())}function te(z,V){L=v(function(){z(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){b||m||(b=!0,K(P))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(h){case 1:case 2:case 3:var V=3;break;default:V=h}var X=h;h=V;try{return z()}finally{h=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,V){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var X=h;h=z;try{return V()}finally{h=X}},t.unstable_scheduleCallback=function(z,V,X){var q=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?q+X:q):X=q,z){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=X+Q,z={id:u++,callback:V,priorityLevel:z,startTime:X,expirationTime:Q,sortIndex:-1},X>q?(z.sortIndex=X,e(c,z),n(l)===null&&z===n(c)&&(x?(_(L),L=-1):x=!0,te(A,X-q))):(z.sortIndex=Q,e(l,z),b||m||(b=!0,K(P))),z},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(z){var V=h;return function(){var X=h;h=V;try{return z.apply(this,arguments)}finally{h=X}}}})(PC)),PC}var m$;function pCe(){return m$||(m$=1,MC.exports=hCe()),MC.exports}var g$=pCe();const x3={},mCe=t=>{Object.assign(x3,t)};function gCe(t,e){function n(u,{args:d=[],attach:h,...m},b){let x=`${u[0].toUpperCase()}${u.slice(1)}`,v;if(u==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const _=m.object;v=Cg(_,{type:u,root:b,attach:h,primitive:!0})}else{const _=x3[x];if(!_)throw new Error(`R3F: ${x} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");v=Cg(new _(...d),{type:u,root:b,attach:h,memoizedProps:{args:d}})}return v.__r3f.attach===void 0&&(v.isBufferGeometry?v.__r3f.attach="geometry":v.isMaterial&&(v.__r3f.attach="material")),x!=="inject"&&OC(v,m),v}function r(u,d){let h=!1;if(d){var m,b;(m=d.__r3f)!=null&&m.attach?RC(u,d,d.__r3f.attach):d.isObject3D&&u.isObject3D&&(u.add(d),h=!0),h||(b=u.__r3f)==null||b.objects.push(d),d.__r3f||Cg(d,{}),d.__r3f.parent=u,Mk(d),Rg(d)}}function i(u,d,h){let m=!1;if(d){var b,x;if((b=d.__r3f)!=null&&b.attach)RC(u,d,d.__r3f.attach);else if(d.isObject3D&&u.isObject3D){d.parent=u,d.dispatchEvent({type:"added"}),u.dispatchEvent({type:"childadded",child:d});const v=u.children.filter(E=>E!==d),_=v.indexOf(h);u.children=[...v.slice(0,_),d,...v.slice(_)],m=!0}m||(x=u.__r3f)==null||x.objects.push(d),d.__r3f||Cg(d,{}),d.__r3f.parent=u,Mk(d),Rg(d)}}function s(u,d,h=!1){u&&[...u].forEach(m=>a(d,m,h))}function a(u,d,h){if(d){var m,b,x;if(d.__r3f&&(d.__r3f.parent=null),(m=u.__r3f)!=null&&m.objects&&(u.__r3f.objects=u.__r3f.objects.filter(A=>A!==d)),(b=d.__r3f)!=null&&b.attach)w$(u,d,d.__r3f.attach);else if(d.isObject3D&&u.isObject3D){var v;u.remove(d),(v=d.__r3f)!=null&&v.root&&ECe(L1(d),d)}const E=(x=d.__r3f)==null?void 0:x.primitive,T=!E&&(h===void 0?d.dispose!==null:h);if(!E){var _;s((_=d.__r3f)==null?void 0:_.objects,d,T),s(d.children,d,T)}if(delete d.__r3f,T&&d.dispose&&d.type!=="Scene"){const A=()=>{try{d.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?g$.unstable_scheduleCallback(g$.unstable_IdlePriority,A):A()}Rg(u)}}function o(u,d,h,m){var b;const x=(b=u.__r3f)==null?void 0:b.parent;if(!x)return;const v=n(d,h,u.__r3f.root);if(u.children){for(const _ of u.children)_.__r3f&&r(v,_);u.children=u.children.filter(_=>!_.__r3f)}u.__r3f.objects.forEach(_=>r(v,_)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||a(x,u),v.parent&&(v.__r3f.autoRemovedBeforeAppend=!0),r(x,v),v.raycast&&v.__r3f.eventCount&&L1(v).getState().internal.interaction.push(v),[m,m.alternate].forEach(_=>{_!==null&&(_.stateNode=v,_.ref&&(typeof _.ref=="function"?_.ref(v):_.ref.current=v))})}const l=()=>{};return{reconciler:fCe({createInstance:n,removeChild:a,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,d)=>{if(!d)return;const h=u.getState().scene;h.__r3f&&(h.__r3f.root=u,r(h,d))},removeChildFromContainer:(u,d)=>{d&&a(u.getState().scene,d)},insertInContainerBefore:(u,d,h)=>{if(!d||!h)return;const m=u.getState().scene;m.__r3f&&i(m,d,h)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var d;return!!((d=u?.__r3f)!=null?d:{}).handlers},prepareUpdate(u,d,h,m){var b;if(((b=u?.__r3f)!=null?b:{}).primitive&&m.object&&m.object!==u)return[!0];{const{args:v=[],children:_,...E}=m,{args:T=[],children:A,...P}=h;if(!Array.isArray(v))throw new Error("R3F: the args prop must be an array!");if(v.some((N,L)=>N!==T[L]))return[!0];const R=YQ(u,E,P,!0);return R.changes.length?[!1,R]:null}},commitUpdate(u,[d,h],m,b,x,v){d?o(u,m,x,v):OC(u,h)},commitMount(u,d,h,m){var b;const x=(b=u.__r3f)!=null?b:{};u.raycast&&x.handlers&&x.eventCount&&L1(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>Cg(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var d;const{attach:h,parent:m}=(d=u.__r3f)!=null?d:{};h&&m&&w$(m,u,h),u.isObject3D&&(u.visible=!1),Rg(u)},unhideInstance(u,d){var h;const{attach:m,parent:b}=(h=u.__r3f)!=null?h:{};m&&b&&RC(b,u,m),(u.isObject3D&&d.visible==null||d.visible)&&(u.visible=!0),Rg(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():$g.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&pr.fun(performance.now)?performance.now:pr.fun(Date.now)?Date.now:()=>0,scheduleTimeout:pr.fun(setTimeout)?setTimeout:void 0,cancelTimeout:pr.fun(clearTimeout)?clearTimeout:void 0}),applyProps:OC}}var v$,y$;const CC=t=>"colorSpace"in t||"outputColorSpace"in t,HQ=()=>{var t;return(t=x3.ColorManagement)!=null?t:null},WQ=t=>t&&t.isOrthographicCamera,vCe=t=>t&&t.hasOwnProperty("current"),jw=typeof window<"u"&&((v$=window.document)!=null&&v$.createElement||((y$=window.navigator)==null?void 0:y$.product)==="ReactNative")?M.useLayoutEffect:M.useEffect;function GQ(t){const e=M.useRef(t);return jw(()=>{e.current=t},[t]),e}function yCe({set:t}){return jw(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class qQ extends M.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}qQ.getDerivedStateFromError=()=>({error:!0});const KQ="__default",x$=new Map,xCe=t=>t&&!!t.memoized&&!!t.changes;function XQ(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const V0=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()};function L1(t){let e=t.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const pr={obj:t=>t===Object(t)&&!pr.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(pr.str(t)||pr.num(t)||pr.boo(t))return t===e;const s=pr.obj(t);if(s&&r==="reference")return t===e;const a=pr.arr(t);if(a&&n==="reference")return t===e;if((a||s)&&t===e)return!0;let o;for(o in t)if(!(o in e))return!1;if(s&&n==="shallow"&&r==="shallow"){for(o in i?e:t)if(!pr.equ(t[o],e[o],{strict:i,objects:"reference"}))return!1}else for(o in i?e:t)if(t[o]!==e[o])return!1;if(pr.und(o)){if(a&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function bCe(t){const e={nodes:{},materials:{}};return t&&t.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material)}),e}function wCe(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function Cg(t,e){const n=t;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function Ak(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),i=r.pop();return n=r.reduce((s,a)=>s[a],t),{target:n,key:i}}else return{target:n,key:e}}const b$=/-\d+$/;function RC(t,e,n){if(pr.str(n)){if(b$.test(n)){const s=n.replace(b$,""),{target:a,key:o}=Ak(t,s);Array.isArray(a[o])||(a[o]=[])}const{target:r,key:i}=Ak(t,n);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=n(t,e)}function w$(t,e,n){var r,i;if(pr.str(n)){const{target:s,key:a}=Ak(t,n),o=e.__r3f.previousAttach;o===void 0?delete s[a]:s[a]=o}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(t,e);(i=e.__r3f)==null||delete i.previousAttach}function YQ(t,{children:e,key:n,ref:r,...i},{children:s,key:a,ref:o,...l}={},c=!1){const u=t.__r3f,d=Object.entries(i),h=[];if(c){const b=Object.keys(l);for(let x=0;x<b.length;x++)i.hasOwnProperty(b[x])||d.unshift([b[x],KQ+"remove"])}d.forEach(([b,x])=>{var v;if((v=t.__r3f)!=null&&v.primitive&&b==="object"||pr.equ(x,l[b]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(b))return h.push([b,x,!0,[]]);let _=[];b.includes("-")&&(_=b.split("-")),h.push([b,x,!1,_]);for(const E in i){const T=i[E];E.startsWith(`${b}-`)&&h.push([E,T,!1,E.split("-")])}});const m={...i};return u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.args&&(m.args=u.memoizedProps.args),u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.attach&&(m.attach=u.memoizedProps.attach),{memoized:m,changes:h}}function OC(t,e){var n;const r=t.__r3f,i=r?.root,s=i==null||i.getState==null?void 0:i.getState(),{memoized:a,changes:o}=xCe(e)?e:YQ(t,e),l=r?.eventCount;t.__r3f&&(t.__r3f.memoizedProps=a);for(let h=0;h<o.length;h++){let[m,b,x,v]=o[h];if(CC(t)){const A="srgb",P="srgb-linear";m==="encoding"?(m="colorSpace",b=b===3001?A:P):m==="outputEncoding"&&(m="outputColorSpace",b=b===3001?A:P)}let _=t,E=_[m];if(v.length&&(E=v.reduce((T,A)=>T[A],t),!(E&&E.set))){const[T,...A]=v.reverse();_=A.reverse().reduce((P,R)=>P[R],t),m=T}if(b===KQ+"remove")if(_.constructor){let T=x$.get(_.constructor);T||(T=new _.constructor,x$.set(_.constructor,T)),b=T[m]}else b=0;if(x&&r)b?r.handlers[m]=b:delete r.handlers[m],r.eventCount=Object.keys(r.handlers).length;else if(E&&E.set&&(E.copy||E instanceof ep)){if(Array.isArray(b))E.fromArray?E.fromArray(b):E.set(...b);else if(E.copy&&b&&b.constructor&&E.constructor===b.constructor)E.copy(b);else if(b!==void 0){var c;const T=(c=E)==null?void 0:c.isColor;!T&&E.setScalar?E.setScalar(b):E instanceof ep&&b instanceof ep?E.mask=b.mask:E.set(b),!HQ()&&s&&!s.linear&&T&&E.convertSRGBToLinear()}}else{var u;if(_[m]=b,(u=_[m])!=null&&u.isTexture&&_[m].format===Gs&&_[m].type===Zl&&s){const T=_[m];CC(T)&&CC(s.gl)?T.colorSpace=s.gl.outputColorSpace:T.encoding=s.gl.outputEncoding}}Rg(t)}if(r&&r.parent&&t.raycast&&l!==r.eventCount){const h=L1(t).getState().internal,m=h.interaction.indexOf(t);m>-1&&h.interaction.splice(m,1),r.eventCount&&h.interaction.push(t)}return!(o.length===1&&o[0][0]==="onUpdate")&&o.length&&(n=t.__r3f)!=null&&n.parent&&Mk(t),t}function Rg(t){var e,n;const r=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function Mk(t){t.onUpdate==null||t.onUpdate(t)}function _Ce(t,e){t.manual||(WQ(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function r1(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function SCe(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return $g.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return $g.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return $g.ContinuousEventPriority;default:return $g.DefaultEventPriority}}function JQ(t,e,n,r){const i=n.get(e);i&&(n.delete(e),n.size===0&&(t.delete(r),i.target.releasePointerCapture(r)))}function ECe(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(r=>r!==e),n.initialHits=n.initialHits.filter(r=>r!==e),n.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&n.hovered.delete(i)}),n.capturedMap.forEach((r,i)=>{JQ(n.capturedMap,e,r,i)})}function TCe(t){function e(l){const{internal:c}=t.getState(),u=l.offsetX-c.initialClick[0],d=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+d*d))}function n(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var d;return(d=c.__r3f)==null?void 0:d.handlers["onPointer"+u]}))}function r(l,c){const u=t.getState(),d=new Set,h=[],m=c?c(u.internal.interaction):u.internal.interaction;for(let _=0;_<m.length;_++){const E=V0(m[_]);E&&(E.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function b(_){const E=V0(_);if(!E||!E.events.enabled||E.raycaster.camera===null)return[];if(E.raycaster.camera===void 0){var T;E.events.compute==null||E.events.compute(l,E,(T=E.previousRoot)==null?void 0:T.getState()),E.raycaster.camera===void 0&&(E.raycaster.camera=null)}return E.raycaster.camera?E.raycaster.intersectObject(_,!0):[]}let x=m.flatMap(b).sort((_,E)=>{const T=V0(_.object),A=V0(E.object);return!T||!A?_.distance-E.distance:A.events.priority-T.events.priority||_.distance-E.distance}).filter(_=>{const E=r1(_);return d.has(E)?!1:(d.add(E),!0)});u.events.filter&&(x=u.events.filter(x,u));for(const _ of x){let E=_.object;for(;E;){var v;(v=E.__r3f)!=null&&v.eventCount&&h.push({..._,eventObject:E}),E=E.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let _ of u.internal.capturedMap.get(l.pointerId).values())d.has(r1(_.intersection))||h.push(_.intersection);return h}function i(l,c,u,d){const h=t.getState();if(l.length){const m={stopped:!1};for(const b of l){const x=V0(b.object)||h,{raycaster:v,pointer:_,camera:E,internal:T}=x,A=new ae(_.x,_.y,0).unproject(E),P=j=>{var B,H;return(B=(H=T.capturedMap.get(j))==null?void 0:H.has(b.eventObject))!=null?B:!1},R=j=>{const B={intersection:b,target:c.target};T.capturedMap.has(j)?T.capturedMap.get(j).set(b.eventObject,B):T.capturedMap.set(j,new Map([[b.eventObject,B]])),c.target.setPointerCapture(j)},N=j=>{const B=T.capturedMap.get(j);B&&JQ(T.capturedMap,b.eventObject,B,j)};let L={};for(let j in c){let B=c[j];typeof B!="function"&&(L[j]=B)}let I={...b,...L,pointer:_,intersections:l,stopped:m.stopped,delta:u,unprojectedPoint:A,ray:v.ray,camera:E,stopPropagation(){const j="pointerId"in c&&T.capturedMap.get(c.pointerId);if((!j||j.has(b.eventObject))&&(I.stopped=m.stopped=!0,T.hovered.size&&Array.from(T.hovered.values()).find(B=>B.eventObject===b.eventObject))){const B=l.slice(0,l.indexOf(b));s([...B,b])}},target:{hasPointerCapture:P,setPointerCapture:R,releasePointerCapture:N},currentTarget:{hasPointerCapture:P,setPointerCapture:R,releasePointerCapture:N},nativeEvent:c};if(d(I),m.stopped===!0)break}}return l}function s(l){const{internal:c}=t.getState();for(const u of c.hovered.values())if(!l.length||!l.find(d=>d.object===u.object&&d.index===u.index&&d.instanceId===u.instanceId)){const h=u.eventObject.__r3f,m=h?.handlers;if(c.hovered.delete(r1(u)),h!=null&&h.eventCount){const b={...u,intersections:l};m.onPointerOut==null||m.onPointerOut(b),m.onPointerLeave==null||m.onPointerLeave(b)}}}function a(l,c){for(let u=0;u<c.length;u++){const d=c[u].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function o(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=t.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:d,internal:h}=t.getState();h.lastEvent.current=u;const m=l==="onPointerMove",b=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",v=r(u,m?n:void 0),_=b?e(u):0;l==="onPointerDown"&&(h.initialClick=[u.offsetX,u.offsetY],h.initialHits=v.map(T=>T.eventObject)),b&&!v.length&&_<=2&&(a(u,h.interaction),d&&d(u)),m&&s(v);function E(T){const A=T.eventObject,P=A.__r3f,R=P?.handlers;if(P!=null&&P.eventCount)if(m){if(R.onPointerOver||R.onPointerEnter||R.onPointerOut||R.onPointerLeave){const N=r1(T),L=h.hovered.get(N);L?L.stopped&&T.stopPropagation():(h.hovered.set(N,T),R.onPointerOver==null||R.onPointerOver(T),R.onPointerEnter==null||R.onPointerEnter(T))}R.onPointerMove==null||R.onPointerMove(T)}else{const N=R[l];N?(!b||h.initialHits.includes(A))&&(a(u,h.interaction.filter(L=>!h.initialHits.includes(L))),N(T)):b&&h.initialHits.includes(A)&&a(u,h.interaction.filter(L=>!h.initialHits.includes(L)))}}i(v,u,_,E)}}return{handlePointer:o}}const QQ=t=>!!(t!=null&&t.render),ZQ=M.createContext(null),ACe=(t,e)=>{const n=nCe((o,l)=>{const c=new ae,u=new ae,d=new ae;function h(_=l().camera,E=u,T=l().size){const{width:A,height:P,top:R,left:N}=T,L=A/P;E.isVector3?d.copy(E):d.set(...E);const I=_.getWorldPosition(c).distanceTo(d);if(WQ(_))return{width:A/_.zoom,height:P/_.zoom,top:R,left:N,factor:1,distance:I,aspect:L};{const j=_.fov*Math.PI/180,B=2*Math.tan(j/2)*I,H=B*(A/P);return{width:H,height:B,top:R,left:N,factor:A/H,distance:I,aspect:L}}}let m;const b=_=>o(E=>({performance:{...E.performance,current:_}})),x=new ze;return{set:o,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(_=1)=>t(l(),_),advance:(_,E)=>e(_,E,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new m3,pointer:x,mouse:x,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const _=l();m&&clearTimeout(m),_.performance.current!==_.performance.min&&b(_.performance.min),m=setTimeout(()=>b(l().performance.max),_.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:h},setEvents:_=>o(E=>({...E,events:{...E.events,..._}})),setSize:(_,E,T,A,P)=>{const R=l().camera,N={width:_,height:E,top:A||0,left:P||0,updateStyle:T};o(L=>({size:N,viewport:{...L.viewport,...h(R,u,N)}}))},setDpr:_=>o(E=>{const T=XQ(_);return{viewport:{...E.viewport,dpr:T,initialDpr:E.viewport.initialDpr||T}}}),setFrameloop:(_="always")=>{const E=l().clock;E.stop(),E.elapsedTime=0,_!=="never"&&(E.start(),E.elapsedTime=0),o(()=>({frameloop:_}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:M.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(_,E,T)=>{const A=l().internal;return A.priority=A.priority+(E>0?1:0),A.subscribers.push({ref:_,priority:E,store:T}),A.subscribers=A.subscribers.sort((P,R)=>P.priority-R.priority),()=>{const P=l().internal;P!=null&&P.subscribers&&(P.priority=P.priority-(E>0?1:0),P.subscribers=P.subscribers.filter(R=>R.ref!==_))}}}}}),r=n.getState();let i=r.size,s=r.viewport.dpr,a=r.camera;return n.subscribe(()=>{const{camera:o,size:l,viewport:c,gl:u,set:d}=n.getState();if(l.width!==i.width||l.height!==i.height||c.dpr!==s){var h;i=l,s=c.dpr,_Ce(o,l),u.setPixelRatio(c.dpr);const m=(h=l.updateStyle)!=null?h:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,m)}o!==a&&(a=o,d(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(o)}})))}),n.subscribe(o=>t(o)),n};let i1,MCe=new Set,PCe=new Set,CCe=new Set;function NC(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function H0(t,e){switch(t){case"before":return NC(MCe,e);case"after":return NC(PCe,e);case"tail":return NC(CCe,e)}}let IC,kC;function DC(t,e,n){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),IC=e.internal.subscribers,i1=0;i1<IC.length;i1++)kC=IC[i1],kC.ref.current(kC.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function RCe(t){let e=!1,n=!1,r,i,s;function a(c){i=requestAnimationFrame(a),e=!0,r=0,H0("before",c),n=!0;for(const d of t.values()){var u;s=d.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((u=s.gl.xr)!=null&&u.isPresenting)&&(r+=DC(c,s))}if(n=!1,H0("after",c),r===0)return H0("tail",c),e=!1,cancelAnimationFrame(i)}function o(c,u=1){var d;if(!c)return t.forEach(h=>o(h.store.getState(),u));(d=c.gl.xr)!=null&&d.isPresenting||!c.internal.active||c.frameloop==="never"||(u>1?c.internal.frames=Math.min(60,c.internal.frames+u):n?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(a)))}function l(c,u=!0,d,h){if(u&&H0("before",c),d)DC(c,d,h);else for(const m of t.values())DC(c,m.store.getState());u&&H0("after",c)}return{loop:a,invalidate:o,advance:l}}function eZ(){const t=M.useContext(ZQ);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function tu(t=n=>n,e){return eZ()(t,e)}function kp(t,e=0){const n=eZ(),r=n.getState().internal.subscribe,i=GQ(t);return jw(()=>r(i,e,n),[e,r,n]),null}const _$=new WeakMap;function tZ(t,e){return function(n,...r){let i=_$.get(n);return i||(i=new n,_$.set(n,i)),t&&t(i),Promise.all(r.map(s=>new Promise((a,o)=>i.load(s,l=>{l.scene&&Object.assign(l,bCe(l.scene)),a(l)},e,l=>o(new Error(`Could not load ${s}: ${l?.message}`))))))}}function b3(t,e,n,r){const i=Array.isArray(e)?e:[e],s=iCe(tZ(n,r),[t,...i],{equal:pr.equ});return Array.isArray(e)?s:s[0]}b3.preload=function(t,e,n){const r=Array.isArray(e)?e:[e];return sCe(tZ(n),[t,...r])};b3.clear=function(t,e){const n=Array.isArray(e)?e:[e];return aCe([t,...n])};const bv=new Map,{invalidate:S$,advance:E$}=RCe(bv),{reconciler:fE,applyProps:xg}=gCe(bv,SCe),bg={objects:"shallow",strict:!1},OCe=(t,e)=>{const n=typeof t=="function"?t(e):t;return QQ(n)?n:new QL({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function NCe(t,e){const n=typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:a,updateStyle:o=n}=e;return{width:r,height:i,top:s,left:a,updateStyle:o}}else if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:r,height:i,top:s,left:a}=t.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:a,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function ICe(t){const e=bv.get(t),n=e?.fiber,r=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||ACe(S$,E$),a=n||fE.createContainer(s,$g.ConcurrentRoot,null,!1,null,"",i,null);e||bv.set(t,{fiber:a,store:s});let o,l=!1,c;return{configure(u={}){let{gl:d,size:h,scene:m,events:b,onCreated:x,shadows:v=!1,linear:_=!1,flat:E=!1,legacy:T=!1,orthographic:A=!1,frameloop:P="always",dpr:R=[1,2],performance:N,raycaster:L,camera:I,onPointerMissed:j}=u,B=s.getState(),H=B.gl;B.gl||B.set({gl:H=OCe(d,t)});let J=B.raycaster;J||B.set({raycaster:J=new BQ});const{params:G,...W}=L||{};if(pr.equ(W,J,bg)||xg(J,{...W}),pr.equ(G,J.params,bg)||xg(J,{params:{...J.params,...G}}),!B.camera||B.camera===c&&!pr.equ(c,I,bg)){c=I;const X=I instanceof Pw,q=X?I:A?new ec(0,0,0,0,.1,1e3):new Nr(75,0,.1,1e3);X||(q.position.z=5,I&&(xg(q,I),("aspect"in I||"left"in I||"right"in I||"bottom"in I||"top"in I)&&(q.manual=!0,q.updateProjectionMatrix())),!B.camera&&!(I!=null&&I.rotation)&&q.lookAt(0,0,0)),B.set({camera:q}),J.camera=q}if(!B.scene){let X;m!=null&&m.isScene?X=m:(X=new ZL,m&&xg(X,m)),B.set({scene:Cg(X)})}if(!B.xr){var K;const X=(ie,ce)=>{const ye=s.getState();ye.frameloop!=="never"&&E$(ie,!0,ye,ce)},q=()=>{const ie=s.getState();ie.gl.xr.enabled=ie.gl.xr.isPresenting,ie.gl.xr.setAnimationLoop(ie.gl.xr.isPresenting?X:null),ie.gl.xr.isPresenting||S$(ie)},Q={connect(){const ie=s.getState().gl;ie.xr.addEventListener("sessionstart",q),ie.xr.addEventListener("sessionend",q)},disconnect(){const ie=s.getState().gl;ie.xr.removeEventListener("sessionstart",q),ie.xr.removeEventListener("sessionend",q)}};typeof((K=H.xr)==null?void 0:K.addEventListener)=="function"&&Q.connect(),B.set({xr:Q})}if(H.shadowMap){const X=H.shadowMap.enabled,q=H.shadowMap.type;if(H.shadowMap.enabled=!!v,pr.boo(v))H.shadowMap.type=_x;else if(pr.str(v)){var te;const Q={basic:OY,percentage:XT,soft:_x,variance:ll};H.shadowMap.type=(te=Q[v])!=null?te:_x}else pr.obj(v)&&Object.assign(H.shadowMap,v);(X!==H.shadowMap.enabled||q!==H.shadowMap.type)&&(H.shadowMap.needsUpdate=!0)}const z=HQ();z&&("enabled"in z?z.enabled=!T:"legacyMode"in z&&(z.legacyMode=T)),l||xg(H,{outputEncoding:_?3e3:3001,toneMapping:E?Ql:OL}),B.legacy!==T&&B.set(()=>({legacy:T})),B.linear!==_&&B.set(()=>({linear:_})),B.flat!==E&&B.set(()=>({flat:E})),d&&!pr.fun(d)&&!QQ(d)&&!pr.equ(d,H,bg)&&xg(H,d),b&&!B.events.handlers&&B.set({events:b(s)});const V=NCe(t,h);return pr.equ(V,B.size,bg)||B.setSize(V.width,V.height,V.updateStyle,V.top,V.left),R&&B.viewport.dpr!==XQ(R)&&B.setDpr(R),B.frameloop!==P&&B.setFrameloop(P),B.onPointerMissed||B.set({onPointerMissed:j}),N&&!pr.equ(N,B.performance,bg)&&B.set(X=>({performance:{...X.performance,...N}})),o=x,l=!0,this},render(u){return l||this.configure(),fE.updateContainer(p.jsx(kCe,{store:s,children:u,onCreated:o,rootElement:t}),a,null,()=>{}),s},unmount(){nZ(t)}}}function kCe({store:t,children:e,onCreated:n,rootElement:r}){return jw(()=>{const i=t.getState();i.set(s=>({internal:{...s.internal,active:!0}})),n&&n(i),t.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),p.jsx(ZQ.Provider,{value:t,children:e})}function nZ(t,e){const n=bv.get(t),r=n?.fiber;if(r){const i=n?.store.getState();i&&(i.internal.active=!1),fE.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,a,o,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(a=s.renderLists)==null||a.dispose==null||a.dispose(),(o=i.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),wCe(i),bv.delete(t)}catch{}},500)})}}fE.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:M.version});const jC={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function DCe(t){const{handlePointer:e}=TCe(t);return{priority:1,enabled:!0,compute(n,r,i){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(jC).reduce((n,r)=>({...n,[r]:e(r)}),{}),update:()=>{var n;const{events:r,internal:i}=t.getState();(n=i.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:n=>{var r;const{set:i,events:s}=t.getState();s.disconnect==null||s.disconnect(),i(a=>({events:{...a.events,connected:n}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([a,o])=>{const[l,c]=jC[a];n.addEventListener(l,o,{passive:c})})},disconnect:()=>{const{set:n,events:r}=t.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,a])=>{if(r&&r.connected instanceof HTMLElement){const[o]=jC[s];r.connected.removeEventListener(o,a)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}function T$(t,e){let n;return(...r)=>{window.clearTimeout(n),n=window.setTimeout(()=>t(...r),e)}}function jCe({debounce:t,scroll:e,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,a]=M.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=M.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=t?typeof t=="number"?t:t.scroll:null,c=t?typeof t=="number"?t:t.resize:null,u=M.useRef(!1);M.useEffect(()=>(u.current=!0,()=>{u.current=!1}));const[d,h,m]=M.useMemo(()=>{const _=()=>{if(!o.current.element)return;const{left:E,top:T,width:A,height:P,bottom:R,right:N,x:L,y:I}=o.current.element.getBoundingClientRect(),j={left:E,top:T,width:A,height:P,bottom:R,right:N,x:L,y:I};o.current.element instanceof HTMLElement&&r&&(j.height=o.current.element.offsetHeight,j.width=o.current.element.offsetWidth),Object.freeze(j),u.current&&!BCe(o.current.lastBounds,j)&&a(o.current.lastBounds=j)};return[_,c?T$(_,c):_,l?T$(_,l):_]},[a,r,l,c]);function b(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(_=>_.removeEventListener("scroll",m,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function x(){o.current.element&&(o.current.resizeObserver=new i(m),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(_=>_.addEventListener("scroll",m,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{m()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const v=_=>{!_||_===o.current.element||(b(),o.current.element=_,o.current.scrollContainers=rZ(_),x())};return UCe(m,!!e),LCe(h),M.useEffect(()=>{b(),x()},[e,m,h]),M.useEffect(()=>b,[]),[v,s,d]}function LCe(t){M.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[t])}function UCe(t,e){M.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",n,!0)}}},[t,e])}function rZ(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...rZ(t.parentElement)]}const FCe=["x","y","top","bottom","left","right","width","height"],BCe=(t,e)=>FCe.every(n=>t[n]===e[n]);var zCe=Object.defineProperty,$Ce=Object.defineProperties,VCe=Object.getOwnPropertyDescriptors,A$=Object.getOwnPropertySymbols,HCe=Object.prototype.hasOwnProperty,WCe=Object.prototype.propertyIsEnumerable,M$=(t,e,n)=>e in t?zCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,P$=(t,e)=>{for(var n in e||(e={}))HCe.call(e,n)&&M$(t,n,e[n]);if(A$)for(var n of A$(e))WCe.call(e,n)&&M$(t,n,e[n]);return t},GCe=(t,e)=>$Ce(t,VCe(e)),C$,R$;typeof window<"u"&&((C$=window.document)!=null&&C$.createElement||((R$=window.navigator)==null?void 0:R$.product)==="ReactNative")?M.useLayoutEffect:M.useEffect;function iZ(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=t.child;for(;r;){const i=iZ(r,e,n);if(i)return i;r=r.sibling}}function sZ(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const O$=console.error;console.error=function(){const t=[...arguments].join("");if(t?.startsWith("Warning:")&&t.includes("useContext")){console.error=O$;return}return O$.apply(this,arguments)};const w3=sZ(M.createContext(null));class aZ extends M.Component{render(){return M.createElement(w3.Provider,{value:this._reactInternals},this.props.children)}}function qCe(){const t=M.useContext(w3);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=M.useId();return M.useMemo(()=>{for(const r of[t,t?.alternate]){if(!r)continue;const i=iZ(r,!1,s=>{let a=s.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[t,e])}function KCe(){const t=qCe(),[e]=M.useState(()=>new Map);e.clear();let n=t;for(;n;){if(n.type&&typeof n.type=="object"){const i=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;i&&i!==w3&&!e.has(i)&&e.set(i,M.useContext(sZ(i)))}n=n.return}return e}function XCe(){const t=KCe();return M.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>M.createElement(e,null,M.createElement(n.Provider,GCe(P$({},r),{value:t.get(n)}))),e=>M.createElement(aZ,P$({},e))),[t])}const YCe=M.forwardRef(function({children:e,fallback:n,resize:r,style:i,gl:s,events:a=DCe,eventSource:o,eventPrefix:l,shadows:c,linear:u,flat:d,legacy:h,orthographic:m,frameloop:b,dpr:x,performance:v,raycaster:_,camera:E,scene:T,onPointerMissed:A,onCreated:P,...R},N){M.useMemo(()=>mCe(JPe),[]);const L=XCe(),[I,j]=jCe({scroll:!0,debounce:{scroll:50,resize:0},...r}),B=M.useRef(null),H=M.useRef(null);M.useImperativeHandle(N,()=>B.current);const J=GQ(A),[G,W]=M.useState(!1),[K,te]=M.useState(!1);if(G)throw G;if(K)throw K;const z=M.useRef(null);jw(()=>{const X=B.current;j.width>0&&j.height>0&&X&&(z.current||(z.current=ICe(X)),z.current.configure({gl:s,events:a,shadows:c,linear:u,flat:d,legacy:h,orthographic:m,frameloop:b,dpr:x,performance:v,raycaster:_,camera:E,scene:T,size:j,onPointerMissed:(...q)=>J.current==null?void 0:J.current(...q),onCreated:q=>{q.events.connect==null||q.events.connect(o?vCe(o)?o.current:o:H.current),l&&q.setEvents({compute:(Q,ie)=>{const ce=Q[l+"X"],ye=Q[l+"Y"];ie.pointer.set(ce/ie.size.width*2-1,-(ye/ie.size.height)*2+1),ie.raycaster.setFromCamera(ie.pointer,ie.camera)}}),P?.(q)}}),z.current.render(p.jsx(L,{children:p.jsx(qQ,{set:te,children:p.jsx(M.Suspense,{fallback:p.jsx(yCe,{set:W}),children:e??null})})})))}),M.useEffect(()=>{const X=B.current;if(X)return()=>nZ(X)},[]);const V=o?"none":"auto";return p.jsx("div",{ref:H,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:V,...i},...R,children:p.jsx("div",{ref:I,style:{width:"100%",height:"100%"},children:p.jsx("canvas",{ref:B,style:{display:"block"},children:n})})})}),JCe=M.forwardRef(function(e,n){return p.jsx(aZ,{children:p.jsx(YCe,{...e,ref:n})})});function _b(){return _b=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_b.apply(null,arguments)}const Lw=new ae,_3=new ae,QCe=new ae,N$=new ze;function ZCe(t,e,n){const r=Lw.setFromMatrixPosition(t.matrixWorld);r.project(e);const i=n.width/2,s=n.height/2;return[r.x*i+i,-(r.y*s)+s]}function eRe(t,e){const n=Lw.setFromMatrixPosition(t.matrixWorld),r=_3.setFromMatrixPosition(e.matrixWorld),i=n.sub(r),s=e.getWorldDirection(QCe);return i.angleTo(s)>Math.PI/2}function tRe(t,e,n,r){const i=Lw.setFromMatrixPosition(t.matrixWorld),s=i.clone();s.project(e),N$.set(s.x,s.y),n.setFromCamera(N$,e);const a=n.intersectObjects(r,!0);if(a.length){const o=a[0].distance;return i.distanceTo(n.ray.origin)<o}return!0}function nRe(t,e){if(e instanceof ec)return e.zoom;if(e instanceof Nr){const n=Lw.setFromMatrixPosition(t.matrixWorld),r=_3.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,s=n.distanceTo(r);return 1/(2*Math.tan(i/2)*s)}else return 1}function rRe(t,e,n){if(e instanceof Nr||e instanceof ec){const r=Lw.setFromMatrixPosition(t.matrixWorld),i=_3.setFromMatrixPosition(e.matrixWorld),s=r.distanceTo(i),a=(n[1]-n[0])/(e.far-e.near),o=n[1]-a*e.far;return Math.round(a*s+o)}}const Pk=t=>Math.abs(t)<1e-10?0:t;function oZ(t,e,n=""){let r="matrix3d(";for(let i=0;i!==16;i++)r+=Pk(e[i]*t.elements[i])+(i!==15?",":")");return n+r}const iRe=(t=>e=>oZ(e,t))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),sRe=(t=>(e,n)=>oZ(e,t(n),"translate(-50%,-50%)"))(t=>[1/t,1/t,1/t,1,-1/t,-1/t,-1/t,-1,1/t,1/t,1/t,1,1,1,1,1]);function aRe(t){return t&&typeof t=="object"&&"current"in t}const lZ=M.forwardRef(({children:t,eps:e=.001,style:n,className:r,prepend:i,center:s,fullscreen:a,portal:o,distanceFactor:l,sprite:c=!1,transform:u=!1,occlude:d,onOcclude:h,castShadow:m,receiveShadow:b,material:x,geometry:v,zIndexRange:_=[16777271,0],calculatePosition:E=ZCe,as:T="div",wrapperClass:A,pointerEvents:P="auto",...R},N)=>{const{gl:L,camera:I,scene:j,size:B,raycaster:H,events:J,viewport:G}=tu(),[W]=M.useState(()=>document.createElement(T)),K=M.useRef(),te=M.useRef(null),z=M.useRef(0),V=M.useRef([0,0]),X=M.useRef(null),q=M.useRef(null),Q=o?.current||J.connected||L.domElement.parentNode,ie=M.useRef(null),ce=M.useRef(!1),ye=M.useMemo(()=>d&&d!=="blending"||Array.isArray(d)&&d.length&&aRe(d[0]),[d]);M.useLayoutEffect(()=>{const _e=L.domElement;d&&d==="blending"?(_e.style.zIndex=`${Math.floor(_[0]/2)}`,_e.style.position="absolute",_e.style.pointerEvents="none"):(_e.style.zIndex=null,_e.style.position=null,_e.style.pointerEvents=null)},[d]),M.useLayoutEffect(()=>{if(te.current){const _e=K.current=Wq.createRoot(W);if(j.updateMatrixWorld(),u)W.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Ee=E(te.current,I,B);W.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Ee[0]}px,${Ee[1]}px,0);transform-origin:0 0;`}return Q&&(i?Q.prepend(W):Q.appendChild(W)),()=>{Q&&Q.removeChild(W),_e.unmount()}}},[Q,u]),M.useLayoutEffect(()=>{A&&(W.className=A)},[A]);const Ce=M.useMemo(()=>u?{position:"absolute",top:0,left:0,width:B.width,height:B.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...a&&{top:-B.height/2,left:-B.width/2,width:B.width,height:B.height},...n},[n,s,a,B,u]),he=M.useMemo(()=>({position:"absolute",pointerEvents:P}),[P]);M.useLayoutEffect(()=>{if(ce.current=!1,u){var _e;(_e=K.current)==null||_e.render(M.createElement("div",{ref:X,style:Ce},M.createElement("div",{ref:q,style:he},M.createElement("div",{ref:N,className:r,style:n,children:t}))))}else{var Ee;(Ee=K.current)==null||Ee.render(M.createElement("div",{ref:N,style:Ce,className:r,children:t}))}});const De=M.useRef(!0);kp(_e=>{if(te.current){I.updateMatrixWorld(),te.current.updateWorldMatrix(!0,!1);const Ee=u?V.current:E(te.current,I,B);if(u||Math.abs(z.current-I.zoom)>e||Math.abs(V.current[0]-Ee[0])>e||Math.abs(V.current[1]-Ee[1])>e){const ee=eRe(te.current,I);let Me=!1;ye&&(Array.isArray(d)?Me=d.map(tt=>tt.current):d!=="blending"&&(Me=[j]));const xe=De.current;if(Me){const tt=tRe(te.current,I,H,Me);De.current=tt&&!ee}else De.current=!ee;xe!==De.current&&(h?h(!De.current):W.style.display=De.current?"block":"none");const Le=Math.floor(_[0]/2),Pe=d?ye?[_[0],Le]:[Le-1,0]:_;if(W.style.zIndex=`${rRe(te.current,I,Pe)}`,u){const[tt,Ze]=[B.width/2,B.height/2],re=I.projectionMatrix.elements[5]*Ze,{isOrthographicCamera:Z,top:ge,left:$e,bottom:Be,right:Fe}=I,mt=iRe(I.matrixWorldInverse),Xe=Z?`scale(${re})translate(${Pk(-(Fe+$e)/2)}px,${Pk((ge+Be)/2)}px)`:`translateZ(${re}px)`;let it=te.current.matrixWorld;c&&(it=I.matrixWorldInverse.clone().transpose().copyPosition(it).scale(te.current.scale),it.elements[3]=it.elements[7]=it.elements[11]=0,it.elements[15]=1),W.style.width=B.width+"px",W.style.height=B.height+"px",W.style.perspective=Z?"":`${re}px`,X.current&&q.current&&(X.current.style.transform=`${Xe}${mt}translate(${tt}px,${Ze}px)`,q.current.style.transform=sRe(it,1/((l||10)/400)))}else{const tt=l===void 0?1:nRe(te.current,I)*l;W.style.transform=`translate3d(${Ee[0]}px,${Ee[1]}px,0) scale(${tt})`}V.current=Ee,z.current=I.zoom}}if(!ye&&ie.current&&!ce.current)if(u){if(X.current){const Ee=X.current.children[0];if(Ee!=null&&Ee.clientWidth&&Ee!=null&&Ee.clientHeight){const{isOrthographicCamera:ee}=I;if(ee||v)R.scale&&(Array.isArray(R.scale)?R.scale instanceof ae?ie.current.scale.copy(R.scale.clone().divideScalar(1)):ie.current.scale.set(1/R.scale[0],1/R.scale[1],1/R.scale[2]):ie.current.scale.setScalar(1/R.scale));else{const Me=(l||10)/400,xe=Ee.clientWidth*Me,Le=Ee.clientHeight*Me;ie.current.scale.set(xe,Le,1)}ce.current=!0}}}else{const Ee=W.children[0];if(Ee!=null&&Ee.clientWidth&&Ee!=null&&Ee.clientHeight){const ee=1/G.factor,Me=Ee.clientWidth*ee,xe=Ee.clientHeight*ee;ie.current.scale.set(Me,xe,1),ce.current=!0}ie.current.lookAt(_e.camera.position)}});const be=M.useMemo(()=>({vertexShader:u?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[u]);return M.createElement("group",_b({},R,{ref:te}),d&&!ye&&M.createElement("mesh",{castShadow:m,receiveShadow:b,ref:ie},v||M.createElement("planeGeometry",null),x||M.createElement("shaderMaterial",{side:Fa,vertexShader:be.vertexShader,fragmentShader:be.fragmentShader})))});var oRe=Object.defineProperty,lRe=(t,e,n)=>e in t?oRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cRe=(t,e,n)=>(lRe(t,e+"",n),n);class uRe{constructor(){cRe(this,"_listeners")}addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,a=i.length;s<a;s++)i[s].call(this,e);e.target=null}}}var dRe=Object.defineProperty,fRe=(t,e,n)=>e in t?dRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Kt=(t,e,n)=>(fRe(t,typeof e!="symbol"?e+"":e,n),n);const s1=new Rp,I$=new su,hRe=Math.cos(70*(Math.PI/180)),k$=(t,e)=>(t%e+e)%e;let pRe=class extends uRe{constructor(e,n){super(),Kt(this,"object"),Kt(this,"domElement"),Kt(this,"enabled",!0),Kt(this,"target",new ae),Kt(this,"minDistance",0),Kt(this,"maxDistance",1/0),Kt(this,"minZoom",0),Kt(this,"maxZoom",1/0),Kt(this,"minPolarAngle",0),Kt(this,"maxPolarAngle",Math.PI),Kt(this,"minAzimuthAngle",-1/0),Kt(this,"maxAzimuthAngle",1/0),Kt(this,"enableDamping",!1),Kt(this,"dampingFactor",.05),Kt(this,"enableZoom",!0),Kt(this,"zoomSpeed",1),Kt(this,"enableRotate",!0),Kt(this,"rotateSpeed",1),Kt(this,"enablePan",!0),Kt(this,"panSpeed",1),Kt(this,"screenSpacePanning",!0),Kt(this,"keyPanSpeed",7),Kt(this,"zoomToCursor",!1),Kt(this,"autoRotate",!1),Kt(this,"autoRotateSpeed",2),Kt(this,"reverseOrbit",!1),Kt(this,"reverseHorizontalOrbit",!1),Kt(this,"reverseVerticalOrbit",!1),Kt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Kt(this,"mouseButtons",{LEFT:Ph.ROTATE,MIDDLE:Ph.DOLLY,RIGHT:Ph.PAN}),Kt(this,"touches",{ONE:Ch.ROTATE,TWO:Ch.DOLLY_PAN}),Kt(this,"target0"),Kt(this,"position0"),Kt(this,"zoom0"),Kt(this,"_domElementKeyEvents",null),Kt(this,"getPolarAngle"),Kt(this,"getAzimuthalAngle"),Kt(this,"setPolarAngle"),Kt(this,"setAzimuthalAngle"),Kt(this,"getDistance"),Kt(this,"getZoomScale"),Kt(this,"listenToKeyEvents"),Kt(this,"stopListenToKeyEvents"),Kt(this,"saveState"),Kt(this,"reset"),Kt(this,"update"),Kt(this,"connect"),Kt(this,"dispose"),Kt(this,"dollyIn"),Kt(this,"dollyOut"),Kt(this,"getScale"),Kt(this,"setScale"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=ue=>{let Ve=k$(ue,2*Math.PI),ft=u.phi;ft<0&&(ft+=2*Math.PI),Ve<0&&(Ve+=2*Math.PI);let dt=Math.abs(Ve-ft);2*Math.PI-dt<dt&&(Ve<ft?Ve+=2*Math.PI:ft+=2*Math.PI),d.phi=Ve-ft,r.update()},this.setAzimuthalAngle=ue=>{let Ve=k$(ue,2*Math.PI),ft=u.theta;ft<0&&(ft+=2*Math.PI),Ve<0&&(Ve+=2*Math.PI);let dt=Math.abs(Ve-ft);2*Math.PI-dt<dt&&(Ve<ft?Ve+=2*Math.PI:ft+=2*Math.PI),d.theta=Ve-ft,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=ue=>{ue.addEventListener("keydown",Nt),this._domElementKeyEvents=ue},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Nt),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=o.NONE},this.update=(()=>{const ue=new ae,Ve=new ae(0,1,0),ft=new os().setFromUnitVectors(e.up,Ve),dt=ft.clone().invert(),Ge=new ae,de=new os,Qe=2*Math.PI;return function(){const zt=r.object.position;ft.setFromUnitVectors(e.up,Ve),dt.copy(ft).invert(),ue.copy(zt).sub(r.target),ue.applyQuaternion(ft),u.setFromVector3(ue),r.autoRotate&&l===o.NONE&&G(H()),r.enableDamping?(u.theta+=d.theta*r.dampingFactor,u.phi+=d.phi*r.dampingFactor):(u.theta+=d.theta,u.phi+=d.phi);let We=r.minAzimuthAngle,xt=r.maxAzimuthAngle;isFinite(We)&&isFinite(xt)&&(We<-Math.PI?We+=Qe:We>Math.PI&&(We-=Qe),xt<-Math.PI?xt+=Qe:xt>Math.PI&&(xt-=Qe),We<=xt?u.theta=Math.max(We,Math.min(xt,u.theta)):u.theta=u.theta>(We+xt)/2?Math.max(We,u.theta):Math.min(xt,u.theta)),u.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,u.phi)),u.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(m,r.dampingFactor):r.target.add(m),r.zoomToCursor&&I||r.object.isOrthographicCamera?u.radius=ie(u.radius):u.radius=ie(u.radius*h),ue.setFromSpherical(u),ue.applyQuaternion(dt),zt.copy(r.target).add(ue),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(d.theta*=1-r.dampingFactor,d.phi*=1-r.dampingFactor,m.multiplyScalar(1-r.dampingFactor)):(d.set(0,0,0),m.set(0,0,0));let Ot=!1;if(r.zoomToCursor&&I){let mn=null;if(r.object instanceof Nr&&r.object.isPerspectiveCamera){const An=ue.length();mn=ie(An*h);const rn=An-mn;r.object.position.addScaledVector(N,rn),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const An=new ae(L.x,L.y,0);An.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/h)),r.object.updateProjectionMatrix(),Ot=!0;const rn=new ae(L.x,L.y,0);rn.unproject(r.object),r.object.position.sub(rn).add(An),r.object.updateMatrixWorld(),mn=ue.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;mn!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(mn).add(r.object.position):(s1.origin.copy(r.object.position),s1.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(s1.direction))<hRe?e.lookAt(r.target):(I$.setFromNormalAndCoplanarPoint(r.object.up,r.target),s1.intersectPlane(I$,r.target))))}else r.object instanceof ec&&r.object.isOrthographicCamera&&(Ot=h!==1,Ot&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/h)),r.object.updateProjectionMatrix()));return h=1,I=!1,Ot||Ge.distanceToSquared(r.object.position)>c||8*(1-de.dot(r.object.quaternion))>c?(r.dispatchEvent(i),Ge.copy(r.object.position),de.copy(r.object.quaternion),Ot=!1,!0):!1}})(),this.connect=ue=>{r.domElement=ue,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",hn),r.domElement.addEventListener("pointerdown",$e),r.domElement.addEventListener("pointercancel",Fe),r.domElement.addEventListener("wheel",it)},this.dispose=()=>{var ue,Ve,ft,dt,Ge,de;r.domElement&&(r.domElement.style.touchAction="auto"),(ue=r.domElement)==null||ue.removeEventListener("contextmenu",hn),(Ve=r.domElement)==null||Ve.removeEventListener("pointerdown",$e),(ft=r.domElement)==null||ft.removeEventListener("pointercancel",Fe),(dt=r.domElement)==null||dt.removeEventListener("wheel",it),(Ge=r.domElement)==null||Ge.ownerDocument.removeEventListener("pointermove",Be),(de=r.domElement)==null||de.ownerDocument.removeEventListener("pointerup",Fe),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",Nt)};const r=this,i={type:"change"},s={type:"start"},a={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=o.NONE;const c=1e-6,u=new Tk,d=new Tk;let h=1;const m=new ae,b=new ze,x=new ze,v=new ze,_=new ze,E=new ze,T=new ze,A=new ze,P=new ze,R=new ze,N=new ae,L=new ze;let I=!1;const j=[],B={};function H(){return 2*Math.PI/60/60*r.autoRotateSpeed}function J(){return Math.pow(.95,r.zoomSpeed)}function G(ue){r.reverseOrbit||r.reverseHorizontalOrbit?d.theta+=ue:d.theta-=ue}function W(ue){r.reverseOrbit||r.reverseVerticalOrbit?d.phi+=ue:d.phi-=ue}const K=(()=>{const ue=new ae;return function(ft,dt){ue.setFromMatrixColumn(dt,0),ue.multiplyScalar(-ft),m.add(ue)}})(),te=(()=>{const ue=new ae;return function(ft,dt){r.screenSpacePanning===!0?ue.setFromMatrixColumn(dt,1):(ue.setFromMatrixColumn(dt,0),ue.crossVectors(r.object.up,ue)),ue.multiplyScalar(ft),m.add(ue)}})(),z=(()=>{const ue=new ae;return function(ft,dt){const Ge=r.domElement;if(Ge&&r.object instanceof Nr&&r.object.isPerspectiveCamera){const de=r.object.position;ue.copy(de).sub(r.target);let Qe=ue.length();Qe*=Math.tan(r.object.fov/2*Math.PI/180),K(2*ft*Qe/Ge.clientHeight,r.object.matrix),te(2*dt*Qe/Ge.clientHeight,r.object.matrix)}else Ge&&r.object instanceof ec&&r.object.isOrthographicCamera?(K(ft*(r.object.right-r.object.left)/r.object.zoom/Ge.clientWidth,r.object.matrix),te(dt*(r.object.top-r.object.bottom)/r.object.zoom/Ge.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function V(ue){r.object instanceof Nr&&r.object.isPerspectiveCamera||r.object instanceof ec&&r.object.isOrthographicCamera?h=ue:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function X(ue){V(h/ue)}function q(ue){V(h*ue)}function Q(ue){if(!r.zoomToCursor||!r.domElement)return;I=!0;const Ve=r.domElement.getBoundingClientRect(),ft=ue.clientX-Ve.left,dt=ue.clientY-Ve.top,Ge=Ve.width,de=Ve.height;L.x=ft/Ge*2-1,L.y=-(dt/de)*2+1,N.set(L.x,L.y,1).unproject(r.object).sub(r.object.position).normalize()}function ie(ue){return Math.max(r.minDistance,Math.min(r.maxDistance,ue))}function ce(ue){b.set(ue.clientX,ue.clientY)}function ye(ue){Q(ue),A.set(ue.clientX,ue.clientY)}function Ce(ue){_.set(ue.clientX,ue.clientY)}function he(ue){x.set(ue.clientX,ue.clientY),v.subVectors(x,b).multiplyScalar(r.rotateSpeed);const Ve=r.domElement;Ve&&(G(2*Math.PI*v.x/Ve.clientHeight),W(2*Math.PI*v.y/Ve.clientHeight)),b.copy(x),r.update()}function De(ue){P.set(ue.clientX,ue.clientY),R.subVectors(P,A),R.y>0?X(J()):R.y<0&&q(J()),A.copy(P),r.update()}function be(ue){E.set(ue.clientX,ue.clientY),T.subVectors(E,_).multiplyScalar(r.panSpeed),z(T.x,T.y),_.copy(E),r.update()}function _e(ue){Q(ue),ue.deltaY<0?q(J()):ue.deltaY>0&&X(J()),r.update()}function Ee(ue){let Ve=!1;switch(ue.code){case r.keys.UP:z(0,r.keyPanSpeed),Ve=!0;break;case r.keys.BOTTOM:z(0,-r.keyPanSpeed),Ve=!0;break;case r.keys.LEFT:z(r.keyPanSpeed,0),Ve=!0;break;case r.keys.RIGHT:z(-r.keyPanSpeed,0),Ve=!0;break}Ve&&(ue.preventDefault(),r.update())}function ee(){if(j.length==1)b.set(j[0].pageX,j[0].pageY);else{const ue=.5*(j[0].pageX+j[1].pageX),Ve=.5*(j[0].pageY+j[1].pageY);b.set(ue,Ve)}}function Me(){if(j.length==1)_.set(j[0].pageX,j[0].pageY);else{const ue=.5*(j[0].pageX+j[1].pageX),Ve=.5*(j[0].pageY+j[1].pageY);_.set(ue,Ve)}}function xe(){const ue=j[0].pageX-j[1].pageX,Ve=j[0].pageY-j[1].pageY,ft=Math.sqrt(ue*ue+Ve*Ve);A.set(0,ft)}function Le(){r.enableZoom&&xe(),r.enablePan&&Me()}function Pe(){r.enableZoom&&xe(),r.enableRotate&&ee()}function tt(ue){if(j.length==1)x.set(ue.pageX,ue.pageY);else{const ft=gt(ue),dt=.5*(ue.pageX+ft.x),Ge=.5*(ue.pageY+ft.y);x.set(dt,Ge)}v.subVectors(x,b).multiplyScalar(r.rotateSpeed);const Ve=r.domElement;Ve&&(G(2*Math.PI*v.x/Ve.clientHeight),W(2*Math.PI*v.y/Ve.clientHeight)),b.copy(x)}function Ze(ue){if(j.length==1)E.set(ue.pageX,ue.pageY);else{const Ve=gt(ue),ft=.5*(ue.pageX+Ve.x),dt=.5*(ue.pageY+Ve.y);E.set(ft,dt)}T.subVectors(E,_).multiplyScalar(r.panSpeed),z(T.x,T.y),_.copy(E)}function re(ue){const Ve=gt(ue),ft=ue.pageX-Ve.x,dt=ue.pageY-Ve.y,Ge=Math.sqrt(ft*ft+dt*dt);P.set(0,Ge),R.set(0,Math.pow(P.y/A.y,r.zoomSpeed)),X(R.y),A.copy(P)}function Z(ue){r.enableZoom&&re(ue),r.enablePan&&Ze(ue)}function ge(ue){r.enableZoom&&re(ue),r.enableRotate&&tt(ue)}function $e(ue){var Ve,ft;r.enabled!==!1&&(j.length===0&&((Ve=r.domElement)==null||Ve.ownerDocument.addEventListener("pointermove",Be),(ft=r.domElement)==null||ft.ownerDocument.addEventListener("pointerup",Fe)),un(ue),ue.pointerType==="touch"?Xt(ue):mt(ue))}function Be(ue){r.enabled!==!1&&(ue.pointerType==="touch"?He(ue):Xe(ue))}function Fe(ue){var Ve,ft,dt;$t(ue),j.length===0&&((Ve=r.domElement)==null||Ve.releasePointerCapture(ue.pointerId),(ft=r.domElement)==null||ft.ownerDocument.removeEventListener("pointermove",Be),(dt=r.domElement)==null||dt.ownerDocument.removeEventListener("pointerup",Fe)),r.dispatchEvent(a),l=o.NONE}function mt(ue){let Ve;switch(ue.button){case 0:Ve=r.mouseButtons.LEFT;break;case 1:Ve=r.mouseButtons.MIDDLE;break;case 2:Ve=r.mouseButtons.RIGHT;break;default:Ve=-1}switch(Ve){case Ph.DOLLY:if(r.enableZoom===!1)return;ye(ue),l=o.DOLLY;break;case Ph.ROTATE:if(ue.ctrlKey||ue.metaKey||ue.shiftKey){if(r.enablePan===!1)return;Ce(ue),l=o.PAN}else{if(r.enableRotate===!1)return;ce(ue),l=o.ROTATE}break;case Ph.PAN:if(ue.ctrlKey||ue.metaKey||ue.shiftKey){if(r.enableRotate===!1)return;ce(ue),l=o.ROTATE}else{if(r.enablePan===!1)return;Ce(ue),l=o.PAN}break;default:l=o.NONE}l!==o.NONE&&r.dispatchEvent(s)}function Xe(ue){if(r.enabled!==!1)switch(l){case o.ROTATE:if(r.enableRotate===!1)return;he(ue);break;case o.DOLLY:if(r.enableZoom===!1)return;De(ue);break;case o.PAN:if(r.enablePan===!1)return;be(ue);break}}function it(ue){r.enabled===!1||r.enableZoom===!1||l!==o.NONE&&l!==o.ROTATE||(ue.preventDefault(),r.dispatchEvent(s),_e(ue),r.dispatchEvent(a))}function Nt(ue){r.enabled===!1||r.enablePan===!1||Ee(ue)}function Xt(ue){switch(Tt(ue),j.length){case 1:switch(r.touches.ONE){case Ch.ROTATE:if(r.enableRotate===!1)return;ee(),l=o.TOUCH_ROTATE;break;case Ch.PAN:if(r.enablePan===!1)return;Me(),l=o.TOUCH_PAN;break;default:l=o.NONE}break;case 2:switch(r.touches.TWO){case Ch.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Le(),l=o.TOUCH_DOLLY_PAN;break;case Ch.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Pe(),l=o.TOUCH_DOLLY_ROTATE;break;default:l=o.NONE}break;default:l=o.NONE}l!==o.NONE&&r.dispatchEvent(s)}function He(ue){switch(Tt(ue),l){case o.TOUCH_ROTATE:if(r.enableRotate===!1)return;tt(ue),r.update();break;case o.TOUCH_PAN:if(r.enablePan===!1)return;Ze(ue),r.update();break;case o.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Z(ue),r.update();break;case o.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;ge(ue),r.update();break;default:l=o.NONE}}function hn(ue){r.enabled!==!1&&ue.preventDefault()}function un(ue){j.push(ue)}function $t(ue){delete B[ue.pointerId];for(let Ve=0;Ve<j.length;Ve++)if(j[Ve].pointerId==ue.pointerId){j.splice(Ve,1);return}}function Tt(ue){let Ve=B[ue.pointerId];Ve===void 0&&(Ve=new ze,B[ue.pointerId]=Ve),Ve.set(ue.pageX,ue.pageY)}function gt(ue){const Ve=ue.pointerId===j[0].pointerId?j[1]:j[0];return B[Ve.pointerId]}this.dollyIn=(ue=J())=>{q(ue),r.update()},this.dollyOut=(ue=J())=>{X(ue),r.update()},this.getScale=()=>h,this.setScale=ue=>{V(ue),r.update()},this.getZoomScale=()=>J(),n!==void 0&&this.connect(n),this.update()}};const mRe=M.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:r,enableDamping:i=!0,keyEvents:s=!1,onChange:a,onStart:o,onEnd:l,...c},u)=>{const d=tu(R=>R.invalidate),h=tu(R=>R.camera),m=tu(R=>R.gl),b=tu(R=>R.events),x=tu(R=>R.setEvents),v=tu(R=>R.set),_=tu(R=>R.get),E=tu(R=>R.performance),T=e||h,A=r||b.connected||m.domElement,P=M.useMemo(()=>new pRe(T),[T]);return kp(()=>{P.enabled&&P.update()},-1),M.useEffect(()=>(s&&P.connect(s===!0?A:s),P.connect(A),()=>{P.dispose()}),[s,A,n,P,d]),M.useEffect(()=>{const R=I=>{d(),n&&E.regress(),a&&a(I)},N=I=>{o&&o(I)},L=I=>{l&&l(I)};return P.addEventListener("change",R),P.addEventListener("start",N),P.addEventListener("end",L),()=>{P.removeEventListener("start",N),P.removeEventListener("end",L),P.removeEventListener("change",R)}},[a,o,l,P,d,x]),M.useEffect(()=>{if(t){const R=_().controls;return v({controls:P}),()=>v({controls:R})}},[t,P]),M.createElement("primitive",_b({ref:u,object:P,enableDamping:i},c))});var LC={exports:{}},UC,D$;function gRe(){if(D$)return UC;D$=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return UC=t,UC}var FC,j$;function vRe(){if(j$)return FC;j$=1;var t=gRe();function e(){}function n(){}return n.resetWarningCache=e,FC=function(){function r(a,o,l,c,u,d){if(d!==t){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},FC}var L$;function yRe(){return L$||(L$=1,LC.exports=vRe()()),LC.exports}var xRe=yRe();const $n=Ln(xRe);function bRe(t,e){const n=t+"Geometry";return M.forwardRef(({args:r,children:i,...s},a)=>{const o=M.useRef(null);return M.useImperativeHandle(a,()=>o.current),M.useLayoutEffect(()=>{e?.(o.current)}),M.createElement("mesh",_b({ref:o},s),M.createElement(n,{attach:"geometry",args:r}),i)})}const sx=bRe("sphere"),po=[{code:"US",name:"United States",lat:37.0902,lng:-95.7129,reads:45230,downloads:12450,citations:8920,collaborations:156,topPapers:["Climate Change Impact on African Agriculture","Machine Learning for Malaria Detection"],partnerUniversities:["MIT","Stanford University","Johns Hopkins University"],flag:""},{code:"GB",name:"United Kingdom",lat:55.3781,lng:-3.436,reads:38450,downloads:9870,citations:7230,collaborations:142,topPapers:["Sustainable Water Management in Tanzania","Public Health Infrastructure"],partnerUniversities:["Oxford University","Cambridge University","Imperial College London"],flag:""},{code:"DE",name:"Germany",lat:51.1657,lng:10.4515,reads:28760,downloads:7650,citations:5430,collaborations:98,topPapers:["Renewable Energy Systems for East Africa","Advanced Materials Research"],partnerUniversities:["TU Munich","Humboldt University","Max Planck Institute"],flag:""},{code:"CN",name:"China",lat:35.8617,lng:104.1954,reads:52340,downloads:14230,citations:6780,collaborations:87,topPapers:["Agricultural Innovation Technologies","Infrastructure Development"],partnerUniversities:["Tsinghua University","Peking University","Fudan University"],flag:""},{code:"IN",name:"India",lat:20.5937,lng:78.9629,reads:34120,downloads:8970,citations:4560,collaborations:76,topPapers:["Tropical Disease Research","Agricultural Sustainability"],partnerUniversities:["IIT Delhi","Indian Institute of Science","JNU"],flag:""},{code:"ZA",name:"South Africa",lat:-30.5595,lng:22.9375,reads:29870,downloads:7890,citations:5670,collaborations:134,topPapers:["African Continental Research Collaboration","Mining and Environment"],partnerUniversities:["University of Cape Town","Wits University","Stellenbosch"],flag:""},{code:"KE",name:"Kenya",lat:-.0236,lng:37.9062,reads:24560,downloads:6540,citations:3890,collaborations:112,topPapers:["East African Economic Integration","Wildlife Conservation"],partnerUniversities:["University of Nairobi","JKUAT","Strathmore University"],flag:""},{code:"JP",name:"Japan",lat:36.2048,lng:138.2529,reads:18970,downloads:4560,citations:3450,collaborations:45,topPapers:["Technology Transfer Programs","Marine Biology"],partnerUniversities:["University of Tokyo","Kyoto University","Osaka University"],flag:""},{code:"AU",name:"Australia",lat:-25.2744,lng:133.7751,reads:21340,downloads:5670,citations:4120,collaborations:67,topPapers:["Climate Adaptation Strategies","Mining Research"],partnerUniversities:["University of Melbourne","ANU","University of Sydney"],flag:""},{code:"BR",name:"Brazil",lat:-14.235,lng:-51.9253,reads:15670,downloads:4230,citations:2890,collaborations:34,topPapers:["Tropical Forestry Research","Biodiversity Studies"],partnerUniversities:["USP","UNICAMP","Federal University of Rio"],flag:""},{code:"NG",name:"Nigeria",lat:9.082,lng:8.6753,reads:19870,downloads:5120,citations:2670,collaborations:89,topPapers:["African Higher Education","Oil and Gas Research"],partnerUniversities:["University of Lagos","University of Ibadan","ABU Zaria"],flag:""},{code:"SE",name:"Sweden",lat:60.1282,lng:18.6435,reads:14560,downloads:3890,citations:4230,collaborations:78,topPapers:["Sustainable Development Goals Research","Gender Studies"],partnerUniversities:["Uppsala University","Karolinska Institute","KTH"],flag:""},{code:"NL",name:"Netherlands",lat:52.1326,lng:5.2913,reads:16780,downloads:4560,citations:5120,collaborations:82,topPapers:["Water Management","Agricultural Technology"],partnerUniversities:["Wageningen University","TU Delft","University of Amsterdam"],flag:""},{code:"CA",name:"Canada",lat:56.1304,lng:-106.3468,reads:22340,downloads:6120,citations:4780,collaborations:56,topPapers:["Mining and Sustainability","Public Policy Research"],partnerUniversities:["University of Toronto","McGill University","UBC"],flag:""},{code:"FR",name:"France",lat:46.2276,lng:2.2137,reads:17890,downloads:4780,citations:3670,collaborations:54,topPapers:["Francophone African Studies","Urban Development"],partnerUniversities:["Sorbonne University","cole Polytechnique","CNRS"],flag:""}],BC=[{id:"auth-001",name:"Prof. Amani Mwangi",orcid:"0000-0001-2345-6789",department:"College of Engineering",hIndex:34,citations:4567,papers:89,collaborators:["Dr. John Smith (MIT)","Prof. Liu Wei (Tsinghua)","Dr. Sarah Johnson (Oxford)"]},{id:"auth-002",name:"Dr. Fatima Hassan",orcid:"0000-0002-3456-7890",department:"School of Medicine",hIndex:28,citations:3234,papers:67,collaborators:["Prof. James Brown (Harvard)","Dr. Priya Patel (IISc)"]},{id:"auth-003",name:"Prof. Joseph Kimathi",orcid:"0000-0003-4567-8901",department:"College of Natural Sciences",hIndex:31,citations:3890,papers:78,collaborators:["Dr. Anna Schmidt (Max Planck)","Prof. Yuki Tanaka (Tokyo)"]},{id:"auth-004",name:"Dr. Grace Nyerere",orcid:"0000-0004-5678-9012",department:"School of Economics",hIndex:25,citations:2456,papers:52,collaborators:["Prof. Michael Chen (Stanford)","Dr. Emma Wilson (LSE)"]},{id:"auth-005",name:"Prof. Samuel Ochieng",orcid:"0000-0005-6789-0123",department:"Institute of Marine Sciences",hIndex:29,citations:3123,papers:61,collaborators:["Dr. Henrik Larsen (Copenhagen)","Prof. Maria Santos (Lisbon)"]}],_s={globalImpactIndex:78.4,hIndexGrowth:12.5,totalCitations:156789,totalPapers:4523,openAccessPercentage:67.8,internationalCollaborations:892,q1Publications:423},wRe=[{year:2015,citations:8234,papers:312,hIndex:42},{year:2016,citations:9456,papers:345,hIndex:44},{year:2017,citations:11234,papers:378,hIndex:47},{year:2018,citations:13567,papers:412,hIndex:51},{year:2019,citations:15890,papers:445,hIndex:54},{year:2020,citations:18234,papers:489,hIndex:58},{year:2021,citations:21567,papers:523,hIndex:62},{year:2022,citations:24890,papers:567,hIndex:67},{year:2023,citations:28234,papers:612,hIndex:72},{year:2024,citations:32567,papers:678,hIndex:78}],zC=[{quartile:"Q1",count:423,percentage:28},{quartile:"Q2",count:567,percentage:37},{quartile:"Q3",count:389,percentage:25},{quartile:"Q4",count:156,percentage:10}],_Re=[{topic:"Health Sciences",papers:678,citations:23456},{topic:"Engineering",papers:523,citations:18234},{topic:"Environmental Science",papers:456,citations:15678},{topic:"Agriculture",papers:389,citations:12345},{topic:"Social Sciences",papers:345,citations:9876},{topic:"Natural Sciences",papers:312,citations:11234},{topic:"Economics",papers:278,citations:8765},{topic:"Computer Science",papers:245,citations:9234}],$C={nodes:[{id:"UDSM",label:"UDSM",type:"institution",size:50},{id:"MIT",label:"MIT",type:"partner",size:35},{id:"Oxford",label:"Oxford",type:"partner",size:32},{id:"Tsinghua",label:"Tsinghua",type:"partner",size:28},{id:"UCT",label:"Univ. Cape Town",type:"partner",size:30},{id:"UoN",label:"Univ. Nairobi",type:"partner",size:28},{id:"WHO",label:"WHO",type:"funding",size:25},{id:"WorldBank",label:"World Bank",type:"funding",size:24},{id:"Gates",label:"Gates Foundation",type:"funding",size:26}],edges:[{source:"UDSM",target:"MIT",weight:45},{source:"UDSM",target:"Oxford",weight:52},{source:"UDSM",target:"Tsinghua",weight:38},{source:"UDSM",target:"UCT",weight:67},{source:"UDSM",target:"UoN",weight:78},{source:"UDSM",target:"WHO",weight:34},{source:"UDSM",target:"WorldBank",weight:42},{source:"UDSM",target:"Gates",weight:29}]},S3={citationGrowth:[{year:2025,predicted:38e3,lower:35e3,upper:41e3},{year:2026,predicted:45e3,lower:4e4,upper:5e4},{year:2027,predicted:54e3,lower:47e3,upper:61e3},{year:2028,predicted:65e3,lower:55e3,upper:75e3},{year:2029,predicted:78e3,lower:65e3,upper:91e3}],emergingTopics:[{topic:"AI in Healthcare",growthRate:45,confidence:.89},{topic:"Climate Adaptation",growthRate:38,confidence:.92},{topic:"Renewable Energy",growthRate:35,confidence:.87},{topic:"Digital Agriculture",growthRate:32,confidence:.84},{topic:"Urban Sustainability",growthRate:28,confidence:.81}],partnerRecommendations:[{institution:"NUS Singapore",score:.92,reason:"High alignment in Health Sciences"},{institution:"ETH Zurich",score:.88,reason:"Strong Engineering synergy"},{institution:"University of Tokyo",score:.85,reason:"Emerging Marine Sciences collaboration"}]},SRe=[{month:"Jan",reads:12450,downloads:3420,region:"Global"},{month:"Feb",reads:14230,downloads:3890,region:"Global"},{month:"Mar",reads:15670,downloads:4120,region:"Global"},{month:"Apr",reads:13890,downloads:3670,region:"Global"},{month:"May",reads:16780,downloads:4560,region:"Global"},{month:"Jun",reads:18230,downloads:4890,region:"Global"},{month:"Jul",reads:17450,downloads:4670,region:"Global"},{month:"Aug",reads:19120,downloads:5120,region:"Global"},{month:"Sep",reads:21340,downloads:5670,region:"Global"},{month:"Oct",reads:23560,downloads:6230,region:"Global"},{month:"Nov",reads:22340,downloads:5890,region:"Global"},{month:"Dec",reads:24780,downloads:6540,region:"Global"}],ERe="/udsm-research-impact/assets/earth-hero-6xKkhuwV.jpg";function TRe({position:t,data:e,onHover:n}){const r=M.useRef(null),i=M.useRef(null),[s,a]=M.useState(!1),l=.02+Math.log10(e.reads)/5*.03;return kp(c=>{if(r.current&&r.current.scale.setScalar(s?l*1.5:l),i.current){const u=Math.sin(c.clock.elapsedTime*2+e.reads*.001)*.3+1;i.current.opacity=.7*u}}),p.jsxs("mesh",{ref:r,position:t,onPointerOver:c=>{c.stopPropagation(),a(!0),n(e)},onPointerOut:()=>{a(!1),n(null)},children:[p.jsx("sphereGeometry",{args:[1,16,16]}),p.jsx("meshBasicMaterial",{ref:i,color:s?"#fbbf24":"#3b82f6",transparent:!0,opacity:.8}),s&&p.jsx(lZ,{distanceFactor:10,children:p.jsxs("div",{className:"glass-panel px-4 py-3 min-w-[200px] pointer-events-none",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx("span",{className:"text-2xl",children:e.flag}),p.jsx("span",{className:"font-display font-semibold text-foreground",children:e.name})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[p.jsxs("div",{children:[p.jsx("span",{className:"text-muted-foreground",children:"Reads:"}),p.jsx("span",{className:"ml-1 text-primary font-medium",children:e.reads.toLocaleString()})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-muted-foreground",children:"Citations:"}),p.jsx("span",{className:"ml-1 text-secondary font-medium",children:e.citations.toLocaleString()})]})]})]})})]})}function ARe({autoRotate:t}){const e=M.useRef(null);return kp(n=>{e.current&&t&&(e.current.rotation.y=n.clock.elapsedTime*.05)}),p.jsxs("group",{ref:e,children:[p.jsxs("mesh",{rotation:[0,Math.PI*.5,0],children:[p.jsx("sphereGeometry",{args:[2.015,64,64,0,Math.PI]}),p.jsx("meshBasicMaterial",{color:"#000033",transparent:!0,opacity:.5,side:Sl})]}),p.jsxs("mesh",{rotation:[0,Math.PI*.3,0],children:[p.jsx("sphereGeometry",{args:[2.012,64,64,0,Math.PI*.15]}),p.jsx("meshBasicMaterial",{color:"#1a1a3e",transparent:!0,opacity:.3,side:Sl})]}),p.jsx(sx,{args:[2.016,32,32],rotation:[0,Math.PI*.5,0],children:p.jsx("meshBasicMaterial",{color:"#ffcc00",transparent:!0,opacity:.05,side:Hi})})]})}function MRe({startPos:t,endPos:e,color:n="#fbbf24",index:r,destinationData:i}){const s=M.useRef(null),a=M.useRef(null),[o,l]=M.useState(!1),{curve:c,curvePoints:u,midPoint:d}=M.useMemo(()=>{const m=new ae(...t),b=new ae(...e),x=new ae().addVectors(m,b).multiplyScalar(.5),v=m.distanceTo(b),_=Math.max(.5,v*.4);x.normalize().multiplyScalar(2+_);const E=new lA(m,x,b),T=E.getPoints(60),A=E.getPoint(.5);return{curve:E,curvePoints:T,midPoint:A}},[t,e]);kp(m=>{if(a.current){const b=(m.clock.elapsedTime*.15+r*.2)%1,x=c.getPoint(b);a.current.position.copy(x);const v=.03+Math.sin(m.clock.elapsedTime*3)*.01;a.current.scale.setScalar(v*50)}});const h=M.useMemo(()=>new Float32Array(u.flatMap(m=>[m.x,m.y,m.z])),[u]);return p.jsxs("group",{ref:s,children:[p.jsxs("mesh",{position:[d.x,d.y,d.z],onPointerOver:m=>{m.stopPropagation(),l(!0)},onPointerOut:()=>l(!1),children:[p.jsx("sphereGeometry",{args:[.15,8,8]}),p.jsx("meshBasicMaterial",{transparent:!0,opacity:0})]}),p.jsxs("line",{children:[p.jsx("bufferGeometry",{children:p.jsx("bufferAttribute",{attach:"attributes-position",count:u.length,array:h,itemSize:3})}),p.jsx("lineBasicMaterial",{color:o?"#ffffff":n,transparent:!0,opacity:o?.9:.4,linewidth:1})]}),p.jsxs("mesh",{ref:a,children:[p.jsx("sphereGeometry",{args:[.02,8,8]}),p.jsx("meshBasicMaterial",{color:o?"#ffffff":n,transparent:!0,opacity:.9})]}),o&&i&&p.jsx(lZ,{position:[d.x,d.y+.2,d.z],distanceFactor:8,children:p.jsxs("div",{className:"glass-panel px-4 py-3 min-w-[220px] pointer-events-none animate-fade-in",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx("span",{className:"text-lg",children:i.flag}),p.jsxs("span",{className:"font-display font-semibold text-foreground text-sm",children:["UDSM  ",i.name]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[p.jsxs("div",{children:[p.jsx("span",{className:"text-muted-foreground",children:"Collaborations:"}),p.jsx("span",{className:"ml-1 text-primary font-medium",children:i.collaborations})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-muted-foreground",children:"Citations:"}),p.jsx("span",{className:"ml-1 text-secondary font-medium",children:i.citations.toLocaleString()})]}),p.jsxs("div",{className:"col-span-2",children:[p.jsx("span",{className:"text-muted-foreground",children:"Partners:"}),p.jsx("span",{className:"ml-1 text-foreground/80 text-[10px]",children:i.partnerUniversities.slice(0,2).join(", ")})]})]})]})})]})}function PRe({position:t,intensity:e,color:n="#22c55e",delay:r=0}){const i=M.useRef(null),s=M.useRef(null),a=M.useMemo(()=>{const o=new ae(...t),l=new ae(0,1,0),c=new os;c.setFromUnitVectors(l,o.clone().normalize());const u=new hy().setFromQuaternion(c);return[u.x,u.y,u.z]},[t]);return kp(o=>{const l=o.clock.elapsedTime+r;if(i.current){const c=l*.8%2,u=1+c*2,d=Math.max(0,1-c/2)*e;i.current.scale.setScalar(u),i.current.material.opacity=d*.6}if(s.current){const c=Math.sin(l*3)*.5+.5;s.current.material.opacity=(.3+c*.4)*e}}),p.jsxs("group",{position:t,rotation:a,children:[p.jsxs("mesh",{ref:i,rotation:[Math.PI/2,0,0],children:[p.jsx("ringGeometry",{args:[.03,.04,32]}),p.jsx("meshBasicMaterial",{color:n,transparent:!0,opacity:.5,side:Fa,depthWrite:!1})]}),p.jsxs("mesh",{ref:s,children:[p.jsx("sphereGeometry",{args:[.025,16,16]}),p.jsx("meshBasicMaterial",{color:n,transparent:!0,opacity:.7})]})]})}const CRe={read:"#3b82f6",citation:"#22c55e",download:"#f59e0b",collaboration:"#8b5cf6"};function RRe({activities:t}){return p.jsx("group",{children:t.map((e,n)=>p.jsx(PRe,{position:e.position,intensity:e.intensity,color:CRe[e.type],delay:n*.3},`activity-${n}`))})}function Zc(t,e,n){const r=(90-t)*(Math.PI/180),i=(e+180)*(Math.PI/180),s=-n*Math.sin(r)*Math.cos(i),a=n*Math.cos(r),o=n*Math.sin(r)*Math.sin(i);return[s,a,o]}const Cd={lat:-6.7924,lng:39.2083};function ORe({autoRotate:t}){const e=M.useRef(null),n=M.useRef(null),[r,i]=M.useState(null),s=b3(AQ,ERe);kp(()=>{e.current&&!r&&t&&(e.current.rotation.y+=.002),n.current&&t&&(n.current.rotation.y+=.0025)});const a=M.useMemo(()=>po.map(u=>({position:Zc(u.lat,u.lng,2.02),data:u})),[]),o=M.useMemo(()=>{const u=Zc(Cd.lat,Cd.lng,2.02);return po.slice(0,10).map(d=>({startPos:u,endPos:Zc(d.lat,d.lng,2.02),destinationData:d}))},[]),l=M.useMemo(()=>{const u=[],d=["read","citation","download","collaboration"];return po.forEach((h,m)=>{h.reads>2e4&&u.push({position:Zc(h.lat,h.lng,2.03),intensity:Math.min(1,h.reads/5e4),type:d[m%4]})}),u.push({position:Zc(Cd.lat,Cd.lng,2.03),intensity:1,type:"collaboration"}),u},[]),c=M.useMemo(()=>{const u=[];for(let d=-60;d<=60;d+=30){const h=[];for(let m=0;m<=360;m+=5){const[b,x,v]=Zc(d,m,2.01);h.push(new ae(b,x,v))}u.push(h)}for(let d=0;d<360;d+=30){const h=[];for(let m=-90;m<=90;m+=5){const[b,x,v]=Zc(m,d,2.01);h.push(new ae(b,x,v))}u.push(h)}return u},[]);return p.jsxs("group",{ref:e,children:[p.jsx(sx,{args:[2,64,64],children:p.jsx("meshStandardMaterial",{map:s,roughness:.8,metalness:.05})}),p.jsx(sx,{args:[2.015,64,64],children:p.jsx("meshBasicMaterial",{color:"#60a5fa",transparent:!0,opacity:.08,side:Hi})}),p.jsx(sx,{args:[2.06,64,64],children:p.jsx("meshBasicMaterial",{color:"#3b82f6",transparent:!0,opacity:.12,side:Hi})}),p.jsx(sx,{ref:n,args:[2.025,48,48],children:p.jsx("meshBasicMaterial",{color:"#ffffff",transparent:!0,opacity:.15,depthWrite:!1})}),p.jsx(ARe,{autoRotate:t}),c.map((u,d)=>p.jsxs("line",{children:[p.jsx("bufferGeometry",{children:p.jsx("bufferAttribute",{attach:"attributes-position",count:u.length,array:new Float32Array(u.flatMap(h=>[h.x,h.y,h.z])),itemSize:3})}),p.jsx("lineBasicMaterial",{color:"#3b82f6",transparent:!0,opacity:.1})]},`grid-${d}`)),a.map((u,d)=>p.jsx(TRe,{position:u.position,data:u.data,onHover:i},`point-${d}`)),o.map((u,d)=>p.jsx(MRe,{startPos:u.startPos,endPos:u.endPos,index:d,color:"#fbbf24",destinationData:u.destinationData},`flight-${d}`)),p.jsx(RRe,{activities:l}),p.jsxs("mesh",{position:Zc(Cd.lat,Cd.lng,2.05),children:[p.jsx("sphereGeometry",{args:[.06,16,16]}),p.jsx("meshBasicMaterial",{color:"#fbbf24"})]}),p.jsxs("mesh",{position:Zc(Cd.lat,Cd.lng,2.04),rotation:[Math.PI/2,0,0],children:[p.jsx("ringGeometry",{args:[.08,.12,32]}),p.jsx("meshBasicMaterial",{color:"#fbbf24",transparent:!0,opacity:.5,side:Fa})]})]})}function NRe(){const[t,e]=M.useState(!0);return p.jsxs("div",{className:"w-full h-full relative",children:[p.jsxs("div",{className:"absolute bottom-4 left-4 z-10 flex flex-col gap-2",children:[p.jsx("button",{onClick:()=>e(!t),className:"glass-panel px-3 py-2 text-xs font-medium hover:bg-primary/10 transition-colors",title:t?"Pause rotation":"Resume rotation",children:t?" Pause":" Rotate"}),p.jsx("div",{className:"glass-panel px-3 py-2 text-xs text-muted-foreground",children:" Scroll to zoom"})]}),p.jsxs("div",{className:"absolute top-4 right-4 z-10 glass-panel px-3 py-2 text-xs space-y-1.5",children:[p.jsx("div",{className:"font-medium text-foreground mb-2",children:"Legend"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-3 h-3 rounded-full bg-secondary"}),p.jsx("span",{className:"text-muted-foreground",children:"UDSM (Origin)"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-3 h-3 rounded-full bg-primary"}),p.jsx("span",{className:"text-muted-foreground",children:"Research Partners"})]}),p.jsx("div",{className:"border-t border-border/50 my-1.5"}),p.jsx("div",{className:"font-medium text-foreground text-[10px] mb-1",children:"Live Activity"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-[#3b82f6]"}),p.jsx("span",{className:"text-muted-foreground text-[10px]",children:"Reads"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-[#22c55e]"}),p.jsx("span",{className:"text-muted-foreground text-[10px]",children:"Citations"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-[#f59e0b]"}),p.jsx("span",{className:"text-muted-foreground text-[10px]",children:"Downloads"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-[#8b5cf6]"}),p.jsx("span",{className:"text-muted-foreground text-[10px]",children:"Collaborations"})]})]}),p.jsxs(JCe,{camera:{position:[0,0,5],fov:45},children:[p.jsx("ambientLight",{intensity:.6}),p.jsx("directionalLight",{position:[5,3,5],intensity:1.2,color:"#ffffff"}),p.jsx("pointLight",{position:[-10,-10,-10],intensity:.3,color:"#3b82f6"}),p.jsx(ORe,{autoRotate:t}),p.jsx(mRe,{enableZoom:!0,enablePan:!1,minDistance:3,maxDistance:8,autoRotate:!1})]})]})}function Rd({title:t,value:e,change:n,changeType:r="positive",icon:i,delay:s=0,variant:a="default"}){const o={positive:"text-emerald",negative:"text-destructive",neutral:"text-muted-foreground"};return p.jsxs(at.div,{className:`stat-card ${a==="gold"?"glass-panel-gold":""}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:s},children:[p.jsxs("div",{className:"flex items-start justify-between mb-4",children:[p.jsx("div",{className:`p-2.5 rounded-lg ${a==="gold"?"bg-secondary/20 text-secondary":a==="primary"?"bg-primary/20 text-primary":"bg-muted text-muted-foreground"}`,children:p.jsx(i,{className:"w-5 h-5"})}),n&&p.jsxs("div",{className:`flex items-center gap-1 text-sm ${o[r]}`,children:[p.jsx(Ps,{className:"w-3 h-3"}),p.jsx("span",{className:"font-medium",children:n})]})]}),p.jsx("div",{className:"metric-value text-foreground mb-1",children:typeof e=="number"?e.toLocaleString():e}),p.jsx("div",{className:"metric-label",children:t})]})}function IRe(){const t=po.reduce((n,r)=>n+r.reads,0),e=po.reduce((n,r)=>n+r.downloads,0);return p.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[p.jsx(Rd,{title:"Global Impact Index",value:_s.globalImpactIndex,change:"+12.5%",changeType:"positive",icon:yu,delay:0,variant:"gold"}),p.jsx(Rd,{title:"Total Citations",value:_s.totalCitations,change:"+18.2%",changeType:"positive",icon:Oi,delay:.1,variant:"primary"}),p.jsx(Rd,{title:"Research Papers",value:_s.totalPapers,change:"+10.8%",changeType:"positive",icon:yo,delay:.2}),p.jsx(Rd,{title:"International Partners",value:_s.internationalCollaborations,change:"+23.4%",changeType:"positive",icon:pi,delay:.3}),p.jsx(Rd,{title:"Q1 Publications",value:_s.q1Publications,change:"+15.6%",changeType:"positive",icon:yu,delay:.4}),p.jsx(Rd,{title:"Global Reads",value:t,change:"+28.3%",changeType:"positive",icon:S9,delay:.5}),p.jsx(Rd,{title:"Downloads",value:e,change:"+21.7%",changeType:"positive",icon:Xd,delay:.6}),p.jsx(Rd,{title:"Active Countries",value:po.length,change:"+3",changeType:"positive",icon:xu,delay:.7})]})}var VC,U$;function ya(){if(U$)return VC;U$=1;var t=Array.isArray;return VC=t,VC}var HC,F$;function cZ(){if(F$)return HC;F$=1;var t=typeof V_=="object"&&V_&&V_.Object===Object&&V_;return HC=t,HC}var WC,B$;function dc(){if(B$)return WC;B$=1;var t=cZ(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return WC=n,WC}var GC,z$;function Uw(){if(z$)return GC;z$=1;var t=dc(),e=t.Symbol;return GC=e,GC}var qC,$$;function kRe(){if($$)return qC;$$=1;var t=Uw(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function s(a){var o=n.call(a,i),l=a[i];try{a[i]=void 0;var c=!0}catch{}var u=r.call(a);return c&&(o?a[i]=l:delete a[i]),u}return qC=s,qC}var KC,V$;function DRe(){if(V$)return KC;V$=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return KC=n,KC}var XC,H$;function Iu(){if(H$)return XC;H$=1;var t=Uw(),e=kRe(),n=DRe(),r="[object Null]",i="[object Undefined]",s=t?t.toStringTag:void 0;function a(o){return o==null?o===void 0?i:r:s&&s in Object(o)?e(o):n(o)}return XC=a,XC}var YC,W$;function ku(){if(W$)return YC;W$=1;function t(e){return e!=null&&typeof e=="object"}return YC=t,YC}var JC,G$;function vy(){if(G$)return JC;G$=1;var t=Iu(),e=ku(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return JC=r,JC}var QC,q$;function E3(){if(q$)return QC;q$=1;var t=ya(),e=vy(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,a){if(t(s))return!1;var o=typeof s;return o=="number"||o=="symbol"||o=="boolean"||s==null||e(s)?!0:r.test(s)||!n.test(s)||a!=null&&s in Object(a)}return QC=i,QC}var ZC,K$;function gf(){if(K$)return ZC;K$=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return ZC=t,ZC}var eR,X$;function T3(){if(X$)return eR;X$=1;var t=Iu(),e=gf(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function a(o){if(!e(o))return!1;var l=t(o);return l==r||l==i||l==n||l==s}return eR=a,eR}var tR,Y$;function jRe(){if(Y$)return tR;Y$=1;var t=dc(),e=t["__core-js_shared__"];return tR=e,tR}var nR,J$;function LRe(){if(J$)return nR;J$=1;var t=jRe(),e=(function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!e&&e in r}return nR=n,nR}var rR,Q$;function uZ(){if(Q$)return rR;Q$=1;var t=Function.prototype,e=t.toString;function n(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return rR=n,rR}var iR,Z$;function URe(){if(Z$)return iR;Z$=1;var t=T3(),e=LRe(),n=gf(),r=uZ(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,a=Function.prototype,o=Object.prototype,l=a.toString,c=o.hasOwnProperty,u=RegExp("^"+l.call(c).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(h){if(!n(h)||e(h))return!1;var m=t(h)?u:s;return m.test(r(h))}return iR=d,iR}var sR,eV;function FRe(){if(eV)return sR;eV=1;function t(e,n){return e?.[n]}return sR=t,sR}var aR,tV;function Dp(){if(tV)return aR;tV=1;var t=URe(),e=FRe();function n(r,i){var s=e(r,i);return t(s)?s:void 0}return aR=n,aR}var oR,nV;function SA(){if(nV)return oR;nV=1;var t=Dp(),e=t(Object,"create");return oR=e,oR}var lR,rV;function BRe(){if(rV)return lR;rV=1;var t=SA();function e(){this.__data__=t?t(null):{},this.size=0}return lR=e,lR}var cR,iV;function zRe(){if(iV)return cR;iV=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return cR=t,cR}var uR,sV;function $Re(){if(sV)return uR;sV=1;var t=SA(),e="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(s){var a=this.__data__;if(t){var o=a[s];return o===e?void 0:o}return r.call(a,s)?a[s]:void 0}return uR=i,uR}var dR,aV;function VRe(){if(aV)return dR;aV=1;var t=SA(),e=Object.prototype,n=e.hasOwnProperty;function r(i){var s=this.__data__;return t?s[i]!==void 0:n.call(s,i)}return dR=r,dR}var fR,oV;function HRe(){if(oV)return fR;oV=1;var t=SA(),e="__lodash_hash_undefined__";function n(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=t&&i===void 0?e:i,this}return fR=n,fR}var hR,lV;function WRe(){if(lV)return hR;lV=1;var t=BRe(),e=zRe(),n=$Re(),r=VRe(),i=HRe();function s(a){var o=-1,l=a==null?0:a.length;for(this.clear();++o<l;){var c=a[o];this.set(c[0],c[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,hR=s,hR}var pR,cV;function GRe(){if(cV)return pR;cV=1;function t(){this.__data__=[],this.size=0}return pR=t,pR}var mR,uV;function A3(){if(uV)return mR;uV=1;function t(e,n){return e===n||e!==e&&n!==n}return mR=t,mR}var gR,dV;function EA(){if(dV)return gR;dV=1;var t=A3();function e(n,r){for(var i=n.length;i--;)if(t(n[i][0],r))return i;return-1}return gR=e,gR}var vR,fV;function qRe(){if(fV)return vR;fV=1;var t=EA(),e=Array.prototype,n=e.splice;function r(i){var s=this.__data__,a=t(s,i);if(a<0)return!1;var o=s.length-1;return a==o?s.pop():n.call(s,a,1),--this.size,!0}return vR=r,vR}var yR,hV;function KRe(){if(hV)return yR;hV=1;var t=EA();function e(n){var r=this.__data__,i=t(r,n);return i<0?void 0:r[i][1]}return yR=e,yR}var xR,pV;function XRe(){if(pV)return xR;pV=1;var t=EA();function e(n){return t(this.__data__,n)>-1}return xR=e,xR}var bR,mV;function YRe(){if(mV)return bR;mV=1;var t=EA();function e(n,r){var i=this.__data__,s=t(i,n);return s<0?(++this.size,i.push([n,r])):i[s][1]=r,this}return bR=e,bR}var wR,gV;function TA(){if(gV)return wR;gV=1;var t=GRe(),e=qRe(),n=KRe(),r=XRe(),i=YRe();function s(a){var o=-1,l=a==null?0:a.length;for(this.clear();++o<l;){var c=a[o];this.set(c[0],c[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,wR=s,wR}var _R,vV;function M3(){if(vV)return _R;vV=1;var t=Dp(),e=dc(),n=t(e,"Map");return _R=n,_R}var SR,yV;function JRe(){if(yV)return SR;yV=1;var t=WRe(),e=TA(),n=M3();function r(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return SR=r,SR}var ER,xV;function QRe(){if(xV)return ER;xV=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return ER=t,ER}var TR,bV;function AA(){if(bV)return TR;bV=1;var t=QRe();function e(n,r){var i=n.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return TR=e,TR}var AR,wV;function ZRe(){if(wV)return AR;wV=1;var t=AA();function e(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}return AR=e,AR}var MR,_V;function e2e(){if(_V)return MR;_V=1;var t=AA();function e(n){return t(this,n).get(n)}return MR=e,MR}var PR,SV;function t2e(){if(SV)return PR;SV=1;var t=AA();function e(n){return t(this,n).has(n)}return PR=e,PR}var CR,EV;function n2e(){if(EV)return CR;EV=1;var t=AA();function e(n,r){var i=t(this,n),s=i.size;return i.set(n,r),this.size+=i.size==s?0:1,this}return CR=e,CR}var RR,TV;function P3(){if(TV)return RR;TV=1;var t=JRe(),e=ZRe(),n=e2e(),r=t2e(),i=n2e();function s(a){var o=-1,l=a==null?0:a.length;for(this.clear();++o<l;){var c=a[o];this.set(c[0],c[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,RR=s,RR}var OR,AV;function dZ(){if(AV)return OR;AV=1;var t=P3(),e="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var a=arguments,o=i?i.apply(this,a):a[0],l=s.cache;if(l.has(o))return l.get(o);var c=r.apply(this,a);return s.cache=l.set(o,c)||l,c};return s.cache=new(n.Cache||t),s}return n.Cache=t,OR=n,OR}var NR,MV;function r2e(){if(MV)return NR;MV=1;var t=dZ(),e=500;function n(r){var i=t(r,function(a){return s.size===e&&s.clear(),a}),s=i.cache;return i}return NR=n,NR}var IR,PV;function i2e(){if(PV)return IR;PV=1;var t=r2e(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(a,o,l,c){s.push(l?c.replace(n,"$1"):o||a)}),s});return IR=r,IR}var kR,CV;function C3(){if(CV)return kR;CV=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,s=Array(i);++r<i;)s[r]=n(e[r],r,e);return s}return kR=t,kR}var DR,RV;function s2e(){if(RV)return DR;RV=1;var t=Uw(),e=C3(),n=ya(),r=vy(),i=t?t.prototype:void 0,s=i?i.toString:void 0;function a(o){if(typeof o=="string")return o;if(n(o))return e(o,a)+"";if(r(o))return s?s.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}return DR=a,DR}var jR,OV;function fZ(){if(OV)return jR;OV=1;var t=s2e();function e(n){return n==null?"":t(n)}return jR=e,jR}var LR,NV;function hZ(){if(NV)return LR;NV=1;var t=ya(),e=E3(),n=i2e(),r=fZ();function i(s,a){return t(s)?s:e(s,a)?[s]:n(r(s))}return LR=i,LR}var UR,IV;function MA(){if(IV)return UR;IV=1;var t=vy();function e(n){if(typeof n=="string"||t(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return UR=e,UR}var FR,kV;function R3(){if(kV)return FR;kV=1;var t=hZ(),e=MA();function n(r,i){i=t(i,r);for(var s=0,a=i.length;r!=null&&s<a;)r=r[e(i[s++])];return s&&s==a?r:void 0}return FR=n,FR}var BR,DV;function pZ(){if(DV)return BR;DV=1;var t=R3();function e(n,r,i){var s=n==null?void 0:t(n,r);return s===void 0?i:s}return BR=e,BR}var a2e=pZ();const Wa=Ln(a2e);var zR,jV;function o2e(){if(jV)return zR;jV=1;function t(e){return e==null}return zR=t,zR}var l2e=o2e();const an=Ln(l2e);var $R,LV;function c2e(){if(LV)return $R;LV=1;var t=Iu(),e=ya(),n=ku(),r="[object String]";function i(s){return typeof s=="string"||!e(s)&&n(s)&&t(s)==r}return $R=i,$R}var u2e=c2e();const fp=Ln(u2e);var d2e=T3();const Ht=Ln(d2e);var f2e=gf();const yy=Ln(f2e);var VR={exports:{}},Vn={};var UV;function h2e(){if(UV)return Vn;UV=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen"),b;b=Symbol.for("react.module.reference");function x(v){if(typeof v=="object"&&v!==null){var _=v.$$typeof;switch(_){case t:switch(v=v.type,v){case n:case i:case r:case c:case u:return v;default:switch(v=v&&v.$$typeof,v){case o:case a:case l:case h:case d:case s:return v;default:return _}}case e:return _}}}return Vn.ContextConsumer=a,Vn.ContextProvider=s,Vn.Element=t,Vn.ForwardRef=l,Vn.Fragment=n,Vn.Lazy=h,Vn.Memo=d,Vn.Portal=e,Vn.Profiler=i,Vn.StrictMode=r,Vn.Suspense=c,Vn.SuspenseList=u,Vn.isAsyncMode=function(){return!1},Vn.isConcurrentMode=function(){return!1},Vn.isContextConsumer=function(v){return x(v)===a},Vn.isContextProvider=function(v){return x(v)===s},Vn.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===t},Vn.isForwardRef=function(v){return x(v)===l},Vn.isFragment=function(v){return x(v)===n},Vn.isLazy=function(v){return x(v)===h},Vn.isMemo=function(v){return x(v)===d},Vn.isPortal=function(v){return x(v)===e},Vn.isProfiler=function(v){return x(v)===i},Vn.isStrictMode=function(v){return x(v)===r},Vn.isSuspense=function(v){return x(v)===c},Vn.isSuspenseList=function(v){return x(v)===u},Vn.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===n||v===i||v===r||v===c||v===u||v===m||typeof v=="object"&&v!==null&&(v.$$typeof===h||v.$$typeof===d||v.$$typeof===s||v.$$typeof===a||v.$$typeof===l||v.$$typeof===b||v.getModuleId!==void 0)},Vn.typeOf=x,Vn}var FV;function p2e(){return FV||(FV=1,VR.exports=h2e()),VR.exports}var m2e=p2e(),HR,BV;function mZ(){if(BV)return HR;BV=1;var t=Iu(),e=ku(),n="[object Number]";function r(i){return typeof i=="number"||e(i)&&t(i)==n}return HR=r,HR}var WR,zV;function g2e(){if(zV)return WR;zV=1;var t=mZ();function e(n){return t(n)&&n!=+n}return WR=e,WR}var v2e=g2e();const xy=Ln(v2e);var y2e=mZ();const x2e=Ln(y2e);var qs=function(e){return e===0?0:e>0?1:-1},Gh=function(e){return fp(e)&&e.indexOf("%")===e.length-1},et=function(e){return x2e(e)&&!xy(e)},b2e=function(e){return an(e)},Ri=function(e){return et(e)||fp(e)},w2e=0,jp=function(e){var n=++w2e;return"".concat(e||"").concat(n)},Ks=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!et(e)&&!fp(e))return r;var s;if(Gh(e)){var a=e.indexOf("%");s=n*parseFloat(e.slice(0,a))/100}else s=+e;return xy(s)&&(s=r),i&&s>n&&(s=n),s},Ud=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},_2e=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},Ir=function(e,n){return et(e)&&et(n)?function(r){return e+r*(n-e)}:function(){return n}};function hE(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Wa(r,e))===n})}var S2e=function(e,n){return et(e)&&et(n)?e-n:fp(e)&&fp(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function ev(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function Ck(t){"@babel/helpers - typeof";return Ck=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ck(t)}var E2e=["viewBox","children"],T2e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],$V=["points","pathLength"],GR={svg:E2e,polygon:$V,polyline:$V},O3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],pE=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(M.isValidElement(e)&&(r=e.props),!yy(r))return null;var i={};return Object.keys(r).forEach(function(s){O3.includes(s)&&(i[s]=n||function(a){return r[s](r,a)})}),i},A2e=function(e,n,r){return function(i){return e(n,r,i),null}},hp=function(e,n,r){if(!yy(e)||Ck(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(s){var a=e[s];O3.includes(s)&&typeof a=="function"&&(i||(i={}),i[s]=A2e(a,n,r))}),i},M2e=["children"],P2e=["children"];function VV(t,e){if(t==null)return{};var n=C2e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function C2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Rk(t){"@babel/helpers - typeof";return Rk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rk(t)}var HV={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},gu=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},WV=null,qR=null,N3=function t(e){if(e===WV&&Array.isArray(qR))return qR;var n=[];return M.Children.forEach(e,function(r){an(r)||(m2e.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),qR=n,WV=e,n};function Ga(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return gu(i)}):r=[gu(e)],N3(t).forEach(function(i){var s=Wa(i,"type.displayName")||Wa(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}function Da(t,e){var n=Ga(t,e);return n&&n[0]}var GV=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!et(r)||r<=0||!et(i)||i<=0)},R2e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],O2e=function(e){return e&&e.type&&fp(e.type)&&R2e.indexOf(e.type)>=0},gZ=function(e){return e&&Rk(e)==="object"&&"clipDot"in e},N2e=function(e,n,r,i){var s,a=(s=GR?.[i])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!Ht(e)&&(i&&a.includes(n)||T2e.includes(n))||r&&O3.includes(n)},Rt=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(M.isValidElement(e)&&(i=e.props),!yy(i))return null;var s={};return Object.keys(i).forEach(function(a){var o;N2e((o=i)===null||o===void 0?void 0:o[a],a,n,r)&&(s[a]=i[a])}),s},Ok=function t(e,n){if(e===n)return!0;var r=M.Children.count(e);if(r!==M.Children.count(n))return!1;if(r===0)return!0;if(r===1)return qV(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var s=e[i],a=n[i];if(Array.isArray(s)||Array.isArray(a)){if(!t(s,a))return!1}else if(!qV(s,a))return!1}return!0},qV=function(e,n){if(an(e)&&an(n))return!0;if(!an(e)&&!an(n)){var r=e.props||{},i=r.children,s=VV(r,M2e),a=n.props||{},o=a.children,l=VV(a,P2e);return i&&o?ev(s,l)&&Ok(i,o):!i&&!o?ev(s,l):!1}return!1},KV=function(e,n){var r=[],i={};return N3(e).forEach(function(s,a){if(O2e(s))r.push(s);else if(s){var o=gu(s.type),l=n[o]||{},c=l.handler,u=l.once;if(c&&(!u||!i[o])){var d=c(s,o,a);r.push(d),i[o]=!0}}}),r},I2e=function(e){var n=e&&e.type;return n&&HV[n]?HV[n]:null},k2e=function(e,n){return N3(n).indexOf(e)},D2e=["children","width","height","viewBox","className","style","title","desc"];function Nk(){return Nk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nk.apply(this,arguments)}function j2e(t,e){if(t==null)return{};var n=L2e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function L2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ik(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,s=t.className,a=t.style,o=t.title,l=t.desc,c=j2e(t,D2e),u=i||{width:n,height:r,x:0,y:0},d=nn("recharts-surface",s);return ne.createElement("svg",Nk({},Rt(c,!0,"svg"),{className:d,width:n,height:r,style:a,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),ne.createElement("title",null,o),ne.createElement("desc",null,l),e)}var U2e=["children","className"];function kk(){return kk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kk.apply(this,arguments)}function F2e(t,e){if(t==null)return{};var n=B2e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function B2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var En=ne.forwardRef(function(t,e){var n=t.children,r=t.className,i=F2e(t,U2e),s=nn("recharts-layer",r);return ne.createElement("g",kk({className:s},Rt(i,!0),{ref:e}),n)}),vl=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]},KR,XV;function z2e(){if(XV)return KR;XV=1;function t(e,n,r){var i=-1,s=e.length;n<0&&(n=-n>s?0:s+n),r=r>s?s:r,r<0&&(r+=s),s=n>r?0:r-n>>>0,n>>>=0;for(var a=Array(s);++i<s;)a[i]=e[i+n];return a}return KR=t,KR}var XR,YV;function $2e(){if(YV)return XR;YV=1;var t=z2e();function e(n,r,i){var s=n.length;return i=i===void 0?s:i,!r&&i>=s?n:t(n,r,i)}return XR=e,XR}var YR,JV;function vZ(){if(JV)return YR;JV=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,s="\\ufe0e\\ufe0f",a="\\u200d",o=RegExp("["+a+t+i+s+"]");function l(c){return o.test(c)}return YR=l,YR}var JR,QV;function V2e(){if(QV)return JR;QV=1;function t(e){return e.split("")}return JR=t,JR}var QR,ZV;function H2e(){if(ZV)return QR;ZV=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,s="\\ufe0e\\ufe0f",a="["+t+"]",o="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",c="(?:"+o+"|"+l+")",u="[^"+t+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",b=c+"?",x="["+s+"]?",v="(?:"+m+"(?:"+[u,d,h].join("|")+")"+x+b+")*",_=x+b+v,E="(?:"+[u+o+"?",o,d,h,a].join("|")+")",T=RegExp(l+"(?="+l+")|"+E+_,"g");function A(P){return P.match(T)||[]}return QR=A,QR}var ZR,eH;function W2e(){if(eH)return ZR;eH=1;var t=V2e(),e=vZ(),n=H2e();function r(i){return e(i)?n(i):t(i)}return ZR=r,ZR}var e2,tH;function G2e(){if(tH)return e2;tH=1;var t=$2e(),e=vZ(),n=W2e(),r=fZ();function i(s){return function(a){a=r(a);var o=e(a)?n(a):void 0,l=o?o[0]:a.charAt(0),c=o?t(o,1).join(""):a.slice(1);return l[s]()+c}}return e2=i,e2}var t2,nH;function q2e(){if(nH)return t2;nH=1;var t=G2e(),e=t("toUpperCase");return t2=e,t2}var K2e=q2e();const PA=Ln(K2e);function hr(t){return function(){return t}}const yZ=Math.cos,mE=Math.sin,Ml=Math.sqrt,gE=Math.PI,CA=2*gE,Dk=Math.PI,jk=2*Dk,Nh=1e-6,X2e=jk-Nh;function xZ(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Y2e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return xZ;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class J2e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?xZ:Y2e(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,l=r-e,c=i-n,u=a-e,d=o-n,h=u*u+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>Nh)if(!(Math.abs(d*l-c*u)>Nh)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let m=r-a,b=i-o,x=l*l+c*c,v=m*m+b*b,_=Math.sqrt(x),E=Math.sqrt(h),T=s*Math.tan((Dk-Math.acos((x+h-v)/(2*_*E)))/2),A=T/E,P=T/_;Math.abs(A-1)>Nh&&this._append`L${e+A*u},${n+A*d}`,this._append`A${s},${s},0,0,${+(d*m>u*b)},${this._x1=e+P*l},${this._y1=n+P*c}`}}arc(e,n,r,i,s,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),c=e+o,u=n+l,d=1^a,h=a?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Nh||Math.abs(this._y1-u)>Nh)&&this._append`L${c},${u}`,r&&(h<0&&(h=h%jk+jk),h>X2e?this._append`A${r},${r},0,1,${d},${e-o},${n-l}A${r},${r},0,1,${d},${this._x1=c},${this._y1=u}`:h>Nh&&this._append`A${r},${r},0,${+(h>=Dk)},${d},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function I3(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new J2e(e)}function k3(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function bZ(t){this._context=t}bZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function RA(t){return new bZ(t)}function wZ(t){return t[0]}function _Z(t){return t[1]}function SZ(t,e){var n=hr(!0),r=null,i=RA,s=null,a=I3(o);t=typeof t=="function"?t:t===void 0?wZ:hr(t),e=typeof e=="function"?e:e===void 0?_Z:hr(e);function o(l){var c,u=(l=k3(l)).length,d,h=!1,m;for(r==null&&(s=i(m=a())),c=0;c<=u;++c)!(c<u&&n(d=l[c],c,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(d,c,l),+e(d,c,l));if(m)return s=null,m+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:hr(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:hr(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:hr(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),o):r},o}function a1(t,e,n){var r=null,i=hr(!0),s=null,a=RA,o=null,l=I3(c);t=typeof t=="function"?t:t===void 0?wZ:hr(+t),e=typeof e=="function"?e:hr(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?_Z:hr(+n);function c(d){var h,m,b,x=(d=k3(d)).length,v,_=!1,E,T=new Array(x),A=new Array(x);for(s==null&&(o=a(E=l())),h=0;h<=x;++h){if(!(h<x&&i(v=d[h],h,d))===_)if(_=!_)m=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),b=h-1;b>=m;--b)o.point(T[b],A[b]);o.lineEnd(),o.areaEnd()}_&&(T[h]=+t(v,h,d),A[h]=+e(v,h,d),o.point(r?+r(v,h,d):T[h],n?+n(v,h,d):A[h]))}if(E)return o=null,E+""||null}function u(){return SZ().defined(i).curve(a).context(s)}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:hr(+d),r=null,c):t},c.x0=function(d){return arguments.length?(t=typeof d=="function"?d:hr(+d),c):t},c.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:hr(+d),c):r},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:hr(+d),n=null,c):e},c.y0=function(d){return arguments.length?(e=typeof d=="function"?d:hr(+d),c):e},c.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:hr(+d),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(d){return arguments.length?(i=typeof d=="function"?d:hr(!!d),c):i},c.curve=function(d){return arguments.length?(a=d,s!=null&&(o=a(s)),c):a},c.context=function(d){return arguments.length?(d==null?s=o=null:o=a(s=d),c):s},c}class EZ{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Q2e(t){return new EZ(t,!0)}function Z2e(t){return new EZ(t,!1)}const D3={draw(t,e){const n=Ml(e/gE);t.moveTo(n,0),t.arc(0,0,n,0,CA)}},eOe={draw(t,e){const n=Ml(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},TZ=Ml(1/3),tOe=TZ*2,nOe={draw(t,e){const n=Ml(e/tOe),r=n*TZ;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},rOe={draw(t,e){const n=Ml(e),r=-n/2;t.rect(r,r,n,n)}},iOe=.8908130915292852,AZ=mE(gE/10)/mE(7*gE/10),sOe=mE(CA/10)*AZ,aOe=-yZ(CA/10)*AZ,oOe={draw(t,e){const n=Ml(e*iOe),r=sOe*n,i=aOe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const a=CA*s/5,o=yZ(a),l=mE(a);t.lineTo(l*n,-o*n),t.lineTo(o*r-l*i,l*r+o*i)}t.closePath()}},n2=Ml(3),lOe={draw(t,e){const n=-Ml(e/(n2*3));t.moveTo(0,n*2),t.lineTo(-n2*n,-n),t.lineTo(n2*n,-n),t.closePath()}},oo=-.5,lo=Ml(3)/2,Lk=1/Ml(12),cOe=(Lk/2+1)*3,uOe={draw(t,e){const n=Ml(e/cOe),r=n/2,i=n*Lk,s=r,a=n*Lk+n,o=-s,l=a;t.moveTo(r,i),t.lineTo(s,a),t.lineTo(o,l),t.lineTo(oo*r-lo*i,lo*r+oo*i),t.lineTo(oo*s-lo*a,lo*s+oo*a),t.lineTo(oo*o-lo*l,lo*o+oo*l),t.lineTo(oo*r+lo*i,oo*i-lo*r),t.lineTo(oo*s+lo*a,oo*a-lo*s),t.lineTo(oo*o+lo*l,oo*l-lo*o),t.closePath()}};function dOe(t,e){let n=null,r=I3(i);t=typeof t=="function"?t:hr(t||D3),e=typeof e=="function"?e:hr(e===void 0?64:+e);function i(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:hr(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:hr(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function vE(){}function yE(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function MZ(t){this._context=t}MZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:yE(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:yE(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function fOe(t){return new MZ(t)}function PZ(t){this._context=t}PZ.prototype={areaStart:vE,areaEnd:vE,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:yE(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function hOe(t){return new PZ(t)}function CZ(t){this._context=t}CZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:yE(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function pOe(t){return new CZ(t)}function RZ(t){this._context=t}RZ.prototype={areaStart:vE,areaEnd:vE,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function mOe(t){return new RZ(t)}function rH(t){return t<0?-1:1}function iH(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),o=(s*i+a*r)/(r+i);return(rH(s)+rH(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function sH(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function r2(t,e,n){var r=t._x0,i=t._y0,s=t._x1,a=t._y1,o=(s-r)/3;t._context.bezierCurveTo(r+o,i+o*e,s-o,a-o*n,s,a)}function xE(t){this._context=t}xE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:r2(this,this._t0,sH(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,r2(this,sH(this,n=iH(this,t,e)),n);break;default:r2(this,this._t0,n=iH(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function OZ(t){this._context=new NZ(t)}(OZ.prototype=Object.create(xE.prototype)).point=function(t,e){xE.prototype.point.call(this,e,t)};function NZ(t){this._context=t}NZ.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function gOe(t){return new xE(t)}function vOe(t){return new OZ(t)}function IZ(t){this._context=t}IZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=aH(t),i=aH(e),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function aH(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function yOe(t){return new IZ(t)}function OA(t,e){this._context=t,this._t=e}OA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function xOe(t){return new OA(t,.5)}function bOe(t){return new OA(t,0)}function wOe(t){return new OA(t,1)}function wv(t,e){if((a=t.length)>1)for(var n=1,r,i,s=t[e[0]],a,o=s.length;n<a;++n)for(i=s,s=t[e[n]],r=0;r<o;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Uk(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function _Oe(t,e){return t[e]}function SOe(t){const e=[];return e.key=t,e}function EOe(){var t=hr([]),e=Uk,n=wv,r=_Oe;function i(s){var a=Array.from(t.apply(this,arguments),SOe),o,l=a.length,c=-1,u;for(const d of s)for(o=0,++c;o<l;++o)(a[o][c]=[0,+r(d,a[o].key,c,s)]).data=d;for(o=0,u=k3(e(a));o<l;++o)a[u[o]].index=o;return n(a,u),a}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:hr(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:hr(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?Uk:typeof s=="function"?s:hr(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??wv,i):n},i}function TOe(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,a;i<s;++i){for(a=n=0;n<r;++n)a+=t[n][i][1]||0;if(a)for(n=0;n<r;++n)t[n][i][1]/=a}wv(t,e)}}function AOe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var a=0,o=0;a<i;++a)o+=t[a][n][1]||0;r[n][1]+=r[n][0]=-o/2}wv(t,e)}}function MOe(t,e){if(!(!((a=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,a;r<s;++r){for(var o=0,l=0,c=0;o<a;++o){for(var u=t[e[o]],d=u[r][1]||0,h=u[r-1][1]||0,m=(d-h)/2,b=0;b<o;++b){var x=t[e[b]],v=x[r][1]||0,_=x[r-1][1]||0;m+=v-_}l+=d,c+=m*d}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,wv(t,e)}}function Sb(t){"@babel/helpers - typeof";return Sb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sb(t)}var POe=["type","size","sizeType"];function Fk(){return Fk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fk.apply(this,arguments)}function oH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oH(Object(n),!0).forEach(function(r){COe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function COe(t,e,n){return e=ROe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ROe(t){var e=OOe(t,"string");return Sb(e)=="symbol"?e:e+""}function OOe(t,e){if(Sb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function NOe(t,e){if(t==null)return{};var n=IOe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function IOe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var kZ={symbolCircle:D3,symbolCross:eOe,symbolDiamond:nOe,symbolSquare:rOe,symbolStar:oOe,symbolTriangle:lOe,symbolWye:uOe},kOe=Math.PI/180,DOe=function(e){var n="symbol".concat(PA(e));return kZ[n]||D3},jOe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*kOe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},LOe=function(e,n){kZ["symbol".concat(PA(e))]=n},j3=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,s=i===void 0?64:i,a=e.sizeType,o=a===void 0?"area":a,l=NOe(e,POe),c=lH(lH({},l),{},{type:r,size:s,sizeType:o}),u=function(){var v=DOe(r),_=dOe().type(v).size(jOe(s,o,r));return _()},d=c.className,h=c.cx,m=c.cy,b=Rt(c,!0);return h===+h&&m===+m&&s===+s?ne.createElement("path",Fk({},b,{className:nn("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(m,")"),d:u()})):null};j3.registerSymbol=LOe;function _v(t){"@babel/helpers - typeof";return _v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_v(t)}function Bk(){return Bk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bk.apply(this,arguments)}function cH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function UOe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cH(Object(n),!0).forEach(function(r){Eb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function FOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BOe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jZ(r.key),r)}}function zOe(t,e,n){return e&&BOe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $Oe(t,e,n){return e=bE(e),VOe(t,DZ()?Reflect.construct(e,n||[],bE(t).constructor):e.apply(t,n))}function VOe(t,e){if(e&&(_v(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HOe(t)}function HOe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DZ=function(){return!!t})()}function bE(t){return bE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bE(t)}function WOe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zk(t,e)}function zk(t,e){return zk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},zk(t,e)}function Eb(t,e,n){return e=jZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jZ(t){var e=GOe(t,"string");return _v(e)=="symbol"?e:e+""}function GOe(t,e){if(_v(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_v(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var co=32,L3=(function(t){function e(){return FOe(this,e),$Oe(this,e,arguments)}return WOe(e,t),zOe(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,s=co/2,a=co/6,o=co/3,l=r.inactive?i:r.color;if(r.type==="plainline")return ne.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:s,x2:co,y2:s,className:"recharts-legend-icon"});if(r.type==="line")return ne.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(s,"h").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*o,",").concat(s,`
            H`).concat(co,"M").concat(2*o,",").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(o,",").concat(s),className:"recharts-legend-icon"});if(r.type==="rect")return ne.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(co/8,"h").concat(co,"v").concat(co*3/4,"h").concat(-co,"z"),className:"recharts-legend-icon"});if(ne.isValidElement(r.legendIcon)){var c=UOe({},r);return delete c.legendIcon,ne.cloneElement(r.legendIcon,c)}return ne.createElement(j3,{fill:l,cx:s,cy:s,size:co,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,s=i.payload,a=i.iconSize,o=i.layout,l=i.formatter,c=i.inactiveColor,u={x:0,y:0,width:co,height:co},d={display:o==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(m,b){var x=m.formatter||l,v=nn(Eb(Eb({"recharts-legend-item":!0},"legend-item-".concat(b),!0),"inactive",m.inactive));if(m.type==="none")return null;var _=Ht(m.value)?null:m.value;vl(!Ht(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var E=m.inactive?c:m.color;return ne.createElement("li",Bk({className:v,style:d,key:"legend-item-".concat(b)},hp(r.props,m,b)),ne.createElement(Ik,{width:a,height:a,viewBox:u,style:h},r.renderIcon(m)),ne.createElement("span",{className:"recharts-legend-item-text",style:{color:E}},x?x(_,m,b):_))})}},{key:"render",value:function(){var r=this.props,i=r.payload,s=r.layout,a=r.align;if(!i||!i.length)return null;var o={padding:0,margin:0,textAlign:s==="horizontal"?a:"left"};return ne.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])})(M.PureComponent);Eb(L3,"displayName","Legend");Eb(L3,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var i2,uH;function qOe(){if(uH)return i2;uH=1;var t=TA();function e(){this.__data__=new t,this.size=0}return i2=e,i2}var s2,dH;function KOe(){if(dH)return s2;dH=1;function t(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}return s2=t,s2}var a2,fH;function XOe(){if(fH)return a2;fH=1;function t(e){return this.__data__.get(e)}return a2=t,a2}var o2,hH;function YOe(){if(hH)return o2;hH=1;function t(e){return this.__data__.has(e)}return o2=t,o2}var l2,pH;function JOe(){if(pH)return l2;pH=1;var t=TA(),e=M3(),n=P3(),r=200;function i(s,a){var o=this.__data__;if(o instanceof t){var l=o.__data__;if(!e||l.length<r-1)return l.push([s,a]),this.size=++o.size,this;o=this.__data__=new n(l)}return o.set(s,a),this.size=o.size,this}return l2=i,l2}var c2,mH;function LZ(){if(mH)return c2;mH=1;var t=TA(),e=qOe(),n=KOe(),r=XOe(),i=YOe(),s=JOe();function a(o){var l=this.__data__=new t(o);this.size=l.size}return a.prototype.clear=e,a.prototype.delete=n,a.prototype.get=r,a.prototype.has=i,a.prototype.set=s,c2=a,c2}var u2,gH;function QOe(){if(gH)return u2;gH=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return u2=e,u2}var d2,vH;function ZOe(){if(vH)return d2;vH=1;function t(e){return this.__data__.has(e)}return d2=t,d2}var f2,yH;function UZ(){if(yH)return f2;yH=1;var t=P3(),e=QOe(),n=ZOe();function r(i){var s=-1,a=i==null?0:i.length;for(this.__data__=new t;++s<a;)this.add(i[s])}return r.prototype.add=r.prototype.push=e,r.prototype.has=n,f2=r,f2}var h2,xH;function FZ(){if(xH)return h2;xH=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}return h2=t,h2}var p2,bH;function BZ(){if(bH)return p2;bH=1;function t(e,n){return e.has(n)}return p2=t,p2}var m2,wH;function zZ(){if(wH)return m2;wH=1;var t=UZ(),e=FZ(),n=BZ(),r=1,i=2;function s(a,o,l,c,u,d){var h=l&r,m=a.length,b=o.length;if(m!=b&&!(h&&b>m))return!1;var x=d.get(a),v=d.get(o);if(x&&v)return x==o&&v==a;var _=-1,E=!0,T=l&i?new t:void 0;for(d.set(a,o),d.set(o,a);++_<m;){var A=a[_],P=o[_];if(c)var R=h?c(P,A,_,o,a,d):c(A,P,_,a,o,d);if(R!==void 0){if(R)continue;E=!1;break}if(T){if(!e(o,function(N,L){if(!n(T,L)&&(A===N||u(A,N,l,c,d)))return T.push(L)})){E=!1;break}}else if(!(A===P||u(A,P,l,c,d))){E=!1;break}}return d.delete(a),d.delete(o),E}return m2=s,m2}var g2,_H;function eNe(){if(_H)return g2;_H=1;var t=dc(),e=t.Uint8Array;return g2=e,g2}var v2,SH;function tNe(){if(SH)return v2;SH=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i,s){r[++n]=[s,i]}),r}return v2=t,v2}var y2,EH;function U3(){if(EH)return y2;EH=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i){r[++n]=i}),r}return y2=t,y2}var x2,TH;function nNe(){if(TH)return x2;TH=1;var t=Uw(),e=eNe(),n=A3(),r=zZ(),i=tNe(),s=U3(),a=1,o=2,l="[object Boolean]",c="[object Date]",u="[object Error]",d="[object Map]",h="[object Number]",m="[object RegExp]",b="[object Set]",x="[object String]",v="[object Symbol]",_="[object ArrayBuffer]",E="[object DataView]",T=t?t.prototype:void 0,A=T?T.valueOf:void 0;function P(R,N,L,I,j,B,H){switch(L){case E:if(R.byteLength!=N.byteLength||R.byteOffset!=N.byteOffset)return!1;R=R.buffer,N=N.buffer;case _:return!(R.byteLength!=N.byteLength||!B(new e(R),new e(N)));case l:case c:case h:return n(+R,+N);case u:return R.name==N.name&&R.message==N.message;case m:case x:return R==N+"";case d:var J=i;case b:var G=I&a;if(J||(J=s),R.size!=N.size&&!G)return!1;var W=H.get(R);if(W)return W==N;I|=o,H.set(R,N);var K=r(J(R),J(N),I,j,B,H);return H.delete(R),K;case v:if(A)return A.call(R)==A.call(N)}return!1}return x2=P,x2}var b2,AH;function $Z(){if(AH)return b2;AH=1;function t(e,n){for(var r=-1,i=n.length,s=e.length;++r<i;)e[s+r]=n[r];return e}return b2=t,b2}var w2,MH;function rNe(){if(MH)return w2;MH=1;var t=$Z(),e=ya();function n(r,i,s){var a=i(r);return e(r)?a:t(a,s(r))}return w2=n,w2}var _2,PH;function iNe(){if(PH)return _2;PH=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,s=0,a=[];++r<i;){var o=e[r];n(o,r,e)&&(a[s++]=o)}return a}return _2=t,_2}var S2,CH;function sNe(){if(CH)return S2;CH=1;function t(){return[]}return S2=t,S2}var E2,RH;function aNe(){if(RH)return E2;RH=1;var t=iNe(),e=sNe(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(a){return a==null?[]:(a=Object(a),t(i(a),function(o){return r.call(a,o)}))}:e;return E2=s,E2}var T2,OH;function oNe(){if(OH)return T2;OH=1;function t(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}return T2=t,T2}var A2,NH;function lNe(){if(NH)return A2;NH=1;var t=Iu(),e=ku(),n="[object Arguments]";function r(i){return e(i)&&t(i)==n}return A2=r,A2}var M2,IH;function F3(){if(IH)return M2;IH=1;var t=lNe(),e=ku(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,s=t((function(){return arguments})())?t:function(a){return e(a)&&r.call(a,"callee")&&!i.call(a,"callee")};return M2=s,M2}var ax={exports:{}},P2,kH;function cNe(){if(kH)return P2;kH=1;function t(){return!1}return P2=t,P2}ax.exports;var DH;function VZ(){return DH||(DH=1,(function(t,e){var n=dc(),r=cNe(),i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===i,o=a?n.Buffer:void 0,l=o?o.isBuffer:void 0,c=l||r;t.exports=c})(ax,ax.exports)),ax.exports}var C2,jH;function B3(){if(jH)return C2;jH=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var s=typeof r;return i=i??t,!!i&&(s=="number"||s!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return C2=n,C2}var R2,LH;function z3(){if(LH)return R2;LH=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return R2=e,R2}var O2,UH;function uNe(){if(UH)return O2;UH=1;var t=Iu(),e=z3(),n=ku(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",a="[object Date]",o="[object Error]",l="[object Function]",c="[object Map]",u="[object Number]",d="[object Object]",h="[object RegExp]",m="[object Set]",b="[object String]",x="[object WeakMap]",v="[object ArrayBuffer]",_="[object DataView]",E="[object Float32Array]",T="[object Float64Array]",A="[object Int8Array]",P="[object Int16Array]",R="[object Int32Array]",N="[object Uint8Array]",L="[object Uint8ClampedArray]",I="[object Uint16Array]",j="[object Uint32Array]",B={};B[E]=B[T]=B[A]=B[P]=B[R]=B[N]=B[L]=B[I]=B[j]=!0,B[r]=B[i]=B[v]=B[s]=B[_]=B[a]=B[o]=B[l]=B[c]=B[u]=B[d]=B[h]=B[m]=B[b]=B[x]=!1;function H(J){return n(J)&&e(J.length)&&!!B[t(J)]}return O2=H,O2}var N2,FH;function HZ(){if(FH)return N2;FH=1;function t(e){return function(n){return e(n)}}return N2=t,N2}var ox={exports:{}};ox.exports;var BH;function dNe(){return BH||(BH=1,(function(t,e){var n=cZ(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,a=s&&n.process,o=(function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}})();t.exports=o})(ox,ox.exports)),ox.exports}var I2,zH;function WZ(){if(zH)return I2;zH=1;var t=uNe(),e=HZ(),n=dNe(),r=n&&n.isTypedArray,i=r?e(r):t;return I2=i,I2}var k2,$H;function fNe(){if($H)return k2;$H=1;var t=oNe(),e=F3(),n=ya(),r=VZ(),i=B3(),s=WZ(),a=Object.prototype,o=a.hasOwnProperty;function l(c,u){var d=n(c),h=!d&&e(c),m=!d&&!h&&r(c),b=!d&&!h&&!m&&s(c),x=d||h||m||b,v=x?t(c.length,String):[],_=v.length;for(var E in c)(u||o.call(c,E))&&!(x&&(E=="length"||m&&(E=="offset"||E=="parent")||b&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||i(E,_)))&&v.push(E);return v}return k2=l,k2}var D2,VH;function hNe(){if(VH)return D2;VH=1;var t=Object.prototype;function e(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||t;return n===i}return D2=e,D2}var j2,HH;function GZ(){if(HH)return j2;HH=1;function t(e,n){return function(r){return e(n(r))}}return j2=t,j2}var L2,WH;function pNe(){if(WH)return L2;WH=1;var t=GZ(),e=t(Object.keys,Object);return L2=e,L2}var U2,GH;function mNe(){if(GH)return U2;GH=1;var t=hNe(),e=pNe(),n=Object.prototype,r=n.hasOwnProperty;function i(s){if(!t(s))return e(s);var a=[];for(var o in Object(s))r.call(s,o)&&o!="constructor"&&a.push(o);return a}return U2=i,U2}var F2,qH;function Fw(){if(qH)return F2;qH=1;var t=T3(),e=z3();function n(r){return r!=null&&e(r.length)&&!t(r)}return F2=n,F2}var B2,KH;function NA(){if(KH)return B2;KH=1;var t=fNe(),e=mNe(),n=Fw();function r(i){return n(i)?t(i):e(i)}return B2=r,B2}var z2,XH;function gNe(){if(XH)return z2;XH=1;var t=rNe(),e=aNe(),n=NA();function r(i){return t(i,n,e)}return z2=r,z2}var $2,YH;function vNe(){if(YH)return $2;YH=1;var t=gNe(),e=1,n=Object.prototype,r=n.hasOwnProperty;function i(s,a,o,l,c,u){var d=o&e,h=t(s),m=h.length,b=t(a),x=b.length;if(m!=x&&!d)return!1;for(var v=m;v--;){var _=h[v];if(!(d?_ in a:r.call(a,_)))return!1}var E=u.get(s),T=u.get(a);if(E&&T)return E==a&&T==s;var A=!0;u.set(s,a),u.set(a,s);for(var P=d;++v<m;){_=h[v];var R=s[_],N=a[_];if(l)var L=d?l(N,R,_,a,s,u):l(R,N,_,s,a,u);if(!(L===void 0?R===N||c(R,N,o,l,u):L)){A=!1;break}P||(P=_=="constructor")}if(A&&!P){var I=s.constructor,j=a.constructor;I!=j&&"constructor"in s&&"constructor"in a&&!(typeof I=="function"&&I instanceof I&&typeof j=="function"&&j instanceof j)&&(A=!1)}return u.delete(s),u.delete(a),A}return $2=i,$2}var V2,JH;function yNe(){if(JH)return V2;JH=1;var t=Dp(),e=dc(),n=t(e,"DataView");return V2=n,V2}var H2,QH;function xNe(){if(QH)return H2;QH=1;var t=Dp(),e=dc(),n=t(e,"Promise");return H2=n,H2}var W2,ZH;function qZ(){if(ZH)return W2;ZH=1;var t=Dp(),e=dc(),n=t(e,"Set");return W2=n,W2}var G2,eW;function bNe(){if(eW)return G2;eW=1;var t=Dp(),e=dc(),n=t(e,"WeakMap");return G2=n,G2}var q2,tW;function wNe(){if(tW)return q2;tW=1;var t=yNe(),e=M3(),n=xNe(),r=qZ(),i=bNe(),s=Iu(),a=uZ(),o="[object Map]",l="[object Object]",c="[object Promise]",u="[object Set]",d="[object WeakMap]",h="[object DataView]",m=a(t),b=a(e),x=a(n),v=a(r),_=a(i),E=s;return(t&&E(new t(new ArrayBuffer(1)))!=h||e&&E(new e)!=o||n&&E(n.resolve())!=c||r&&E(new r)!=u||i&&E(new i)!=d)&&(E=function(T){var A=s(T),P=A==l?T.constructor:void 0,R=P?a(P):"";if(R)switch(R){case m:return h;case b:return o;case x:return c;case v:return u;case _:return d}return A}),q2=E,q2}var K2,nW;function _Ne(){if(nW)return K2;nW=1;var t=LZ(),e=zZ(),n=nNe(),r=vNe(),i=wNe(),s=ya(),a=VZ(),o=WZ(),l=1,c="[object Arguments]",u="[object Array]",d="[object Object]",h=Object.prototype,m=h.hasOwnProperty;function b(x,v,_,E,T,A){var P=s(x),R=s(v),N=P?u:i(x),L=R?u:i(v);N=N==c?d:N,L=L==c?d:L;var I=N==d,j=L==d,B=N==L;if(B&&a(x)){if(!a(v))return!1;P=!0,I=!1}if(B&&!I)return A||(A=new t),P||o(x)?e(x,v,_,E,T,A):n(x,v,N,_,E,T,A);if(!(_&l)){var H=I&&m.call(x,"__wrapped__"),J=j&&m.call(v,"__wrapped__");if(H||J){var G=H?x.value():x,W=J?v.value():v;return A||(A=new t),T(G,W,_,E,A)}}return B?(A||(A=new t),r(x,v,_,E,T,A)):!1}return K2=b,K2}var X2,rW;function $3(){if(rW)return X2;rW=1;var t=_Ne(),e=ku();function n(r,i,s,a,o){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:t(r,i,s,a,n,o)}return X2=n,X2}var Y2,iW;function SNe(){if(iW)return Y2;iW=1;var t=LZ(),e=$3(),n=1,r=2;function i(s,a,o,l){var c=o.length,u=c,d=!l;if(s==null)return!u;for(s=Object(s);c--;){var h=o[c];if(d&&h[2]?h[1]!==s[h[0]]:!(h[0]in s))return!1}for(;++c<u;){h=o[c];var m=h[0],b=s[m],x=h[1];if(d&&h[2]){if(b===void 0&&!(m in s))return!1}else{var v=new t;if(l)var _=l(b,x,m,s,a,v);if(!(_===void 0?e(x,b,n|r,l,v):_))return!1}}return!0}return Y2=i,Y2}var J2,sW;function KZ(){if(sW)return J2;sW=1;var t=gf();function e(n){return n===n&&!t(n)}return J2=e,J2}var Q2,aW;function ENe(){if(aW)return Q2;aW=1;var t=KZ(),e=NA();function n(r){for(var i=e(r),s=i.length;s--;){var a=i[s],o=r[a];i[s]=[a,o,t(o)]}return i}return Q2=n,Q2}var Z2,oW;function XZ(){if(oW)return Z2;oW=1;function t(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}return Z2=t,Z2}var eO,lW;function TNe(){if(lW)return eO;lW=1;var t=SNe(),e=ENe(),n=XZ();function r(i){var s=e(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(a){return a===i||t(a,i,s)}}return eO=r,eO}var tO,cW;function ANe(){if(cW)return tO;cW=1;function t(e,n){return e!=null&&n in Object(e)}return tO=t,tO}var nO,uW;function MNe(){if(uW)return nO;uW=1;var t=hZ(),e=F3(),n=ya(),r=B3(),i=z3(),s=MA();function a(o,l,c){l=t(l,o);for(var u=-1,d=l.length,h=!1;++u<d;){var m=s(l[u]);if(!(h=o!=null&&c(o,m)))break;o=o[m]}return h||++u!=d?h:(d=o==null?0:o.length,!!d&&i(d)&&r(m,d)&&(n(o)||e(o)))}return nO=a,nO}var rO,dW;function PNe(){if(dW)return rO;dW=1;var t=ANe(),e=MNe();function n(r,i){return r!=null&&e(r,i,t)}return rO=n,rO}var iO,fW;function CNe(){if(fW)return iO;fW=1;var t=$3(),e=pZ(),n=PNe(),r=E3(),i=KZ(),s=XZ(),a=MA(),o=1,l=2;function c(u,d){return r(u)&&i(d)?s(a(u),d):function(h){var m=e(h,u);return m===void 0&&m===d?n(h,u):t(d,m,o|l)}}return iO=c,iO}var sO,hW;function by(){if(hW)return sO;hW=1;function t(e){return e}return sO=t,sO}var aO,pW;function RNe(){if(pW)return aO;pW=1;function t(e){return function(n){return n?.[e]}}return aO=t,aO}var oO,mW;function ONe(){if(mW)return oO;mW=1;var t=R3();function e(n){return function(r){return t(r,n)}}return oO=e,oO}var lO,gW;function NNe(){if(gW)return lO;gW=1;var t=RNe(),e=ONe(),n=E3(),r=MA();function i(s){return n(s)?t(r(s)):e(s)}return lO=i,lO}var cO,vW;function fc(){if(vW)return cO;vW=1;var t=TNe(),e=CNe(),n=by(),r=ya(),i=NNe();function s(a){return typeof a=="function"?a:a==null?n:typeof a=="object"?r(a)?e(a[0],a[1]):t(a):i(a)}return cO=s,cO}var uO,yW;function YZ(){if(yW)return uO;yW=1;function t(e,n,r,i){for(var s=e.length,a=r+(i?1:-1);i?a--:++a<s;)if(n(e[a],a,e))return a;return-1}return uO=t,uO}var dO,xW;function INe(){if(xW)return dO;xW=1;function t(e){return e!==e}return dO=t,dO}var fO,bW;function kNe(){if(bW)return fO;bW=1;function t(e,n,r){for(var i=r-1,s=e.length;++i<s;)if(e[i]===n)return i;return-1}return fO=t,fO}var hO,wW;function DNe(){if(wW)return hO;wW=1;var t=YZ(),e=INe(),n=kNe();function r(i,s,a){return s===s?n(i,s,a):t(i,e,a)}return hO=r,hO}var pO,_W;function jNe(){if(_W)return pO;_W=1;var t=DNe();function e(n,r){var i=n==null?0:n.length;return!!i&&t(n,r,0)>-1}return pO=e,pO}var mO,SW;function LNe(){if(SW)return mO;SW=1;function t(e,n,r){for(var i=-1,s=e==null?0:e.length;++i<s;)if(r(n,e[i]))return!0;return!1}return mO=t,mO}var gO,EW;function UNe(){if(EW)return gO;EW=1;function t(){}return gO=t,gO}var vO,TW;function FNe(){if(TW)return vO;TW=1;var t=qZ(),e=UNe(),n=U3(),r=1/0,i=t&&1/n(new t([,-0]))[1]==r?function(s){return new t(s)}:e;return vO=i,vO}var yO,AW;function BNe(){if(AW)return yO;AW=1;var t=UZ(),e=jNe(),n=LNe(),r=BZ(),i=FNe(),s=U3(),a=200;function o(l,c,u){var d=-1,h=e,m=l.length,b=!0,x=[],v=x;if(u)b=!1,h=n;else if(m>=a){var _=c?null:i(l);if(_)return s(_);b=!1,h=r,v=new t}else v=c?[]:x;e:for(;++d<m;){var E=l[d],T=c?c(E):E;if(E=u||E!==0?E:0,b&&T===T){for(var A=v.length;A--;)if(v[A]===T)continue e;c&&v.push(T),x.push(E)}else h(v,T,u)||(v!==x&&v.push(T),x.push(E))}return x}return yO=o,yO}var xO,MW;function zNe(){if(MW)return xO;MW=1;var t=fc(),e=BNe();function n(r,i){return r&&r.length?e(r,t(i,2)):[]}return xO=n,xO}var $Ne=zNe();const PW=Ln($Ne);function JZ(t,e,n){return e===!0?PW(t,n):Ht(e)?PW(t,e):t}function Sv(t){"@babel/helpers - typeof";return Sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sv(t)}var VNe=["ref"];function CW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CW(Object(n),!0).forEach(function(r){IA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RW(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ZZ(r.key),r)}}function WNe(t,e,n){return e&&RW(t.prototype,e),n&&RW(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function GNe(t,e,n){return e=wE(e),qNe(t,QZ()?Reflect.construct(e,n||[],wE(t).constructor):e.apply(t,n))}function qNe(t,e){if(e&&(Sv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KNe(t)}function KNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function QZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QZ=function(){return!!t})()}function wE(t){return wE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wE(t)}function XNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$k(t,e)}function $k(t,e){return $k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},$k(t,e)}function IA(t,e,n){return e=ZZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZZ(t){var e=YNe(t,"string");return Sv(e)=="symbol"?e:e+""}function YNe(t,e){if(Sv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function JNe(t,e){if(t==null)return{};var n=QNe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function QNe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ZNe(t){return t.value}function eIe(t,e){if(ne.isValidElement(t))return ne.cloneElement(t,e);if(typeof t=="function")return ne.createElement(t,e);e.ref;var n=JNe(e,VNe);return ne.createElement(L3,n)}var OW=1,tv=(function(t){function e(){var n;HNe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=GNe(this,e,[].concat(i)),IA(n,"lastBoundingBox",{width:-1,height:-1}),n}return XNe(e,t),WNe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>OW||Math.abs(i.height-this.lastBoundingBox.height)>OW)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?eu({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,s=i.layout,a=i.align,o=i.verticalAlign,l=i.margin,c=i.chartWidth,u=i.chartHeight,d,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(a==="center"&&s==="vertical"){var m=this.getBBoxSnapshot();d={left:((c||0)-m.width)/2}}else d=a==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(o==="middle"){var b=this.getBBoxSnapshot();h={top:((u||0)-b.height)/2}}else h=o==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return eu(eu({},d),h)}},{key:"render",value:function(){var r=this,i=this.props,s=i.content,a=i.width,o=i.height,l=i.wrapperStyle,c=i.payloadUniqBy,u=i.payload,d=eu(eu({position:"absolute",width:a||"auto",height:o||"auto"},this.getDefaultPosition(l)),l);return ne.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(m){r.wrapperNode=m}},eIe(s,eu(eu({},this.props),{},{payload:JZ(u,c,ZNe)})))}}],[{key:"getWithHeight",value:function(r,i){var s=eu(eu({},this.defaultProps),r.props),a=s.layout;return a==="vertical"&&et(r.props.height)?{height:r.props.height}:a==="horizontal"?{width:r.props.width||i}:null}}])})(M.PureComponent);IA(tv,"displayName","Legend");IA(tv,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var bO,NW;function tIe(){if(NW)return bO;NW=1;var t=Uw(),e=F3(),n=ya(),r=t?t.isConcatSpreadable:void 0;function i(s){return n(s)||e(s)||!!(r&&s&&s[r])}return bO=i,bO}var wO,IW;function eee(){if(IW)return wO;IW=1;var t=$Z(),e=tIe();function n(r,i,s,a,o){var l=-1,c=r.length;for(s||(s=e),o||(o=[]);++l<c;){var u=r[l];i>0&&s(u)?i>1?n(u,i-1,s,a,o):t(o,u):a||(o[o.length]=u)}return o}return wO=n,wO}var _O,kW;function nIe(){if(kW)return _O;kW=1;function t(e){return function(n,r,i){for(var s=-1,a=Object(n),o=i(n),l=o.length;l--;){var c=o[e?l:++s];if(r(a[c],c,a)===!1)break}return n}}return _O=t,_O}var SO,DW;function rIe(){if(DW)return SO;DW=1;var t=nIe(),e=t();return SO=e,SO}var EO,jW;function tee(){if(jW)return EO;jW=1;var t=rIe(),e=NA();function n(r,i){return r&&t(r,i,e)}return EO=n,EO}var TO,LW;function iIe(){if(LW)return TO;LW=1;var t=Fw();function e(n,r){return function(i,s){if(i==null)return i;if(!t(i))return n(i,s);for(var a=i.length,o=r?a:-1,l=Object(i);(r?o--:++o<a)&&s(l[o],o,l)!==!1;);return i}}return TO=e,TO}var AO,UW;function V3(){if(UW)return AO;UW=1;var t=tee(),e=iIe(),n=e(t);return AO=n,AO}var MO,FW;function nee(){if(FW)return MO;FW=1;var t=V3(),e=Fw();function n(r,i){var s=-1,a=e(r)?Array(r.length):[];return t(r,function(o,l,c){a[++s]=i(o,l,c)}),a}return MO=n,MO}var PO,BW;function sIe(){if(BW)return PO;BW=1;function t(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}return PO=t,PO}var CO,zW;function aIe(){if(zW)return CO;zW=1;var t=vy();function e(n,r){if(n!==r){var i=n!==void 0,s=n===null,a=n===n,o=t(n),l=r!==void 0,c=r===null,u=r===r,d=t(r);if(!c&&!d&&!o&&n>r||o&&l&&u&&!c&&!d||s&&l&&u||!i&&u||!a)return 1;if(!s&&!o&&!d&&n<r||d&&i&&a&&!s&&!o||c&&i&&a||!l&&a||!u)return-1}return 0}return CO=e,CO}var RO,$W;function oIe(){if($W)return RO;$W=1;var t=aIe();function e(n,r,i){for(var s=-1,a=n.criteria,o=r.criteria,l=a.length,c=i.length;++s<l;){var u=t(a[s],o[s]);if(u){if(s>=c)return u;var d=i[s];return u*(d=="desc"?-1:1)}}return n.index-r.index}return RO=e,RO}var OO,VW;function lIe(){if(VW)return OO;VW=1;var t=C3(),e=R3(),n=fc(),r=nee(),i=sIe(),s=HZ(),a=oIe(),o=by(),l=ya();function c(u,d,h){d.length?d=t(d,function(x){return l(x)?function(v){return e(v,x.length===1?x[0]:x)}:x}):d=[o];var m=-1;d=t(d,s(n));var b=r(u,function(x,v,_){var E=t(d,function(T){return T(x)});return{criteria:E,index:++m,value:x}});return i(b,function(x,v){return a(x,v,h)})}return OO=c,OO}var NO,HW;function cIe(){if(HW)return NO;HW=1;function t(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}return NO=t,NO}var IO,WW;function uIe(){if(WW)return IO;WW=1;var t=cIe(),e=Math.max;function n(r,i,s){return i=e(i===void 0?r.length-1:i,0),function(){for(var a=arguments,o=-1,l=e(a.length-i,0),c=Array(l);++o<l;)c[o]=a[i+o];o=-1;for(var u=Array(i+1);++o<i;)u[o]=a[o];return u[i]=s(c),t(r,this,u)}}return IO=n,IO}var kO,GW;function dIe(){if(GW)return kO;GW=1;function t(e){return function(){return e}}return kO=t,kO}var DO,qW;function ree(){if(qW)return DO;qW=1;var t=Dp(),e=(function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}})();return DO=e,DO}var jO,KW;function fIe(){if(KW)return jO;KW=1;var t=dIe(),e=ree(),n=by(),r=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(s),writable:!0})}:n;return jO=r,jO}var LO,XW;function hIe(){if(XW)return LO;XW=1;var t=800,e=16,n=Date.now;function r(i){var s=0,a=0;return function(){var o=n(),l=e-(o-a);if(a=o,l>0){if(++s>=t)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return LO=r,LO}var UO,YW;function pIe(){if(YW)return UO;YW=1;var t=fIe(),e=hIe(),n=e(t);return UO=n,UO}var FO,JW;function mIe(){if(JW)return FO;JW=1;var t=by(),e=uIe(),n=pIe();function r(i,s){return n(e(i,s,t),i+"")}return FO=r,FO}var BO,QW;function kA(){if(QW)return BO;QW=1;var t=A3(),e=Fw(),n=B3(),r=gf();function i(s,a,o){if(!r(o))return!1;var l=typeof a;return(l=="number"?e(o)&&n(a,o.length):l=="string"&&a in o)?t(o[a],s):!1}return BO=i,BO}var zO,ZW;function gIe(){if(ZW)return zO;ZW=1;var t=eee(),e=lIe(),n=mIe(),r=kA(),i=n(function(s,a){if(s==null)return[];var o=a.length;return o>1&&r(s,a[0],a[1])?a=[]:o>2&&r(a[0],a[1],a[2])&&(a=[a[0]]),e(s,t(a,1),[])});return zO=i,zO}var vIe=gIe();const H3=Ln(vIe);function Tb(t){"@babel/helpers - typeof";return Tb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tb(t)}function Vk(){return Vk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vk.apply(this,arguments)}function yIe(t,e){return _Ie(t)||wIe(t,e)||bIe(t,e)||xIe()}function xIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bIe(t,e){if(t){if(typeof t=="string")return e6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e6(t,e)}}function e6(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wIe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function _Ie(t){if(Array.isArray(t))return t}function t6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $O(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t6(Object(n),!0).forEach(function(r){SIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SIe(t,e,n){return e=EIe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EIe(t){var e=TIe(t,"string");return Tb(e)=="symbol"?e:e+""}function TIe(t,e){if(Tb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function AIe(t){return Array.isArray(t)&&Ri(t[0])&&Ri(t[1])?t.join(" ~ "):t}var MIe=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,s=i===void 0?{}:i,a=e.itemStyle,o=a===void 0?{}:a,l=e.labelStyle,c=l===void 0?{}:l,u=e.payload,d=e.formatter,h=e.itemSorter,m=e.wrapperClassName,b=e.labelClassName,x=e.label,v=e.labelFormatter,_=e.accessibilityLayer,E=_===void 0?!1:_,T=function(){if(u&&u.length){var H={padding:0,margin:0},J=(h?H3(u,h):u).map(function(G,W){if(G.type==="none")return null;var K=$O({display:"block",paddingTop:4,paddingBottom:4,color:G.color||"#000"},o),te=G.formatter||d||AIe,z=G.value,V=G.name,X=z,q=V;if(te&&X!=null&&q!=null){var Q=te(z,V,G,W,u);if(Array.isArray(Q)){var ie=yIe(Q,2);X=ie[0],q=ie[1]}else X=Q}return ne.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(W),style:K},Ri(q)?ne.createElement("span",{className:"recharts-tooltip-item-name"},q):null,Ri(q)?ne.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,ne.createElement("span",{className:"recharts-tooltip-item-value"},X),ne.createElement("span",{className:"recharts-tooltip-item-unit"},G.unit||""))});return ne.createElement("ul",{className:"recharts-tooltip-item-list",style:H},J)}return null},A=$O({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),P=$O({margin:0},c),R=!an(x),N=R?x:"",L=nn("recharts-default-tooltip",m),I=nn("recharts-tooltip-label",b);R&&v&&u!==void 0&&u!==null&&(N=v(x,u));var j=E?{role:"status","aria-live":"assertive"}:{};return ne.createElement("div",Vk({className:L,style:A},j),ne.createElement("p",{className:I,style:P},ne.isValidElement(N)?N:"".concat(N)),T())};function Ab(t){"@babel/helpers - typeof";return Ab=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ab(t)}function o1(t,e,n){return e=PIe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PIe(t){var e=CIe(t,"string");return Ab(e)=="symbol"?e:e+""}function CIe(t,e){if(Ab(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ab(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var W0="recharts-tooltip-wrapper",RIe={visibility:"hidden"};function OIe(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return nn(W0,o1(o1(o1(o1({},"".concat(W0,"-right"),et(n)&&e&&et(e.x)&&n>=e.x),"".concat(W0,"-left"),et(n)&&e&&et(e.x)&&n<e.x),"".concat(W0,"-bottom"),et(r)&&e&&et(e.y)&&r>=e.y),"".concat(W0,"-top"),et(r)&&e&&et(e.y)&&r<e.y))}function n6(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,s=t.position,a=t.reverseDirection,o=t.tooltipDimension,l=t.viewBox,c=t.viewBoxDimension;if(s&&et(s[r]))return s[r];var u=n[r]-o-i,d=n[r]+i;if(e[r])return a[r]?u:d;if(a[r]){var h=u,m=l[r];return h<m?Math.max(d,l[r]):Math.max(u,l[r])}var b=d+o,x=l[r]+c;return b>x?Math.max(u,l[r]):Math.max(d,l[r])}function NIe(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function IIe(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,s=t.reverseDirection,a=t.tooltipBox,o=t.useTranslate3d,l=t.viewBox,c,u,d;return a.height>0&&a.width>0&&n?(u=n6({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.width,viewBox:l,viewBoxDimension:l.width}),d=n6({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.height,viewBox:l,viewBoxDimension:l.height}),c=NIe({translateX:u,translateY:d,useTranslate3d:o})):c=RIe,{cssProperties:c,cssClasses:OIe({translateX:u,translateY:d,coordinate:n})}}function Ev(t){"@babel/helpers - typeof";return Ev=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ev(t)}function r6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function i6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r6(Object(n),!0).forEach(function(r){Wk(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DIe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,see(r.key),r)}}function jIe(t,e,n){return e&&DIe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function LIe(t,e,n){return e=_E(e),UIe(t,iee()?Reflect.construct(e,n||[],_E(t).constructor):e.apply(t,n))}function UIe(t,e){if(e&&(Ev(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FIe(t)}function FIe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iee=function(){return!!t})()}function _E(t){return _E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_E(t)}function BIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hk(t,e)}function Hk(t,e){return Hk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Hk(t,e)}function Wk(t,e,n){return e=see(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function see(t){var e=zIe(t,"string");return Ev(e)=="symbol"?e:e+""}function zIe(t,e){if(Ev(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ev(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var s6=1,$Ie=(function(t){function e(){var n;kIe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=LIe(this,e,[].concat(i)),Wk(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Wk(n,"handleKeyDown",function(a){if(a.key==="Escape"){var o,l,c,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&o!==void 0?o:0,y:(c=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&c!==void 0?c:0}})}}),n}return BIe(e,t),jIe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>s6||Math.abs(r.height-this.state.lastBoundingBox.height)>s6)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,s=i.active,a=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,c=i.children,u=i.coordinate,d=i.hasPayload,h=i.isAnimationActive,m=i.offset,b=i.position,x=i.reverseDirection,v=i.useTranslate3d,_=i.viewBox,E=i.wrapperStyle,T=IIe({allowEscapeViewBox:a,coordinate:u,offsetTopLeft:m,position:b,reverseDirection:x,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:_}),A=T.cssClasses,P=T.cssProperties,R=i6(i6({transition:h&&s?"transform ".concat(o,"ms ").concat(l):void 0},P),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&d?"visible":"hidden",position:"absolute",top:0,left:0},E);return ne.createElement("div",{tabIndex:-1,className:A,style:R,ref:function(L){r.wrapperNode=L}},c)}}])})(M.PureComponent),VIe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Du={isSsr:VIe()};function Tv(t){"@babel/helpers - typeof";return Tv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tv(t)}function a6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function o6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a6(Object(n),!0).forEach(function(r){W3(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WIe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oee(r.key),r)}}function GIe(t,e,n){return e&&WIe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function qIe(t,e,n){return e=SE(e),KIe(t,aee()?Reflect.construct(e,n||[],SE(t).constructor):e.apply(t,n))}function KIe(t,e){if(e&&(Tv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XIe(t)}function XIe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aee=function(){return!!t})()}function SE(t){return SE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},SE(t)}function YIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gk(t,e)}function Gk(t,e){return Gk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Gk(t,e)}function W3(t,e,n){return e=oee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oee(t){var e=JIe(t,"string");return Tv(e)=="symbol"?e:e+""}function JIe(t,e){if(Tv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function QIe(t){return t.dataKey}function ZIe(t,e){return ne.isValidElement(t)?ne.cloneElement(t,e):typeof t=="function"?ne.createElement(t,e):ne.createElement(MIe,e)}var di=(function(t){function e(){return HIe(this,e),qIe(this,e,arguments)}return YIe(e,t),GIe(e,[{key:"render",value:function(){var r=this,i=this.props,s=i.active,a=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,c=i.content,u=i.coordinate,d=i.filterNull,h=i.isAnimationActive,m=i.offset,b=i.payload,x=i.payloadUniqBy,v=i.position,_=i.reverseDirection,E=i.useTranslate3d,T=i.viewBox,A=i.wrapperStyle,P=b??[];d&&P.length&&(P=JZ(b.filter(function(N){return N.value!=null&&(N.hide!==!0||r.props.includeHidden)}),x,QIe));var R=P.length>0;return ne.createElement($Ie,{allowEscapeViewBox:a,animationDuration:o,animationEasing:l,isAnimationActive:h,active:s,coordinate:u,hasPayload:R,offset:m,position:v,reverseDirection:_,useTranslate3d:E,viewBox:T,wrapperStyle:A},ZIe(c,o6(o6({},this.props),{},{payload:P})))}}])})(M.PureComponent);W3(di,"displayName","Tooltip");W3(di,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Du.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var VO,l6;function eke(){if(l6)return VO;l6=1;var t=dc(),e=function(){return t.Date.now()};return VO=e,VO}var HO,c6;function tke(){if(c6)return HO;c6=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return HO=e,HO}var WO,u6;function nke(){if(u6)return WO;u6=1;var t=tke(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return WO=n,WO}var GO,d6;function lee(){if(d6)return GO;d6=1;var t=nke(),e=gf(),n=vy(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt;function l(c){if(typeof c=="number")return c;if(n(c))return r;if(e(c)){var u=typeof c.valueOf=="function"?c.valueOf():c;c=e(u)?u+"":u}if(typeof c!="string")return c===0?c:+c;c=t(c);var d=s.test(c);return d||a.test(c)?o(c.slice(2),d?2:8):i.test(c)?r:+c}return GO=l,GO}var qO,f6;function rke(){if(f6)return qO;f6=1;var t=gf(),e=eke(),n=lee(),r="Expected a function",i=Math.max,s=Math.min;function a(o,l,c){var u,d,h,m,b,x,v=0,_=!1,E=!1,T=!0;if(typeof o!="function")throw new TypeError(r);l=n(l)||0,t(c)&&(_=!!c.leading,E="maxWait"in c,h=E?i(n(c.maxWait)||0,l):h,T="trailing"in c?!!c.trailing:T);function A(J){var G=u,W=d;return u=d=void 0,v=J,m=o.apply(W,G),m}function P(J){return v=J,b=setTimeout(L,l),_?A(J):m}function R(J){var G=J-x,W=J-v,K=l-G;return E?s(K,h-W):K}function N(J){var G=J-x,W=J-v;return x===void 0||G>=l||G<0||E&&W>=h}function L(){var J=e();if(N(J))return I(J);b=setTimeout(L,R(J))}function I(J){return b=void 0,T&&u?A(J):(u=d=void 0,m)}function j(){b!==void 0&&clearTimeout(b),v=0,u=x=d=b=void 0}function B(){return b===void 0?m:I(e())}function H(){var J=e(),G=N(J);if(u=arguments,d=this,x=J,G){if(b===void 0)return P(x);if(E)return clearTimeout(b),b=setTimeout(L,l),A(x)}return b===void 0&&(b=setTimeout(L,l)),m}return H.cancel=j,H.flush=B,H}return qO=a,qO}var KO,h6;function ike(){if(h6)return KO;h6=1;var t=rke(),e=gf(),n="Expected a function";function r(i,s,a){var o=!0,l=!0;if(typeof i!="function")throw new TypeError(n);return e(a)&&(o="leading"in a?!!a.leading:o,l="trailing"in a?!!a.trailing:l),t(i,s,{leading:o,maxWait:s,trailing:l})}return KO=r,KO}var ske=ike();const cee=Ln(ske);function Mb(t){"@babel/helpers - typeof";return Mb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mb(t)}function p6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function l1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p6(Object(n),!0).forEach(function(r){ake(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ake(t,e,n){return e=oke(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oke(t){var e=lke(t,"string");return Mb(e)=="symbol"?e:e+""}function lke(t,e){if(Mb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Mb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cke(t,e){return hke(t)||fke(t,e)||dke(t,e)||uke()}function uke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dke(t,e){if(t){if(typeof t=="string")return m6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m6(t,e)}}function m6(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function fke(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function hke(t){if(Array.isArray(t))return t}var yl=M.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,s=t.width,a=s===void 0?"100%":s,o=t.height,l=o===void 0?"100%":o,c=t.minWidth,u=c===void 0?0:c,d=t.minHeight,h=t.maxHeight,m=t.children,b=t.debounce,x=b===void 0?0:b,v=t.id,_=t.className,E=t.onResize,T=t.style,A=T===void 0?{}:T,P=M.useRef(null),R=M.useRef();R.current=E,M.useImperativeHandle(e,function(){return Object.defineProperty(P.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),P.current},configurable:!0})});var N=M.useState({containerWidth:i.width,containerHeight:i.height}),L=cke(N,2),I=L[0],j=L[1],B=M.useCallback(function(J,G){j(function(W){var K=Math.round(J),te=Math.round(G);return W.containerWidth===K&&W.containerHeight===te?W:{containerWidth:K,containerHeight:te}})},[]);M.useEffect(function(){var J=function(V){var X,q=V[0].contentRect,Q=q.width,ie=q.height;B(Q,ie),(X=R.current)===null||X===void 0||X.call(R,Q,ie)};x>0&&(J=cee(J,x,{trailing:!0,leading:!1}));var G=new ResizeObserver(J),W=P.current.getBoundingClientRect(),K=W.width,te=W.height;return B(K,te),G.observe(P.current),function(){G.disconnect()}},[B,x]);var H=M.useMemo(function(){var J=I.containerWidth,G=I.containerHeight;if(J<0||G<0)return null;vl(Gh(a)||Gh(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,l),vl(!n||n>0,"The aspect(%s) must be greater than zero.",n);var W=Gh(a)?J:a,K=Gh(l)?G:l;n&&n>0&&(W?K=W/n:K&&(W=K*n),h&&K>h&&(K=h)),vl(W>0||K>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,W,K,a,l,u,d,n);var te=!Array.isArray(m)&&gu(m.type).endsWith("Chart");return ne.Children.map(m,function(z){return ne.isValidElement(z)?M.cloneElement(z,l1({width:W,height:K},te?{style:l1({height:"100%",width:"100%",maxHeight:K,maxWidth:W},z.props.style)}:{})):z})},[n,m,l,h,d,u,I,a]);return ne.createElement("div",{id:v?"".concat(v):void 0,className:nn("recharts-responsive-container",_),style:l1(l1({},A),{},{width:a,height:l,minWidth:u,minHeight:d,maxHeight:h}),ref:P},H)}),Av=function(e){return null};Av.displayName="Cell";function Pb(t){"@babel/helpers - typeof";return Pb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pb(t)}function g6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g6(Object(n),!0).forEach(function(r){pke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pke(t,e,n){return e=mke(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mke(t){var e=gke(t,"string");return Pb(e)=="symbol"?e:e+""}function gke(t,e){if(Pb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wg={widthCache:{},cacheCount:0},vke=2e3,yke={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},v6="recharts_measurement_span";function xke(t){var e=qk({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var Px=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Du.isSsr)return{width:0,height:0};var r=xke(n),i=JSON.stringify({text:e,copyStyle:r});if(wg.widthCache[i])return wg.widthCache[i];try{var s=document.getElementById(v6);s||(s=document.createElement("span"),s.setAttribute("id",v6),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var a=qk(qk({},yke),r);Object.assign(s.style,a),s.textContent="".concat(e);var o=s.getBoundingClientRect(),l={width:o.width,height:o.height};return wg.widthCache[i]=l,++wg.cacheCount>vke&&(wg.cacheCount=0,wg.widthCache={}),l}catch{return{width:0,height:0}}},bke=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Cb(t){"@babel/helpers - typeof";return Cb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cb(t)}function EE(t,e){return Eke(t)||Ske(t,e)||_ke(t,e)||wke()}function wke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _ke(t,e){if(t){if(typeof t=="string")return y6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y6(t,e)}}function y6(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ske(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function Eke(t){if(Array.isArray(t))return t}function Tke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Mke(r.key),r)}}function Ake(t,e,n){return e&&x6(t.prototype,e),n&&x6(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mke(t){var e=Pke(t,"string");return Cb(e)=="symbol"?e:e+""}function Pke(t,e){if(Cb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Cb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var b6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,w6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Cke=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Rke=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,uee={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Oke=Object.keys(uee),Vg="NaN";function Nke(t,e){return t*uee[e]}var c1=(function(){function t(e,n){Tke(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!Cke.test(n)&&(this.num=NaN,this.unit=""),Oke.includes(n)&&(this.num=Nke(e,n),this.unit="px")}return Ake(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=Rke.exec(n))!==null&&r!==void 0?r:[],s=EE(i,3),a=s[1],o=s[2];return new t(parseFloat(a),o??"")}}])})();function dee(t){if(t.includes(Vg))return Vg;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=b6.exec(e))!==null&&n!==void 0?n:[],i=EE(r,4),s=i[1],a=i[2],o=i[3],l=c1.parse(s??""),c=c1.parse(o??""),u=a==="*"?l.multiply(c):l.divide(c);if(u.isNaN())return Vg;e=e.replace(b6,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,h=(d=w6.exec(e))!==null&&d!==void 0?d:[],m=EE(h,4),b=m[1],x=m[2],v=m[3],_=c1.parse(b??""),E=c1.parse(v??""),T=x==="+"?_.add(E):_.subtract(E);if(T.isNaN())return Vg;e=e.replace(w6,T.toString())}return e}var _6=/\(([^()]*)\)/;function Ike(t){for(var e=t;e.includes("(");){var n=_6.exec(e),r=EE(n,2),i=r[1];e=e.replace(_6,dee(i))}return e}function kke(t){var e=t.replace(/\s+/g,"");return e=Ike(e),e=dee(e),e}function Dke(t){try{return kke(t)}catch{return Vg}}function XO(t){var e=Dke(t.slice(5,-1));return e===Vg?"":e}var jke=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Lke=["dx","dy","angle","className","breakAll"];function Kk(){return Kk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kk.apply(this,arguments)}function S6(t,e){if(t==null)return{};var n=Uke(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Uke(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function E6(t,e){return $ke(t)||zke(t,e)||Bke(t,e)||Fke()}function Fke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bke(t,e){if(t){if(typeof t=="string")return T6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T6(t,e)}}function T6(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zke(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function $ke(t){if(Array.isArray(t))return t}var fee=/[ \f\n\r\t\v\u2028\u2029]+/,hee=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var s=[];an(n)||(r?s=n.toString().split(""):s=n.toString().split(fee));var a=s.map(function(l){return{word:l,width:Px(l,i).width}}),o=r?0:Px("",i).width;return{wordsWithComputedWidth:a,spaceWidth:o}}catch{return null}},Vke=function(e,n,r,i,s){var a=e.maxLines,o=e.children,l=e.style,c=e.breakAll,u=et(a),d=o,h=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return W.reduce(function(K,te){var z=te.word,V=te.width,X=K[K.length-1];if(X&&(i==null||s||X.width+V+r<Number(i)))X.words.push(z),X.width+=V+r;else{var q={words:[z],width:V};K.push(q)}return K},[])},m=h(n),b=function(W){return W.reduce(function(K,te){return K.width>te.width?K:te})};if(!u)return m;for(var x="",v=function(W){var K=d.slice(0,W),te=hee({breakAll:c,style:l,children:K+x}).wordsWithComputedWidth,z=h(te),V=z.length>a||b(z).width>Number(i);return[V,z]},_=0,E=d.length-1,T=0,A;_<=E&&T<=d.length-1;){var P=Math.floor((_+E)/2),R=P-1,N=v(R),L=E6(N,2),I=L[0],j=L[1],B=v(P),H=E6(B,1),J=H[0];if(!I&&!J&&(_=P+1),I&&J&&(E=P-1),!I&&J){A=j;break}T++}return A||m},A6=function(e){var n=an(e)?[]:e.toString().split(fee);return[{words:n}]},Hke=function(e){var n=e.width,r=e.scaleToFit,i=e.children,s=e.style,a=e.breakAll,o=e.maxLines;if((n||r)&&!Du.isSsr){var l,c,u=hee({breakAll:a,children:i,style:s});if(u){var d=u.wordsWithComputedWidth,h=u.spaceWidth;l=d,c=h}else return A6(i);return Vke({breakAll:a,children:i,maxLines:o,style:s},l,c,n,r)}return A6(i)},M6="#808080",pp=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,s=i===void 0?0:i,a=e.lineHeight,o=a===void 0?"1em":a,l=e.capHeight,c=l===void 0?"0.71em":l,u=e.scaleToFit,d=u===void 0?!1:u,h=e.textAnchor,m=h===void 0?"start":h,b=e.verticalAnchor,x=b===void 0?"end":b,v=e.fill,_=v===void 0?M6:v,E=S6(e,jke),T=M.useMemo(function(){return Hke({breakAll:E.breakAll,children:E.children,maxLines:E.maxLines,scaleToFit:d,style:E.style,width:E.width})},[E.breakAll,E.children,E.maxLines,d,E.style,E.width]),A=E.dx,P=E.dy,R=E.angle,N=E.className,L=E.breakAll,I=S6(E,Lke);if(!Ri(r)||!Ri(s))return null;var j=r+(et(A)?A:0),B=s+(et(P)?P:0),H;switch(x){case"start":H=XO("calc(".concat(c,")"));break;case"middle":H=XO("calc(".concat((T.length-1)/2," * -").concat(o," + (").concat(c," / 2))"));break;default:H=XO("calc(".concat(T.length-1," * -").concat(o,")"));break}var J=[];if(d){var G=T[0].width,W=E.width;J.push("scale(".concat((et(W)?W/G:1)/G,")"))}return R&&J.push("rotate(".concat(R,", ").concat(j,", ").concat(B,")")),J.length&&(I.transform=J.join(" ")),ne.createElement("text",Kk({},Rt(I,!0),{x:j,y:B,className:nn("recharts-text",N),textAnchor:m,fill:_.includes("url")?M6:_}),T.map(function(K,te){var z=K.words.join(L?"":" ");return ne.createElement("tspan",{x:j,dy:te===0?H:o,key:"".concat(z,"-").concat(te)},z)}))};function qd(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Wke(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function G3(t){let e,n,r;t.length!==2?(e=qd,n=(o,l)=>qd(t(o),l),r=(o,l)=>t(o)-l):(e=t===qd||t===Wke?t:Gke,n=t,r=t);function i(o,l,c=0,u=o.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(o[d],l)<0?c=d+1:u=d}while(c<u)}return c}function s(o,l,c=0,u=o.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(o[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function a(o,l,c=0,u=o.length){const d=i(o,l,c,u-1);return d>c&&r(o[d-1],l)>-r(o[d],l)?d-1:d}return{left:i,center:a,right:s}}function Gke(){return 0}function pee(t){return t===null?NaN:+t}function*qke(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Kke=G3(qd),Bw=Kke.right;G3(pee).center;class P6 extends Map{constructor(e,n=Jke){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(C6(this,e))}has(e){return super.has(C6(this,e))}set(e,n){return super.set(Xke(this,e),n)}delete(e){return super.delete(Yke(this,e))}}function C6({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Xke({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Yke({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Jke(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Qke(t=qd){if(t===qd)return mee;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function mee(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Zke=Math.sqrt(50),eDe=Math.sqrt(10),tDe=Math.sqrt(2);function TE(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=Zke?10:s>=eDe?5:s>=tDe?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/a,o=Math.round(t*c),l=Math.round(e*c),o/c<t&&++o,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*a,o=Math.round(t/c),l=Math.round(e/c),o*c<t&&++o,l*c>e&&--l),l<o&&.5<=n&&n<2?TE(t,e,n*2):[o,l,c]}function Xk(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,a]=r?TE(e,t,n):TE(t,e,n);if(!(s>=i))return[];const o=s-i+1,l=new Array(o);if(r)if(a<0)for(let c=0;c<o;++c)l[c]=(s-c)/-a;else for(let c=0;c<o;++c)l[c]=(s-c)*a;else if(a<0)for(let c=0;c<o;++c)l[c]=(i+c)/-a;else for(let c=0;c<o;++c)l[c]=(i+c)*a;return l}function Yk(t,e,n){return e=+e,t=+t,n=+n,TE(t,e,n)[2]}function Jk(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Yk(e,t,n):Yk(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function R6(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function O6(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function gee(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?mee:Qke(i);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),d=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*d*(l-d)/l)*(c-l/2<0?-1:1),m=Math.max(n,Math.floor(e-c*d/l+h)),b=Math.min(r,Math.floor(e+(l-c)*d/l+h));gee(t,e,m,b,i)}const s=t[e];let a=n,o=r;for(G0(t,n,e),i(t[r],s)>0&&G0(t,n,r);a<o;){for(G0(t,a,o),++a,--o;i(t[a],s)<0;)++a;for(;i(t[o],s)>0;)--o}i(t[n],s)===0?G0(t,n,o):(++o,G0(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function G0(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function nDe(t,e,n){if(t=Float64Array.from(qke(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return O6(t);if(e>=1)return R6(t);var r,i=(r-1)*e,s=Math.floor(i),a=R6(gee(t,s).subarray(0,s+1)),o=O6(t.subarray(s+1));return a+(o-a)*(i-s)}}function rDe(t,e,n=pee){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),a=+n(t[s],s,t),o=+n(t[s+1],s+1,t);return a+(o-a)*(i-s)}}function iDe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function To(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function ju(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Qk=Symbol("implicit");function q3(){var t=new P6,e=[],n=[],r=Qk;function i(s){let a=t.get(s);if(a===void 0){if(r!==Qk)return r;t.set(s,a=e.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new P6;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return q3(e,n).unknown(r)},To.apply(i,arguments),i}function Rb(){var t=q3().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,a,o=!1,l=0,c=0,u=.5;delete t.unknown;function d(){var h=e().length,m=i<r,b=m?i:r,x=m?r:i;s=(x-b)/Math.max(1,h-l+c*2),o&&(s=Math.floor(s)),b+=(x-b-s*(h-l))*u,a=s*(1-l),o&&(b=Math.round(b),a=Math.round(a));var v=iDe(h).map(function(_){return b+s*_});return n(m?v.reverse():v)}return t.domain=function(h){return arguments.length?(e(h),d()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,d()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,o=!0,d()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(h){return arguments.length?(o=!!h,d()):o},t.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),d()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),d()):l},t.paddingOuter=function(h){return arguments.length?(c=+h,d()):c},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),d()):u},t.copy=function(){return Rb(e(),[r,i]).round(o).paddingInner(l).paddingOuter(c).align(u)},To.apply(d(),arguments)}function vee(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return vee(e())},t}function Cx(){return vee(Rb.apply(null,arguments).paddingInner(1))}function K3(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function yee(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function zw(){}var Ob=.7,AE=1/Ob,nv="\\s*([+-]?\\d+)\\s*",Nb="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sDe=/^#([0-9a-f]{3,8})$/,aDe=new RegExp(`^rgb\\(${nv},${nv},${nv}\\)$`),oDe=new RegExp(`^rgb\\(${nc},${nc},${nc}\\)$`),lDe=new RegExp(`^rgba\\(${nv},${nv},${nv},${Nb}\\)$`),cDe=new RegExp(`^rgba\\(${nc},${nc},${nc},${Nb}\\)$`),uDe=new RegExp(`^hsl\\(${Nb},${nc},${nc}\\)$`),dDe=new RegExp(`^hsla\\(${Nb},${nc},${nc},${Nb}\\)$`),N6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};K3(zw,Ib,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:I6,formatHex:I6,formatHex8:fDe,formatHsl:hDe,formatRgb:k6,toString:k6});function I6(){return this.rgb().formatHex()}function fDe(){return this.rgb().formatHex8()}function hDe(){return xee(this).formatHsl()}function k6(){return this.rgb().formatRgb()}function Ib(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=sDe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?D6(e):n===3?new ma(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?u1(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?u1(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=aDe.exec(t))?new ma(e[1],e[2],e[3],1):(e=oDe.exec(t))?new ma(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=lDe.exec(t))?u1(e[1],e[2],e[3],e[4]):(e=cDe.exec(t))?u1(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=uDe.exec(t))?U6(e[1],e[2]/100,e[3]/100,1):(e=dDe.exec(t))?U6(e[1],e[2]/100,e[3]/100,e[4]):N6.hasOwnProperty(t)?D6(N6[t]):t==="transparent"?new ma(NaN,NaN,NaN,0):null}function D6(t){return new ma(t>>16&255,t>>8&255,t&255,1)}function u1(t,e,n,r){return r<=0&&(t=e=n=NaN),new ma(t,e,n,r)}function pDe(t){return t instanceof zw||(t=Ib(t)),t?(t=t.rgb(),new ma(t.r,t.g,t.b,t.opacity)):new ma}function Zk(t,e,n,r){return arguments.length===1?pDe(t):new ma(t,e,n,r??1)}function ma(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}K3(ma,Zk,yee(zw,{brighter(t){return t=t==null?AE:Math.pow(AE,t),new ma(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ob:Math.pow(Ob,t),new ma(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ma(rp(this.r),rp(this.g),rp(this.b),ME(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:j6,formatHex:j6,formatHex8:mDe,formatRgb:L6,toString:L6}));function j6(){return`#${qh(this.r)}${qh(this.g)}${qh(this.b)}`}function mDe(){return`#${qh(this.r)}${qh(this.g)}${qh(this.b)}${qh((isNaN(this.opacity)?1:this.opacity)*255)}`}function L6(){const t=ME(this.opacity);return`${t===1?"rgb(":"rgba("}${rp(this.r)}, ${rp(this.g)}, ${rp(this.b)}${t===1?")":`, ${t})`}`}function ME(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function rp(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function qh(t){return t=rp(t),(t<16?"0":"")+t.toString(16)}function U6(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new hl(t,e,n,r)}function xee(t){if(t instanceof hl)return new hl(t.h,t.s,t.l,t.opacity);if(t instanceof zw||(t=Ib(t)),!t)return new hl;if(t instanceof hl)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(e===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-e)/o+2:a=(e-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new hl(a,o,l,t.opacity)}function gDe(t,e,n,r){return arguments.length===1?xee(t):new hl(t,e,n,r??1)}function hl(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}K3(hl,gDe,yee(zw,{brighter(t){return t=t==null?AE:Math.pow(AE,t),new hl(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ob:Math.pow(Ob,t),new hl(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ma(YO(t>=240?t-240:t+120,i,r),YO(t,i,r),YO(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new hl(F6(this.h),d1(this.s),d1(this.l),ME(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ME(this.opacity);return`${t===1?"hsl(":"hsla("}${F6(this.h)}, ${d1(this.s)*100}%, ${d1(this.l)*100}%${t===1?")":`, ${t})`}`}}));function F6(t){return t=(t||0)%360,t<0?t+360:t}function d1(t){return Math.max(0,Math.min(1,t||0))}function YO(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const X3=t=>()=>t;function vDe(t,e){return function(n){return t+n*e}}function yDe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function xDe(t){return(t=+t)==1?bee:function(e,n){return n-e?yDe(e,n,t):X3(isNaN(e)?n:e)}}function bee(t,e){var n=e-t;return n?vDe(t,n):X3(isNaN(t)?e:t)}const B6=(function t(e){var n=xDe(e);function r(i,s){var a=n((i=Zk(i)).r,(s=Zk(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),c=bee(i.opacity,s.opacity);return function(u){return i.r=a(u),i.g=o(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r})(1);function bDe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function wDe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function _De(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=wy(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function SDe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function PE(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function EDe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=wy(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var eD=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,JO=new RegExp(eD.source,"g");function TDe(t){return function(){return t}}function ADe(t){return function(e){return t(e)+""}}function MDe(t,e){var n=eD.lastIndex=JO.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(t=t+"",e=e+"";(r=eD.exec(t))&&(i=JO.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:PE(r,i)})),n=JO.lastIndex;return n<e.length&&(s=e.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?ADe(l[0].x):TDe(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)o[(d=l[u]).i]=d.x(c);return o.join("")})}function wy(t,e){var n=typeof e,r;return e==null||n==="boolean"?X3(e):(n==="number"?PE:n==="string"?(r=Ib(e))?(e=r,B6):MDe:e instanceof Ib?B6:e instanceof Date?SDe:wDe(e)?bDe:Array.isArray(e)?_De:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?EDe:PE)(t,e)}function Y3(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function PDe(t,e){e===void 0&&(e=t,t=wy);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(a){var o=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return s[o](a-o)}}function CDe(t){return function(){return t}}function CE(t){return+t}var z6=[0,1];function Xs(t){return t}function tD(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:CDe(isNaN(e)?NaN:.5)}function RDe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function ODe(t,e,n){var r=t[0],i=t[1],s=e[0],a=e[1];return i<r?(r=tD(i,r),s=n(a,s)):(r=tD(r,i),s=n(s,a)),function(o){return s(r(o))}}function NDe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=tD(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(o){var l=Bw(t,o,1,r)-1;return s[l](i[l](o))}}function $w(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function DA(){var t=z6,e=z6,n=wy,r,i,s,a=Xs,o,l,c;function u(){var h=Math.min(t.length,e.length);return a!==Xs&&(a=RDe(t[0],t[h-1])),o=h>2?NDe:ODe,l=c=null,d}function d(h){return h==null||isNaN(h=+h)?s:(l||(l=o(t.map(r),e,n)))(r(a(h)))}return d.invert=function(h){return a(i((c||(c=o(e,t.map(r),PE)))(h)))},d.domain=function(h){return arguments.length?(t=Array.from(h,CE),u()):t.slice()},d.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},d.rangeRound=function(h){return e=Array.from(h),n=Y3,u()},d.clamp=function(h){return arguments.length?(a=h?!0:Xs,u()):a!==Xs},d.interpolate=function(h){return arguments.length?(n=h,u()):n},d.unknown=function(h){return arguments.length?(s=h,d):s},function(h,m){return r=h,i=m,u()}}function J3(){return DA()(Xs,Xs)}function IDe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function RE(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Mv(t){return t=RE(Math.abs(t)),t?t[1]:NaN}function kDe(t,e){return function(n,r){for(var i=n.length,s=[],a=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[a=(a+1)%t.length];return s.reverse().join(e)}}function DDe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var jDe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function kb(t){if(!(e=jDe.exec(t)))throw new Error("invalid format: "+t);var e;return new Q3({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}kb.prototype=Q3.prototype;function Q3(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Q3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function LDe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var wee;function UDe(t,e){var n=RE(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(wee=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+RE(t,Math.max(0,e+s-1))[0]}function $6(t,e){var n=RE(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const V6={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:IDe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>$6(t*100,e),r:$6,s:UDe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function H6(t){return t}var W6=Array.prototype.map,G6=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function FDe(t){var e=t.grouping===void 0||t.thousands===void 0?H6:kDe(W6.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?H6:DDe(W6.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(d){d=kb(d);var h=d.fill,m=d.align,b=d.sign,x=d.symbol,v=d.zero,_=d.width,E=d.comma,T=d.precision,A=d.trim,P=d.type;P==="n"?(E=!0,P="g"):V6[P]||(T===void 0&&(T=12),A=!0,P="g"),(v||h==="0"&&m==="=")&&(v=!0,h="0",m="=");var R=x==="$"?n:x==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():"",N=x==="$"?r:/[%p]/.test(P)?a:"",L=V6[P],I=/[defgprs%]/.test(P);T=T===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function j(B){var H=R,J=N,G,W,K;if(P==="c")J=L(B)+J,B="";else{B=+B;var te=B<0||1/B<0;if(B=isNaN(B)?l:L(Math.abs(B),T),A&&(B=LDe(B)),te&&+B==0&&b!=="+"&&(te=!1),H=(te?b==="("?b:o:b==="-"||b==="("?"":b)+H,J=(P==="s"?G6[8+wee/3]:"")+J+(te&&b==="("?")":""),I){for(G=-1,W=B.length;++G<W;)if(K=B.charCodeAt(G),48>K||K>57){J=(K===46?i+B.slice(G+1):B.slice(G))+J,B=B.slice(0,G);break}}}E&&!v&&(B=e(B,1/0));var z=H.length+B.length+J.length,V=z<_?new Array(_-z+1).join(h):"";switch(E&&v&&(B=e(V+B,V.length?_-J.length:1/0),V=""),m){case"<":B=H+B+J+V;break;case"=":B=H+V+B+J;break;case"^":B=V.slice(0,z=V.length>>1)+H+B+J+V.slice(z);break;default:B=V+H+B+J;break}return s(B)}return j.toString=function(){return d+""},j}function u(d,h){var m=c((d=kb(d),d.type="f",d)),b=Math.max(-8,Math.min(8,Math.floor(Mv(h)/3)))*3,x=Math.pow(10,-b),v=G6[8+b/3];return function(_){return m(x*_)+v}}return{format:c,formatPrefix:u}}var f1,Z3,_ee;BDe({thousands:",",grouping:[3],currency:["$",""]});function BDe(t){return f1=FDe(t),Z3=f1.format,_ee=f1.formatPrefix,f1}function zDe(t){return Math.max(0,-Mv(Math.abs(t)))}function $De(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Mv(e)/3)))*3-Mv(Math.abs(t)))}function VDe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Mv(e)-Mv(t))+1}function See(t,e,n,r){var i=Jk(t,e,n),s;switch(r=kb(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=$De(i,a))&&(r.precision=s),_ee(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=VDe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=zDe(i))&&(r.precision=s-(r.type==="%")*2);break}}return Z3(r)}function vf(t){var e=t.domain;return t.ticks=function(n){var r=e();return Xk(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return See(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,a=r[i],o=r[s],l,c,u=10;for(o<a&&(c=a,a=o,o=c,c=i,i=s,s=c);u-- >0;){if(c=Yk(a,o,n),c===l)return r[i]=a,r[s]=o,e(r);if(c>0)a=Math.floor(a/c)*c,o=Math.ceil(o/c)*c;else if(c<0)a=Math.ceil(a*c)/c,o=Math.floor(o*c)/c;else break;l=c}return t},t}function OE(){var t=J3();return t.copy=function(){return $w(t,OE())},To.apply(t,arguments),vf(t)}function Eee(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,CE),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return Eee(t).unknown(e)},t=arguments.length?Array.from(t,CE):[0,1],vf(n)}function Tee(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),t[n]=e.floor(i),t[r]=e.ceil(s),t}function q6(t){return Math.log(t)}function K6(t){return Math.exp(t)}function HDe(t){return-Math.log(-t)}function WDe(t){return-Math.exp(-t)}function GDe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function qDe(t){return t===10?GDe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function KDe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function X6(t){return(e,n)=>-t(-e,n)}function eU(t){const e=t(q6,K6),n=e.domain;let r=10,i,s;function a(){return i=KDe(r),s=qDe(r),n()[0]<0?(i=X6(i),s=X6(s),t(HDe,WDe)):t(q6,K6),e}return e.base=function(o){return arguments.length?(r=+o,a()):r},e.domain=function(o){return arguments.length?(n(o),a()):n()},e.ticks=o=>{const l=n();let c=l[0],u=l[l.length-1];const d=u<c;d&&([c,u]=[u,c]);let h=i(c),m=i(u),b,x;const v=o==null?10:+o;let _=[];if(!(r%1)&&m-h<v){if(h=Math.floor(h),m=Math.ceil(m),c>0){for(;h<=m;++h)for(b=1;b<r;++b)if(x=h<0?b/s(-h):b*s(h),!(x<c)){if(x>u)break;_.push(x)}}else for(;h<=m;++h)for(b=r-1;b>=1;--b)if(x=h>0?b/s(-h):b*s(h),!(x<c)){if(x>u)break;_.push(x)}_.length*2<v&&(_=Xk(c,u,v))}else _=Xk(h,m,Math.min(m-h,v)).map(s);return d?_.reverse():_},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=kb(l)).precision==null&&(l.trim=!0),l=Z3(l)),o===1/0)return l;const c=Math.max(1,r*o/e.ticks().length);return u=>{let d=u/s(Math.round(i(u)));return d*r<r-.5&&(d*=r),d<=c?l(u):""}},e.nice=()=>n(Tee(n(),{floor:o=>s(Math.floor(i(o))),ceil:o=>s(Math.ceil(i(o)))})),e}function Aee(){const t=eU(DA()).domain([1,10]);return t.copy=()=>$w(t,Aee()).base(t.base()),To.apply(t,arguments),t}function Y6(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function J6(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function tU(t){var e=1,n=t(Y6(e),J6(e));return n.constant=function(r){return arguments.length?t(Y6(e=+r),J6(e)):e},vf(n)}function Mee(){var t=tU(DA());return t.copy=function(){return $w(t,Mee()).constant(t.constant())},To.apply(t,arguments)}function Q6(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function XDe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function YDe(t){return t<0?-t*t:t*t}function nU(t){var e=t(Xs,Xs),n=1;function r(){return n===1?t(Xs,Xs):n===.5?t(XDe,YDe):t(Q6(n),Q6(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},vf(e)}function rU(){var t=nU(DA());return t.copy=function(){return $w(t,rU()).exponent(t.exponent())},To.apply(t,arguments),t}function JDe(){return rU.apply(null,arguments).exponent(.5)}function Z6(t){return Math.sign(t)*t*t}function QDe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Pee(){var t=J3(),e=[0,1],n=!1,r;function i(s){var a=QDe(t(s));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(s){return t.invert(Z6(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,CE)).map(Z6)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Pee(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},To.apply(i,arguments),vf(i)}function Cee(){var t=[],e=[],n=[],r;function i(){var a=0,o=Math.max(1,e.length);for(n=new Array(o-1);++a<o;)n[a-1]=rDe(t,a/o);return s}function s(a){return a==null||isNaN(a=+a)?r:e[Bw(n,a)]}return s.invertExtent=function(a){var o=e.indexOf(a);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let o of a)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(qd),i()},s.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return Cee().domain(t).range(e).unknown(r)},To.apply(s,arguments)}function Ree(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function a(l){return l!=null&&l<=l?i[Bw(r,l,0,n)]:s}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return a}return a.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},a.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,o()):i.slice()},a.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},a.unknown=function(l){return arguments.length&&(s=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return Ree().domain([t,e]).range(i).unknown(s)},To.apply(vf(a),arguments)}function Oee(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[Bw(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var a=e.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return Oee().domain(t).range(e).unknown(n)},To.apply(i,arguments)}const QO=new Date,ZO=new Date;function ki(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const l=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return l;let c;do l.push(c=new Date(+s)),e(s,o),t(s);while(c<s&&s<a);return l},i.filter=s=>ki(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!s(a););else for(;--o>=0;)for(;e(a,1),!s(a););}),n&&(i.count=(s,a)=>(QO.setTime(+s),ZO.setTime(+a),t(QO),t(ZO),Math.floor(n(QO,ZO))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?a=>r(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const NE=ki(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);NE.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ki(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):NE);NE.range;const uu=1e3,mo=uu*60,du=mo*60,Au=du*24,iU=Au*7,e8=Au*30,eN=Au*365,Kh=ki(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*uu)},(t,e)=>(e-t)/uu,t=>t.getUTCSeconds());Kh.range;const sU=ki(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*uu)},(t,e)=>{t.setTime(+t+e*mo)},(t,e)=>(e-t)/mo,t=>t.getMinutes());sU.range;const aU=ki(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*mo)},(t,e)=>(e-t)/mo,t=>t.getUTCMinutes());aU.range;const oU=ki(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*uu-t.getMinutes()*mo)},(t,e)=>{t.setTime(+t+e*du)},(t,e)=>(e-t)/du,t=>t.getHours());oU.range;const lU=ki(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*du)},(t,e)=>(e-t)/du,t=>t.getUTCHours());lU.range;const Vw=ki(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*mo)/Au,t=>t.getDate()-1);Vw.range;const jA=ki(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Au,t=>t.getUTCDate()-1);jA.range;const Nee=ki(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Au,t=>Math.floor(t/Au));Nee.range;function Lp(t){return ki(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*mo)/iU)}const LA=Lp(0),IE=Lp(1),ZDe=Lp(2),eje=Lp(3),Pv=Lp(4),tje=Lp(5),nje=Lp(6);LA.range;IE.range;ZDe.range;eje.range;Pv.range;tje.range;nje.range;function Up(t){return ki(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/iU)}const UA=Up(0),kE=Up(1),rje=Up(2),ije=Up(3),Cv=Up(4),sje=Up(5),aje=Up(6);UA.range;kE.range;rje.range;ije.range;Cv.range;sje.range;aje.range;const cU=ki(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());cU.range;const uU=ki(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());uU.range;const Mu=ki(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Mu.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ki(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Mu.range;const Pu=ki(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Pu.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ki(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Pu.range;function Iee(t,e,n,r,i,s){const a=[[Kh,1,uu],[Kh,5,5*uu],[Kh,15,15*uu],[Kh,30,30*uu],[s,1,mo],[s,5,5*mo],[s,15,15*mo],[s,30,30*mo],[i,1,du],[i,3,3*du],[i,6,6*du],[i,12,12*du],[r,1,Au],[r,2,2*Au],[n,1,iU],[e,1,e8],[e,3,3*e8],[t,1,eN]];function o(c,u,d){const h=u<c;h&&([c,u]=[u,c]);const m=d&&typeof d.range=="function"?d:l(c,u,d),b=m?m.range(c,+u+1):[];return h?b.reverse():b}function l(c,u,d){const h=Math.abs(u-c)/d,m=G3(([,,v])=>v).right(a,h);if(m===a.length)return t.every(Jk(c/eN,u/eN,d));if(m===0)return NE.every(Math.max(Jk(c,u,d),1));const[b,x]=a[h/a[m-1][2]<a[m][2]/h?m-1:m];return b.every(x)}return[o,l]}const[oje,lje]=Iee(Pu,uU,UA,Nee,lU,aU),[cje,uje]=Iee(Mu,cU,LA,Vw,oU,sU);function tN(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function nN(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function q0(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function dje(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,a=t.shortDays,o=t.months,l=t.shortMonths,c=K0(i),u=X0(i),d=K0(s),h=X0(s),m=K0(a),b=X0(a),x=K0(o),v=X0(o),_=K0(l),E=X0(l),T={a:te,A:z,b:V,B:X,c:null,d:a8,e:a8,f:kje,g:Hje,G:Gje,H:Oje,I:Nje,j:Ije,L:kee,m:Dje,M:jje,p:q,q:Q,Q:c8,s:u8,S:Lje,u:Uje,U:Fje,V:Bje,w:zje,W:$je,x:null,X:null,y:Vje,Y:Wje,Z:qje,"%":l8},A={a:ie,A:ce,b:ye,B:Ce,c:null,d:o8,e:o8,f:Jje,g:oLe,G:cLe,H:Kje,I:Xje,j:Yje,L:jee,m:Qje,M:Zje,p:he,q:De,Q:c8,s:u8,S:eLe,u:tLe,U:nLe,V:rLe,w:iLe,W:sLe,x:null,X:null,y:aLe,Y:lLe,Z:uLe,"%":l8},P={a:j,A:B,b:H,B:J,c:G,d:i8,e:i8,f:Mje,g:r8,G:n8,H:s8,I:s8,j:Sje,L:Aje,m:_je,M:Eje,p:I,q:wje,Q:Cje,s:Rje,S:Tje,u:gje,U:vje,V:yje,w:mje,W:xje,x:W,X:K,y:r8,Y:n8,Z:bje,"%":Pje};T.x=R(n,T),T.X=R(r,T),T.c=R(e,T),A.x=R(n,A),A.X=R(r,A),A.c=R(e,A);function R(be,_e){return function(Ee){var ee=[],Me=-1,xe=0,Le=be.length,Pe,tt,Ze;for(Ee instanceof Date||(Ee=new Date(+Ee));++Me<Le;)be.charCodeAt(Me)===37&&(ee.push(be.slice(xe,Me)),(tt=t8[Pe=be.charAt(++Me)])!=null?Pe=be.charAt(++Me):tt=Pe==="e"?" ":"0",(Ze=_e[Pe])&&(Pe=Ze(Ee,tt)),ee.push(Pe),xe=Me+1);return ee.push(be.slice(xe,Me)),ee.join("")}}function N(be,_e){return function(Ee){var ee=q0(1900,void 0,1),Me=L(ee,be,Ee+="",0),xe,Le;if(Me!=Ee.length)return null;if("Q"in ee)return new Date(ee.Q);if("s"in ee)return new Date(ee.s*1e3+("L"in ee?ee.L:0));if(_e&&!("Z"in ee)&&(ee.Z=0),"p"in ee&&(ee.H=ee.H%12+ee.p*12),ee.m===void 0&&(ee.m="q"in ee?ee.q:0),"V"in ee){if(ee.V<1||ee.V>53)return null;"w"in ee||(ee.w=1),"Z"in ee?(xe=nN(q0(ee.y,0,1)),Le=xe.getUTCDay(),xe=Le>4||Le===0?kE.ceil(xe):kE(xe),xe=jA.offset(xe,(ee.V-1)*7),ee.y=xe.getUTCFullYear(),ee.m=xe.getUTCMonth(),ee.d=xe.getUTCDate()+(ee.w+6)%7):(xe=tN(q0(ee.y,0,1)),Le=xe.getDay(),xe=Le>4||Le===0?IE.ceil(xe):IE(xe),xe=Vw.offset(xe,(ee.V-1)*7),ee.y=xe.getFullYear(),ee.m=xe.getMonth(),ee.d=xe.getDate()+(ee.w+6)%7)}else("W"in ee||"U"in ee)&&("w"in ee||(ee.w="u"in ee?ee.u%7:"W"in ee?1:0),Le="Z"in ee?nN(q0(ee.y,0,1)).getUTCDay():tN(q0(ee.y,0,1)).getDay(),ee.m=0,ee.d="W"in ee?(ee.w+6)%7+ee.W*7-(Le+5)%7:ee.w+ee.U*7-(Le+6)%7);return"Z"in ee?(ee.H+=ee.Z/100|0,ee.M+=ee.Z%100,nN(ee)):tN(ee)}}function L(be,_e,Ee,ee){for(var Me=0,xe=_e.length,Le=Ee.length,Pe,tt;Me<xe;){if(ee>=Le)return-1;if(Pe=_e.charCodeAt(Me++),Pe===37){if(Pe=_e.charAt(Me++),tt=P[Pe in t8?_e.charAt(Me++):Pe],!tt||(ee=tt(be,Ee,ee))<0)return-1}else if(Pe!=Ee.charCodeAt(ee++))return-1}return ee}function I(be,_e,Ee){var ee=c.exec(_e.slice(Ee));return ee?(be.p=u.get(ee[0].toLowerCase()),Ee+ee[0].length):-1}function j(be,_e,Ee){var ee=m.exec(_e.slice(Ee));return ee?(be.w=b.get(ee[0].toLowerCase()),Ee+ee[0].length):-1}function B(be,_e,Ee){var ee=d.exec(_e.slice(Ee));return ee?(be.w=h.get(ee[0].toLowerCase()),Ee+ee[0].length):-1}function H(be,_e,Ee){var ee=_.exec(_e.slice(Ee));return ee?(be.m=E.get(ee[0].toLowerCase()),Ee+ee[0].length):-1}function J(be,_e,Ee){var ee=x.exec(_e.slice(Ee));return ee?(be.m=v.get(ee[0].toLowerCase()),Ee+ee[0].length):-1}function G(be,_e,Ee){return L(be,e,_e,Ee)}function W(be,_e,Ee){return L(be,n,_e,Ee)}function K(be,_e,Ee){return L(be,r,_e,Ee)}function te(be){return a[be.getDay()]}function z(be){return s[be.getDay()]}function V(be){return l[be.getMonth()]}function X(be){return o[be.getMonth()]}function q(be){return i[+(be.getHours()>=12)]}function Q(be){return 1+~~(be.getMonth()/3)}function ie(be){return a[be.getUTCDay()]}function ce(be){return s[be.getUTCDay()]}function ye(be){return l[be.getUTCMonth()]}function Ce(be){return o[be.getUTCMonth()]}function he(be){return i[+(be.getUTCHours()>=12)]}function De(be){return 1+~~(be.getUTCMonth()/3)}return{format:function(be){var _e=R(be+="",T);return _e.toString=function(){return be},_e},parse:function(be){var _e=N(be+="",!1);return _e.toString=function(){return be},_e},utcFormat:function(be){var _e=R(be+="",A);return _e.toString=function(){return be},_e},utcParse:function(be){var _e=N(be+="",!0);return _e.toString=function(){return be},_e}}}var t8={"-":"",_:" ",0:"0"},Gi=/^\s*\d+/,fje=/^%/,hje=/[\\^$*+?|[\]().{}]/g;function jn(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function pje(t){return t.replace(hje,"\\$&")}function K0(t){return new RegExp("^(?:"+t.map(pje).join("|")+")","i")}function X0(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function mje(t,e,n){var r=Gi.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function gje(t,e,n){var r=Gi.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function vje(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function yje(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function xje(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function n8(t,e,n){var r=Gi.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function r8(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function bje(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function wje(t,e,n){var r=Gi.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function _je(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function i8(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Sje(t,e,n){var r=Gi.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function s8(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Eje(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Tje(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Aje(t,e,n){var r=Gi.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Mje(t,e,n){var r=Gi.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Pje(t,e,n){var r=fje.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Cje(t,e,n){var r=Gi.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Rje(t,e,n){var r=Gi.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function a8(t,e){return jn(t.getDate(),e,2)}function Oje(t,e){return jn(t.getHours(),e,2)}function Nje(t,e){return jn(t.getHours()%12||12,e,2)}function Ije(t,e){return jn(1+Vw.count(Mu(t),t),e,3)}function kee(t,e){return jn(t.getMilliseconds(),e,3)}function kje(t,e){return kee(t,e)+"000"}function Dje(t,e){return jn(t.getMonth()+1,e,2)}function jje(t,e){return jn(t.getMinutes(),e,2)}function Lje(t,e){return jn(t.getSeconds(),e,2)}function Uje(t){var e=t.getDay();return e===0?7:e}function Fje(t,e){return jn(LA.count(Mu(t)-1,t),e,2)}function Dee(t){var e=t.getDay();return e>=4||e===0?Pv(t):Pv.ceil(t)}function Bje(t,e){return t=Dee(t),jn(Pv.count(Mu(t),t)+(Mu(t).getDay()===4),e,2)}function zje(t){return t.getDay()}function $je(t,e){return jn(IE.count(Mu(t)-1,t),e,2)}function Vje(t,e){return jn(t.getFullYear()%100,e,2)}function Hje(t,e){return t=Dee(t),jn(t.getFullYear()%100,e,2)}function Wje(t,e){return jn(t.getFullYear()%1e4,e,4)}function Gje(t,e){var n=t.getDay();return t=n>=4||n===0?Pv(t):Pv.ceil(t),jn(t.getFullYear()%1e4,e,4)}function qje(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+jn(e/60|0,"0",2)+jn(e%60,"0",2)}function o8(t,e){return jn(t.getUTCDate(),e,2)}function Kje(t,e){return jn(t.getUTCHours(),e,2)}function Xje(t,e){return jn(t.getUTCHours()%12||12,e,2)}function Yje(t,e){return jn(1+jA.count(Pu(t),t),e,3)}function jee(t,e){return jn(t.getUTCMilliseconds(),e,3)}function Jje(t,e){return jee(t,e)+"000"}function Qje(t,e){return jn(t.getUTCMonth()+1,e,2)}function Zje(t,e){return jn(t.getUTCMinutes(),e,2)}function eLe(t,e){return jn(t.getUTCSeconds(),e,2)}function tLe(t){var e=t.getUTCDay();return e===0?7:e}function nLe(t,e){return jn(UA.count(Pu(t)-1,t),e,2)}function Lee(t){var e=t.getUTCDay();return e>=4||e===0?Cv(t):Cv.ceil(t)}function rLe(t,e){return t=Lee(t),jn(Cv.count(Pu(t),t)+(Pu(t).getUTCDay()===4),e,2)}function iLe(t){return t.getUTCDay()}function sLe(t,e){return jn(kE.count(Pu(t)-1,t),e,2)}function aLe(t,e){return jn(t.getUTCFullYear()%100,e,2)}function oLe(t,e){return t=Lee(t),jn(t.getUTCFullYear()%100,e,2)}function lLe(t,e){return jn(t.getUTCFullYear()%1e4,e,4)}function cLe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Cv(t):Cv.ceil(t),jn(t.getUTCFullYear()%1e4,e,4)}function uLe(){return"+0000"}function l8(){return"%"}function c8(t){return+t}function u8(t){return Math.floor(+t/1e3)}var _g,Uee,Fee;dLe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function dLe(t){return _g=dje(t),Uee=_g.format,_g.parse,Fee=_g.utcFormat,_g.utcParse,_g}function fLe(t){return new Date(t)}function hLe(t){return t instanceof Date?+t:+new Date(+t)}function dU(t,e,n,r,i,s,a,o,l,c){var u=J3(),d=u.invert,h=u.domain,m=c(".%L"),b=c(":%S"),x=c("%I:%M"),v=c("%I %p"),_=c("%a %d"),E=c("%b %d"),T=c("%B"),A=c("%Y");function P(R){return(l(R)<R?m:o(R)<R?b:a(R)<R?x:s(R)<R?v:r(R)<R?i(R)<R?_:E:n(R)<R?T:A)(R)}return u.invert=function(R){return new Date(d(R))},u.domain=function(R){return arguments.length?h(Array.from(R,hLe)):h().map(fLe)},u.ticks=function(R){var N=h();return t(N[0],N[N.length-1],R??10)},u.tickFormat=function(R,N){return N==null?P:c(N)},u.nice=function(R){var N=h();return(!R||typeof R.range!="function")&&(R=e(N[0],N[N.length-1],R??10)),R?h(Tee(N,R)):u},u.copy=function(){return $w(u,dU(t,e,n,r,i,s,a,o,l,c))},u}function pLe(){return To.apply(dU(cje,uje,Mu,cU,LA,Vw,oU,sU,Kh,Uee).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function mLe(){return To.apply(dU(oje,lje,Pu,uU,UA,jA,lU,aU,Kh,Fee).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function FA(){var t=0,e=1,n,r,i,s,a=Xs,o=!1,l;function c(d){return d==null||isNaN(d=+d)?l:a(i===0?.5:(d=(s(d)-n)*i,o?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,e]=d,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(d){return arguments.length?(o=!!d,c):o},c.interpolator=function(d){return arguments.length?(a=d,c):a};function u(d){return function(h){var m,b;return arguments.length?([m,b]=h,a=d(m,b),c):[a(0),a(1)]}}return c.range=u(wy),c.rangeRound=u(Y3),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return s=d,n=d(t),r=d(e),i=n===r?0:1/(r-n),c}}function yf(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Bee(){var t=vf(FA()(Xs));return t.copy=function(){return yf(t,Bee())},ju.apply(t,arguments)}function zee(){var t=eU(FA()).domain([1,10]);return t.copy=function(){return yf(t,zee()).base(t.base())},ju.apply(t,arguments)}function $ee(){var t=tU(FA());return t.copy=function(){return yf(t,$ee()).constant(t.constant())},ju.apply(t,arguments)}function fU(){var t=nU(FA());return t.copy=function(){return yf(t,fU()).exponent(t.exponent())},ju.apply(t,arguments)}function gLe(){return fU.apply(null,arguments).exponent(.5)}function Vee(){var t=[],e=Xs;function n(r){if(r!=null&&!isNaN(r=+r))return e((Bw(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(qd),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>nDe(t,s/r))},n.copy=function(){return Vee(e).domain(t)},ju.apply(n,arguments)}function BA(){var t=0,e=.5,n=1,r=1,i,s,a,o,l,c=Xs,u,d=!1,h;function m(x){return isNaN(x=+x)?h:(x=.5+((x=+u(x))-s)*(r*x<r*s?o:l),c(d?Math.max(0,Math.min(1,x)):x))}m.domain=function(x){return arguments.length?([t,e,n]=x,i=u(t=+t),s=u(e=+e),a=u(n=+n),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),r=s<i?-1:1,m):[t,e,n]},m.clamp=function(x){return arguments.length?(d=!!x,m):d},m.interpolator=function(x){return arguments.length?(c=x,m):c};function b(x){return function(v){var _,E,T;return arguments.length?([_,E,T]=v,c=PDe(x,[_,E,T]),m):[c(0),c(.5),c(1)]}}return m.range=b(wy),m.rangeRound=b(Y3),m.unknown=function(x){return arguments.length?(h=x,m):h},function(x){return u=x,i=x(t),s=x(e),a=x(n),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),r=s<i?-1:1,m}}function Hee(){var t=vf(BA()(Xs));return t.copy=function(){return yf(t,Hee())},ju.apply(t,arguments)}function Wee(){var t=eU(BA()).domain([.1,1,10]);return t.copy=function(){return yf(t,Wee()).base(t.base())},ju.apply(t,arguments)}function Gee(){var t=tU(BA());return t.copy=function(){return yf(t,Gee()).constant(t.constant())},ju.apply(t,arguments)}function hU(){var t=nU(BA());return t.copy=function(){return yf(t,hU()).exponent(t.exponent())},ju.apply(t,arguments)}function vLe(){return hU.apply(null,arguments).exponent(.5)}const d8=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Rb,scaleDiverging:Hee,scaleDivergingLog:Wee,scaleDivergingPow:hU,scaleDivergingSqrt:vLe,scaleDivergingSymlog:Gee,scaleIdentity:Eee,scaleImplicit:Qk,scaleLinear:OE,scaleLog:Aee,scaleOrdinal:q3,scalePoint:Cx,scalePow:rU,scaleQuantile:Cee,scaleQuantize:Ree,scaleRadial:Pee,scaleSequential:Bee,scaleSequentialLog:zee,scaleSequentialPow:fU,scaleSequentialQuantile:Vee,scaleSequentialSqrt:gLe,scaleSequentialSymlog:$ee,scaleSqrt:JDe,scaleSymlog:Mee,scaleThreshold:Oee,scaleTime:pLe,scaleUtc:mLe,tickFormat:See},Symbol.toStringTag,{value:"Module"}));var rN,f8;function zA(){if(f8)return rN;f8=1;var t=vy();function e(n,r,i){for(var s=-1,a=n.length;++s<a;){var o=n[s],l=r(o);if(l!=null&&(c===void 0?l===l&&!t(l):i(l,c)))var c=l,u=o}return u}return rN=e,rN}var iN,h8;function qee(){if(h8)return iN;h8=1;function t(e,n){return e>n}return iN=t,iN}var sN,p8;function yLe(){if(p8)return sN;p8=1;var t=zA(),e=qee(),n=by();function r(i){return i&&i.length?t(i,n,e):void 0}return sN=r,sN}var xLe=yLe();const Bd=Ln(xLe);var aN,m8;function Kee(){if(m8)return aN;m8=1;function t(e,n){return e<n}return aN=t,aN}var oN,g8;function bLe(){if(g8)return oN;g8=1;var t=zA(),e=Kee(),n=by();function r(i){return i&&i.length?t(i,n,e):void 0}return oN=r,oN}var wLe=bLe();const $A=Ln(wLe);var lN,v8;function _Le(){if(v8)return lN;v8=1;var t=C3(),e=fc(),n=nee(),r=ya();function i(s,a){var o=r(s)?t:n;return o(s,e(a,3))}return lN=i,lN}var cN,y8;function SLe(){if(y8)return cN;y8=1;var t=eee(),e=_Le();function n(r,i){return t(e(r,i),1)}return cN=n,cN}var ELe=SLe();const TLe=Ln(ELe);var uN,x8;function ALe(){if(x8)return uN;x8=1;var t=$3();function e(n,r){return t(n,r)}return uN=e,uN}var MLe=ALe();const sf=Ln(MLe);var _y=1e9,PLe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},mU,Ar=!0,bo="[DecimalError] ",ip=bo+"Invalid argument: ",pU=bo+"Exponent out of range: ",Sy=Math.floor,Ih=Math.pow,CLe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,za,zi=1e7,yr=7,Xee=9007199254740991,DE=Sy(Xee/yr),Mt={};Mt.absoluteValue=Mt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Mt.comparedTo=Mt.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Mt.decimalPlaces=Mt.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*yr;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Mt.dividedBy=Mt.div=function(t){return vu(this,new this.constructor(t))};Mt.dividedToIntegerBy=Mt.idiv=function(t){var e=this,n=e.constructor;return or(vu(e,new n(t),0,1),n.precision)};Mt.equals=Mt.eq=function(t){return!this.cmp(t)};Mt.exponent=function(){return hi(this)};Mt.greaterThan=Mt.gt=function(t){return this.cmp(t)>0};Mt.greaterThanOrEqualTo=Mt.gte=function(t){return this.cmp(t)>=0};Mt.isInteger=Mt.isint=function(){return this.e>this.d.length-2};Mt.isNegative=Mt.isneg=function(){return this.s<0};Mt.isPositive=Mt.ispos=function(){return this.s>0};Mt.isZero=function(){return this.s===0};Mt.lessThan=Mt.lt=function(t){return this.cmp(t)<0};Mt.lessThanOrEqualTo=Mt.lte=function(t){return this.cmp(t)<1};Mt.logarithm=Mt.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(za))throw Error(bo+"NaN");if(n.s<1)throw Error(bo+(n.s?"NaN":"-Infinity"));return n.eq(za)?new r(0):(Ar=!1,e=vu(Db(n,s),Db(t,s),s),Ar=!0,or(e,i))};Mt.minus=Mt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Qee(e,t):Yee(e,(t.s=-t.s,t))};Mt.modulo=Mt.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(bo+"NaN");return n.s?(Ar=!1,e=vu(n,t,0,1).times(t),Ar=!0,n.minus(e)):or(new r(n),i)};Mt.naturalExponential=Mt.exp=function(){return Jee(this)};Mt.naturalLogarithm=Mt.ln=function(){return Db(this)};Mt.negated=Mt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Mt.plus=Mt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Yee(e,t):Qee(e,(t.s=-t.s,t))};Mt.precision=Mt.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ip+t);if(e=hi(i)+1,r=i.d.length-1,n=r*yr+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Mt.squareRoot=Mt.sqrt=function(){var t,e,n,r,i,s,a,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(bo+"NaN")}for(t=hi(o),Ar=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=Gl(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Sy((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=a=n+3;;)if(s=r,r=s.plus(vu(o,s,a+2)).times(.5),Gl(s.d).slice(0,a)===(e=Gl(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(or(s,n+1,0),s.times(s).eq(o)){r=s;break}}else if(e!="9999")break;a+=4}return Ar=!0,or(r,n)};Mt.times=Mt.mul=function(t){var e,n,r,i,s,a,o,l,c,u=this,d=u.constructor,h=u.d,m=(t=new d(t)).d;if(!u.s||!t.s)return new d(0);for(t.s*=u.s,n=u.e+t.e,l=h.length,c=m.length,l<c&&(s=h,h=m,m=s,a=l,l=c,c=a),s=[],a=l+c,r=a;r--;)s.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)o=s[i]+m[r]*h[i-r-1]+e,s[i--]=o%zi|0,e=o/zi|0;s[i]=(s[i]+e)%zi|0}for(;!s[--a];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Ar?or(t,d.precision):t};Mt.toDecimalPlaces=Mt.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(oc(t,0,_y),e===void 0?e=r.rounding:oc(e,0,8),or(n,t+hi(n)+1,e))};Mt.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=mp(r,!0):(oc(t,0,_y),e===void 0?e=i.rounding:oc(e,0,8),r=or(new i(r),t+1,e),n=mp(r,!0,t+1)),n};Mt.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?mp(i):(oc(t,0,_y),e===void 0?e=s.rounding:oc(e,0,8),r=or(new s(i),t+hi(i)+1,e),n=mp(r.abs(),!1,t+hi(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Mt.toInteger=Mt.toint=function(){var t=this,e=t.constructor;return or(new e(t),hi(t)+1,e.rounding)};Mt.toNumber=function(){return+this};Mt.toPower=Mt.pow=function(t){var e,n,r,i,s,a,o=this,l=o.constructor,c=12,u=+(t=new l(t));if(!t.s)return new l(za);if(o=new l(o),!o.s){if(t.s<1)throw Error(bo+"Infinity");return o}if(o.eq(za))return o;if(r=l.precision,t.eq(za))return or(o,r);if(e=t.e,n=t.d.length-1,a=e>=n,s=o.s,a){if((n=u<0?-u:u)<=Xee){for(i=new l(za),e=Math.ceil(r/yr+4),Ar=!1;n%2&&(i=i.times(o),w8(i.d,e)),n=Sy(n/2),n!==0;)o=o.times(o),w8(o.d,e);return Ar=!0,t.s<0?new l(za).div(i):or(i,r)}}else if(s<0)throw Error(bo+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,Ar=!1,i=t.times(Db(o,r+c)),Ar=!0,i=Jee(i),i.s=s,i};Mt.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=hi(i),r=mp(i,n<=s.toExpNeg||n>=s.toExpPos)):(oc(t,1,_y),e===void 0?e=s.rounding:oc(e,0,8),i=or(new s(i),t,e),n=hi(i),r=mp(i,t<=n||n<=s.toExpNeg,t)),r};Mt.toSignificantDigits=Mt.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(oc(t,1,_y),e===void 0?e=r.rounding:oc(e,0,8)),or(new r(n),t,e)};Mt.toString=Mt.valueOf=Mt.val=Mt.toJSON=Mt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=hi(t),n=t.constructor;return mp(t,e<=n.toExpNeg||e>=n.toExpPos)};function Yee(t,e){var n,r,i,s,a,o,l,c,u=t.constructor,d=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),Ar?or(e,d):e;if(l=t.d,c=e.d,a=t.e,i=e.e,l=l.slice(),s=a-i,s){for(s<0?(r=l,s=-s,o=c.length):(r=c,i=a,o=l.length),a=Math.ceil(d/yr),o=a>o?a+1:o+1,s>o&&(s=o,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(o=l.length,s=c.length,o-s<0&&(s=o,r=c,c=l,l=r),n=0;s;)n=(l[--s]=l[s]+c[s]+n)/zi|0,l[s]%=zi;for(n&&(l.unshift(n),++i),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=i,Ar?or(e,d):e}function oc(t,e,n){if(t!==~~t||t<e||t>n)throw Error(ip+t)}function Gl(t){var e,n,r,i=t.length-1,s="",a=t[0];if(i>0){for(s+=a,e=1;e<i;e++)r=t[e]+"",n=yr-r.length,n&&(s+=Dd(n)),s+=r;a=t[e],r=a+"",n=yr-r.length,n&&(s+=Dd(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var vu=(function(){function t(r,i){var s,a=0,o=r.length;for(r=r.slice();o--;)s=r[o]*i+a,r[o]=s%zi|0,a=s/zi|0;return a&&r.unshift(a),r}function e(r,i,s,a){var o,l;if(s!=a)l=s>a?1:-1;else for(o=l=0;o<s;o++)if(r[o]!=i[o]){l=r[o]>i[o]?1:-1;break}return l}function n(r,i,s){for(var a=0;s--;)r[s]-=a,a=r[s]<i[s]?1:0,r[s]=a*zi+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,a){var o,l,c,u,d,h,m,b,x,v,_,E,T,A,P,R,N,L,I=r.constructor,j=r.s==i.s?1:-1,B=r.d,H=i.d;if(!r.s)return new I(r);if(!i.s)throw Error(bo+"Division by zero");for(l=r.e-i.e,N=H.length,P=B.length,m=new I(j),b=m.d=[],c=0;H[c]==(B[c]||0);)++c;if(H[c]>(B[c]||0)&&--l,s==null?E=s=I.precision:a?E=s+(hi(r)-hi(i))+1:E=s,E<0)return new I(0);if(E=E/yr+2|0,c=0,N==1)for(u=0,H=H[0],E++;(c<P||u)&&E--;c++)T=u*zi+(B[c]||0),b[c]=T/H|0,u=T%H|0;else{for(u=zi/(H[0]+1)|0,u>1&&(H=t(H,u),B=t(B,u),N=H.length,P=B.length),A=N,x=B.slice(0,N),v=x.length;v<N;)x[v++]=0;L=H.slice(),L.unshift(0),R=H[0],H[1]>=zi/2&&++R;do u=0,o=e(H,x,N,v),o<0?(_=x[0],N!=v&&(_=_*zi+(x[1]||0)),u=_/R|0,u>1?(u>=zi&&(u=zi-1),d=t(H,u),h=d.length,v=x.length,o=e(d,x,h,v),o==1&&(u--,n(d,N<h?L:H,h))):(u==0&&(o=u=1),d=H.slice()),h=d.length,h<v&&d.unshift(0),n(x,d,v),o==-1&&(v=x.length,o=e(H,x,N,v),o<1&&(u++,n(x,N<v?L:H,v))),v=x.length):o===0&&(u++,x=[0]),b[c++]=u,o&&x[0]?x[v++]=B[A]||0:(x=[B[A]],v=1);while((A++<P||x[0]!==void 0)&&E--)}return b[0]||b.shift(),m.e=l,or(m,a?s+hi(m)+1:s)}})();function Jee(t,e){var n,r,i,s,a,o,l=0,c=0,u=t.constructor,d=u.precision;if(hi(t)>16)throw Error(pU+hi(t));if(!t.s)return new u(za);for(Ar=!1,o=d,a=new u(.03125);t.abs().gte(.1);)t=t.times(a),c+=5;for(r=Math.log(Ih(2,c))/Math.LN10*2+5|0,o+=r,n=i=s=new u(za),u.precision=o;;){if(i=or(i.times(t),o),n=n.times(++l),a=s.plus(vu(i,n,o)),Gl(a.d).slice(0,o)===Gl(s.d).slice(0,o)){for(;c--;)s=or(s.times(s),o);return u.precision=d,e==null?(Ar=!0,or(s,d)):s}s=a}}function hi(t){for(var e=t.e*yr,n=t.d[0];n>=10;n/=10)e++;return e}function dN(t,e,n){if(e>t.LN10.sd())throw Ar=!0,n&&(t.precision=n),Error(bo+"LN10 precision limit exceeded");return or(new t(t.LN10),e)}function Dd(t){for(var e="";t--;)e+="0";return e}function Db(t,e){var n,r,i,s,a,o,l,c,u,d=1,h=10,m=t,b=m.d,x=m.constructor,v=x.precision;if(m.s<1)throw Error(bo+(m.s?"NaN":"-Infinity"));if(m.eq(za))return new x(0);if(e==null?(Ar=!1,c=v):c=e,m.eq(10))return e==null&&(Ar=!0),dN(x,c);if(c+=h,x.precision=c,n=Gl(b),r=n.charAt(0),s=hi(m),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(t),n=Gl(m.d),r=n.charAt(0),d++;s=hi(m),r>1?(m=new x("0."+n),s++):m=new x(r+"."+n.slice(1))}else return l=dN(x,c+2,v).times(s+""),m=Db(new x(r+"."+n.slice(1)),c-h).plus(l),x.precision=v,e==null?(Ar=!0,or(m,v)):m;for(o=a=m=vu(m.minus(za),m.plus(za),c),u=or(m.times(m),c),i=3;;){if(a=or(a.times(u),c),l=o.plus(vu(a,new x(i),c)),Gl(l.d).slice(0,c)===Gl(o.d).slice(0,c))return o=o.times(2),s!==0&&(o=o.plus(dN(x,c+2,v).times(s+""))),o=vu(o,new x(d),c),x.precision=v,e==null?(Ar=!0,or(o,v)):o;o=l,i+=2}}function b8(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Sy(n/yr),t.d=[],r=(n+1)%yr,n<0&&(r+=yr),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=yr;r<i;)t.d.push(+e.slice(r,r+=yr));e=e.slice(r),r=yr-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Ar&&(t.e>DE||t.e<-DE))throw Error(pU+n)}else t.s=0,t.e=0,t.d=[0];return t}function or(t,e,n){var r,i,s,a,o,l,c,u,d=t.d;for(a=1,s=d[0];s>=10;s/=10)a++;if(r=e-a,r<0)r+=yr,i=e,c=d[u=0];else{if(u=Math.ceil((r+1)/yr),s=d.length,u>=s)return t;for(c=s=d[u],a=1;s>=10;s/=10)a++;r%=yr,i=r-yr+a}if(n!==void 0&&(s=Ih(10,a-i-1),o=c/s%10|0,l=e<0||d[u+1]!==void 0||c%s,l=n<4?(o||l)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||l||n==6&&(r>0?i>0?c/Ih(10,a-i):0:d[u-1])%10&1||n==(t.s<0?8:7))),e<1||!d[0])return l?(s=hi(t),d.length=1,e=e-s-1,d[0]=Ih(10,(yr-e%yr)%yr),t.e=Sy(-e/yr)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(r==0?(d.length=u,s=1,u--):(d.length=u+1,s=Ih(10,yr-r),d[u]=i>0?(c/Ih(10,a-i)%Ih(10,i)|0)*s:0),l)for(;;)if(u==0){(d[0]+=s)==zi&&(d[0]=1,++t.e);break}else{if(d[u]+=s,d[u]!=zi)break;d[u--]=0,s=1}for(r=d.length;d[--r]===0;)d.pop();if(Ar&&(t.e>DE||t.e<-DE))throw Error(pU+hi(t));return t}function Qee(t,e){var n,r,i,s,a,o,l,c,u,d,h=t.constructor,m=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),Ar?or(e,m):e;if(l=t.d,d=e.d,r=e.e,c=t.e,l=l.slice(),a=c-r,a){for(u=a<0,u?(n=l,a=-a,o=d.length):(n=d,r=c,o=l.length),i=Math.max(Math.ceil(m/yr),o)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=l.length,o=d.length,u=i<o,u&&(o=i),i=0;i<o;i++)if(l[i]!=d[i]){u=l[i]<d[i];break}a=0}for(u&&(n=l,l=d,d=n,e.s=-e.s),o=l.length,i=d.length-o;i>0;--i)l[o++]=0;for(i=d.length;i>a;){if(l[--i]<d[i]){for(s=i;s&&l[--s]===0;)l[s]=zi-1;--l[s],l[i]+=zi}l[i]-=d[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Ar?or(e,m):e):new h(0)}function mp(t,e,n){var r,i=hi(t),s=Gl(t.d),a=s.length;return e?(n&&(r=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+Dd(r):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Dd(-i-1)+s,n&&(r=n-a)>0&&(s+=Dd(r))):i>=a?(s+=Dd(i+1-a),n&&(r=n-i-1)>0&&(s=s+"."+Dd(r))):((r=i+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(s+="."),s+=Dd(r))),t.s<0?"-"+s:s}function w8(t,e){if(t.length>e)return t.length=e,!0}function Zee(t){var e,n,r;function i(s){var a=this;if(!(a instanceof i))return new i(s);if(a.constructor=i,s instanceof i){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(ip+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return b8(a,s.toString())}else if(typeof s!="string")throw Error(ip+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,CLe.test(s))b8(a,s);else throw Error(ip+s)}if(i.prototype=Mt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=Zee,i.config=i.set=RLe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function RLe(t){if(!t||typeof t!="object")throw Error(bo+"Object expected");var e,n,r,i=["precision",1,_y,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Sy(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(ip+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(ip+n+": "+r);return this}var mU=Zee(PLe);za=new mU(1);const tr=mU;function OLe(t){return DLe(t)||kLe(t)||ILe(t)||NLe()}function NLe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ILe(t,e){if(t){if(typeof t=="string")return nD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nD(t,e)}}function kLe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function DLe(t){if(Array.isArray(t))return nD(t)}function nD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var jLe=function(e){return e},ete={},tte=function(e){return e===ete},_8=function(e){return function n(){return arguments.length===0||arguments.length===1&&tte(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},LLe=function t(e,n){return e===1?n:_8(function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var a=i.filter(function(o){return o!==ete}).length;return a>=e?n.apply(void 0,i):t(e-a,_8(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=i.map(function(d){return tte(d)?l.shift():d});return n.apply(void 0,OLe(u).concat(l))}))})},VA=function(e){return LLe(e.length,e)},rD=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},ULe=VA(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),FLe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return jLe;var i=n.reverse(),s=i[0],a=i.slice(1);return function(){return a.reduce(function(o,l){return l(o)},s.apply(void 0,arguments))}},iD=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},nte=function(e){var n=null,r=null;return function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n&&s.every(function(o,l){return o===n[l]})||(n=s,r=e.apply(void 0,s)),r}};function BLe(t){var e;return t===0?e=1:e=Math.floor(new tr(t).abs().log(10).toNumber())+1,e}function zLe(t,e,n){for(var r=new tr(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var $Le=VA(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),VLe=VA(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),HLe=VA(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const HA={rangeStep:zLe,getDigitCount:BLe,interpolateNumber:$Le,uninterpolateNumber:VLe,uninterpolateTruncation:HLe};function sD(t){return qLe(t)||GLe(t)||rte(t)||WLe()}function WLe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GLe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function qLe(t){if(Array.isArray(t))return aD(t)}function jb(t,e){return YLe(t)||XLe(t,e)||rte(t,e)||KLe()}function KLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rte(t,e){if(t){if(typeof t=="string")return aD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aD(t,e)}}function aD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function XLe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,s=void 0;try{for(var a=t[Symbol.iterator](),o;!(r=(o=a.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,s=l}finally{try{!r&&a.return!=null&&a.return()}finally{if(i)throw s}}return n}}function YLe(t){if(Array.isArray(t))return t}function ite(t){var e=jb(t,2),n=e[0],r=e[1],i=n,s=r;return n>r&&(i=r,s=n),[i,s]}function ste(t,e,n){if(t.lte(0))return new tr(0);var r=HA.getDigitCount(t.toNumber()),i=new tr(10).pow(r),s=t.div(i),a=r!==1?.05:.1,o=new tr(Math.ceil(s.div(a).toNumber())).add(n).mul(a),l=o.mul(i);return e?l:new tr(Math.ceil(l))}function JLe(t,e,n){var r=1,i=new tr(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new tr(10).pow(HA.getDigitCount(t)-1),i=new tr(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new tr(Math.floor(t)))}else t===0?i=new tr(Math.floor((e-1)/2)):n||(i=new tr(Math.floor(t)));var a=Math.floor((e-1)/2),o=FLe(ULe(function(l){return i.add(new tr(l-a).mul(r)).toNumber()}),rD);return o(0,e)}function ate(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new tr(0),tickMin:new tr(0),tickMax:new tr(0)};var s=ste(new tr(e).sub(t).div(n-1),r,i),a;t<=0&&e>=0?a=new tr(0):(a=new tr(t).add(e).div(2),a=a.sub(new tr(a).mod(s)));var o=Math.ceil(a.sub(t).div(s).toNumber()),l=Math.ceil(new tr(e).sub(a).div(s).toNumber()),c=o+l+1;return c>n?ate(t,e,n,r,i+1):(c<n&&(l=e>0?l+(n-c):l,o=e>0?o:o+(n-c)),{step:s,tickMin:a.sub(new tr(o).mul(s)),tickMax:a.add(new tr(l).mul(s))})}function QLe(t){var e=jb(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),o=ite([n,r]),l=jb(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0){var d=u===1/0?[c].concat(sD(rD(0,i-1).map(function(){return 1/0}))):[].concat(sD(rD(0,i-1).map(function(){return-1/0})),[u]);return n>r?iD(d):d}if(c===u)return JLe(c,i,s);var h=ate(c,u,a,s),m=h.step,b=h.tickMin,x=h.tickMax,v=HA.rangeStep(b,x.add(new tr(.1).mul(m)),m);return n>r?iD(v):v}function ZLe(t,e){var n=jb(t,2),r=n[0],i=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=ite([r,i]),o=jb(a,2),l=o[0],c=o[1];if(l===-1/0||c===1/0)return[r,i];if(l===c)return[l];var u=Math.max(e,2),d=ste(new tr(c).sub(l).div(u-1),s,0),h=[].concat(sD(HA.rangeStep(new tr(l),new tr(c).sub(new tr(.99).mul(d)),d)),[c]);return r>i?iD(h):h}var e3e=nte(QLe),t3e=nte(ZLe),n3e="Invariant failed";function gp(t,e){throw new Error(n3e)}var r3e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Rv(t){"@babel/helpers - typeof";return Rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rv(t)}function jE(){return jE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jE.apply(this,arguments)}function i3e(t,e){return l3e(t)||o3e(t,e)||a3e(t,e)||s3e()}function s3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a3e(t,e){if(t){if(typeof t=="string")return S8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S8(t,e)}}function S8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o3e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function l3e(t){if(Array.isArray(t))return t}function c3e(t,e){if(t==null)return{};var n=u3e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function u3e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function d3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f3e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cte(r.key),r)}}function h3e(t,e,n){return e&&f3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function p3e(t,e,n){return e=LE(e),m3e(t,ote()?Reflect.construct(e,n||[],LE(t).constructor):e.apply(t,n))}function m3e(t,e){if(e&&(Rv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g3e(t)}function g3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ote(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ote=function(){return!!t})()}function LE(t){return LE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},LE(t)}function v3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oD(t,e)}function oD(t,e){return oD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},oD(t,e)}function lte(t,e,n){return e=cte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cte(t){var e=y3e(t,"string");return Rv(e)=="symbol"?e:e+""}function y3e(t,e){if(Rv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Hw=(function(t){function e(){return d3e(this,e),p3e(this,e,arguments)}return v3e(e,t),h3e(e,[{key:"render",value:function(){var r=this.props,i=r.offset,s=r.layout,a=r.width,o=r.dataKey,l=r.data,c=r.dataPointFormatter,u=r.xAxis,d=r.yAxis,h=c3e(r,r3e),m=Rt(h,!1);this.props.direction==="x"&&u.type!=="number"&&gp();var b=l.map(function(x){var v=c(x,o),_=v.x,E=v.y,T=v.value,A=v.errorVal;if(!A)return null;var P=[],R,N;if(Array.isArray(A)){var L=i3e(A,2);R=L[0],N=L[1]}else R=N=A;if(s==="vertical"){var I=u.scale,j=E+i,B=j+a,H=j-a,J=I(T-R),G=I(T+N);P.push({x1:G,y1:B,x2:G,y2:H}),P.push({x1:J,y1:j,x2:G,y2:j}),P.push({x1:J,y1:B,x2:J,y2:H})}else if(s==="horizontal"){var W=d.scale,K=_+i,te=K-a,z=K+a,V=W(T-R),X=W(T+N);P.push({x1:te,y1:X,x2:z,y2:X}),P.push({x1:K,y1:V,x2:K,y2:X}),P.push({x1:te,y1:V,x2:z,y2:V})}return ne.createElement(En,jE({className:"recharts-errorBar",key:"bar-".concat(P.map(function(q){return"".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2)}))},m),P.map(function(q){return ne.createElement("line",jE({},q,{key:"line-".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2)}))}))});return ne.createElement(En,{className:"recharts-errorBars"},b)}}])})(ne.Component);lte(Hw,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});lte(Hw,"displayName","ErrorBar");function Lb(t){"@babel/helpers - typeof";return Lb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lb(t)}function E8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E8(Object(n),!0).forEach(function(r){x3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function x3e(t,e,n){return e=b3e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b3e(t){var e=w3e(t,"string");return Lb(e)=="symbol"?e:e+""}function w3e(t,e){if(Lb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ute=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,s=e.legendContent,a=Da(n,tv);if(!a)return null;var o=tv.defaultProps,l=o!==void 0?wh(wh({},o),a.props):{},c;return a.props&&a.props.payload?c=a.props&&a.props.payload:s==="children"?c=(r||[]).reduce(function(u,d){var h=d.item,m=d.props,b=m.sectors||m.data||[];return u.concat(b.map(function(x){return{type:a.props.iconType||h.props.legendType,value:x.name,color:x.fill,payload:x}}))},[]):c=(r||[]).map(function(u){var d=u.item,h=d.type.defaultProps,m=h!==void 0?wh(wh({},h),d.props):{},b=m.dataKey,x=m.name,v=m.legendType,_=m.hide;return{inactive:_,dataKey:b,type:l.iconType||v||"square",color:gU(d),value:x||b,payload:m}}),wh(wh(wh({},l),tv.getWithHeight(a,i)),{},{payload:c,item:a})};function Ub(t){"@babel/helpers - typeof";return Ub=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ub(t)}function T8(t){return T3e(t)||E3e(t)||S3e(t)||_3e()}function _3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S3e(t,e){if(t){if(typeof t=="string")return lD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lD(t,e)}}function E3e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function T3e(t){if(Array.isArray(t))return lD(t)}function lD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function A8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A8(Object(n),!0).forEach(function(r){rv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rv(t,e,n){return e=A3e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A3e(t){var e=M3e(t,"string");return Ub(e)=="symbol"?e:e+""}function M3e(t,e){if(Ub(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ub(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jr(t,e,n){return an(t)||an(e)?n:Ri(e)?Wa(t,e,n):Ht(e)?e(t):n}function Rx(t,e,n,r){var i=TLe(t,function(o){return jr(o,e)});if(n==="number"){var s=i.filter(function(o){return et(o)||parseFloat(o)});return s.length?[$A(s),Bd(s)]:[1/0,-1/0]}var a=r?i.filter(function(o){return!an(o)}):i;return a.map(function(o){return Ri(o)||o instanceof Date?o:""})}var P3e=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,a=-1,o=(n=r?.length)!==null&&n!==void 0?n:0;if(o<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var l=s.range,c=0;c<o;c++){var u=c>0?i[c-1].coordinate:i[o-1].coordinate,d=i[c].coordinate,h=c>=o-1?i[0].coordinate:i[c+1].coordinate,m=void 0;if(qs(d-u)!==qs(h-d)){var b=[];if(qs(h-d)===qs(l[1]-l[0])){m=h;var x=d+l[1]-l[0];b[0]=Math.min(x,(x+u)/2),b[1]=Math.max(x,(x+u)/2)}else{m=u;var v=h+l[1]-l[0];b[0]=Math.min(d,(v+d)/2),b[1]=Math.max(d,(v+d)/2)}var _=[Math.min(d,(m+d)/2),Math.max(d,(m+d)/2)];if(e>_[0]&&e<=_[1]||e>=b[0]&&e<=b[1]){a=i[c].index;break}}else{var E=Math.min(u,h),T=Math.max(u,h);if(e>(E+d)/2&&e<=(T+d)/2){a=i[c].index;break}}}else for(var A=0;A<o;A++)if(A===0&&e<=(r[A].coordinate+r[A+1].coordinate)/2||A>0&&A<o-1&&e>(r[A].coordinate+r[A-1].coordinate)/2&&e<=(r[A].coordinate+r[A+1].coordinate)/2||A===o-1&&e>(r[A].coordinate+r[A-1].coordinate)/2){a=r[A].index;break}return a},gU=function(e){var n,r=e,i=r.type.displayName,s=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Vr(Vr({},e.type.defaultProps),e.props):e.props,a=s.stroke,o=s.fill,l;switch(i){case"Line":l=a;break;case"Area":case"Radar":l=a&&a!=="none"?a:o;break;default:l=o;break}return l},C3e=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var a={},o=Object.keys(s),l=0,c=o.length;l<c;l++)for(var u=s[o[l]].stackGroups,d=Object.keys(u),h=0,m=d.length;h<m;h++){var b=u[d[h]],x=b.items,v=b.cateAxisId,_=x.filter(function(N){return gu(N.type).indexOf("Bar")>=0});if(_&&_.length){var E=_[0].type.defaultProps,T=E!==void 0?Vr(Vr({},E),_[0].props):_[0].props,A=T.barSize,P=T[v];a[P]||(a[P]=[]);var R=an(A)?n:A;a[P].push({item:_[0],stackList:_.slice(1),barSize:an(R)?void 0:Ks(R,r,0)})}}return a},R3e=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,s=e.sizeList,a=s===void 0?[]:s,o=e.maxBarSize,l=a.length;if(l<1)return null;var c=Ks(n,i,0,!0),u,d=[];if(a[0].barSize===+a[0].barSize){var h=!1,m=i/l,b=a.reduce(function(A,P){return A+P.barSize||0},0);b+=(l-1)*c,b>=i&&(b-=(l-1)*c,c=0),b>=i&&m>0&&(h=!0,m*=.9,b=l*m);var x=(i-b)/2>>0,v={offset:x-c,size:0};u=a.reduce(function(A,P){var R={item:P.item,position:{offset:v.offset+v.size+c,size:h?m:P.barSize}},N=[].concat(T8(A),[R]);return v=N[N.length-1].position,P.stackList&&P.stackList.length&&P.stackList.forEach(function(L){N.push({item:L,position:v})}),N},d)}else{var _=Ks(r,i,0,!0);i-2*_-(l-1)*c<=0&&(c=0);var E=(i-2*_-(l-1)*c)/l;E>1&&(E>>=0);var T=o===+o?Math.min(E,o):E;u=a.reduce(function(A,P,R){var N=[].concat(T8(A),[{item:P.item,position:{offset:_+(E+c)*R+(E-T)/2,size:T}}]);return P.stackList&&P.stackList.length&&P.stackList.forEach(function(L){N.push({item:L,position:N[N.length-1].position})}),N},d)}return u},O3e=function(e,n,r,i){var s=r.children,a=r.width,o=r.margin,l=a-(o.left||0)-(o.right||0),c=ute({children:s,legendWidth:l});if(c){var u=i||{},d=u.width,h=u.height,m=c.align,b=c.verticalAlign,x=c.layout;if((x==="vertical"||x==="horizontal"&&b==="middle")&&m!=="center"&&et(e[m]))return Vr(Vr({},e),{},rv({},m,e[m]+(d||0)));if((x==="horizontal"||x==="vertical"&&m==="center")&&b!=="middle"&&et(e[b]))return Vr(Vr({},e),{},rv({},b,e[b]+(h||0)))}return e},N3e=function(e,n,r){return an(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},dte=function(e,n,r,i,s){var a=n.props.children,o=Ga(a,Hw).filter(function(c){return N3e(i,s,c.props.direction)});if(o&&o.length){var l=o.map(function(c){return c.props.dataKey});return e.reduce(function(c,u){var d=jr(u,r);if(an(d))return c;var h=Array.isArray(d)?[$A(d),Bd(d)]:[d,d],m=l.reduce(function(b,x){var v=jr(u,x,0),_=h[0]-Math.abs(Array.isArray(v)?v[0]:v),E=h[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(_,b[0]),Math.max(E,b[1])]},[1/0,-1/0]);return[Math.min(m[0],c[0]),Math.max(m[1],c[1])]},[1/0,-1/0])}return null},I3e=function(e,n,r,i,s){var a=n.map(function(o){return dte(e,o,r,s,i)}).filter(function(o){return!an(o)});return a&&a.length?a.reduce(function(o,l){return[Math.min(o[0],l[0]),Math.max(o[1],l[1])]},[1/0,-1/0]):null},fte=function(e,n,r,i,s){var a=n.map(function(l){var c=l.props.dataKey;return r==="number"&&c&&dte(e,l,c,i)||Rx(e,c,r,s)});if(r==="number")return a.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var o={};return a.reduce(function(l,c){for(var u=0,d=c.length;u<d;u++)o[c[u]]||(o[c[u]]=!0,l.push(c[u]));return l},[])},hte=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},pte=function(e,n,r,i){if(i)return e.map(function(l){return l.coordinate});var s,a,o=e.map(function(l){return l.coordinate===n&&(s=!0),l.coordinate===r&&(a=!0),l.coordinate});return s||o.push(n),a||o.push(r),o},fu=function(e,n,r){if(!e)return null;var i=e.scale,s=e.duplicateDomain,a=e.type,o=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(n||r)&&a==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&o?.length>=2?qs(o[0]-o[1])*2*c:c,n&&(e.ticks||e.niceTicks)){var u=(e.ticks||e.niceTicks).map(function(d){var h=s?s.indexOf(d):d;return{coordinate:i(h)+c,value:d,offset:c}});return u.filter(function(d){return!xy(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,h){return{coordinate:i(d)+c,value:d,index:h,offset:c}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(d){return{coordinate:i(d)+c,value:d,offset:c}}):i.domain().map(function(d,h){return{coordinate:i(d)+c,value:s?s[d]:d,index:h,offset:c}})},fN=new WeakMap,h1=function(e,n){if(typeof n!="function")return e;fN.has(e)||fN.set(e,new WeakMap);var r=fN.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},mte=function(e,n,r){var i=e.scale,s=e.type,a=e.layout,o=e.axisType;if(i==="auto")return a==="radial"&&o==="radiusAxis"?{scale:Rb(),realScaleType:"band"}:a==="radial"&&o==="angleAxis"?{scale:OE(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Cx(),realScaleType:"point"}:s==="category"?{scale:Rb(),realScaleType:"band"}:{scale:OE(),realScaleType:"linear"};if(fp(i)){var l="scale".concat(PA(i));return{scale:(d8[l]||Cx)(),realScaleType:d8[l]?l:"point"}}return Ht(i)?{scale:i}:{scale:Cx(),realScaleType:"point"}},M8=1e-4,gte=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),s=Math.min(i[0],i[1])-M8,a=Math.max(i[0],i[1])+M8,o=e(n[0]),l=e(n[r-1]);(o<s||o>a||l<s||l>a)&&e.domain([n[0],n[r-1]])}},k3e=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},D3e=function(e,n){if(!n||n.length!==2||!et(n[0])||!et(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),s=[e[0],e[1]];return(!et(e[0])||e[0]<r)&&(s[0]=r),(!et(e[1])||e[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<r&&(s[1]=r),s},j3e=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,a=0,o=0;o<n;++o){var l=xy(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1]):(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1])}},L3e=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,a=0;a<n;++a){var o=xy(e[a][r][1])?e[a][r][0]:e[a][r][1];o>=0?(e[a][r][0]=s,e[a][r][1]=s+o,s=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},U3e={sign:j3e,expand:TOe,none:wv,silhouette:AOe,wiggle:MOe,positive:L3e},F3e=function(e,n,r){var i=n.map(function(o){return o.props.dataKey}),s=U3e[r],a=EOe().keys(i).value(function(o,l){return+jr(o,l,0)}).order(Uk).offset(s);return a(e)},B3e=function(e,n,r,i,s,a){if(!e)return null;var o=a?n.reverse():n,l={},c=o.reduce(function(d,h){var m,b=(m=h.type)!==null&&m!==void 0&&m.defaultProps?Vr(Vr({},h.type.defaultProps),h.props):h.props,x=b.stackId,v=b.hide;if(v)return d;var _=b[r],E=d[_]||{hasStack:!1,stackGroups:{}};if(Ri(x)){var T=E.stackGroups[x]||{numericAxisId:r,cateAxisId:i,items:[]};T.items.push(h),E.hasStack=!0,E.stackGroups[x]=T}else E.stackGroups[jp("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[h]};return Vr(Vr({},d),{},rv({},_,E))},l),u={};return Object.keys(c).reduce(function(d,h){var m=c[h];if(m.hasStack){var b={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(x,v){var _=m.stackGroups[v];return Vr(Vr({},x),{},rv({},v,{numericAxisId:r,cateAxisId:i,items:_.items,stackedData:F3e(e,_.items,s)}))},b)}return Vr(Vr({},d),{},rv({},h,m))},u)},vte=function(e,n){var r=n.realScaleType,i=n.type,s=n.tickCount,a=n.originalDomain,o=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(s&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var c=e.domain();if(!c.length)return null;var u=e3e(c,s,o);return e.domain([$A(u),Bd(u)]),{niceTicks:u}}if(s&&i==="number"){var d=e.domain(),h=t3e(d,s,o);return{niceTicks:h}}return null};function UE(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,s=t.index,a=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!an(i[e.dataKey])){var o=hE(n,"value",i[e.dataKey]);if(o)return o.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var l=jr(i,an(a)?e.dataKey:a);return an(l)?null:e.scale(l)}var P8=function(e){var n=e.axis,r=e.ticks,i=e.offset,s=e.bandSize,a=e.entry,o=e.index;if(n.type==="category")return r[o]?r[o].coordinate+i:null;var l=jr(a,n.dataKey,n.domain[o]);return an(l)?null:n.scale(l)-s/2+i},z3e=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return i<=0&&s>=0?0:s<0?s:i}return r[0]},$3e=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Vr(Vr({},e.type.defaultProps),e.props):e.props,s=i.stackId;if(Ri(s)){var a=n[s];if(a){var o=a.items.indexOf(e);return o>=0?a.stackedData[o]:null}}return null},V3e=function(e){return e.reduce(function(n,r){return[$A(r.concat([n[0]]).filter(et)),Bd(r.concat([n[1]]).filter(et))]},[1/0,-1/0])},yte=function(e,n,r){return Object.keys(e).reduce(function(i,s){var a=e[s],o=a.stackedData,l=o.reduce(function(c,u){var d=V3e(u.slice(n,r+1));return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},C8=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,R8=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,cD=function(e,n,r){if(Ht(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(et(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(C8.test(e[0])){var s=+C8.exec(e[0])[1];i[0]=n[0]-s}else Ht(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(et(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(R8.test(e[1])){var a=+R8.exec(e[1])[1];i[1]=n[1]+a}else Ht(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},FE=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var s=H3(n,function(d){return d.coordinate}),a=1/0,o=1,l=s.length;o<l;o++){var c=s[o],u=s[o-1];a=Math.min((c.coordinate||0)-(u.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0},O8=function(e,n,r){return!e||!e.length||sf(e,Wa(r,"type.defaultProps.domain"))?n:e},xte=function(e,n){var r=e.type.defaultProps?Vr(Vr({},e.type.defaultProps),e.props):e.props,i=r.dataKey,s=r.name,a=r.unit,o=r.formatter,l=r.tooltipType,c=r.chartType,u=r.hide;return Vr(Vr({},Rt(e,!1)),{},{dataKey:i,unit:a,formatter:o,name:s||i,color:gU(e),value:jr(n,i),type:l,payload:n,chartType:c,hide:u})};function Fb(t){"@babel/helpers - typeof";return Fb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fb(t)}function N8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function iu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N8(Object(n),!0).forEach(function(r){bte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bte(t,e,n){return e=H3e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H3e(t){var e=W3e(t,"string");return Fb(e)=="symbol"?e:e+""}function W3e(t,e){if(Fb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Fb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function G3e(t,e){return Y3e(t)||X3e(t,e)||K3e(t,e)||q3e()}function q3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K3e(t,e){if(t){if(typeof t=="string")return I8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I8(t,e)}}function I8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function X3e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function Y3e(t){if(Array.isArray(t))return t}var BE=Math.PI/180,J3e=function(e){return e*180/Math.PI},Un=function(e,n,r,i){return{x:e+Math.cos(-BE*i)*r,y:n+Math.sin(-BE*i)*r}},wte=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},_te=function(e,n,r,i,s){var a=e.width,o=e.height,l=e.startAngle,c=e.endAngle,u=Ks(e.cx,a,a/2),d=Ks(e.cy,o,o/2),h=wte(a,o,r),m=Ks(e.innerRadius,h,0),b=Ks(e.outerRadius,h,h*.8),x=Object.keys(n);return x.reduce(function(v,_){var E=n[_],T=E.domain,A=E.reversed,P;if(an(E.range))i==="angleAxis"?P=[l,c]:i==="radiusAxis"&&(P=[m,b]),A&&(P=[P[1],P[0]]);else{P=E.range;var R=P,N=G3e(R,2);l=N[0],c=N[1]}var L=mte(E,s),I=L.realScaleType,j=L.scale;j.domain(T).range(P),gte(j);var B=vte(j,iu(iu({},E),{},{realScaleType:I})),H=iu(iu(iu({},E),B),{},{range:P,radius:b,realScaleType:I,scale:j,cx:u,cy:d,innerRadius:m,outerRadius:b,startAngle:l,endAngle:c});return iu(iu({},v),{},bte({},_,H))},{})},Q3e=function(e,n){var r=e.x,i=e.y,s=n.x,a=n.y;return Math.sqrt(Math.pow(r-s,2)+Math.pow(i-a,2))},Z3e=function(e,n){var r=e.x,i=e.y,s=n.cx,a=n.cy,o=Q3e({x:r,y:i},{x:s,y:a});if(o<=0)return{radius:o};var l=(r-s)/o,c=Math.acos(l);return i>a&&(c=2*Math.PI-c),{radius:o,angle:J3e(c),angleInRadian:c}},eUe=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),s=Math.floor(r/360),a=Math.min(i,s);return{startAngle:n-a*360,endAngle:r-a*360}},tUe=function(e,n){var r=n.startAngle,i=n.endAngle,s=Math.floor(r/360),a=Math.floor(i/360),o=Math.min(s,a);return e+o*360},k8=function(e,n){var r=e.x,i=e.y,s=Z3e({x:r,y:i},n),a=s.radius,o=s.angle,l=n.innerRadius,c=n.outerRadius;if(a<l||a>c)return!1;if(a===0)return!0;var u=eUe(n),d=u.startAngle,h=u.endAngle,m=o,b;if(d<=h){for(;m>h;)m-=360;for(;m<d;)m+=360;b=m>=d&&m<=h}else{for(;m>d;)m-=360;for(;m<h;)m+=360;b=m>=h&&m<=d}return b?iu(iu({},n),{},{radius:a,angle:tUe(m,n)}):null},Ste=function(e){return!M.isValidElement(e)&&!Ht(e)&&typeof e!="boolean"?e.className:""};function Bb(t){"@babel/helpers - typeof";return Bb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bb(t)}var nUe=["offset"];function rUe(t){return oUe(t)||aUe(t)||sUe(t)||iUe()}function iUe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sUe(t,e){if(t){if(typeof t=="string")return uD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uD(t,e)}}function aUe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function oUe(t){if(Array.isArray(t))return uD(t)}function uD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lUe(t,e){if(t==null)return{};var n=cUe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function cUe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function D8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ti(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D8(Object(n),!0).forEach(function(r){uUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uUe(t,e,n){return e=dUe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dUe(t){var e=fUe(t,"string");return Bb(e)=="symbol"?e:e+""}function fUe(t,e){if(Bb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zb(){return zb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zb.apply(this,arguments)}var hUe=function(e){var n=e.value,r=e.formatter,i=an(e.children)?n:e.children;return Ht(r)?r(i):i},pUe=function(e,n){var r=qs(n-e),i=Math.min(Math.abs(n-e),360);return r*i},mUe=function(e,n,r){var i=e.position,s=e.viewBox,a=e.offset,o=e.className,l=s,c=l.cx,u=l.cy,d=l.innerRadius,h=l.outerRadius,m=l.startAngle,b=l.endAngle,x=l.clockWise,v=(d+h)/2,_=pUe(m,b),E=_>=0?1:-1,T,A;i==="insideStart"?(T=m+E*a,A=x):i==="insideEnd"?(T=b-E*a,A=!x):i==="end"&&(T=b+E*a,A=x),A=_<=0?A:!A;var P=Un(c,u,v,T),R=Un(c,u,v,T+(A?1:-1)*359),N="M".concat(P.x,",").concat(P.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(A?0:1,`,
    `).concat(R.x,",").concat(R.y),L=an(e.id)?jp("recharts-radial-line-"):e.id;return ne.createElement("text",zb({},r,{dominantBaseline:"central",className:nn("recharts-radial-bar-label",o)}),ne.createElement("defs",null,ne.createElement("path",{id:L,d:N})),ne.createElement("textPath",{xlinkHref:"#".concat(L)},n))},gUe=function(e){var n=e.viewBox,r=e.offset,i=e.position,s=n,a=s.cx,o=s.cy,l=s.innerRadius,c=s.outerRadius,u=s.startAngle,d=s.endAngle,h=(u+d)/2;if(i==="outside"){var m=Un(a,o,c+r,h),b=m.x,x=m.y;return{x:b,y:x,textAnchor:b>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"end"};var v=(l+c)/2,_=Un(a,o,v,h),E=_.x,T=_.y;return{x:E,y:T,textAnchor:"middle",verticalAnchor:"middle"}},vUe=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,s=e.position,a=n,o=a.x,l=a.y,c=a.width,u=a.height,d=u>=0?1:-1,h=d*i,m=d>0?"end":"start",b=d>0?"start":"end",x=c>=0?1:-1,v=x*i,_=x>0?"end":"start",E=x>0?"start":"end";if(s==="top"){var T={x:o+c/2,y:l-d*i,textAnchor:"middle",verticalAnchor:m};return Ti(Ti({},T),r?{height:Math.max(l-r.y,0),width:c}:{})}if(s==="bottom"){var A={x:o+c/2,y:l+u+h,textAnchor:"middle",verticalAnchor:b};return Ti(Ti({},A),r?{height:Math.max(r.y+r.height-(l+u),0),width:c}:{})}if(s==="left"){var P={x:o-v,y:l+u/2,textAnchor:_,verticalAnchor:"middle"};return Ti(Ti({},P),r?{width:Math.max(P.x-r.x,0),height:u}:{})}if(s==="right"){var R={x:o+c+v,y:l+u/2,textAnchor:E,verticalAnchor:"middle"};return Ti(Ti({},R),r?{width:Math.max(r.x+r.width-R.x,0),height:u}:{})}var N=r?{width:c,height:u}:{};return s==="insideLeft"?Ti({x:o+v,y:l+u/2,textAnchor:E,verticalAnchor:"middle"},N):s==="insideRight"?Ti({x:o+c-v,y:l+u/2,textAnchor:_,verticalAnchor:"middle"},N):s==="insideTop"?Ti({x:o+c/2,y:l+h,textAnchor:"middle",verticalAnchor:b},N):s==="insideBottom"?Ti({x:o+c/2,y:l+u-h,textAnchor:"middle",verticalAnchor:m},N):s==="insideTopLeft"?Ti({x:o+v,y:l+h,textAnchor:E,verticalAnchor:b},N):s==="insideTopRight"?Ti({x:o+c-v,y:l+h,textAnchor:_,verticalAnchor:b},N):s==="insideBottomLeft"?Ti({x:o+v,y:l+u-h,textAnchor:E,verticalAnchor:m},N):s==="insideBottomRight"?Ti({x:o+c-v,y:l+u-h,textAnchor:_,verticalAnchor:m},N):yy(s)&&(et(s.x)||Gh(s.x))&&(et(s.y)||Gh(s.y))?Ti({x:o+Ks(s.x,c),y:l+Ks(s.y,u),textAnchor:"end",verticalAnchor:"end"},N):Ti({x:o+c/2,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},N)},yUe=function(e){return"cx"in e&&et(e.cx)};function Vi(t){var e=t.offset,n=e===void 0?5:e,r=lUe(t,nUe),i=Ti({offset:n},r),s=i.viewBox,a=i.position,o=i.value,l=i.children,c=i.content,u=i.className,d=u===void 0?"":u,h=i.textBreakAll;if(!s||an(o)&&an(l)&&!M.isValidElement(c)&&!Ht(c))return null;if(M.isValidElement(c))return M.cloneElement(c,i);var m;if(Ht(c)){if(m=M.createElement(c,i),M.isValidElement(m))return m}else m=hUe(i);var b=yUe(s),x=Rt(i,!0);if(b&&(a==="insideStart"||a==="insideEnd"||a==="end"))return mUe(i,m,x);var v=b?gUe(i):vUe(i);return ne.createElement(pp,zb({className:nn("recharts-label",d)},x,v,{breakAll:h}),m)}Vi.displayName="Label";var Ete=function(e){var n=e.cx,r=e.cy,i=e.angle,s=e.startAngle,a=e.endAngle,o=e.r,l=e.radius,c=e.innerRadius,u=e.outerRadius,d=e.x,h=e.y,m=e.top,b=e.left,x=e.width,v=e.height,_=e.clockWise,E=e.labelViewBox;if(E)return E;if(et(x)&&et(v)){if(et(d)&&et(h))return{x:d,y:h,width:x,height:v};if(et(m)&&et(b))return{x:m,y:b,width:x,height:v}}return et(d)&&et(h)?{x:d,y:h,width:0,height:0}:et(n)&&et(r)?{cx:n,cy:r,startAngle:s||i||0,endAngle:a||i||0,innerRadius:c||0,outerRadius:u||l||o||0,clockWise:_}:e.viewBox?e.viewBox:{}},xUe=function(e,n){return e?e===!0?ne.createElement(Vi,{key:"label-implicit",viewBox:n}):Ri(e)?ne.createElement(Vi,{key:"label-implicit",viewBox:n,value:e}):M.isValidElement(e)?e.type===Vi?M.cloneElement(e,{key:"label-implicit",viewBox:n}):ne.createElement(Vi,{key:"label-implicit",content:e,viewBox:n}):Ht(e)?ne.createElement(Vi,{key:"label-implicit",content:e,viewBox:n}):yy(e)?ne.createElement(Vi,zb({viewBox:n},e,{key:"label-implicit"})):null:null},bUe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,s=Ete(e),a=Ga(i,Vi).map(function(l,c){return M.cloneElement(l,{viewBox:n||s,key:"label-".concat(c)})});if(!r)return a;var o=xUe(e.label,n||s);return[o].concat(rUe(a))};Vi.parseViewBox=Ete;Vi.renderCallByParent=bUe;var hN,j8;function wUe(){if(j8)return hN;j8=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return hN=t,hN}var _Ue=wUe();const Tte=Ln(_Ue);function $b(t){"@babel/helpers - typeof";return $b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$b(t)}var SUe=["valueAccessor"],EUe=["data","dataKey","clockWise","id","textBreakAll"];function TUe(t){return CUe(t)||PUe(t)||MUe(t)||AUe()}function AUe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MUe(t,e){if(t){if(typeof t=="string")return dD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dD(t,e)}}function PUe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function CUe(t){if(Array.isArray(t))return dD(t)}function dD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zE(){return zE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zE.apply(this,arguments)}function L8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function U8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L8(Object(n),!0).forEach(function(r){RUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RUe(t,e,n){return e=OUe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OUe(t){var e=NUe(t,"string");return $b(e)=="symbol"?e:e+""}function NUe(t,e){if($b(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($b(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function F8(t,e){if(t==null)return{};var n=IUe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function IUe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var kUe=function(e){return Array.isArray(e.value)?Tte(e.value):e.value};function xl(t){var e=t.valueAccessor,n=e===void 0?kUe:e,r=F8(t,SUe),i=r.data,s=r.dataKey,a=r.clockWise,o=r.id,l=r.textBreakAll,c=F8(r,EUe);return!i||!i.length?null:ne.createElement(En,{className:"recharts-label-list"},i.map(function(u,d){var h=an(s)?n(u,d):jr(u&&u.payload,s),m=an(o)?{}:{id:"".concat(o,"-").concat(d)};return ne.createElement(Vi,zE({},Rt(u,!0),c,m,{parentViewBox:u.parentViewBox,value:h,textBreakAll:l,viewBox:Vi.parseViewBox(an(a)?u:U8(U8({},u),{},{clockWise:a})),key:"label-".concat(d),index:d}))}))}xl.displayName="LabelList";function DUe(t,e){return t?t===!0?ne.createElement(xl,{key:"labelList-implicit",data:e}):ne.isValidElement(t)||Ht(t)?ne.createElement(xl,{key:"labelList-implicit",data:e,content:t}):yy(t)?ne.createElement(xl,zE({data:e},t,{key:"labelList-implicit"})):null:null}function jUe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=Ga(r,xl).map(function(a,o){return M.cloneElement(a,{data:e,key:"labelList-".concat(o)})});if(!n)return i;var s=DUe(t.label,e);return[s].concat(TUe(i))}xl.renderCallByParent=jUe;function Vb(t){"@babel/helpers - typeof";return Vb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vb(t)}function fD(){return fD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fD.apply(this,arguments)}function B8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function z8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B8(Object(n),!0).forEach(function(r){LUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LUe(t,e,n){return e=UUe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UUe(t){var e=FUe(t,"string");return Vb(e)=="symbol"?e:e+""}function FUe(t,e){if(Vb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var BUe=function(e,n){var r=qs(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},p1=function(e){var n=e.cx,r=e.cy,i=e.radius,s=e.angle,a=e.sign,o=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,u=l*(o?1:-1)+i,d=Math.asin(l/u)/BE,h=c?s:s+a*d,m=Un(n,r,u,h),b=Un(n,r,i,h),x=c?s-a*d:s,v=Un(n,r,u*Math.cos(d*BE),x);return{center:m,circleTangency:b,lineTangency:v,theta:d}},Ate=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,a=e.startAngle,o=e.endAngle,l=BUe(a,o),c=a+l,u=Un(n,r,s,a),d=Un(n,r,s,c),h="M ".concat(u.x,",").concat(u.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(a>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(i>0){var m=Un(n,r,i,a),b=Un(n,r,i,c);h+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(a<=c),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(n,",").concat(r," Z");return h},zUe=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,a=e.cornerRadius,o=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,u=e.endAngle,d=qs(u-c),h=p1({cx:n,cy:r,radius:s,angle:c,sign:d,cornerRadius:a,cornerIsExternal:l}),m=h.circleTangency,b=h.lineTangency,x=h.theta,v=p1({cx:n,cy:r,radius:s,angle:u,sign:-d,cornerRadius:a,cornerIsExternal:l}),_=v.circleTangency,E=v.lineTangency,T=v.theta,A=l?Math.abs(c-u):Math.abs(c-u)-x-T;if(A<0)return o?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):Ate({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:c,endAngle:u});var P="M ".concat(b.x,",").concat(b.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(A>180),",").concat(+(d<0),",").concat(_.x,",").concat(_.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(E.x,",").concat(E.y,`
  `);if(i>0){var R=p1({cx:n,cy:r,radius:i,angle:c,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),N=R.circleTangency,L=R.lineTangency,I=R.theta,j=p1({cx:n,cy:r,radius:i,angle:u,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),B=j.circleTangency,H=j.lineTangency,J=j.theta,G=l?Math.abs(c-u):Math.abs(c-u)-I-J;if(G<0&&a===0)return"".concat(P,"L").concat(n,",").concat(r,"Z");P+="L".concat(H.x,",").concat(H.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(B.x,",").concat(B.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(G>180),",").concat(+(d>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(L.x,",").concat(L.y,"Z")}else P+="L".concat(n,",").concat(r,"Z");return P},$Ue={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Mte=function(e){var n=z8(z8({},$Ue),e),r=n.cx,i=n.cy,s=n.innerRadius,a=n.outerRadius,o=n.cornerRadius,l=n.forceCornerRadius,c=n.cornerIsExternal,u=n.startAngle,d=n.endAngle,h=n.className;if(a<s||u===d)return null;var m=nn("recharts-sector",h),b=a-s,x=Ks(o,b,0,!0),v;return x>0&&Math.abs(u-d)<360?v=zUe({cx:r,cy:i,innerRadius:s,outerRadius:a,cornerRadius:Math.min(x,b/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):v=Ate({cx:r,cy:i,innerRadius:s,outerRadius:a,startAngle:u,endAngle:d}),ne.createElement("path",fD({},Rt(n,!0),{className:m,d:v,role:"img"}))};function Hb(t){"@babel/helpers - typeof";return Hb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hb(t)}function hD(){return hD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hD.apply(this,arguments)}function $8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function V8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$8(Object(n),!0).forEach(function(r){VUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VUe(t,e,n){return e=HUe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HUe(t){var e=WUe(t,"string");return Hb(e)=="symbol"?e:e+""}function WUe(t,e){if(Hb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Hb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var H8={curveBasisClosed:hOe,curveBasisOpen:pOe,curveBasis:fOe,curveBumpX:Q2e,curveBumpY:Z2e,curveLinearClosed:mOe,curveLinear:RA,curveMonotoneX:gOe,curveMonotoneY:vOe,curveNatural:yOe,curveStep:xOe,curveStepAfter:wOe,curveStepBefore:bOe},m1=function(e){return e.x===+e.x&&e.y===+e.y},Y0=function(e){return e.x},J0=function(e){return e.y},GUe=function(e,n){if(Ht(e))return e;var r="curve".concat(PA(e));return(r==="curveMonotone"||r==="curveBump")&&n?H8["".concat(r).concat(n==="vertical"?"Y":"X")]:H8[r]||RA},qUe=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,s=i===void 0?[]:i,a=e.baseLine,o=e.layout,l=e.connectNulls,c=l===void 0?!1:l,u=GUe(r,o),d=c?s.filter(function(x){return m1(x)}):s,h;if(Array.isArray(a)){var m=c?a.filter(function(x){return m1(x)}):a,b=d.map(function(x,v){return V8(V8({},x),{},{base:m[v]})});return o==="vertical"?h=a1().y(J0).x1(Y0).x0(function(x){return x.base.x}):h=a1().x(Y0).y1(J0).y0(function(x){return x.base.y}),h.defined(m1).curve(u),h(b)}return o==="vertical"&&et(a)?h=a1().y(J0).x1(Y0).x0(a):et(a)?h=a1().x(Y0).y1(J0).y0(a):h=SZ().x(Y0).y(J0),h.defined(m1).curve(u),h(d)},sp=function(e){var n=e.className,r=e.points,i=e.path,s=e.pathRef;if((!r||!r.length)&&!i)return null;var a=r&&r.length?qUe(e):i;return M.createElement("path",hD({},Rt(e,!1),pE(e),{className:nn("recharts-curve",n),d:a,ref:s}))},KUe=Object.getOwnPropertyNames,XUe=Object.getOwnPropertySymbols,YUe=Object.prototype.hasOwnProperty;function W8(t,e){return function(r,i,s){return t(r,i,s)&&e(r,i,s)}}function g1(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var s=i.cache,a=s.get(n),o=s.get(r);if(a&&o)return a===r&&o===n;s.set(n,r),s.set(r,n);var l=t(n,r,i);return s.delete(n),s.delete(r),l}}function G8(t){return KUe(t).concat(XUe(t))}var JUe=Object.hasOwn||(function(t,e){return YUe.call(t,e)});function Fp(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var QUe="__v",ZUe="__o",eFe="_owner",q8=Object.getOwnPropertyDescriptor,K8=Object.keys;function tFe(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function nFe(t,e){return Fp(t.getTime(),e.getTime())}function rFe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function iFe(t,e){return t===e}function X8(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),s=t.entries(),a,o,l=0;(a=s.next())&&!a.done;){for(var c=e.entries(),u=!1,d=0;(o=c.next())&&!o.done;){if(i[d]){d++;continue}var h=a.value,m=o.value;if(n.equals(h[0],m[0],l,d,t,e,n)&&n.equals(h[1],m[1],h[0],m[0],t,e,n)){u=i[d]=!0;break}d++}if(!u)return!1;l++}return!0}var sFe=Fp;function aFe(t,e,n){var r=K8(t),i=r.length;if(K8(e).length!==i)return!1;for(;i-- >0;)if(!Pte(t,e,n,r[i]))return!1;return!0}function Q0(t,e,n){var r=G8(t),i=r.length;if(G8(e).length!==i)return!1;for(var s,a,o;i-- >0;)if(s=r[i],!Pte(t,e,n,s)||(a=q8(t,s),o=q8(e,s),(a||o)&&(!a||!o||a.configurable!==o.configurable||a.enumerable!==o.enumerable||a.writable!==o.writable)))return!1;return!0}function oFe(t,e){return Fp(t.valueOf(),e.valueOf())}function lFe(t,e){return t.source===e.source&&t.flags===e.flags}function Y8(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),s=t.values(),a,o;(a=s.next())&&!a.done;){for(var l=e.values(),c=!1,u=0;(o=l.next())&&!o.done;){if(!i[u]&&n.equals(a.value,o.value,a.value,o.value,t,e,n)){c=i[u]=!0;break}u++}if(!c)return!1}return!0}function cFe(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function uFe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function Pte(t,e,n,r){return(r===eFe||r===ZUe||r===QUe)&&(t.$$typeof||e.$$typeof)?!0:JUe(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var dFe="[object Arguments]",fFe="[object Boolean]",hFe="[object Date]",pFe="[object Error]",mFe="[object Map]",gFe="[object Number]",vFe="[object Object]",yFe="[object RegExp]",xFe="[object Set]",bFe="[object String]",wFe="[object URL]",_Fe=Array.isArray,J8=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Q8=Object.assign,SFe=Object.prototype.toString.call.bind(Object.prototype.toString);function EFe(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,s=t.areMapsEqual,a=t.areNumbersEqual,o=t.areObjectsEqual,l=t.arePrimitiveWrappersEqual,c=t.areRegExpsEqual,u=t.areSetsEqual,d=t.areTypedArraysEqual,h=t.areUrlsEqual;return function(b,x,v){if(b===x)return!0;if(b==null||x==null)return!1;var _=typeof b;if(_!==typeof x)return!1;if(_!=="object")return _==="number"?a(b,x,v):_==="function"?i(b,x,v):!1;var E=b.constructor;if(E!==x.constructor)return!1;if(E===Object)return o(b,x,v);if(_Fe(b))return e(b,x,v);if(J8!=null&&J8(b))return d(b,x,v);if(E===Date)return n(b,x,v);if(E===RegExp)return c(b,x,v);if(E===Map)return s(b,x,v);if(E===Set)return u(b,x,v);var T=SFe(b);return T===hFe?n(b,x,v):T===yFe?c(b,x,v):T===mFe?s(b,x,v):T===xFe?u(b,x,v):T===vFe?typeof b.then!="function"&&typeof x.then!="function"&&o(b,x,v):T===wFe?h(b,x,v):T===pFe?r(b,x,v):T===dFe?o(b,x,v):T===fFe||T===gFe||T===bFe?l(b,x,v):!1}}function TFe(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?Q0:tFe,areDatesEqual:nFe,areErrorsEqual:rFe,areFunctionsEqual:iFe,areMapsEqual:r?W8(X8,Q0):X8,areNumbersEqual:sFe,areObjectsEqual:r?Q0:aFe,arePrimitiveWrappersEqual:oFe,areRegExpsEqual:lFe,areSetsEqual:r?W8(Y8,Q0):Y8,areTypedArraysEqual:r?Q0:cFe,areUrlsEqual:uFe};if(n&&(i=Q8({},i,n(i))),e){var s=g1(i.areArraysEqual),a=g1(i.areMapsEqual),o=g1(i.areObjectsEqual),l=g1(i.areSetsEqual);i=Q8({},i,{areArraysEqual:s,areMapsEqual:a,areObjectsEqual:o,areSetsEqual:l})}return i}function AFe(t){return function(e,n,r,i,s,a,o){return t(e,n,o)}}function MFe(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,s=t.strict;if(r)return function(l,c){var u=r(),d=u.cache,h=d===void 0?e?new WeakMap:void 0:d,m=u.meta;return n(l,c,{cache:h,equals:i,meta:m,strict:s})};if(e)return function(l,c){return n(l,c,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var a={cache:void 0,equals:i,meta:void 0,strict:s};return function(l,c){return n(l,c,a)}}var PFe=xf();xf({strict:!0});xf({circular:!0});xf({circular:!0,strict:!0});xf({createInternalComparator:function(){return Fp}});xf({strict:!0,createInternalComparator:function(){return Fp}});xf({circular:!0,createInternalComparator:function(){return Fp}});xf({circular:!0,createInternalComparator:function(){return Fp},strict:!0});function xf(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,s=t.strict,a=s===void 0?!1:s,o=TFe(t),l=EFe(o),c=r?r(l):AFe(l);return MFe({circular:n,comparator:l,createState:i,equals:c,strict:a})}function CFe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function Z8(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(s){n<0&&(n=s),s-n>e?(t(s),n=-1):CFe(i)};requestAnimationFrame(r)}function pD(t){"@babel/helpers - typeof";return pD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pD(t)}function RFe(t){return kFe(t)||IFe(t)||NFe(t)||OFe()}function OFe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NFe(t,e){if(t){if(typeof t=="string")return eG(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eG(t,e)}}function eG(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function IFe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function kFe(t){if(Array.isArray(t))return t}function DFe(){var t={},e=function(){return null},n=!1,r=function i(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var a=s,o=RFe(a),l=o[0],c=o.slice(1);if(typeof l=="number"){Z8(i.bind(null,c),l);return}i(l),Z8(i.bind(null,c));return}pD(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,r(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function Wb(t){"@babel/helpers - typeof";return Wb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wb(t)}function tG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tG(Object(n),!0).forEach(function(r){Cte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cte(t,e,n){return e=jFe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jFe(t){var e=LFe(t,"string");return Wb(e)==="symbol"?e:String(e)}function LFe(t,e){if(Wb(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wb(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var UFe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(s){return i.includes(s)})})},FFe=function(e){return e},BFe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Ox=function(e,n){return Object.keys(n).reduce(function(r,i){return nG(nG({},r),{},Cte({},i,e(i,n[i])))},{})},rG=function(e,n,r){return e.map(function(i){return"".concat(BFe(i)," ").concat(n,"ms ").concat(r)}).join(",")};function zFe(t,e){return HFe(t)||VFe(t,e)||Rte(t,e)||$Fe()}function $Fe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VFe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function HFe(t){if(Array.isArray(t))return t}function WFe(t){return KFe(t)||qFe(t)||Rte(t)||GFe()}function GFe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rte(t,e){if(t){if(typeof t=="string")return mD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mD(t,e)}}function qFe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function KFe(t){if(Array.isArray(t))return mD(t)}function mD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var $E=1e-4,Ote=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},Nte=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},iG=function(e,n){return function(r){var i=Ote(e,n);return Nte(i,r)}},XFe=function(e,n){return function(r){var i=Ote(e,n),s=[].concat(WFe(i.map(function(a,o){return a*o}).slice(1)),[0]);return Nte(s,r)}},sG=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],s=n[1],a=n[2],o=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,s=0,a=1,o=1;break;case"ease":i=.25,s=.1,a=.25,o=1;break;case"ease-in":i=.42,s=0,a=1,o=1;break;case"ease-out":i=.42,s=0,a=.58,o=1;break;case"ease-in-out":i=0,s=0,a=.58,o=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),u=zFe(c,4);i=u[0],s=u[1],a=u[2],o=u[3]}}}var d=iG(i,a),h=iG(s,o),m=XFe(i,a),b=function(_){return _>1?1:_<0?0:_},x=function(_){for(var E=_>1?1:_,T=E,A=0;A<8;++A){var P=d(T)-E,R=m(T);if(Math.abs(P-E)<$E||R<$E)return h(T);T=b(T-P/R)}return h(T)};return x.isStepper=!1,x},YFe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,s=i===void 0?8:i,a=e.dt,o=a===void 0?17:a,l=function(u,d,h){var m=-(u-d)*r,b=h*s,x=h+(m-b)*o/1e3,v=h*o/1e3+u;return Math.abs(v-d)<$E&&Math.abs(x)<$E?[d,0]:[v,x]};return l.isStepper=!0,l.dt=o,l},JFe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return sG(i);case"spring":return YFe();default:if(i.split("(")[0]==="cubic-bezier")return sG(i)}return typeof i=="function"?i:null};function Gb(t){"@babel/helpers - typeof";return Gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gb(t)}function aG(t){return eBe(t)||ZFe(t)||Ite(t)||QFe()}function QFe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZFe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function eBe(t){if(Array.isArray(t))return vD(t)}function oG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ss(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oG(Object(n),!0).forEach(function(r){gD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gD(t,e,n){return e=tBe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tBe(t){var e=nBe(t,"string");return Gb(e)==="symbol"?e:String(e)}function nBe(t,e){if(Gb(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Gb(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rBe(t,e){return aBe(t)||sBe(t,e)||Ite(t,e)||iBe()}function iBe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ite(t,e){if(t){if(typeof t=="string")return vD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vD(t,e)}}function vD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function sBe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function aBe(t){if(Array.isArray(t))return t}var VE=function(e,n,r){return e+(n-e)*r},yD=function(e){var n=e.from,r=e.to;return n!==r},oBe=function t(e,n,r){var i=Ox(function(s,a){if(yD(a)){var o=e(a.from,a.to,a.velocity),l=rBe(o,2),c=l[0],u=l[1];return ss(ss({},a),{},{from:c,velocity:u})}return a},n);return r<1?Ox(function(s,a){return yD(a)?ss(ss({},a),{},{velocity:VE(a.velocity,i[s].velocity,r),from:VE(a.from,i[s].from,r)}):a},n):t(e,i,r-1)};const lBe=(function(t,e,n,r,i){var s=UFe(t,e),a=s.reduce(function(v,_){return ss(ss({},v),{},gD({},_,[t[_],e[_]]))},{}),o=s.reduce(function(v,_){return ss(ss({},v),{},gD({},_,{from:t[_],velocity:0,to:e[_]}))},{}),l=-1,c,u,d=function(){return null},h=function(){return Ox(function(_,E){return E.from},o)},m=function(){return!Object.values(o).filter(yD).length},b=function(_){c||(c=_);var E=_-c,T=E/n.dt;o=oBe(n,o,T),i(ss(ss(ss({},t),e),h())),c=_,m()||(l=requestAnimationFrame(d))},x=function(_){u||(u=_);var E=(_-u)/r,T=Ox(function(P,R){return VE.apply(void 0,aG(R).concat([n(E)]))},a);if(i(ss(ss(ss({},t),e),T)),E<1)l=requestAnimationFrame(d);else{var A=Ox(function(P,R){return VE.apply(void 0,aG(R).concat([n(1)]))},a);i(ss(ss(ss({},t),e),A))}};return d=n.isStepper?b:x,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}});function Ov(t){"@babel/helpers - typeof";return Ov=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ov(t)}var cBe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function uBe(t,e){if(t==null)return{};var n=dBe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function dBe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function pN(t){return mBe(t)||pBe(t)||hBe(t)||fBe()}function fBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hBe(t,e){if(t){if(typeof t=="string")return xD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xD(t,e)}}function pBe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mBe(t){if(Array.isArray(t))return xD(t)}function xD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lG(Object(n),!0).forEach(function(r){lx(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lx(t,e,n){return e=kte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gBe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vBe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kte(r.key),r)}}function yBe(t,e,n){return e&&vBe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function kte(t){var e=xBe(t,"string");return Ov(e)==="symbol"?e:String(e)}function xBe(t,e){if(Ov(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ov(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bBe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bD(t,e)}function bD(t,e){return bD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},bD(t,e)}function wBe(t){var e=_Be();return function(){var r=HE(t),i;if(e){var s=HE(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return wD(this,i)}}function wD(t,e){if(e&&(Ov(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _D(t)}function _D(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _Be(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function HE(t){return HE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},HE(t)}var wo=(function(t){bBe(n,t);var e=wBe(n);function n(r,i){var s;gBe(this,n),s=e.call(this,r,i);var a=s.props,o=a.isActive,l=a.attributeName,c=a.from,u=a.to,d=a.steps,h=a.children,m=a.duration;if(s.handleStyleChange=s.handleStyleChange.bind(_D(s)),s.changeStyle=s.changeStyle.bind(_D(s)),!o||m<=0)return s.state={style:{}},typeof h=="function"&&(s.state={style:u}),wD(s);if(d&&d.length)s.state={style:d[0].style};else if(c){if(typeof h=="function")return s.state={style:c},wD(s);s.state={style:l?lx({},l,c):c}}else s.state={style:{}};return s}return yBe(n,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,a=i.canBegin;this.mounted=!0,!(!s||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,a=s.isActive,o=s.canBegin,l=s.attributeName,c=s.shouldReAnimate,u=s.to,d=s.from,h=this.state.style;if(o){if(!a){var m={style:l?lx({},l,u):u};this.state&&h&&(l&&h[l]!==u||!l&&h!==u)&&this.setState(m);return}if(!(PFe(i.to,u)&&i.canBegin&&i.isActive)){var b=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var x=b||c?d:i.to;if(this.state&&h){var v={style:l?lx({},l,x):x};(l&&h[l]!==x||!l&&h!==x)&&this.setState(v)}this.runAnimation(nl(nl({},this.props),{},{from:x,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,a=i.from,o=i.to,l=i.duration,c=i.easing,u=i.begin,d=i.onAnimationEnd,h=i.onAnimationStart,m=lBe(a,o,JFe(c),l,this.changeStyle),b=function(){s.stopJSAnimation=m()};this.manager.start([h,u,b,l,d])}},{key:"runStepAnimation",value:function(i){var s=this,a=i.steps,o=i.begin,l=i.onAnimationStart,c=a[0],u=c.style,d=c.duration,h=d===void 0?0:d,m=function(x,v,_){if(_===0)return x;var E=v.duration,T=v.easing,A=T===void 0?"ease":T,P=v.style,R=v.properties,N=v.onAnimationEnd,L=_>0?a[_-1]:v,I=R||Object.keys(P);if(typeof A=="function"||A==="spring")return[].concat(pN(x),[s.runJSAnimation.bind(s,{from:L.style,to:P,duration:E,easing:A}),E]);var j=rG(I,E,A),B=nl(nl(nl({},L.style),P),{},{transition:j});return[].concat(pN(x),[B,E,N]).filter(FFe)};return this.manager.start([l].concat(pN(a.reduce(m,[u,Math.max(h,o)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=DFe());var s=i.begin,a=i.duration,o=i.attributeName,l=i.to,c=i.easing,u=i.onAnimationStart,d=i.onAnimationEnd,h=i.steps,m=i.children,b=this.manager;if(this.unSubscribe=b.subscribe(this.handleStyleChange),typeof c=="function"||typeof m=="function"||c==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var x=o?lx({},o,l):l,v=rG(Object.keys(x),a,c);b.start([u,s,nl(nl({},x),{},{transition:v}),a,d])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var o=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=uBe(i,cBe),c=M.Children.count(s),u=this.state.style;if(typeof s=="function")return s(u);if(!o||c===0||a<=0)return s;var d=function(m){var b=m.props,x=b.style,v=x===void 0?{}:x,_=b.className,E=M.cloneElement(m,nl(nl({},l),{},{style:nl(nl({},v),u),className:_}));return E};return c===1?d(M.Children.only(s)):ne.createElement("div",null,M.Children.map(s,function(h){return d(h)}))}}]),n})(M.PureComponent);wo.displayName="Animate";wo.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};wo.propTypes={from:$n.oneOfType([$n.object,$n.string]),to:$n.oneOfType([$n.object,$n.string]),attributeName:$n.string,duration:$n.number,begin:$n.number,easing:$n.oneOfType([$n.string,$n.func]),steps:$n.arrayOf($n.shape({duration:$n.number.isRequired,style:$n.object.isRequired,easing:$n.oneOfType([$n.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),$n.func]),properties:$n.arrayOf("string"),onAnimationEnd:$n.func})),children:$n.oneOfType([$n.node,$n.func]),isActive:$n.bool,canBegin:$n.bool,onAnimationEnd:$n.func,shouldReAnimate:$n.bool,onAnimationStart:$n.func,onAnimationReStart:$n.func};function qb(t){"@babel/helpers - typeof";return qb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qb(t)}function WE(){return WE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WE.apply(this,arguments)}function SBe(t,e){return MBe(t)||ABe(t,e)||TBe(t,e)||EBe()}function EBe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TBe(t,e){if(t){if(typeof t=="string")return cG(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cG(t,e)}}function cG(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ABe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function MBe(t){if(Array.isArray(t))return t}function uG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uG(Object(n),!0).forEach(function(r){PBe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PBe(t,e,n){return e=CBe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CBe(t){var e=RBe(t,"string");return qb(e)=="symbol"?e:e+""}function RBe(t,e){if(qb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(qb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fG=function(e,n,r,i,s){var a=Math.min(Math.abs(r)/2,Math.abs(i)/2),o=i>=0?1:-1,l=r>=0?1:-1,c=i>=0&&r>=0||i<0&&r<0?1:0,u;if(a>0&&s instanceof Array){for(var d=[0,0,0,0],h=0,m=4;h<m;h++)d[h]=s[h]>a?a:s[h];u="M".concat(e,",").concat(n+o*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(n)),u+="L ".concat(e+r-l*d[1],",").concat(n),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(n+o*d[1])),u+="L ".concat(e+r,",").concat(n+i-o*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-l*d[2],",").concat(n+i)),u+="L ".concat(e+l*d[3],",").concat(n+i),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(n+i-o*d[3])),u+="Z"}else if(a>0&&s===+s&&s>0){var b=Math.min(a,s);u="M ".concat(e,",").concat(n+o*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(c,",").concat(e+l*b,",").concat(n,`
            L `).concat(e+r-l*b,",").concat(n,`
            A `).concat(b,",").concat(b,",0,0,").concat(c,",").concat(e+r,",").concat(n+o*b,`
            L `).concat(e+r,",").concat(n+i-o*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(c,",").concat(e+r-l*b,",").concat(n+i,`
            L `).concat(e+l*b,",").concat(n+i,`
            A `).concat(b,",").concat(b,",0,0,").concat(c,",").concat(e,",").concat(n+i-o*b," Z")}else u="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return u},OBe=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,s=n.x,a=n.y,o=n.width,l=n.height;if(Math.abs(o)>0&&Math.abs(l)>0){var c=Math.min(s,s+o),u=Math.max(s,s+o),d=Math.min(a,a+l),h=Math.max(a,a+l);return r>=c&&r<=u&&i>=d&&i<=h}return!1},NBe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},vU=function(e){var n=dG(dG({},NBe),e),r=M.useRef(),i=M.useState(-1),s=SBe(i,2),a=s[0],o=s[1];M.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var A=r.current.getTotalLength();A&&o(A)}catch{}},[]);var l=n.x,c=n.y,u=n.width,d=n.height,h=n.radius,m=n.className,b=n.animationEasing,x=n.animationDuration,v=n.animationBegin,_=n.isAnimationActive,E=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||d!==+d||u===0||d===0)return null;var T=nn("recharts-rectangle",m);return E?ne.createElement(wo,{canBegin:a>0,from:{width:u,height:d,x:l,y:c},to:{width:u,height:d,x:l,y:c},duration:x,animationEasing:b,isActive:E},function(A){var P=A.width,R=A.height,N=A.x,L=A.y;return ne.createElement(wo,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:x,isActive:_,easing:b},ne.createElement("path",WE({},Rt(n,!0),{className:T,d:fG(N,L,P,R,h),ref:r})))}):ne.createElement("path",WE({},Rt(n,!0),{className:T,d:fG(l,c,u,d,h)}))},IBe=["points","className","baseLinePoints","connectNulls"];function Hg(){return Hg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hg.apply(this,arguments)}function kBe(t,e){if(t==null)return{};var n=DBe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function DBe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function hG(t){return FBe(t)||UBe(t)||LBe(t)||jBe()}function jBe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LBe(t,e){if(t){if(typeof t=="string")return SD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SD(t,e)}}function UBe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function FBe(t){if(Array.isArray(t))return SD(t)}function SD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var pG=function(e){return e&&e.x===+e.x&&e.y===+e.y},BBe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){pG(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),pG(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Nx=function(e,n){var r=BBe(e);n&&(r=[r.reduce(function(s,a){return[].concat(hG(s),hG(a))},[])]);var i=r.map(function(s){return s.reduce(function(a,o,l){return"".concat(a).concat(l===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},zBe=function(e,n,r){var i=Nx(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Nx(n.reverse(),r).slice(1))},Dte=function(e){var n=e.points,r=e.className,i=e.baseLinePoints,s=e.connectNulls,a=kBe(e,IBe);if(!n||!n.length)return null;var o=nn("recharts-polygon",r);if(i&&i.length){var l=a.stroke&&a.stroke!=="none",c=zBe(n,i,s);return ne.createElement("g",{className:o},ne.createElement("path",Hg({},Rt(a,!0),{fill:c.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:c})),l?ne.createElement("path",Hg({},Rt(a,!0),{fill:"none",d:Nx(n,s)})):null,l?ne.createElement("path",Hg({},Rt(a,!0),{fill:"none",d:Nx(i,s)})):null)}var u=Nx(n,s);return ne.createElement("path",Hg({},Rt(a,!0),{fill:u.slice(-1)==="Z"?a.fill:"none",className:o,d:u}))};function ED(){return ED=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ED.apply(this,arguments)}var Ey=function(e){var n=e.cx,r=e.cy,i=e.r,s=e.className,a=nn("recharts-dot",s);return n===+n&&r===+r&&i===+i?M.createElement("circle",ED({},Rt(e,!1),pE(e),{className:a,cx:n,cy:r,r:i})):null};function Kb(t){"@babel/helpers - typeof";return Kb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kb(t)}var $Be=["x","y","top","left","width","height","className"];function TD(){return TD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TD.apply(this,arguments)}function mG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function VBe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mG(Object(n),!0).forEach(function(r){HBe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HBe(t,e,n){return e=WBe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WBe(t){var e=GBe(t,"string");return Kb(e)=="symbol"?e:e+""}function GBe(t,e){if(Kb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Kb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qBe(t,e){if(t==null)return{};var n=KBe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function KBe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var XBe=function(e,n,r,i,s,a){return"M".concat(e,",").concat(s,"v").concat(i,"M").concat(a,",").concat(n,"h").concat(r)},YBe=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,s=i===void 0?0:i,a=e.top,o=a===void 0?0:a,l=e.left,c=l===void 0?0:l,u=e.width,d=u===void 0?0:u,h=e.height,m=h===void 0?0:h,b=e.className,x=qBe(e,$Be),v=VBe({x:r,y:s,top:o,left:c,width:d,height:m},x);return!et(r)||!et(s)||!et(d)||!et(m)||!et(o)||!et(c)?null:ne.createElement("path",TD({},Rt(v,!0),{className:nn("recharts-cross",b),d:XBe(r,s,d,m,o,c)}))},JBe=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function Xb(t){"@babel/helpers - typeof";return Xb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xb(t)}function QBe(t,e){if(t==null)return{};var n=ZBe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ZBe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Cu(){return Cu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cu.apply(this,arguments)}function gG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gG(Object(n),!0).forEach(function(r){e4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function e4e(t,e,n){return e=t4e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t4e(t){var e=n4e(t,"string");return Xb(e)=="symbol"?e:e+""}function n4e(t,e){if(Xb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var r4e=function(e,n,r,i){var s="";return i.forEach(function(a,o){var l=Un(n,r,e,a);o?s+="L ".concat(l.x,",").concat(l.y):s+="M ".concat(l.x,",").concat(l.y)}),s+="Z",s},i4e=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,a=e.polarAngles,o=e.radialLines;if(!a||!a.length||!o)return null;var l=Yb({stroke:"#ccc"},Rt(e,!1));return ne.createElement("g",{className:"recharts-polar-grid-angle"},a.map(function(c){var u=Un(n,r,i,c),d=Un(n,r,s,c);return ne.createElement("line",Cu({},l,{key:"line-".concat(c),x1:u.x,y1:u.y,x2:d.x,y2:d.y}))}))},s4e=function(e){var n=e.cx,r=e.cy,i=e.radius,s=e.index,a=Yb(Yb({stroke:"#ccc"},Rt(e,!1)),{},{fill:"none"});return ne.createElement("circle",Cu({},a,{className:nn("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(s),cx:n,cy:r,r:i}))},a4e=function(e){var n=e.radius,r=e.index,i=Yb(Yb({stroke:"#ccc"},Rt(e,!1)),{},{fill:"none"});return ne.createElement("path",Cu({},i,{className:nn("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(r),d:r4e(n,e.cx,e.cy,e.polarAngles)}))},o4e=function(e){var n=e.polarRadius,r=e.gridType;return!n||!n.length?null:ne.createElement("g",{className:"recharts-polar-grid-concentric"},n.map(function(i,s){var a=s;return r==="circle"?ne.createElement(s4e,Cu({key:a},e,{radius:i,index:s})):ne.createElement(a4e,Cu({key:a},e,{radius:i,index:s}))}))},jte=function(e){var n=e.cx,r=n===void 0?0:n,i=e.cy,s=i===void 0?0:i,a=e.innerRadius,o=a===void 0?0:a,l=e.outerRadius,c=l===void 0?0:l,u=e.gridType,d=u===void 0?"polygon":u,h=e.radialLines,m=h===void 0?!0:h,b=QBe(e,JBe);return c<=0?null:ne.createElement("g",{className:"recharts-polar-grid"},ne.createElement(i4e,Cu({cx:r,cy:s,innerRadius:o,outerRadius:c,gridType:d,radialLines:m},b)),ne.createElement(o4e,Cu({cx:r,cy:s,innerRadius:o,outerRadius:c,gridType:d,radialLines:m},b)))};jte.displayName="PolarGrid";var mN,vG;function l4e(){if(vG)return mN;vG=1;var t=zA(),e=qee(),n=fc();function r(i,s){return i&&i.length?t(i,n(s,2),e):void 0}return mN=r,mN}var c4e=l4e();const u4e=Ln(c4e);var gN,yG;function d4e(){if(yG)return gN;yG=1;var t=zA(),e=fc(),n=Kee();function r(i,s){return i&&i.length?t(i,e(s,2),n):void 0}return gN=r,gN}var f4e=d4e();const h4e=Ln(f4e);var p4e=["cx","cy","angle","ticks","axisLine"],m4e=["ticks","tick","angle","tickFormatter","stroke"];function Nv(t){"@babel/helpers - typeof";return Nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nv(t)}function Ix(){return Ix=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ix.apply(this,arguments)}function xG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _h(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xG(Object(n),!0).forEach(function(r){WA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bG(t,e){if(t==null)return{};var n=g4e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function g4e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function v4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ute(r.key),r)}}function y4e(t,e,n){return e&&wG(t.prototype,e),n&&wG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function x4e(t,e,n){return e=GE(e),b4e(t,Lte()?Reflect.construct(e,n||[],GE(t).constructor):e.apply(t,n))}function b4e(t,e){if(e&&(Nv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w4e(t)}function w4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Lte=function(){return!!t})()}function GE(t){return GE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},GE(t)}function _4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AD(t,e)}function AD(t,e){return AD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},AD(t,e)}function WA(t,e,n){return e=Ute(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ute(t){var e=S4e(t,"string");return Nv(e)=="symbol"?e:e+""}function S4e(t,e){if(Nv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Nv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ty=(function(t){function e(){return v4e(this,e),x4e(this,e,arguments)}return _4e(e,t),y4e(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,s=this.props,a=s.angle,o=s.cx,l=s.cy;return Un(o,l,i,a)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,s=r.cy,a=r.angle,o=r.ticks,l=u4e(o,function(u){return u.coordinate||0}),c=h4e(o,function(u){return u.coordinate||0});return{cx:i,cy:s,startAngle:a,endAngle:a,innerRadius:c.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,s=r.cy,a=r.angle,o=r.ticks,l=r.axisLine,c=bG(r,p4e),u=o.reduce(function(b,x){return[Math.min(b[0],x.coordinate),Math.max(b[1],x.coordinate)]},[1/0,-1/0]),d=Un(i,s,u[0],a),h=Un(i,s,u[1],a),m=_h(_h(_h({},Rt(c,!1)),{},{fill:"none"},Rt(l,!1)),{},{x1:d.x,y1:d.y,x2:h.x,y2:h.y});return ne.createElement("line",Ix({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var r=this,i=this.props,s=i.ticks,a=i.tick,o=i.angle,l=i.tickFormatter,c=i.stroke,u=bG(i,m4e),d=this.getTickTextAnchor(),h=Rt(u,!1),m=Rt(a,!1),b=s.map(function(x,v){var _=r.getTickValueCoord(x),E=_h(_h(_h(_h({textAnchor:d,transform:"rotate(".concat(90-o,", ").concat(_.x,", ").concat(_.y,")")},h),{},{stroke:"none",fill:c},m),{},{index:v},_),{},{payload:x});return ne.createElement(En,Ix({className:nn("recharts-polar-radius-axis-tick",Ste(a)),key:"tick-".concat(x.coordinate)},hp(r.props,x,v)),e.renderTickItem(a,E,l?l(x.value,v):x.value))});return ne.createElement(En,{className:"recharts-polar-radius-axis-ticks"},b)}},{key:"render",value:function(){var r=this.props,i=r.ticks,s=r.axisLine,a=r.tick;return!i||!i.length?null:ne.createElement(En,{className:nn("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),a&&this.renderTicks(),Vi.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,s){var a;return ne.isValidElement(r)?a=ne.cloneElement(r,i):Ht(r)?a=r(i):a=ne.createElement(pp,Ix({},i,{className:"recharts-polar-radius-axis-tick-value"}),s),a}}])})(M.PureComponent);WA(Ty,"displayName","PolarRadiusAxis");WA(Ty,"axisType","radiusAxis");WA(Ty,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Iv(t){"@babel/helpers - typeof";return Iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iv(t)}function Uh(){return Uh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uh.apply(this,arguments)}function _G(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_G(Object(n),!0).forEach(function(r){GA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_G(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function E4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bte(r.key),r)}}function T4e(t,e,n){return e&&SG(t.prototype,e),n&&SG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function A4e(t,e,n){return e=qE(e),M4e(t,Fte()?Reflect.construct(e,n||[],qE(t).constructor):e.apply(t,n))}function M4e(t,e){if(e&&(Iv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P4e(t)}function P4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Fte=function(){return!!t})()}function qE(t){return qE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qE(t)}function C4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MD(t,e)}function MD(t,e){return MD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},MD(t,e)}function GA(t,e,n){return e=Bte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bte(t){var e=R4e(t,"string");return Iv(e)=="symbol"?e:e+""}function R4e(t,e){if(Iv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Iv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var O4e=Math.PI/180,EG=1e-5,Ay=(function(t){function e(){return E4e(this,e),A4e(this,e,arguments)}return C4e(e,t),T4e(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,s=i.cx,a=i.cy,o=i.radius,l=i.orientation,c=i.tickSize,u=c||8,d=Un(s,a,o,r.coordinate),h=Un(s,a,o+(l==="inner"?-1:1)*u,r.coordinate);return{x1:d.x,y1:d.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,s=Math.cos(-r.coordinate*O4e),a;return s>EG?a=i==="outer"?"start":"end":s<-EG?a=i==="outer"?"end":"start":a="middle",a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,s=r.cy,a=r.radius,o=r.axisLine,l=r.axisLineType,c=Sh(Sh({},Rt(this.props,!1)),{},{fill:"none"},Rt(o,!1));if(l==="circle")return ne.createElement(Ey,Uh({className:"recharts-polar-angle-axis-line"},c,{cx:i,cy:s,r:a}));var u=this.props.ticks,d=u.map(function(h){return Un(i,s,a,h.coordinate)});return ne.createElement(Dte,Uh({className:"recharts-polar-angle-axis-line"},c,{points:d}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,s=i.ticks,a=i.tick,o=i.tickLine,l=i.tickFormatter,c=i.stroke,u=Rt(this.props,!1),d=Rt(a,!1),h=Sh(Sh({},u),{},{fill:"none"},Rt(o,!1)),m=s.map(function(b,x){var v=r.getTickLineCoord(b),_=r.getTickTextAnchor(b),E=Sh(Sh(Sh({textAnchor:_},u),{},{stroke:"none",fill:c},d),{},{index:x,payload:b,x:v.x2,y:v.y2});return ne.createElement(En,Uh({className:nn("recharts-polar-angle-axis-tick",Ste(a)),key:"tick-".concat(b.coordinate)},hp(r.props,b,x)),o&&ne.createElement("line",Uh({className:"recharts-polar-angle-axis-tick-line"},h,v)),a&&e.renderTickItem(a,E,l?l(b.value,x):b.value))});return ne.createElement(En,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var r=this.props,i=r.ticks,s=r.radius,a=r.axisLine;return s<=0||!i||!i.length?null:ne.createElement(En,{className:nn("recharts-polar-angle-axis",this.props.className)},a&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,s){var a;return ne.isValidElement(r)?a=ne.cloneElement(r,i):Ht(r)?a=r(i):a=ne.createElement(pp,Uh({},i,{className:"recharts-polar-angle-axis-tick-value"}),s),a}}])})(M.PureComponent);GA(Ay,"displayName","PolarAngleAxis");GA(Ay,"axisType","angleAxis");GA(Ay,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var vN,TG;function N4e(){if(TG)return vN;TG=1;var t=GZ(),e=t(Object.getPrototypeOf,Object);return vN=e,vN}var yN,AG;function I4e(){if(AG)return yN;AG=1;var t=Iu(),e=N4e(),n=ku(),r="[object Object]",i=Function.prototype,s=Object.prototype,a=i.toString,o=s.hasOwnProperty,l=a.call(Object);function c(u){if(!n(u)||t(u)!=r)return!1;var d=e(u);if(d===null)return!0;var h=o.call(d,"constructor")&&d.constructor;return typeof h=="function"&&h instanceof h&&a.call(h)==l}return yN=c,yN}var k4e=I4e();const D4e=Ln(k4e);var xN,MG;function j4e(){if(MG)return xN;MG=1;var t=Iu(),e=ku(),n="[object Boolean]";function r(i){return i===!0||i===!1||e(i)&&t(i)==n}return xN=r,xN}var L4e=j4e();const U4e=Ln(L4e);function Jb(t){"@babel/helpers - typeof";return Jb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jb(t)}function KE(){return KE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},KE.apply(this,arguments)}function F4e(t,e){return V4e(t)||$4e(t,e)||z4e(t,e)||B4e()}function B4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z4e(t,e){if(t){if(typeof t=="string")return PG(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PG(t,e)}}function PG(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $4e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function V4e(t){if(Array.isArray(t))return t}function CG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function RG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CG(Object(n),!0).forEach(function(r){H4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function H4e(t,e,n){return e=W4e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function W4e(t){var e=G4e(t,"string");return Jb(e)=="symbol"?e:e+""}function G4e(t,e){if(Jb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var OG=function(e,n,r,i,s){var a=r-i,o;return o="M ".concat(e,",").concat(n),o+="L ".concat(e+r,",").concat(n),o+="L ".concat(e+r-a/2,",").concat(n+s),o+="L ".concat(e+r-a/2-i,",").concat(n+s),o+="L ".concat(e,",").concat(n," Z"),o},q4e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},K4e=function(e){var n=RG(RG({},q4e),e),r=M.useRef(),i=M.useState(-1),s=F4e(i,2),a=s[0],o=s[1];M.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var T=r.current.getTotalLength();T&&o(T)}catch{}},[]);var l=n.x,c=n.y,u=n.upperWidth,d=n.lowerWidth,h=n.height,m=n.className,b=n.animationEasing,x=n.animationDuration,v=n.animationBegin,_=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||d!==+d||h!==+h||u===0&&d===0||h===0)return null;var E=nn("recharts-trapezoid",m);return _?ne.createElement(wo,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:c},to:{upperWidth:u,lowerWidth:d,height:h,x:l,y:c},duration:x,animationEasing:b,isActive:_},function(T){var A=T.upperWidth,P=T.lowerWidth,R=T.height,N=T.x,L=T.y;return ne.createElement(wo,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:x,easing:b},ne.createElement("path",KE({},Rt(n,!0),{className:E,d:OG(N,L,A,P,R),ref:r})))}):ne.createElement("g",null,ne.createElement("path",KE({},Rt(n,!0),{className:E,d:OG(l,c,u,d,h)})))},X4e=["option","shapeType","propTransformer","activeClassName","isActive"];function Qb(t){"@babel/helpers - typeof";return Qb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qb(t)}function Y4e(t,e){if(t==null)return{};var n=J4e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function J4e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function NG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function XE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NG(Object(n),!0).forEach(function(r){Q4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Q4e(t,e,n){return e=Z4e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z4e(t){var e=eze(t,"string");return Qb(e)=="symbol"?e:e+""}function eze(t,e){if(Qb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tze(t,e){return XE(XE({},e),t)}function nze(t,e){return t==="symbols"}function IG(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return ne.createElement(vU,n);case"trapezoid":return ne.createElement(K4e,n);case"sector":return ne.createElement(Mte,n);case"symbols":if(nze(e))return ne.createElement(j3,n);break;default:return null}}function rze(t){return M.isValidElement(t)?t.props:t}function zte(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?tze:r,s=t.activeClassName,a=s===void 0?"recharts-active-shape":s,o=t.isActive,l=Y4e(t,X4e),c;if(M.isValidElement(e))c=M.cloneElement(e,XE(XE({},l),rze(e)));else if(Ht(e))c=e(l);else if(D4e(e)&&!U4e(e)){var u=i(e,l);c=ne.createElement(IG,{shapeType:n,elementProps:u})}else{var d=l;c=ne.createElement(IG,{shapeType:n,elementProps:d})}return o?ne.createElement(En,{className:a},c):c}function qA(t,e){return e!=null&&"trapezoids"in t.props}function KA(t,e){return e!=null&&"sectors"in t.props}function Zb(t,e){return e!=null&&"points"in t.props}function ize(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,s=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&s}function sze(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function aze(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function oze(t,e){var n;return qA(t,e)?n=ize:KA(t,e)?n=sze:Zb(t,e)&&(n=aze),n}function lze(t,e){var n;return qA(t,e)?n="trapezoids":KA(t,e)?n="sectors":Zb(t,e)&&(n="points"),n}function cze(t,e){if(qA(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(KA(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Zb(t,e)?e.payload:{}}function uze(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=lze(n,e),s=cze(n,e),a=r.filter(function(l,c){var u=sf(s,l),d=n.props[i].filter(function(b){var x=oze(n,e);return x(b,e)}),h=n.props[i].indexOf(d[d.length-1]),m=c===h;return u&&m}),o=r.indexOf(a[a.length-1]);return o}var U1;function kv(t){"@babel/helpers - typeof";return kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kv(t)}function Wg(){return Wg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wg.apply(this,arguments)}function kG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kG(Object(n),!0).forEach(function(r){ho(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Vte(r.key),r)}}function fze(t,e,n){return e&&DG(t.prototype,e),n&&DG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function hze(t,e,n){return e=YE(e),pze(t,$te()?Reflect.construct(e,n||[],YE(t).constructor):e.apply(t,n))}function pze(t,e){if(e&&(kv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mze(t)}function mze(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $te(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($te=function(){return!!t})()}function YE(t){return YE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},YE(t)}function gze(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PD(t,e)}function PD(t,e){return PD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},PD(t,e)}function ho(t,e,n){return e=Vte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vte(t){var e=vze(t,"string");return kv(e)=="symbol"?e:e+""}function vze(t,e){if(kv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(kv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var hc=(function(t){function e(n){var r;return dze(this,e),r=hze(this,e,[n]),ho(r,"pieRef",null),ho(r,"sectorRefs",[]),ho(r,"id",jp("recharts-pie-")),ho(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Ht(i)&&i()}),ho(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Ht(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return gze(e,t),fze(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.label,o=s.labelLine,l=s.dataKey,c=s.valueKey,u=Rt(this.props,!1),d=Rt(a,!1),h=Rt(o,!1),m=a&&a.offsetRadius||20,b=r.map(function(x,v){var _=(x.startAngle+x.endAngle)/2,E=Un(x.cx,x.cy,x.outerRadius+m,_),T=fr(fr(fr(fr({},u),x),{},{stroke:"none"},d),{},{index:v,textAnchor:e.getTextAnchor(E.x,x.cx)},E),A=fr(fr(fr(fr({},u),x),{},{fill:"none",stroke:x.fill},h),{},{index:v,points:[Un(x.cx,x.cy,x.outerRadius,_),E]}),P=l;return an(l)&&an(c)?P="value":an(l)&&(P=c),ne.createElement(En,{key:"label-".concat(x.startAngle,"-").concat(x.endAngle,"-").concat(x.midAngle,"-").concat(v)},o&&e.renderLabelLineItem(o,A,"line"),e.renderLabelItem(a,T,jr(x,P)))});return ne.createElement(En,{className:"recharts-pie-labels"},b)}},{key:"renderSectorsStatically",value:function(r){var i=this,s=this.props,a=s.activeShape,o=s.blendStroke,l=s.inactiveShape;return r.map(function(c,u){if(c?.startAngle===0&&c?.endAngle===0&&r.length!==1)return null;var d=i.isActiveIndex(u),h=l&&i.hasActiveIndex()?l:null,m=d?a:h,b=fr(fr({},c),{},{stroke:o?c.fill:c.stroke,tabIndex:-1});return ne.createElement(En,Wg({ref:function(v){v&&!i.sectorRefs.includes(v)&&i.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},hp(i.props,c,u),{key:"sector-".concat(c?.startAngle,"-").concat(c?.endAngle,"-").concat(c.midAngle,"-").concat(u)}),ne.createElement(zte,Wg({option:m,isActive:d,shapeType:"sector"},b)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,s=i.sectors,a=i.isAnimationActive,o=i.animationBegin,l=i.animationDuration,c=i.animationEasing,u=i.animationId,d=this.state,h=d.prevSectors,m=d.prevIsAnimationActive;return ne.createElement(wo,{begin:o,duration:l,isActive:a,easing:c,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(b){var x=b.t,v=[],_=s&&s[0],E=_.startAngle;return s.forEach(function(T,A){var P=h&&h[A],R=A>0?Wa(T,"paddingAngle",0):0;if(P){var N=Ir(P.endAngle-P.startAngle,T.endAngle-T.startAngle),L=fr(fr({},T),{},{startAngle:E+R,endAngle:E+N(x)+R});v.push(L),E=L.endAngle}else{var I=T.endAngle,j=T.startAngle,B=Ir(0,I-j),H=B(x),J=fr(fr({},T),{},{startAngle:E+R,endAngle:E+H+R});v.push(J),E=J.endAngle}}),ne.createElement(En,null,r.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var a=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[a].focus(),i.setState({sectorToFocus:a});break}case"ArrowRight":{var o=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,s=r.isAnimationActive,a=this.state.prevSectors;return s&&i&&i.length&&(!a||!sf(a,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,s=i.hide,a=i.sectors,o=i.className,l=i.label,c=i.cx,u=i.cy,d=i.innerRadius,h=i.outerRadius,m=i.isAnimationActive,b=this.state.isAnimationFinished;if(s||!a||!a.length||!et(c)||!et(u)||!et(d)||!et(h))return null;var x=nn("recharts-pie",o);return ne.createElement(En,{tabIndex:this.props.rootTabIndex,className:x,ref:function(_){r.pieRef=_}},this.renderSectors(),l&&this.renderLabels(a),Vi.renderCallByParent(this.props,null,!1),(!m||b)&&xl.renderCallByParent(this.props,a,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,s){if(ne.isValidElement(r))return ne.cloneElement(r,i);if(Ht(r))return r(i);var a=nn("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return ne.createElement(sp,Wg({},i,{key:s,type:"linear",className:a}))}},{key:"renderLabelItem",value:function(r,i,s){if(ne.isValidElement(r))return ne.cloneElement(r,i);var a=s;if(Ht(r)&&(a=r(i),ne.isValidElement(a)))return a;var o=nn("recharts-pie-label-text",typeof r!="boolean"&&!Ht(r)?r.className:"");return ne.createElement(pp,Wg({},i,{alignmentBaseline:"middle",className:o}),a)}}])})(M.PureComponent);U1=hc;ho(hc,"displayName","Pie");ho(hc,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Du.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});ho(hc,"parseDeltaAngle",function(t,e){var n=qs(e-t),r=Math.min(Math.abs(e-t),360);return n*r});ho(hc,"getRealPieData",function(t){var e=t.data,n=t.children,r=Rt(t,!1),i=Ga(n,Av);return e&&e.length?e.map(function(s,a){return fr(fr(fr({payload:s},r),s),i&&i[a]&&i[a].props)}):i&&i.length?i.map(function(s){return fr(fr({},r),s.props)}):[]});ho(hc,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,i=e.width,s=e.height,a=wte(i,s),o=r+Ks(t.cx,i,i/2),l=n+Ks(t.cy,s,s/2),c=Ks(t.innerRadius,a,0),u=Ks(t.outerRadius,a,a*.8),d=t.maxRadius||Math.sqrt(i*i+s*s)/2;return{cx:o,cy:l,innerRadius:c,outerRadius:u,maxRadius:d}});ho(hc,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?fr(fr({},e.type.defaultProps),e.props):e.props,i=U1.getRealPieData(r);if(!i||!i.length)return null;var s=r.cornerRadius,a=r.startAngle,o=r.endAngle,l=r.paddingAngle,c=r.dataKey,u=r.nameKey,d=r.valueKey,h=r.tooltipType,m=Math.abs(r.minAngle),b=U1.parseCoordinateOfPie(r,n),x=U1.parseDeltaAngle(a,o),v=Math.abs(x),_=c;an(c)&&an(d)?(vl(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_="value"):an(c)&&(vl(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_=d);var E=i.filter(function(L){return jr(L,_,0)!==0}).length,T=(v>=360?E:E-1)*l,A=v-E*m-T,P=i.reduce(function(L,I){var j=jr(I,_,0);return L+(et(j)?j:0)},0),R;if(P>0){var N;R=i.map(function(L,I){var j=jr(L,_,0),B=jr(L,u,I),H=(et(j)?j:0)/P,J;I?J=N.endAngle+qs(x)*l*(j!==0?1:0):J=a;var G=J+qs(x)*((j!==0?m:0)+H*A),W=(J+G)/2,K=(b.innerRadius+b.outerRadius)/2,te=[{name:B,value:j,payload:L,dataKey:_,type:h}],z=Un(b.cx,b.cy,K,W);return N=fr(fr(fr({percent:H,cornerRadius:s,name:B,tooltipPayload:te,midAngle:W,middleRadius:K,tooltipPosition:z},L),b),{},{value:jr(L,_),startAngle:J,endAngle:G,payload:L,paddingAngle:qs(x)*l}),N})}return fr(fr({},b),{},{sectors:R,data:i})});var bN,jG;function yze(){if(jG)return bN;jG=1;function t(e){return e&&e.length?e[0]:void 0}return bN=t,bN}var wN,LG;function xze(){return LG||(LG=1,wN=yze()),wN}var bze=xze();const wze=Ln(bze);var _ze=["key"];function Dv(t){"@babel/helpers - typeof";return Dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dv(t)}function Sze(t,e){if(t==null)return{};var n=Eze(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Eze(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function JE(){return JE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JE.apply(this,arguments)}function UG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Hs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UG(Object(n),!0).forEach(function(r){ou(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Wte(r.key),r)}}function Aze(t,e,n){return e&&FG(t.prototype,e),n&&FG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mze(t,e,n){return e=QE(e),Pze(t,Hte()?Reflect.construct(e,n||[],QE(t).constructor):e.apply(t,n))}function Pze(t,e){if(e&&(Dv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cze(t)}function Cze(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hte=function(){return!!t})()}function QE(t){return QE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},QE(t)}function Rze(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CD(t,e)}function CD(t,e){return CD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},CD(t,e)}function ou(t,e,n){return e=Wte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wte(t){var e=Oze(t,"string");return Dv(e)=="symbol"?e:e+""}function Oze(t,e){if(Dv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var jv=(function(t){function e(){var n;Tze(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=Mze(this,e,[].concat(i)),ou(n,"state",{isAnimationFinished:!1}),ou(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Ht(a)&&a()}),ou(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Ht(a)&&a()}),ou(n,"handleMouseEnter",function(a){var o=n.props.onMouseEnter;o&&o(n.props,a)}),ou(n,"handleMouseLeave",function(a){var o=n.props.onMouseLeave;o&&o(n.props,a)}),n}return Rze(e,t),Aze(e,[{key:"renderDots",value:function(r){var i=this.props,s=i.dot,a=i.dataKey,o=Rt(this.props,!1),l=Rt(s,!0),c=r.map(function(u,d){var h=Hs(Hs(Hs({key:"dot-".concat(d),r:3},o),l),{},{dataKey:a,cx:u.x,cy:u.y,index:d,payload:u});return e.renderDotItem(s,h)});return ne.createElement(En,{className:"recharts-radar-dots"},c)}},{key:"renderPolygonStatically",value:function(r){var i=this.props,s=i.shape,a=i.dot,o=i.isRange,l=i.baseLinePoints,c=i.connectNulls,u;return ne.isValidElement(s)?u=ne.cloneElement(s,Hs(Hs({},this.props),{},{points:r})):Ht(s)?u=s(Hs(Hs({},this.props),{},{points:r})):u=ne.createElement(Dte,JE({},Rt(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:r,baseLinePoints:o?l:null,connectNulls:c})),ne.createElement(En,{className:"recharts-radar-polygon"},u,a?this.renderDots(r):null)}},{key:"renderPolygonWithAnimation",value:function(){var r=this,i=this.props,s=i.points,a=i.isAnimationActive,o=i.animationBegin,l=i.animationDuration,c=i.animationEasing,u=i.animationId,d=this.state.prevPoints;return ne.createElement(wo,{begin:o,duration:l,isActive:a,easing:c,from:{t:0},to:{t:1},key:"radar-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var m=h.t,b=d&&d.length/s.length,x=s.map(function(v,_){var E=d&&d[Math.floor(_*b)];if(E){var T=Ir(E.x,v.x),A=Ir(E.y,v.y);return Hs(Hs({},v),{},{x:T(m),y:A(m)})}var P=Ir(v.cx,v.x),R=Ir(v.cy,v.y);return Hs(Hs({},v),{},{x:P(m),y:R(m)})});return r.renderPolygonStatically(x)})}},{key:"renderPolygon",value:function(){var r=this.props,i=r.points,s=r.isAnimationActive,a=r.isRange,o=this.state.prevPoints;return s&&i&&i.length&&!a&&(!o||!sf(o,i))?this.renderPolygonWithAnimation():this.renderPolygonStatically(i)}},{key:"render",value:function(){var r=this.props,i=r.hide,s=r.className,a=r.points,o=r.isAnimationActive;if(i||!a||!a.length)return null;var l=this.state.isAnimationFinished,c=nn("recharts-radar",s);return ne.createElement(En,{className:c},this.renderPolygon(),(!o||l)&&xl.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"renderDotItem",value:function(r,i){var s;if(ne.isValidElement(r))s=ne.cloneElement(r,i);else if(Ht(r))s=r(i);else{var a=i.key,o=Sze(i,_ze);s=ne.createElement(Ey,JE({},o,{key:a,className:nn("recharts-radar-dot",typeof r!="boolean"?r.className:"")}))}return s}}])})(M.PureComponent);ou(jv,"displayName","Radar");ou(jv,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!Du.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});ou(jv,"getComposedData",function(t){var e=t.radiusAxis,n=t.angleAxis,r=t.displayedData,i=t.dataKey,s=t.bandSize,a=n.cx,o=n.cy,l=!1,c=[],u=n.type!=="number"?s??0:0;r.forEach(function(h,m){var b=jr(h,n.dataKey,m),x=jr(h,i),v=n.scale(b)+u,_=Array.isArray(x)?Tte(x):x,E=an(_)?void 0:e.scale(_);Array.isArray(x)&&x.length>=2&&(l=!0),c.push(Hs(Hs({},Un(a,o,E,v)),{},{name:b,value:x,cx:a,cy:o,radius:E,angle:v,payload:h}))});var d=[];return l&&c.forEach(function(h){if(Array.isArray(h.value)){var m=wze(h.value),b=an(m)?void 0:e.scale(m);d.push(Hs(Hs({},h),{},{radius:b},Un(a,o,b,h.angle)))}else d.push(h)}),{points:c,isRange:l,baseLinePoints:d}});var _N,BG;function Nze(){if(BG)return _N;BG=1;var t=Math.ceil,e=Math.max;function n(r,i,s,a){for(var o=-1,l=e(t((i-r)/(s||1)),0),c=Array(l);l--;)c[a?l:++o]=r,r+=s;return c}return _N=n,_N}var SN,zG;function Gte(){if(zG)return SN;zG=1;var t=lee(),e=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-e){var s=i<0?-1:1;return s*n}return i===i?i:0}return SN=r,SN}var EN,$G;function Ize(){if($G)return EN;$G=1;var t=Nze(),e=kA(),n=Gte();function r(i){return function(s,a,o){return o&&typeof o!="number"&&e(s,a,o)&&(a=o=void 0),s=n(s),a===void 0?(a=s,s=0):a=n(a),o=o===void 0?s<a?1:-1:n(o),t(s,a,o,i)}}return EN=r,EN}var TN,VG;function kze(){if(VG)return TN;VG=1;var t=Ize(),e=t();return TN=e,TN}var Dze=kze();const ZE=Ln(Dze);function ew(t){"@babel/helpers - typeof";return ew=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ew(t)}function HG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function WG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HG(Object(n),!0).forEach(function(r){qte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qte(t,e,n){return e=jze(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jze(t){var e=Lze(t,"string");return ew(e)=="symbol"?e:e+""}function Lze(t,e){if(ew(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ew(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Uze=["Webkit","Moz","O","ms"],Fze=function(e,n){var r=e.replace(/(\w)/,function(s){return s.toUpperCase()}),i=Uze.reduce(function(s,a){return WG(WG({},s),{},qte({},a+r,n))},{});return i[e]=n,i};function Lv(t){"@babel/helpers - typeof";return Lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lv(t)}function eT(){return eT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eT.apply(this,arguments)}function GG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GG(Object(n),!0).forEach(function(r){ka(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xte(r.key),r)}}function zze(t,e,n){return e&&qG(t.prototype,e),n&&qG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function $ze(t,e,n){return e=tT(e),Vze(t,Kte()?Reflect.construct(e,n||[],tT(t).constructor):e.apply(t,n))}function Vze(t,e){if(e&&(Lv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hze(t)}function Hze(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Kte=function(){return!!t})()}function tT(t){return tT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},tT(t)}function Wze(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RD(t,e)}function RD(t,e){return RD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},RD(t,e)}function ka(t,e,n){return e=Xte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xte(t){var e=Gze(t,"string");return Lv(e)=="symbol"?e:e+""}function Gze(t,e){if(Lv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var qze=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,s=e.x,a=e.width,o=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,c=Cx().domain(ZE(0,l)).range([s,s+a-o]),u=c.domain().map(function(d){return c(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(r),endX:c(i),scale:c,scaleValues:u}},KG=function(e){return e.changedTouches&&!!e.changedTouches.length},Uv=(function(t){function e(n){var r;return Bze(this,e),r=$ze(this,e,[n]),ka(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),ka(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),ka(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,s=i.endIndex,a=i.onDragEnd,o=i.startIndex;a?.({endIndex:s,startIndex:o})}),r.detachDragEndListener()}),ka(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),ka(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),ka(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),ka(r,"handleSlideDragStart",function(i){var s=KG(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return Wze(e,t),zze(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,s=r.endX,a=this.state.scaleValues,o=this.props,l=o.gap,c=o.data,u=c.length-1,d=Math.min(i,s),h=Math.max(i,s),m=e.getIndexInRange(a,d),b=e.getIndexInRange(a,h);return{startIndex:m-m%l,endIndex:b===u?u:b-b%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,s=i.data,a=i.tickFormatter,o=i.dataKey,l=jr(s[r],o,r);return Ht(a)?a(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,s=i.slideMoveStartX,a=i.startX,o=i.endX,l=this.props,c=l.x,u=l.width,d=l.travellerWidth,h=l.startIndex,m=l.endIndex,b=l.onChange,x=r.pageX-s;x>0?x=Math.min(x,c+u-d-o,c+u-d-a):x<0&&(x=Math.max(x,c-a,c-o));var v=this.getIndex({startX:a+x,endX:o+x});(v.startIndex!==h||v.endIndex!==m)&&b&&b(v),this.setState({startX:a+x,endX:o+x,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var s=KG(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,s=i.brushMoveStartX,a=i.movingTravellerId,o=i.endX,l=i.startX,c=this.state[a],u=this.props,d=u.x,h=u.width,m=u.travellerWidth,b=u.onChange,x=u.gap,v=u.data,_={startX:this.state.startX,endX:this.state.endX},E=r.pageX-s;E>0?E=Math.min(E,d+h-m-c):E<0&&(E=Math.max(E,d-c)),_[a]=c+E;var T=this.getIndex(_),A=T.startIndex,P=T.endIndex,R=function(){var L=v.length-1;return a==="startX"&&(o>l?A%x===0:P%x===0)||o<l&&P===L||a==="endX"&&(o>l?P%x===0:A%x===0)||o>l&&P===L};this.setState(ka(ka({},a,c+E),"brushMoveStartX",r.pageX),function(){b&&R()&&b(T)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var s=this,a=this.state,o=a.scaleValues,l=a.startX,c=a.endX,u=this.state[i],d=o.indexOf(u);if(d!==-1){var h=d+r;if(!(h===-1||h>=o.length)){var m=o[h];i==="startX"&&m>=c||i==="endX"&&m<=l||this.setState(ka({},i,m),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,o=r.height,l=r.fill,c=r.stroke;return ne.createElement("rect",{stroke:c,fill:l,x:i,y:s,width:a,height:o})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,o=r.height,l=r.data,c=r.children,u=r.padding,d=M.Children.only(c);return d?ne.cloneElement(d,{x:i,y:s,width:a,height:o,margin:u,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var s,a,o=this,l=this.props,c=l.y,u=l.travellerWidth,d=l.height,h=l.traveller,m=l.ariaLabel,b=l.data,x=l.startIndex,v=l.endIndex,_=Math.max(r,this.props.x),E=AN(AN({},Rt(this.props,!1)),{},{x:_,y:c,width:u,height:d}),T=m||"Min value: ".concat((s=b[x])===null||s===void 0?void 0:s.name,", Max value: ").concat((a=b[v])===null||a===void 0?void 0:a.name);return ne.createElement(En,{tabIndex:0,role:"slider","aria-label":T,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(P){["ArrowLeft","ArrowRight"].includes(P.key)&&(P.preventDefault(),P.stopPropagation(),o.handleTravellerMoveKeyboard(P.key==="ArrowRight"?1:-1,i))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,E))}},{key:"renderSlide",value:function(r,i){var s=this.props,a=s.y,o=s.height,l=s.stroke,c=s.travellerWidth,u=Math.min(r,i)+c,d=Math.max(Math.abs(i-r)-c,0);return ne.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:u,y:a,width:d,height:o})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,s=r.endIndex,a=r.y,o=r.height,l=r.travellerWidth,c=r.stroke,u=this.state,d=u.startX,h=u.endX,m=5,b={pointerEvents:"none",fill:c};return ne.createElement(En,{className:"recharts-brush-texts"},ne.createElement(pp,eT({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,h)-m,y:a+o/2},b),this.getTextOfTick(i)),ne.createElement(pp,eT({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,h)+l+m,y:a+o/2},b),this.getTextOfTick(s)))}},{key:"render",value:function(){var r=this.props,i=r.data,s=r.className,a=r.children,o=r.x,l=r.y,c=r.width,u=r.height,d=r.alwaysShowText,h=this.state,m=h.startX,b=h.endX,x=h.isTextActive,v=h.isSlideMoving,_=h.isTravellerMoving,E=h.isTravellerFocused;if(!i||!i.length||!et(o)||!et(l)||!et(c)||!et(u)||c<=0||u<=0)return null;var T=nn("recharts-brush",s),A=ne.Children.count(a)===1,P=Fze("userSelect","none");return ne.createElement(En,{className:T,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:P},this.renderBackground(),A&&this.renderPanorama(),this.renderSlide(m,b),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(b,"endX"),(x||v||_||E||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,s=r.y,a=r.width,o=r.height,l=r.stroke,c=Math.floor(s+o/2)-1;return ne.createElement(ne.Fragment,null,ne.createElement("rect",{x:i,y:s,width:a,height:o,fill:l,stroke:"none"}),ne.createElement("line",{x1:i+1,y1:c,x2:i+a-1,y2:c,fill:"none",stroke:"#fff"}),ne.createElement("line",{x1:i+1,y1:c+2,x2:i+a-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var s;return ne.isValidElement(r)?s=ne.cloneElement(r,i):Ht(r)?s=r(i):s=e.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(r,i){var s=r.data,a=r.width,o=r.x,l=r.travellerWidth,c=r.updateId,u=r.startIndex,d=r.endIndex;if(s!==i.prevData||c!==i.prevUpdateId)return AN({prevData:s,prevTravellerWidth:l,prevUpdateId:c,prevX:o,prevWidth:a},s&&s.length?qze({data:s,width:a,x:o,travellerWidth:l,startIndex:u,endIndex:d}):{scale:null,scaleValues:null});if(i.scale&&(a!==i.prevWidth||o!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([o,o+a-l]);var h=i.scale.domain().map(function(m){return i.scale(m)});return{prevData:s,prevTravellerWidth:l,prevUpdateId:c,prevX:o,prevWidth:a,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,i){for(var s=r.length,a=0,o=s-1;o-a>1;){var l=Math.floor((a+o)/2);r[l]>i?o=l:a=l}return i>=r[o]?o:a}}])})(M.PureComponent);ka(Uv,"displayName","Brush");ka(Uv,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var MN,XG;function Kze(){if(XG)return MN;XG=1;var t=V3();function e(n,r){var i;return t(n,function(s,a,o){return i=r(s,a,o),!i}),!!i}return MN=e,MN}var PN,YG;function Xze(){if(YG)return PN;YG=1;var t=FZ(),e=fc(),n=Kze(),r=ya(),i=kA();function s(a,o,l){var c=r(a)?t:n;return l&&i(a,o,l)&&(o=void 0),c(a,e(o,3))}return PN=s,PN}var Yze=Xze();const Jze=Ln(Yze);var rc=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},CN,JG;function Qze(){if(JG)return CN;JG=1;var t=ree();function e(n,r,i){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return CN=e,CN}var RN,QG;function Zze(){if(QG)return RN;QG=1;var t=Qze(),e=tee(),n=fc();function r(i,s){var a={};return s=n(s,3),e(i,function(o,l,c){t(a,l,s(o,l,c))}),a}return RN=r,RN}var e5e=Zze();const t5e=Ln(e5e);var ON,ZG;function n5e(){if(ZG)return ON;ZG=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(!n(e[r],r,e))return!1;return!0}return ON=t,ON}var NN,eq;function r5e(){if(eq)return NN;eq=1;var t=V3();function e(n,r){var i=!0;return t(n,function(s,a,o){return i=!!r(s,a,o),i}),i}return NN=e,NN}var IN,tq;function i5e(){if(tq)return IN;tq=1;var t=n5e(),e=r5e(),n=fc(),r=ya(),i=kA();function s(a,o,l){var c=r(a)?t:e;return l&&i(a,o,l)&&(o=void 0),c(a,n(o,3))}return IN=s,IN}var s5e=i5e();const Yte=Ln(s5e);var a5e=["x","y"];function tw(t){"@babel/helpers - typeof";return tw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tw(t)}function OD(){return OD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OD.apply(this,arguments)}function nq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Z0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nq(Object(n),!0).forEach(function(r){o5e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function o5e(t,e,n){return e=l5e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l5e(t){var e=c5e(t,"string");return tw(e)=="symbol"?e:e+""}function c5e(t,e){if(tw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function u5e(t,e){if(t==null)return{};var n=d5e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function d5e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function f5e(t,e){var n=t.x,r=t.y,i=u5e(t,a5e),s="".concat(n),a=parseInt(s,10),o="".concat(r),l=parseInt(o,10),c="".concat(e.height||i.height),u=parseInt(c,10),d="".concat(e.width||i.width),h=parseInt(d,10);return Z0(Z0(Z0(Z0(Z0({},e),i),a?{x:a}:{}),l?{y:l}:{}),{},{height:u,width:h,name:e.name,radius:e.radius})}function rq(t){return ne.createElement(zte,OD({shapeType:"rectangle",propTransformer:f5e,activeClassName:"recharts-active-bar"},t))}var h5e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var s=et(r)||b2e(r);return s?e(r,i):(s||gp(),n)}},p5e=["value","background"],Jte;function Fv(t){"@babel/helpers - typeof";return Fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fv(t)}function m5e(t,e){if(t==null)return{};var n=g5e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function g5e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function nT(){return nT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nT.apply(this,arguments)}function iq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ci(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iq(Object(n),!0).forEach(function(r){zd(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function v5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Zte(r.key),r)}}function y5e(t,e,n){return e&&sq(t.prototype,e),n&&sq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function x5e(t,e,n){return e=rT(e),b5e(t,Qte()?Reflect.construct(e,n||[],rT(t).constructor):e.apply(t,n))}function b5e(t,e){if(e&&(Fv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w5e(t)}function w5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qte=function(){return!!t})()}function rT(t){return rT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},rT(t)}function _5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ND(t,e)}function ND(t,e){return ND=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ND(t,e)}function zd(t,e,n){return e=Zte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zte(t){var e=S5e(t,"string");return Fv(e)=="symbol"?e:e+""}function S5e(t,e){if(Fv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Fv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ru=(function(t){function e(){var n;v5e(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=x5e(this,e,[].concat(i)),zd(n,"state",{isAnimationFinished:!1}),zd(n,"id",jp("recharts-bar-")),zd(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),a&&a()}),zd(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),a&&a()}),n}return _5e(e,t),y5e(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,s=this.props,a=s.shape,o=s.dataKey,l=s.activeIndex,c=s.activeBar,u=Rt(this.props,!1);return r&&r.map(function(d,h){var m=h===l,b=m?c:a,x=ci(ci(ci({},u),d),{},{isActive:m,option:b,index:h,dataKey:o,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return ne.createElement(En,nT({className:"recharts-bar-rectangle"},hp(i.props,d,h),{key:"rectangle-".concat(d?.x,"-").concat(d?.y,"-").concat(d?.value,"-").concat(h)}),ne.createElement(rq,x))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,s=i.data,a=i.layout,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,d=i.animationId,h=this.state.prevData;return ne.createElement(wo,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var b=m.t,x=s.map(function(v,_){var E=h&&h[_];if(E){var T=Ir(E.x,v.x),A=Ir(E.y,v.y),P=Ir(E.width,v.width),R=Ir(E.height,v.height);return ci(ci({},v),{},{x:T(b),y:A(b),width:P(b),height:R(b)})}if(a==="horizontal"){var N=Ir(0,v.height),L=N(b);return ci(ci({},v),{},{y:v.y+v.height-L,height:L})}var I=Ir(0,v.width),j=I(b);return ci(ci({},v),{},{width:j})});return ne.createElement(En,null,r.renderRectanglesStatically(x))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,s=r.isAnimationActive,a=this.state.prevData;return s&&i&&i.length&&(!a||!sf(a,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,s=i.data,a=i.dataKey,o=i.activeIndex,l=Rt(this.props.background,!1);return s.map(function(c,u){c.value;var d=c.background,h=m5e(c,p5e);if(!d)return null;var m=ci(ci(ci(ci(ci({},h),{},{fill:"#eee"},d),l),hp(r.props,c,u)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:a,index:u,className:"recharts-bar-background-rectangle"});return ne.createElement(rq,nT({key:"background-bar-".concat(u),option:r.props.background,isActive:u===o},m))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.data,o=s.xAxis,l=s.yAxis,c=s.layout,u=s.children,d=Ga(u,Hw);if(!d)return null;var h=c==="vertical"?a[0].height/2:a[0].width/2,m=function(v,_){var E=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:E,errorVal:jr(v,_)}},b={clipPath:r?"url(#clipPath-".concat(i,")"):null};return ne.createElement(En,b,d.map(function(x){return ne.cloneElement(x,{key:"error-bar-".concat(i,"-").concat(x.props.dataKey),data:a,xAxis:o,yAxis:l,layout:c,offset:h,dataPointFormatter:m})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,s=r.data,a=r.className,o=r.xAxis,l=r.yAxis,c=r.left,u=r.top,d=r.width,h=r.height,m=r.isAnimationActive,b=r.background,x=r.id;if(i||!s||!s.length)return null;var v=this.state.isAnimationFinished,_=nn("recharts-bar",a),E=o&&o.allowDataOverflow,T=l&&l.allowDataOverflow,A=E||T,P=an(x)?this.id:x;return ne.createElement(En,{className:_},E||T?ne.createElement("defs",null,ne.createElement("clipPath",{id:"clipPath-".concat(P)},ne.createElement("rect",{x:E?c:c-d/2,y:T?u:u-h/2,width:E?d:d*2,height:T?h:h*2}))):null,ne.createElement(En,{className:"recharts-bar-rectangles",clipPath:A?"url(#clipPath-".concat(P,")"):null},b?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(A,P),(!m||v)&&xl.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])})(M.PureComponent);Jte=Ru;zd(Ru,"displayName","Bar");zd(Ru,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Du.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});zd(Ru,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,s=t.xAxis,a=t.yAxis,o=t.xAxisTicks,l=t.yAxisTicks,c=t.stackedData,u=t.dataStartIndex,d=t.displayedData,h=t.offset,m=k3e(r,n);if(!m)return null;var b=e.layout,x=n.type.defaultProps,v=x!==void 0?ci(ci({},x),n.props):n.props,_=v.dataKey,E=v.children,T=v.minPointSize,A=b==="horizontal"?a:s,P=c?A.scale.domain():null,R=z3e({numericAxis:A}),N=Ga(E,Av),L=d.map(function(I,j){var B,H,J,G,W,K;c?B=D3e(c[u+j],P):(B=jr(I,_),Array.isArray(B)||(B=[R,B]));var te=h5e(T,Jte.defaultProps.minPointSize)(B[1],j);if(b==="horizontal"){var z,V=[a.scale(B[0]),a.scale(B[1])],X=V[0],q=V[1];H=P8({axis:s,ticks:o,bandSize:i,offset:m.offset,entry:I,index:j}),J=(z=q??X)!==null&&z!==void 0?z:void 0,G=m.size;var Q=X-q;if(W=Number.isNaN(Q)?0:Q,K={x:H,y:a.y,width:G,height:a.height},Math.abs(te)>0&&Math.abs(W)<Math.abs(te)){var ie=qs(W||te)*(Math.abs(te)-Math.abs(W));J-=ie,W+=ie}}else{var ce=[s.scale(B[0]),s.scale(B[1])],ye=ce[0],Ce=ce[1];if(H=ye,J=P8({axis:a,ticks:l,bandSize:i,offset:m.offset,entry:I,index:j}),G=Ce-ye,W=m.size,K={x:s.x,y:J,width:s.width,height:W},Math.abs(te)>0&&Math.abs(G)<Math.abs(te)){var he=qs(G||te)*(Math.abs(te)-Math.abs(G));G+=he}}return ci(ci(ci({},I),{},{x:H,y:J,width:G,height:W,value:c?B:B[1],payload:I,background:K},N&&N[j]&&N[j].props),{},{tooltipPayload:[xte(n,I)],tooltipPosition:{x:H+G/2,y:J+W/2}})});return ci({data:L,layout:b},h)});function nw(t){"@babel/helpers - typeof";return nw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nw(t)}function E5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ene(r.key),r)}}function T5e(t,e,n){return e&&aq(t.prototype,e),n&&aq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function oq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ul(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oq(Object(n),!0).forEach(function(r){XA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function XA(t,e,n){return e=ene(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ene(t){var e=A5e(t,"string");return nw(e)=="symbol"?e:e+""}function A5e(t,e){if(nw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(nw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yU=function(e,n,r,i,s){var a=e.width,o=e.height,l=e.layout,c=e.children,u=Object.keys(n),d={left:r.left,leftMirror:r.left,right:a-r.right,rightMirror:a-r.right,top:r.top,topMirror:r.top,bottom:o-r.bottom,bottomMirror:o-r.bottom},h=!!Da(c,Ru);return u.reduce(function(m,b){var x=n[b],v=x.orientation,_=x.domain,E=x.padding,T=E===void 0?{}:E,A=x.mirror,P=x.reversed,R="".concat(v).concat(A?"Mirror":""),N,L,I,j,B;if(x.type==="number"&&(x.padding==="gap"||x.padding==="no-gap")){var H=_[1]-_[0],J=1/0,G=x.categoricalDomain.sort(S2e);if(G.forEach(function(ce,ye){ye>0&&(J=Math.min((ce||0)-(G[ye-1]||0),J))}),Number.isFinite(J)){var W=J/H,K=x.layout==="vertical"?r.height:r.width;if(x.padding==="gap"&&(N=W*K/2),x.padding==="no-gap"){var te=Ks(e.barCategoryGap,W*K),z=W*K/2;N=z-te-(z-te)/K*te}}}i==="xAxis"?L=[r.left+(T.left||0)+(N||0),r.left+r.width-(T.right||0)-(N||0)]:i==="yAxis"?L=l==="horizontal"?[r.top+r.height-(T.bottom||0),r.top+(T.top||0)]:[r.top+(T.top||0)+(N||0),r.top+r.height-(T.bottom||0)-(N||0)]:L=x.range,P&&(L=[L[1],L[0]]);var V=mte(x,s,h),X=V.scale,q=V.realScaleType;X.domain(_).range(L),gte(X);var Q=vte(X,ul(ul({},x),{},{realScaleType:q}));i==="xAxis"?(B=v==="top"&&!A||v==="bottom"&&A,I=r.left,j=d[R]-B*x.height):i==="yAxis"&&(B=v==="left"&&!A||v==="right"&&A,I=d[R]-B*x.width,j=r.top);var ie=ul(ul(ul({},x),Q),{},{realScaleType:q,x:I,y:j,scale:X,width:i==="xAxis"?r.width:x.width,height:i==="yAxis"?r.height:x.height});return ie.bandSize=FE(ie,Q),!x.hide&&i==="xAxis"?d[R]+=(B?-1:1)*ie.height:x.hide||(d[R]+=(B?-1:1)*ie.width),ul(ul({},m),{},XA({},b,ie))},{})},tne=function(e,n){var r=e.x,i=e.y,s=n.x,a=n.y;return{x:Math.min(r,s),y:Math.min(i,a),width:Math.abs(s-r),height:Math.abs(a-i)}},M5e=function(e){var n=e.x1,r=e.y1,i=e.x2,s=e.y2;return tne({x:n,y:r},{x:i,y:s})},nne=(function(){function t(e){E5e(this,t),this.scale=e}return T5e(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,s=r.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+a}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(n)+o}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],s=r[r.length-1];return i<=s?n>=i&&n<=s:n>=s&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])})();XA(nne,"EPS",1e-4);var xU=function(e){var n=Object.keys(e).reduce(function(r,i){return ul(ul({},r),{},XA({},i,nne.create(e[i])))},{});return ul(ul({},n),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.bandAware,o=s.position;return t5e(i,function(l,c){return n[c].apply(l,{bandAware:a,position:o})})},isInRange:function(i){return Yte(i,function(s,a){return n[a].isInRange(s)})}})};function P5e(t){return(t%180+180)%180}var C5e=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=P5e(i),a=s*Math.PI/180,o=Math.atan(r/n),l=a>o&&a<Math.PI-o?r/Math.sin(a):n/Math.cos(a);return Math.abs(l)},kN,lq;function R5e(){if(lq)return kN;lq=1;var t=fc(),e=Fw(),n=NA();function r(i){return function(s,a,o){var l=Object(s);if(!e(s)){var c=t(a,3);s=n(s),a=function(d){return c(l[d],d,l)}}var u=i(s,a,o);return u>-1?l[c?s[u]:u]:void 0}}return kN=r,kN}var DN,cq;function O5e(){if(cq)return DN;cq=1;var t=Gte();function e(n){var r=t(n),i=r%1;return r===r?i?r-i:r:0}return DN=e,DN}var jN,uq;function N5e(){if(uq)return jN;uq=1;var t=YZ(),e=fc(),n=O5e(),r=Math.max;function i(s,a,o){var l=s==null?0:s.length;if(!l)return-1;var c=o==null?0:n(o);return c<0&&(c=r(l+c,0)),t(s,e(a,3),c)}return jN=i,jN}var LN,dq;function I5e(){if(dq)return LN;dq=1;var t=R5e(),e=N5e(),n=t(e);return LN=n,LN}var k5e=I5e();const D5e=Ln(k5e);var j5e=dZ();const L5e=Ln(j5e);var U5e=L5e(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),bU=M.createContext(void 0),wU=M.createContext(void 0),rne=M.createContext(void 0),ine=M.createContext({}),sne=M.createContext(void 0),ane=M.createContext(0),one=M.createContext(0),fq=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,s=n.offset,a=e.clipPathId,o=e.children,l=e.width,c=e.height,u=U5e(s);return ne.createElement(bU.Provider,{value:r},ne.createElement(wU.Provider,{value:i},ne.createElement(ine.Provider,{value:s},ne.createElement(rne.Provider,{value:u},ne.createElement(sne.Provider,{value:a},ne.createElement(ane.Provider,{value:c},ne.createElement(one.Provider,{value:l},o)))))))},F5e=function(){return M.useContext(sne)},lne=function(e){var n=M.useContext(bU);n==null&&gp();var r=n[e];return r==null&&gp(),r},B5e=function(){var e=M.useContext(bU);return Ud(e)},z5e=function(){var e=M.useContext(wU),n=D5e(e,function(r){return Yte(r.domain,Number.isFinite)});return n||Ud(e)},cne=function(e){var n=M.useContext(wU);n==null&&gp();var r=n[e];return r==null&&gp(),r},$5e=function(){var e=M.useContext(rne);return e},V5e=function(){return M.useContext(ine)},_U=function(){return M.useContext(one)},SU=function(){return M.useContext(ane)};function Bv(t){"@babel/helpers - typeof";return Bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bv(t)}function H5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W5e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dne(r.key),r)}}function G5e(t,e,n){return e&&W5e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function q5e(t,e,n){return e=iT(e),K5e(t,une()?Reflect.construct(e,n||[],iT(t).constructor):e.apply(t,n))}function K5e(t,e){if(e&&(Bv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return X5e(t)}function X5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function une(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(une=function(){return!!t})()}function iT(t){return iT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},iT(t)}function Y5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ID(t,e)}function ID(t,e){return ID=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ID(t,e)}function hq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hq(Object(n),!0).forEach(function(r){EU(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function EU(t,e,n){return e=dne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dne(t){var e=J5e(t,"string");return Bv(e)=="symbol"?e:e+""}function J5e(t,e){if(Bv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Q5e(t,e){return n$e(t)||t$e(t,e)||e$e(t,e)||Z5e()}function Z5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e$e(t,e){if(t){if(typeof t=="string")return mq(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mq(t,e)}}function mq(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function t$e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function n$e(t){if(Array.isArray(t))return t}function kD(){return kD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kD.apply(this,arguments)}var r$e=function(e,n){var r;return ne.isValidElement(e)?r=ne.cloneElement(e,n):Ht(e)?r=e(n):r=ne.createElement("line",kD({},n,{className:"recharts-reference-line-line"})),r},i$e=function(e,n,r,i,s,a,o,l,c){var u=s.x,d=s.y,h=s.width,m=s.height;if(r){var b=c.y,x=e.y.apply(b,{position:a});if(rc(c,"discard")&&!e.y.isInRange(x))return null;var v=[{x:u+h,y:x},{x:u,y:x}];return l==="left"?v.reverse():v}if(n){var _=c.x,E=e.x.apply(_,{position:a});if(rc(c,"discard")&&!e.x.isInRange(E))return null;var T=[{x:E,y:d+m},{x:E,y:d}];return o==="top"?T.reverse():T}if(i){var A=c.segment,P=A.map(function(R){return e.apply(R,{position:a})});return rc(c,"discard")&&Jze(P,function(R){return!e.isInRange(R)})?null:P}return null};function s$e(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,s=t.yAxisId,a=t.shape,o=t.className,l=t.alwaysShow,c=F5e(),u=lne(i),d=cne(s),h=$5e();if(!c||!h)return null;vl(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=xU({x:u.scale,y:d.scale}),b=Ri(e),x=Ri(n),v=r&&r.length===2,_=i$e(m,b,x,v,h,t.position,u.orientation,d.orientation,t);if(!_)return null;var E=Q5e(_,2),T=E[0],A=T.x,P=T.y,R=E[1],N=R.x,L=R.y,I=rc(t,"hidden")?"url(#".concat(c,")"):void 0,j=pq(pq({clipPath:I},Rt(t,!0)),{},{x1:A,y1:P,x2:N,y2:L});return ne.createElement(En,{className:nn("recharts-reference-line",o)},r$e(a,j),Vi.renderCallByParent(t,M5e({x1:A,y1:P,x2:N,y2:L})))}var TU=(function(t){function e(){return H5e(this,e),q5e(this,e,arguments)}return Y5e(e,t),G5e(e,[{key:"render",value:function(){return ne.createElement(s$e,this.props)}}])})(ne.Component);EU(TU,"displayName","ReferenceLine");EU(TU,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function DD(){return DD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DD.apply(this,arguments)}function zv(t){"@babel/helpers - typeof";return zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zv(t)}function gq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gq(Object(n),!0).forEach(function(r){YA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function a$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o$e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hne(r.key),r)}}function l$e(t,e,n){return e&&o$e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function c$e(t,e,n){return e=sT(e),u$e(t,fne()?Reflect.construct(e,n||[],sT(t).constructor):e.apply(t,n))}function u$e(t,e){if(e&&(zv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d$e(t)}function d$e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fne=function(){return!!t})()}function sT(t){return sT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sT(t)}function f$e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jD(t,e)}function jD(t,e){return jD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},jD(t,e)}function YA(t,e,n){return e=hne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hne(t){var e=h$e(t,"string");return zv(e)=="symbol"?e:e+""}function h$e(t,e){if(zv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var p$e=function(e){var n=e.x,r=e.y,i=e.xAxis,s=e.yAxis,a=xU({x:i.scale,y:s.scale}),o=a.apply({x:n,y:r},{bandAware:!0});return rc(e,"discard")&&!a.isInRange(o)?null:o},JA=(function(t){function e(){return a$e(this,e),c$e(this,e,arguments)}return f$e(e,t),l$e(e,[{key:"render",value:function(){var r=this.props,i=r.x,s=r.y,a=r.r,o=r.alwaysShow,l=r.clipPathId,c=Ri(i),u=Ri(s);if(vl(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!u)return null;var d=p$e(this.props);if(!d)return null;var h=d.x,m=d.y,b=this.props,x=b.shape,v=b.className,_=rc(this.props,"hidden")?"url(#".concat(l,")"):void 0,E=vq(vq({clipPath:_},Rt(this.props,!0)),{},{cx:h,cy:m});return ne.createElement(En,{className:nn("recharts-reference-dot",v)},e.renderDot(x,E),Vi.renderCallByParent(this.props,{x:h-a,y:m-a,width:2*a,height:2*a}))}}])})(ne.Component);YA(JA,"displayName","ReferenceDot");YA(JA,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});YA(JA,"renderDot",function(t,e){var n;return ne.isValidElement(t)?n=ne.cloneElement(t,e):Ht(t)?n=t(e):n=ne.createElement(Ey,DD({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function LD(){return LD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LD.apply(this,arguments)}function $v(t){"@babel/helpers - typeof";return $v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$v(t)}function yq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yq(Object(n),!0).forEach(function(r){QA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function m$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g$e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mne(r.key),r)}}function v$e(t,e,n){return e&&g$e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function y$e(t,e,n){return e=aT(e),x$e(t,pne()?Reflect.construct(e,n||[],aT(t).constructor):e.apply(t,n))}function x$e(t,e){if(e&&($v(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b$e(t)}function b$e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pne=function(){return!!t})()}function aT(t){return aT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},aT(t)}function w$e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UD(t,e)}function UD(t,e){return UD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},UD(t,e)}function QA(t,e,n){return e=mne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mne(t){var e=_$e(t,"string");return $v(e)=="symbol"?e:e+""}function _$e(t,e){if($v(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($v(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var S$e=function(e,n,r,i,s){var a=s.x1,o=s.x2,l=s.y1,c=s.y2,u=s.xAxis,d=s.yAxis;if(!u||!d)return null;var h=xU({x:u.scale,y:d.scale}),m={x:e?h.x.apply(a,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(l,{position:"start"}):h.y.rangeMin},b={x:n?h.x.apply(o,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(c,{position:"end"}):h.y.rangeMax};return rc(s,"discard")&&(!h.isInRange(m)||!h.isInRange(b))?null:tne(m,b)},ZA=(function(t){function e(){return m$e(this,e),y$e(this,e,arguments)}return w$e(e,t),v$e(e,[{key:"render",value:function(){var r=this.props,i=r.x1,s=r.x2,a=r.y1,o=r.y2,l=r.className,c=r.alwaysShow,u=r.clipPathId;vl(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=Ri(i),h=Ri(s),m=Ri(a),b=Ri(o),x=this.props.shape;if(!d&&!h&&!m&&!b&&!x)return null;var v=S$e(d,h,m,b,this.props);if(!v&&!x)return null;var _=rc(this.props,"hidden")?"url(#".concat(u,")"):void 0;return ne.createElement(En,{className:nn("recharts-reference-area",l)},e.renderRect(x,xq(xq({clipPath:_},Rt(this.props,!0)),v)),Vi.renderCallByParent(this.props,v))}}])})(ne.Component);QA(ZA,"displayName","ReferenceArea");QA(ZA,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});QA(ZA,"renderRect",function(t,e){var n;return ne.isValidElement(t)?n=ne.cloneElement(t,e):Ht(t)?n=t(e):n=ne.createElement(vU,LD({},e,{className:"recharts-reference-area-rect"})),n});function gne(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function E$e(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return C5e(r,n)}function T$e(t,e,n){var r=n==="width",i=t.x,s=t.y,a=t.width,o=t.height;return e===1?{start:r?i:s,end:r?i+a:s+o}:{start:r?i+a:s+o,end:r?i:s}}function oT(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function A$e(t,e){return gne(t,e+1)}function M$e(t,e,n,r,i){for(var s=(r||[]).slice(),a=e.start,o=e.end,l=0,c=1,u=a,d=function(){var b=r?.[l];if(b===void 0)return{v:gne(r,c)};var x=l,v,_=function(){return v===void 0&&(v=n(b,x)),v},E=b.coordinate,T=l===0||oT(t,E,_,u,o);T||(l=0,u=a,c+=1),T&&(u=E+t*(_()/2+i),l+=c)},h;c<=s.length;)if(h=d(),h)return h.v;return[]}function rw(t){"@babel/helpers - typeof";return rw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rw(t)}function bq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Es(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bq(Object(n),!0).forEach(function(r){P$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function P$e(t,e,n){return e=C$e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C$e(t){var e=R$e(t,"string");return rw(e)=="symbol"?e:e+""}function R$e(t,e){if(rw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(rw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function O$e(t,e,n,r,i){for(var s=(r||[]).slice(),a=s.length,o=e.start,l=e.end,c=function(h){var m=s[h],b,x=function(){return b===void 0&&(b=n(m,h)),b};if(h===a-1){var v=t*(m.coordinate+t*x()/2-l);s[h]=m=Es(Es({},m),{},{tickCoord:v>0?m.coordinate-v*t:m.coordinate})}else s[h]=m=Es(Es({},m),{},{tickCoord:m.coordinate});var _=oT(t,m.tickCoord,x,o,l);_&&(l=m.tickCoord-t*(x()/2+i),s[h]=Es(Es({},m),{},{isShow:!0}))},u=a-1;u>=0;u--)c(u);return s}function N$e(t,e,n,r,i,s){var a=(r||[]).slice(),o=a.length,l=e.start,c=e.end;if(s){var u=r[o-1],d=n(u,o-1),h=t*(u.coordinate+t*d/2-c);a[o-1]=u=Es(Es({},u),{},{tickCoord:h>0?u.coordinate-h*t:u.coordinate});var m=oT(t,u.tickCoord,function(){return d},l,c);m&&(c=u.tickCoord-t*(d/2+i),a[o-1]=Es(Es({},u),{},{isShow:!0}))}for(var b=s?o-1:o,x=function(E){var T=a[E],A,P=function(){return A===void 0&&(A=n(T,E)),A};if(E===0){var R=t*(T.coordinate-t*P()/2-l);a[E]=T=Es(Es({},T),{},{tickCoord:R<0?T.coordinate-R*t:T.coordinate})}else a[E]=T=Es(Es({},T),{},{tickCoord:T.coordinate});var N=oT(t,T.tickCoord,P,l,c);N&&(l=T.tickCoord+t*(P()/2+i),a[E]=Es(Es({},T),{},{isShow:!0}))},v=0;v<b;v++)x(v);return a}function AU(t,e,n){var r=t.tick,i=t.ticks,s=t.viewBox,a=t.minTickGap,o=t.orientation,l=t.interval,c=t.tickFormatter,u=t.unit,d=t.angle;if(!i||!i.length||!r)return[];if(et(l)||Du.isSsr)return A$e(i,typeof l=="number"&&et(l)?l:0);var h=[],m=o==="top"||o==="bottom"?"width":"height",b=u&&m==="width"?Px(u,{fontSize:e,letterSpacing:n}):{width:0,height:0},x=function(T,A){var P=Ht(c)?c(T.value,A):T.value;return m==="width"?E$e(Px(P,{fontSize:e,letterSpacing:n}),b,d):Px(P,{fontSize:e,letterSpacing:n})[m]},v=i.length>=2?qs(i[1].coordinate-i[0].coordinate):1,_=T$e(s,v,m);return l==="equidistantPreserveStart"?M$e(v,_,x,i,a):(l==="preserveStart"||l==="preserveStartEnd"?h=N$e(v,_,x,i,a,l==="preserveStartEnd"):h=O$e(v,_,x,i,a),h.filter(function(E){return E.isShow}))}var I$e=["viewBox"],k$e=["viewBox"],D$e=["ticks"];function Vv(t){"@babel/helpers - typeof";return Vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vv(t)}function Gg(){return Gg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gg.apply(this,arguments)}function wq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ei(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wq(Object(n),!0).forEach(function(r){MU(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UN(t,e){if(t==null)return{};var n=j$e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function j$e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function L$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yne(r.key),r)}}function U$e(t,e,n){return e&&_q(t.prototype,e),n&&_q(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function F$e(t,e,n){return e=lT(e),B$e(t,vne()?Reflect.construct(e,n||[],lT(t).constructor):e.apply(t,n))}function B$e(t,e){if(e&&(Vv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return z$e(t)}function z$e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vne=function(){return!!t})()}function lT(t){return lT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},lT(t)}function $$e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FD(t,e)}function FD(t,e){return FD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},FD(t,e)}function MU(t,e,n){return e=yne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yne(t){var e=V$e(t,"string");return Vv(e)=="symbol"?e:e+""}function V$e(t,e){if(Vv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var My=(function(t){function e(n){var r;return L$e(this,e),r=F$e(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return $$e(e,t),U$e(e,[{key:"shouldComponentUpdate",value:function(r,i){var s=r.viewBox,a=UN(r,I$e),o=this.props,l=o.viewBox,c=UN(o,k$e);return!ev(s,l)||!ev(a,c)||!ev(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,s=i.x,a=i.y,o=i.width,l=i.height,c=i.orientation,u=i.tickSize,d=i.mirror,h=i.tickMargin,m,b,x,v,_,E,T=d?-1:1,A=r.tickSize||u,P=et(r.tickCoord)?r.tickCoord:r.coordinate;switch(c){case"top":m=b=r.coordinate,v=a+ +!d*l,x=v-T*A,E=x-T*h,_=P;break;case"left":x=v=r.coordinate,b=s+ +!d*o,m=b-T*A,_=m-T*h,E=P;break;case"right":x=v=r.coordinate,b=s+ +d*o,m=b+T*A,_=m+T*h,E=P;break;default:m=b=r.coordinate,v=a+ +d*l,x=v+T*A,E=x+T*h,_=P;break}return{line:{x1:m,y1:x,x2:b,y2:v},tick:{x:_,y:E}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,a;switch(i){case"left":a=s?"start":"end";break;case"right":a=s?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,a="end";switch(i){case"left":case"right":a="middle";break;case"top":a=s?"start":"end";break;default:a=s?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,o=r.height,l=r.orientation,c=r.mirror,u=r.axisLine,d=Ei(Ei(Ei({},Rt(this.props,!1)),Rt(u,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!c||l==="bottom"&&c);d=Ei(Ei({},d),{},{x1:i,y1:s+h*o,x2:i+a,y2:s+h*o})}else{var m=+(l==="left"&&!c||l==="right"&&c);d=Ei(Ei({},d),{},{x1:i+m*a,y1:s,x2:i+m*a,y2:s+o})}return ne.createElement("line",Gg({},d,{className:nn("recharts-cartesian-axis-line",Wa(u,"className"))}))}},{key:"renderTicks",value:function(r,i,s){var a=this,o=this.props,l=o.tickLine,c=o.stroke,u=o.tick,d=o.tickFormatter,h=o.unit,m=AU(Ei(Ei({},this.props),{},{ticks:r}),i,s),b=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),v=Rt(this.props,!1),_=Rt(u,!1),E=Ei(Ei({},v),{},{fill:"none"},Rt(l,!1)),T=m.map(function(A,P){var R=a.getTickLineCoord(A),N=R.line,L=R.tick,I=Ei(Ei(Ei(Ei({textAnchor:b,verticalAnchor:x},v),{},{stroke:"none",fill:c},_),L),{},{index:P,payload:A,visibleTicksCount:m.length,tickFormatter:d});return ne.createElement(En,Gg({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},hp(a.props,A,P)),l&&ne.createElement("line",Gg({},E,N,{className:nn("recharts-cartesian-axis-tick-line",Wa(l,"className"))})),u&&e.renderTickItem(u,I,"".concat(Ht(d)?d(A.value,P):A.value).concat(h||"")))});return ne.createElement("g",{className:"recharts-cartesian-axis-ticks"},T)}},{key:"render",value:function(){var r=this,i=this.props,s=i.axisLine,a=i.width,o=i.height,l=i.ticksGenerator,c=i.className,u=i.hide;if(u)return null;var d=this.props,h=d.ticks,m=UN(d,D$e),b=h;return Ht(l)&&(b=h&&h.length>0?l(this.props):l(m)),a<=0||o<=0||!b||!b.length?null:ne.createElement(En,{className:nn("recharts-cartesian-axis",c),ref:function(v){r.layerReference=v}},s&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),Vi.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,s){var a,o=nn(i.className,"recharts-cartesian-axis-tick-value");return ne.isValidElement(r)?a=ne.cloneElement(r,Ei(Ei({},i),{},{className:o})):Ht(r)?a=r(Ei(Ei({},i),{},{className:o})):a=ne.createElement(pp,Gg({},i,{className:"recharts-cartesian-axis-tick-value"}),s),a}}])})(M.Component);MU(My,"displayName","CartesianAxis");MU(My,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var H$e=["x1","y1","x2","y2","key"],W$e=["offset"];function vp(t){"@babel/helpers - typeof";return vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vp(t)}function Sq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ts(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Sq(Object(n),!0).forEach(function(r){G$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function G$e(t,e,n){return e=q$e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q$e(t){var e=K$e(t,"string");return vp(e)=="symbol"?e:e+""}function K$e(t,e){if(vp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xh(){return Xh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xh.apply(this,arguments)}function Eq(t,e){if(t==null)return{};var n=X$e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function X$e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Y$e=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,s=e.y,a=e.width,o=e.height,l=e.ry;return ne.createElement("rect",{x:i,y:s,ry:l,width:a,height:o,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function xne(t,e){var n;if(ne.isValidElement(t))n=ne.cloneElement(t,e);else if(Ht(t))n=t(e);else{var r=e.x1,i=e.y1,s=e.x2,a=e.y2,o=e.key,l=Eq(e,H$e),c=Rt(l,!1);c.offset;var u=Eq(c,W$e);n=ne.createElement("line",Xh({},u,{x1:r,y1:i,x2:s,y2:a,fill:"none",key:o}))}return n}function J$e(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,s=t.horizontalPoints;if(!i||!s||!s.length)return null;var a=s.map(function(o,l){var c=Ts(Ts({},t),{},{x1:e,y1:o,x2:e+n,y2:o,key:"line-".concat(l),index:l});return xne(i,c)});return ne.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function Q$e(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,s=t.verticalPoints;if(!i||!s||!s.length)return null;var a=s.map(function(o,l){var c=Ts(Ts({},t),{},{x1:o,y1:e,x2:o,y2:e+n,key:"line-".concat(l),index:l});return xne(i,c)});return ne.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function Z$e(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,s=t.width,a=t.height,o=t.horizontalPoints,l=t.horizontal,c=l===void 0?!0:l;if(!c||!e||!e.length)return null;var u=o.map(function(h){return Math.round(h+i-i)}).sort(function(h,m){return h-m});i!==u[0]&&u.unshift(0);var d=u.map(function(h,m){var b=!u[m+1],x=b?i+a-h:u[m+1]-h;if(x<=0)return null;var v=m%e.length;return ne.createElement("rect",{key:"react-".concat(m),y:h,x:r,height:x,width:s,stroke:"none",fill:e[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return ne.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function eVe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,s=t.x,a=t.y,o=t.width,l=t.height,c=t.verticalPoints;if(!n||!r||!r.length)return null;var u=c.map(function(h){return Math.round(h+s-s)}).sort(function(h,m){return h-m});s!==u[0]&&u.unshift(0);var d=u.map(function(h,m){var b=!u[m+1],x=b?s+o-h:u[m+1]-h;if(x<=0)return null;var v=m%r.length;return ne.createElement("rect",{key:"react-".concat(m),x:h,y:a,width:x,height:l,stroke:"none",fill:r[v],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return ne.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var tVe=function(e,n){var r=e.xAxis,i=e.width,s=e.height,a=e.offset;return pte(AU(Ts(Ts(Ts({},My.defaultProps),r),{},{ticks:fu(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),a.left,a.left+a.width,n)},nVe=function(e,n){var r=e.yAxis,i=e.width,s=e.height,a=e.offset;return pte(AU(Ts(Ts(Ts({},My.defaultProps),r),{},{ticks:fu(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),a.top,a.top+a.height,n)},Sg={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Hv(t){var e,n,r,i,s,a,o=_U(),l=SU(),c=V5e(),u=Ts(Ts({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Sg.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Sg.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Sg.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Sg.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:Sg.vertical,verticalFill:(a=t.verticalFill)!==null&&a!==void 0?a:Sg.verticalFill,x:et(t.x)?t.x:c.left,y:et(t.y)?t.y:c.top,width:et(t.width)?t.width:c.width,height:et(t.height)?t.height:c.height}),d=u.x,h=u.y,m=u.width,b=u.height,x=u.syncWithTicks,v=u.horizontalValues,_=u.verticalValues,E=B5e(),T=z5e();if(!et(m)||m<=0||!et(b)||b<=0||!et(d)||d!==+d||!et(h)||h!==+h)return null;var A=u.verticalCoordinatesGenerator||tVe,P=u.horizontalCoordinatesGenerator||nVe,R=u.horizontalPoints,N=u.verticalPoints;if((!R||!R.length)&&Ht(P)){var L=v&&v.length,I=P({yAxis:T?Ts(Ts({},T),{},{ticks:L?v:T.ticks}):void 0,width:o,height:l,offset:c},L?!0:x);vl(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(vp(I),"]")),Array.isArray(I)&&(R=I)}if((!N||!N.length)&&Ht(A)){var j=_&&_.length,B=A({xAxis:E?Ts(Ts({},E),{},{ticks:j?_:E.ticks}):void 0,width:o,height:l,offset:c},j?!0:x);vl(Array.isArray(B),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(vp(B),"]")),Array.isArray(B)&&(N=B)}return ne.createElement("g",{className:"recharts-cartesian-grid"},ne.createElement(Y$e,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),ne.createElement(J$e,Xh({},u,{offset:c,horizontalPoints:R,xAxis:E,yAxis:T})),ne.createElement(Q$e,Xh({},u,{offset:c,verticalPoints:N,xAxis:E,yAxis:T})),ne.createElement(Z$e,Xh({},u,{horizontalPoints:R})),ne.createElement(eVe,Xh({},u,{verticalPoints:N})))}Hv.displayName="CartesianGrid";var rVe=["type","layout","connectNulls","ref"],iVe=["key"];function Wv(t){"@babel/helpers - typeof";return Wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wv(t)}function Tq(t,e){if(t==null)return{};var n=sVe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function sVe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function kx(){return kx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kx.apply(this,arguments)}function Aq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ia(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Aq(Object(n),!0).forEach(function(r){dl(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Aq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Eg(t){return cVe(t)||lVe(t)||oVe(t)||aVe()}function aVe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oVe(t,e){if(t){if(typeof t=="string")return BD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BD(t,e)}}function lVe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function cVe(t){if(Array.isArray(t))return BD(t)}function BD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function uVe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wne(r.key),r)}}function dVe(t,e,n){return e&&Mq(t.prototype,e),n&&Mq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function fVe(t,e,n){return e=cT(e),hVe(t,bne()?Reflect.construct(e,n||[],cT(t).constructor):e.apply(t,n))}function hVe(t,e){if(e&&(Wv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pVe(t)}function pVe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bne=function(){return!!t})()}function cT(t){return cT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},cT(t)}function mVe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zD(t,e)}function zD(t,e){return zD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},zD(t,e)}function dl(t,e,n){return e=wne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wne(t){var e=gVe(t,"string");return Wv(e)=="symbol"?e:e+""}function gVe(t,e){if(Wv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Gv=(function(t){function e(){var n;uVe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=fVe(this,e,[].concat(i)),dl(n,"state",{isAnimationFinished:!0,totalLength:0}),dl(n,"generateSimpleStrokeDasharray",function(a,o){return"".concat(o,"px ").concat(a-o,"px")}),dl(n,"getStrokeDasharray",function(a,o,l){var c=l.reduce(function(_,E){return _+E});if(!c)return n.generateSimpleStrokeDasharray(o,a);for(var u=Math.floor(a/c),d=a%c,h=o-a,m=[],b=0,x=0;b<l.length;x+=l[b],++b)if(x+l[b]>d){m=[].concat(Eg(l.slice(0,b)),[d-x]);break}var v=m.length%2===0?[0,h]:[h];return[].concat(Eg(e.repeat(l,u)),Eg(m),v).map(function(_){return"".concat(_,"px")}).join(", ")}),dl(n,"id",jp("recharts-line-")),dl(n,"pathRef",function(a){n.mainCurve=a}),dl(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),dl(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return mVe(e,t),dVe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.points,o=s.xAxis,l=s.yAxis,c=s.layout,u=s.children,d=Ga(u,Hw);if(!d)return null;var h=function(x,v){return{x:x.x,y:x.y,value:x.value,errorVal:jr(x.payload,v)}},m={clipPath:r?"url(#clipPath-".concat(i,")"):null};return ne.createElement(En,m,d.map(function(b){return ne.cloneElement(b,{key:"bar-".concat(b.props.dataKey),data:a,xAxis:o,yAxis:l,layout:c,dataPointFormatter:h})}))}},{key:"renderDots",value:function(r,i,s){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var o=this.props,l=o.dot,c=o.points,u=o.dataKey,d=Rt(this.props,!1),h=Rt(l,!0),m=c.map(function(x,v){var _=Ia(Ia(Ia({key:"dot-".concat(v),r:3},d),h),{},{index:v,cx:x.x,cy:x.y,value:x.value,dataKey:u,payload:x.payload,points:c});return e.renderDotItem(l,_)}),b={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return ne.createElement(En,kx({className:"recharts-line-dots",key:"dots"},b),m)}},{key:"renderCurveStatically",value:function(r,i,s,a){var o=this.props,l=o.type,c=o.layout,u=o.connectNulls;o.ref;var d=Tq(o,rVe),h=Ia(Ia(Ia({},Rt(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(s,")"):null,points:r},a),{},{type:l,layout:c,connectNulls:u});return ne.createElement(sp,kx({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var s=this,a=this.props,o=a.points,l=a.strokeDasharray,c=a.isAnimationActive,u=a.animationBegin,d=a.animationDuration,h=a.animationEasing,m=a.animationId,b=a.animateNewValues,x=a.width,v=a.height,_=this.state,E=_.prevPoints,T=_.totalLength;return ne.createElement(wo,{begin:u,duration:d,isActive:c,easing:h,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(A){var P=A.t;if(E){var R=E.length/o.length,N=o.map(function(H,J){var G=Math.floor(J*R);if(E[G]){var W=E[G],K=Ir(W.x,H.x),te=Ir(W.y,H.y);return Ia(Ia({},H),{},{x:K(P),y:te(P)})}if(b){var z=Ir(x*2,H.x),V=Ir(v/2,H.y);return Ia(Ia({},H),{},{x:z(P),y:V(P)})}return Ia(Ia({},H),{},{x:H.x,y:H.y})});return s.renderCurveStatically(N,r,i)}var L=Ir(0,T),I=L(P),j;if(l){var B="".concat(l).split(/[,\s]+/gim).map(function(H){return parseFloat(H)});j=s.getStrokeDasharray(I,T,B)}else j=s.generateSimpleStrokeDasharray(T,I);return s.renderCurveStatically(o,r,i,{strokeDasharray:j})})}},{key:"renderCurve",value:function(r,i){var s=this.props,a=s.points,o=s.isAnimationActive,l=this.state,c=l.prevPoints,u=l.totalLength;return o&&a&&a.length&&(!c&&u>0||!sf(c,a))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(a,r,i)}},{key:"render",value:function(){var r,i=this.props,s=i.hide,a=i.dot,o=i.points,l=i.className,c=i.xAxis,u=i.yAxis,d=i.top,h=i.left,m=i.width,b=i.height,x=i.isAnimationActive,v=i.id;if(s||!o||!o.length)return null;var _=this.state.isAnimationFinished,E=o.length===1,T=nn("recharts-line",l),A=c&&c.allowDataOverflow,P=u&&u.allowDataOverflow,R=A||P,N=an(v)?this.id:v,L=(r=Rt(a,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},I=L.r,j=I===void 0?3:I,B=L.strokeWidth,H=B===void 0?2:B,J=gZ(a)?a:{},G=J.clipDot,W=G===void 0?!0:G,K=j*2+H;return ne.createElement(En,{className:T},A||P?ne.createElement("defs",null,ne.createElement("clipPath",{id:"clipPath-".concat(N)},ne.createElement("rect",{x:A?h:h-m/2,y:P?d:d-b/2,width:A?m:m*2,height:P?b:b*2})),!W&&ne.createElement("clipPath",{id:"clipPath-dots-".concat(N)},ne.createElement("rect",{x:h-K/2,y:d-K/2,width:m+K,height:b+K}))):null,!E&&this.renderCurve(R,N),this.renderErrorBar(R,N),(E||a)&&this.renderDots(R,W,N),(!x||_)&&xl.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var s=r.length%2!==0?[].concat(Eg(r),[0]):r,a=[],o=0;o<i;++o)a=[].concat(Eg(a),Eg(s));return a}},{key:"renderDotItem",value:function(r,i){var s;if(ne.isValidElement(r))s=ne.cloneElement(r,i);else if(Ht(r))s=r(i);else{var a=i.key,o=Tq(i,iVe),l=nn("recharts-line-dot",typeof r!="boolean"?r.className:"");s=ne.createElement(Ey,kx({key:a},o,{className:l}))}return s}}])})(M.PureComponent);dl(Gv,"displayName","Line");dl(Gv,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Du.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});dl(Gv,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,s=t.yAxisTicks,a=t.dataKey,o=t.bandSize,l=t.displayedData,c=t.offset,u=e.layout,d=l.map(function(h,m){var b=jr(h,a);return u==="horizontal"?{x:UE({axis:n,ticks:i,bandSize:o,entry:h,index:m}),y:an(b)?null:r.scale(b),value:b,payload:h}:{x:an(b)?null:n.scale(b),y:UE({axis:r,ticks:s,bandSize:o,entry:h,index:m}),value:b,payload:h}});return Ia({points:d,layout:u},c)});var vVe=["layout","type","stroke","connectNulls","isRange","ref"],yVe=["key"],_ne;function qv(t){"@babel/helpers - typeof";return qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qv(t)}function Sne(t,e){if(t==null)return{};var n=xVe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function xVe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Yh(){return Yh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yh.apply(this,arguments)}function Pq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Id(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Pq(Object(n),!0).forEach(function(r){ql(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bVe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Tne(r.key),r)}}function wVe(t,e,n){return e&&Cq(t.prototype,e),n&&Cq(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _Ve(t,e,n){return e=uT(e),SVe(t,Ene()?Reflect.construct(e,n||[],uT(t).constructor):e.apply(t,n))}function SVe(t,e){if(e&&(qv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EVe(t)}function EVe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ene(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ene=function(){return!!t})()}function uT(t){return uT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},uT(t)}function TVe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$D(t,e)}function $D(t,e){return $D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},$D(t,e)}function ql(t,e,n){return e=Tne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tne(t){var e=AVe(t,"string");return qv(e)=="symbol"?e:e+""}function AVe(t,e){if(qv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(qv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ls=(function(t){function e(){var n;bVe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=_Ve(this,e,[].concat(i)),ql(n,"state",{isAnimationFinished:!0}),ql(n,"id",jp("recharts-area-")),ql(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Ht(a)&&a()}),ql(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Ht(a)&&a()}),n}return TVe(e,t),wVe(e,[{key:"renderDots",value:function(r,i,s){var a=this.props.isAnimationActive,o=this.state.isAnimationFinished;if(a&&!o)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,h=Rt(this.props,!1),m=Rt(c,!0),b=u.map(function(v,_){var E=Id(Id(Id({key:"dot-".concat(_),r:3},h),m),{},{index:_,cx:v.x,cy:v.y,dataKey:d,value:v.value,payload:v.payload,points:u});return e.renderDotItem(c,E)}),x={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return ne.createElement(En,Yh({className:"recharts-area-dots"},x),b)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,s=i.baseLine,a=i.points,o=i.strokeWidth,l=a[0].x,c=a[a.length-1].x,u=r*Math.abs(l-c),d=Bd(a.map(function(h){return h.y||0}));return et(s)&&typeof s=="number"?d=Math.max(s,d):s&&Array.isArray(s)&&s.length&&(d=Math.max(Bd(s.map(function(h){return h.y||0})),d)),et(d)?ne.createElement("rect",{x:l<c?l:l-u,y:0,width:u,height:Math.floor(d+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,s=i.baseLine,a=i.points,o=i.strokeWidth,l=a[0].y,c=a[a.length-1].y,u=r*Math.abs(l-c),d=Bd(a.map(function(h){return h.x||0}));return et(s)&&typeof s=="number"?d=Math.max(s,d):s&&Array.isArray(s)&&s.length&&(d=Math.max(Bd(s.map(function(h){return h.x||0})),d)),et(d)?ne.createElement("rect",{x:0,y:l<c?l:l-u,width:d+(o?parseInt("".concat(o),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,s,a){var o=this.props,l=o.layout,c=o.type,u=o.stroke,d=o.connectNulls,h=o.isRange;o.ref;var m=Sne(o,vVe);return ne.createElement(En,{clipPath:s?"url(#clipPath-".concat(a,")"):null},ne.createElement(sp,Yh({},Rt(m,!0),{points:r,connectNulls:d,type:c,baseLine:i,layout:l,stroke:"none",className:"recharts-area-area"})),u!=="none"&&ne.createElement(sp,Yh({},Rt(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:r})),u!=="none"&&h&&ne.createElement(sp,Yh({},Rt(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var s=this,a=this.props,o=a.points,l=a.baseLine,c=a.isAnimationActive,u=a.animationBegin,d=a.animationDuration,h=a.animationEasing,m=a.animationId,b=this.state,x=b.prevPoints,v=b.prevBaseLine;return ne.createElement(wo,{begin:u,duration:d,isActive:c,easing:h,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var E=_.t;if(x){var T=x.length/o.length,A=o.map(function(L,I){var j=Math.floor(I*T);if(x[j]){var B=x[j],H=Ir(B.x,L.x),J=Ir(B.y,L.y);return Id(Id({},L),{},{x:H(E),y:J(E)})}return L}),P;if(et(l)&&typeof l=="number"){var R=Ir(v,l);P=R(E)}else if(an(l)||xy(l)){var N=Ir(v,0);P=N(E)}else P=l.map(function(L,I){var j=Math.floor(I*T);if(v[j]){var B=v[j],H=Ir(B.x,L.x),J=Ir(B.y,L.y);return Id(Id({},L),{},{x:H(E),y:J(E)})}return L});return s.renderAreaStatically(A,P,r,i)}return ne.createElement(En,null,ne.createElement("defs",null,ne.createElement("clipPath",{id:"animationClipPath-".concat(i)},s.renderClipRect(E))),ne.createElement(En,{clipPath:"url(#animationClipPath-".concat(i,")")},s.renderAreaStatically(o,l,r,i)))})}},{key:"renderArea",value:function(r,i){var s=this.props,a=s.points,o=s.baseLine,l=s.isAnimationActive,c=this.state,u=c.prevPoints,d=c.prevBaseLine,h=c.totalLength;return l&&a&&a.length&&(!u&&h>0||!sf(u,a)||!sf(d,o))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(a,o,r,i)}},{key:"render",value:function(){var r,i=this.props,s=i.hide,a=i.dot,o=i.points,l=i.className,c=i.top,u=i.left,d=i.xAxis,h=i.yAxis,m=i.width,b=i.height,x=i.isAnimationActive,v=i.id;if(s||!o||!o.length)return null;var _=this.state.isAnimationFinished,E=o.length===1,T=nn("recharts-area",l),A=d&&d.allowDataOverflow,P=h&&h.allowDataOverflow,R=A||P,N=an(v)?this.id:v,L=(r=Rt(a,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},I=L.r,j=I===void 0?3:I,B=L.strokeWidth,H=B===void 0?2:B,J=gZ(a)?a:{},G=J.clipDot,W=G===void 0?!0:G,K=j*2+H;return ne.createElement(En,{className:T},A||P?ne.createElement("defs",null,ne.createElement("clipPath",{id:"clipPath-".concat(N)},ne.createElement("rect",{x:A?u:u-m/2,y:P?c:c-b/2,width:A?m:m*2,height:P?b:b*2})),!W&&ne.createElement("clipPath",{id:"clipPath-dots-".concat(N)},ne.createElement("rect",{x:u-K/2,y:c-K/2,width:m+K,height:b+K}))):null,E?null:this.renderArea(R,N),(a||E)&&this.renderDots(R,W,N),(!x||_)&&xl.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])})(M.PureComponent);_ne=ls;ql(ls,"displayName","Area");ql(ls,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Du.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});ql(ls,"getBaseValue",function(t,e,n,r){var i=t.layout,s=t.baseValue,a=e.props.baseValue,o=a??s;if(et(o)&&typeof o=="number")return o;var l=i==="horizontal"?r:n,c=l.scale.domain();if(l.type==="number"){var u=Math.max(c[0],c[1]),d=Math.min(c[0],c[1]);return o==="dataMin"?d:o==="dataMax"||u<0?u:Math.max(Math.min(c[0],c[1]),0)}return o==="dataMin"?c[0]:o==="dataMax"?c[1]:c[0]});ql(ls,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,s=t.xAxisTicks,a=t.yAxisTicks,o=t.bandSize,l=t.dataKey,c=t.stackedData,u=t.dataStartIndex,d=t.displayedData,h=t.offset,m=e.layout,b=c&&c.length,x=_ne.getBaseValue(e,n,r,i),v=m==="horizontal",_=!1,E=d.map(function(A,P){var R;b?R=c[u+P]:(R=jr(A,l),Array.isArray(R)?_=!0:R=[x,R]);var N=R[1]==null||b&&jr(A,l)==null;return v?{x:UE({axis:r,ticks:s,bandSize:o,entry:A,index:P}),y:N?null:i.scale(R[1]),value:R,payload:A}:{x:N?null:r.scale(R[1]),y:UE({axis:i,ticks:a,bandSize:o,entry:A,index:P}),value:R,payload:A}}),T;return b||_?T=E.map(function(A){var P=Array.isArray(A.value)?A.value[0]:null;return v?{x:A.x,y:P!=null&&A.y!=null?i.scale(P):null}:{x:P!=null?r.scale(P):null,y:A.y}}):T=v?i.scale(x):r.scale(x),Id({points:E,baseLine:T,layout:m,isRange:_},h)});ql(ls,"renderDotItem",function(t,e){var n;if(ne.isValidElement(t))n=ne.cloneElement(t,e);else if(Ht(t))n=t(e);else{var r=nn("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,s=Sne(e,yVe);n=ne.createElement(Ey,Yh({},s,{key:i,className:r}))}return n});function Kv(t){"@babel/helpers - typeof";return Kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kv(t)}function MVe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PVe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pne(r.key),r)}}function CVe(t,e,n){return e&&PVe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function RVe(t,e,n){return e=dT(e),OVe(t,Ane()?Reflect.construct(e,n||[],dT(t).constructor):e.apply(t,n))}function OVe(t,e){if(e&&(Kv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NVe(t)}function NVe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ane(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ane=function(){return!!t})()}function dT(t){return dT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},dT(t)}function IVe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VD(t,e)}function VD(t,e){return VD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},VD(t,e)}function Mne(t,e,n){return e=Pne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pne(t){var e=kVe(t,"string");return Kv(e)=="symbol"?e:e+""}function kVe(t,e){if(Kv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Kv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function HD(){return HD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HD.apply(this,arguments)}function DVe(t){var e=t.xAxisId,n=_U(),r=SU(),i=lne(e);return i==null?null:M.createElement(My,HD({},i,{className:nn("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return fu(a,!0)}}))}var _o=(function(t){function e(){return MVe(this,e),RVe(this,e,arguments)}return IVe(e,t),CVe(e,[{key:"render",value:function(){return M.createElement(DVe,this.props)}}])})(M.Component);Mne(_o,"displayName","XAxis");Mne(_o,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Xv(t){"@babel/helpers - typeof";return Xv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xv(t)}function jVe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LVe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,One(r.key),r)}}function UVe(t,e,n){return e&&LVe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function FVe(t,e,n){return e=fT(e),BVe(t,Cne()?Reflect.construct(e,n||[],fT(t).constructor):e.apply(t,n))}function BVe(t,e){if(e&&(Xv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zVe(t)}function zVe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cne=function(){return!!t})()}function fT(t){return fT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fT(t)}function $Ve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WD(t,e)}function WD(t,e){return WD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},WD(t,e)}function Rne(t,e,n){return e=One(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function One(t){var e=VVe(t,"string");return Xv(e)=="symbol"?e:e+""}function VVe(t,e){if(Xv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function GD(){return GD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},GD.apply(this,arguments)}var HVe=function(e){var n=e.yAxisId,r=_U(),i=SU(),s=cne(n);return s==null?null:M.createElement(My,GD({},s,{className:nn("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(o){return fu(o,!0)}}))},So=(function(t){function e(){return jVe(this,e),FVe(this,e,arguments)}return $Ve(e,t),UVe(e,[{key:"render",value:function(){return M.createElement(HVe,this.props)}}])})(M.Component);Rne(So,"displayName","YAxis");Rne(So,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function Rq(t){return KVe(t)||qVe(t)||GVe(t)||WVe()}function WVe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GVe(t,e){if(t){if(typeof t=="string")return qD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qD(t,e)}}function qVe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function KVe(t){if(Array.isArray(t))return qD(t)}function qD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var KD=function(e,n,r,i,s){var a=Ga(e,TU),o=Ga(e,JA),l=[].concat(Rq(a),Rq(o)),c=Ga(e,ZA),u="".concat(i,"Id"),d=i[0],h=n;if(l.length&&(h=l.reduce(function(x,v){if(v.props[u]===r&&rc(v.props,"extendDomain")&&et(v.props[d])){var _=v.props[d];return[Math.min(x[0],_),Math.max(x[1],_)]}return x},h)),c.length){var m="".concat(d,"1"),b="".concat(d,"2");h=c.reduce(function(x,v){if(v.props[u]===r&&rc(v.props,"extendDomain")&&et(v.props[m])&&et(v.props[b])){var _=v.props[m],E=v.props[b];return[Math.min(x[0],_,E),Math.max(x[1],_,E)]}return x},h)}return s&&s.length&&(h=s.reduce(function(x,v){return et(v)?[Math.min(x[0],v),Math.max(x[1],v)]:x},h)),h},FN={exports:{}},Oq;function XVe(){return Oq||(Oq=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new i(u,d||l,h),b=n?n+c:c;return l._events[b]?l._events[b].fn?l._events[b]=[l._events[b],m]:l._events[b].push(m):(l._events[b]=m,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=n?n+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,m=d.length,b=new Array(m);h<m;h++)b[h]=d[h].fn;return b},o.prototype.listenerCount=function(c){var u=n?n+c:c,d=this._events[u];return d?d.fn?1:d.length:0},o.prototype.emit=function(c,u,d,h,m,b){var x=n?n+c:c;if(!this._events[x])return!1;var v=this._events[x],_=arguments.length,E,T;if(v.fn){switch(v.once&&this.removeListener(c,v.fn,void 0,!0),_){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,d),!0;case 4:return v.fn.call(v.context,u,d,h),!0;case 5:return v.fn.call(v.context,u,d,h,m),!0;case 6:return v.fn.call(v.context,u,d,h,m,b),!0}for(T=1,E=new Array(_-1);T<_;T++)E[T-1]=arguments[T];v.fn.apply(v.context,E)}else{var A=v.length,P;for(T=0;T<A;T++)switch(v[T].once&&this.removeListener(c,v[T].fn,void 0,!0),_){case 1:v[T].fn.call(v[T].context);break;case 2:v[T].fn.call(v[T].context,u);break;case 3:v[T].fn.call(v[T].context,u,d);break;case 4:v[T].fn.call(v[T].context,u,d,h);break;default:if(!E)for(P=1,E=new Array(_-1);P<_;P++)E[P-1]=arguments[P];v[T].fn.apply(v[T].context,E)}}return!0},o.prototype.on=function(c,u,d){return s(this,c,u,d,!1)},o.prototype.once=function(c,u,d){return s(this,c,u,d,!0)},o.prototype.removeListener=function(c,u,d,h){var m=n?n+c:c;if(!this._events[m])return this;if(!u)return a(this,m),this;var b=this._events[m];if(b.fn)b.fn===u&&(!h||b.once)&&(!d||b.context===d)&&a(this,m);else{for(var x=0,v=[],_=b.length;x<_;x++)(b[x].fn!==u||h&&!b[x].once||d&&b[x].context!==d)&&v.push(b[x]);v.length?this._events[m]=v.length===1?v[0]:v:a(this,m)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&a(this,u)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(FN)),FN.exports}var YVe=XVe();const JVe=Ln(YVe);var BN=new JVe,zN="recharts.syncMouseEvents";function iw(t){"@babel/helpers - typeof";return iw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iw(t)}function QVe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZVe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Nne(r.key),r)}}function eHe(t,e,n){return e&&ZVe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $N(t,e,n){return e=Nne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nne(t){var e=tHe(t,"string");return iw(e)=="symbol"?e:e+""}function tHe(t,e){if(iw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(iw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var nHe=(function(){function t(){QVe(this,t),$N(this,"activeIndex",0),$N(this,"coordinateList",[]),$N(this,"layout","horizontal")}return eHe(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,s=i===void 0?null:i,a=n.container,o=a===void 0?null:a,l=n.layout,c=l===void 0?null:l,u=n.offset,d=u===void 0?null:u,h=n.mouseHandlerCallback,m=h===void 0?null:h;this.coordinateList=(r=s??this.coordinateList)!==null&&r!==void 0?r:[],this.container=o??this.container,this.layout=c??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,a=i.y,o=i.height,l=this.coordinateList[this.activeIndex].coordinate,c=((n=window)===null||n===void 0?void 0:n.scrollX)||0,u=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=s+l+c,h=a+this.offset.top+o/2+u;this.mouseHandlerCallback({pageX:d,pageY:h})}}}])})();function rHe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t?.[0],i=t?.[1];if(r&&i&&et(r)&&et(i))return!0}return!1}function iHe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function Ine(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,s=t.endAngle,a=Un(e,n,r,i),o=Un(e,n,r,s);return{points:[a,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}function sHe(t,e,n){var r,i,s,a;if(t==="horizontal")r=e.x,s=r,i=n.top,a=n.top+n.height;else if(t==="vertical")i=e.y,a=i,r=n.left,s=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var o=e.cx,l=e.cy,c=e.innerRadius,u=e.outerRadius,d=e.angle,h=Un(o,l,c,d),m=Un(o,l,u,d);r=h.x,i=h.y,s=m.x,a=m.y}else return Ine(e);return[{x:r,y:i},{x:s,y:a}]}function sw(t){"@babel/helpers - typeof";return sw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sw(t)}function Nq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function v1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Nq(Object(n),!0).forEach(function(r){aHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aHe(t,e,n){return e=oHe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oHe(t){var e=lHe(t,"string");return sw(e)=="symbol"?e:e+""}function lHe(t,e){if(sw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(sw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cHe(t){var e,n,r=t.element,i=t.tooltipEventType,s=t.isActive,a=t.activeCoordinate,o=t.activePayload,l=t.offset,c=t.activeTooltipIndex,u=t.tooltipAxisBandSize,d=t.layout,h=t.chartName,m=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!m||!s||!a||h!=="ScatterChart"&&i!=="axis")return null;var b,x=sp;if(h==="ScatterChart")b=a,x=YBe;else if(h==="BarChart")b=iHe(d,a,l,u),x=vU;else if(d==="radial"){var v=Ine(a),_=v.cx,E=v.cy,T=v.radius,A=v.startAngle,P=v.endAngle;b={cx:_,cy:E,startAngle:A,endAngle:P,innerRadius:T,outerRadius:T},x=Mte}else b={points:sHe(d,a,l)},x=sp;var R=v1(v1(v1(v1({stroke:"#ccc",pointerEvents:"none"},l),b),Rt(m,!1)),{},{payload:o,payloadIndex:c,className:nn("recharts-tooltip-cursor",m.className)});return M.isValidElement(m)?M.cloneElement(m,R):M.createElement(x,R)}var uHe=["item"],dHe=["children","className","width","height","style","compact","title","desc"];function Yv(t){"@babel/helpers - typeof";return Yv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yv(t)}function qg(){return qg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qg.apply(this,arguments)}function Iq(t,e){return pHe(t)||hHe(t,e)||Dne(t,e)||fHe()}function fHe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hHe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function pHe(t){if(Array.isArray(t))return t}function kq(t,e){if(t==null)return{};var n=mHe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function mHe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function gHe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vHe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jne(r.key),r)}}function yHe(t,e,n){return e&&vHe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function xHe(t,e,n){return e=hT(e),bHe(t,kne()?Reflect.construct(e,n||[],hT(t).constructor):e.apply(t,n))}function bHe(t,e){if(e&&(Yv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wHe(t)}function wHe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kne=function(){return!!t})()}function hT(t){return hT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hT(t)}function _He(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XD(t,e)}function XD(t,e){return XD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},XD(t,e)}function Jv(t){return THe(t)||EHe(t)||Dne(t)||SHe()}function SHe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dne(t,e){if(t){if(typeof t=="string")return YD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YD(t,e)}}function EHe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function THe(t){if(Array.isArray(t))return YD(t)}function YD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Dq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ue(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Dq(Object(n),!0).forEach(function(r){Jt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jt(t,e,n){return e=jne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jne(t){var e=AHe(t,"string");return Yv(e)=="symbol"?e:e+""}function AHe(t,e){if(Yv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Yv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MHe={xAxis:["bottom","top"],yAxis:["left","right"]},PHe={width:"100%",height:"100%"},Lne={x:0,y:0};function y1(t){return t}var CHe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},RHe=function(e,n,r,i){var s=n.find(function(u){return u&&u.index===r});if(s){if(e==="horizontal")return{x:s.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:s.coordinate};if(e==="centric"){var a=s.coordinate,o=i.radius;return Ue(Ue(Ue({},i),Un(i.cx,i.cy,o,a)),{},{angle:a,radius:o})}var l=s.coordinate,c=i.angle;return Ue(Ue(Ue({},i),Un(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return Lne},eM=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,s=n.dataEndIndex,a=(r??[]).reduce(function(o,l){var c=l.props.data;return c&&c.length?[].concat(Jv(o),Jv(c)):o},[]);return a.length>0?a:e&&e.length&&et(i)&&et(s)?e.slice(i,s+1):[]};function Une(t){return t==="number"?[0,"auto"]:void 0}var JD=function(e,n,r,i){var s=e.graphicalItems,a=e.tooltipAxis,o=eM(n,e);return r<0||!s||!s.length||r>=o.length?null:s.reduce(function(l,c){var u,d=(u=c.props.data)!==null&&u!==void 0?u:n;d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(a.dataKey&&!a.allowDuplicatedCategory){var m=d===void 0?o:d;h=hE(m,a.dataKey,i)}else h=d&&d[r]||o[r];return h?[].concat(Jv(l),[xte(c,h)]):l},[])},jq=function(e,n,r,i){var s=i||{x:e.chartX,y:e.chartY},a=CHe(s,r),o=e.orderedTooltipTicks,l=e.tooltipAxis,c=e.tooltipTicks,u=P3e(a,o,c,l);if(u>=0&&c){var d=c[u]&&c[u].value,h=JD(e,n,u,d),m=RHe(r,o,u,s);return{activeTooltipIndex:u,activeLabel:d,activePayload:h,activeCoordinate:m}}return null},OHe=function(e,n){var r=n.axes,i=n.graphicalItems,s=n.axisType,a=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.layout,d=e.children,h=e.stackOffset,m=hte(u,s);return r.reduce(function(b,x){var v,_=x.type.defaultProps!==void 0?Ue(Ue({},x.type.defaultProps),x.props):x.props,E=_.type,T=_.dataKey,A=_.allowDataOverflow,P=_.allowDuplicatedCategory,R=_.scale,N=_.ticks,L=_.includeHidden,I=_[a];if(b[I])return b;var j=eM(e.data,{graphicalItems:i.filter(function(Q){var ie,ce=a in Q.props?Q.props[a]:(ie=Q.type.defaultProps)===null||ie===void 0?void 0:ie[a];return ce===I}),dataStartIndex:l,dataEndIndex:c}),B=j.length,H,J,G;rHe(_.domain,A,E)&&(H=cD(_.domain,null,A),m&&(E==="number"||R!=="auto")&&(G=Rx(j,T,"category")));var W=Une(E);if(!H||H.length===0){var K,te=(K=_.domain)!==null&&K!==void 0?K:W;if(T){if(H=Rx(j,T,E),E==="category"&&m){var z=_2e(H);P&&z?(J=H,H=ZE(0,B)):P||(H=O8(te,H,x).reduce(function(Q,ie){return Q.indexOf(ie)>=0?Q:[].concat(Jv(Q),[ie])},[]))}else if(E==="category")P?H=H.filter(function(Q){return Q!==""&&!an(Q)}):H=O8(te,H,x).reduce(function(Q,ie){return Q.indexOf(ie)>=0||ie===""||an(ie)?Q:[].concat(Jv(Q),[ie])},[]);else if(E==="number"){var V=I3e(j,i.filter(function(Q){var ie,ce,ye=a in Q.props?Q.props[a]:(ie=Q.type.defaultProps)===null||ie===void 0?void 0:ie[a],Ce="hide"in Q.props?Q.props.hide:(ce=Q.type.defaultProps)===null||ce===void 0?void 0:ce.hide;return ye===I&&(L||!Ce)}),T,s,u);V&&(H=V)}m&&(E==="number"||R!=="auto")&&(G=Rx(j,T,"category"))}else m?H=ZE(0,B):o&&o[I]&&o[I].hasStack&&E==="number"?H=h==="expand"?[0,1]:yte(o[I].stackGroups,l,c):H=fte(j,i.filter(function(Q){var ie=a in Q.props?Q.props[a]:Q.type.defaultProps[a],ce="hide"in Q.props?Q.props.hide:Q.type.defaultProps.hide;return ie===I&&(L||!ce)}),E,u,!0);if(E==="number")H=KD(d,H,I,s,N),te&&(H=cD(te,H,A));else if(E==="category"&&te){var X=te,q=H.every(function(Q){return X.indexOf(Q)>=0});q&&(H=X)}}return Ue(Ue({},b),{},Jt({},I,Ue(Ue({},_),{},{axisType:s,domain:H,categoricalDomain:G,duplicateDomain:J,originalDomain:(v=_.domain)!==null&&v!==void 0?v:W,isCategorical:m,layout:u})))},{})},NHe=function(e,n){var r=n.graphicalItems,i=n.Axis,s=n.axisType,a=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.layout,d=e.children,h=eM(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:c}),m=h.length,b=hte(u,s),x=-1;return r.reduce(function(v,_){var E=_.type.defaultProps!==void 0?Ue(Ue({},_.type.defaultProps),_.props):_.props,T=E[a],A=Une("number");if(!v[T]){x++;var P;return b?P=ZE(0,m):o&&o[T]&&o[T].hasStack?(P=yte(o[T].stackGroups,l,c),P=KD(d,P,T,s)):(P=cD(A,fte(h,r.filter(function(R){var N,L,I=a in R.props?R.props[a]:(N=R.type.defaultProps)===null||N===void 0?void 0:N[a],j="hide"in R.props?R.props.hide:(L=R.type.defaultProps)===null||L===void 0?void 0:L.hide;return I===T&&!j}),"number",u),i.defaultProps.allowDataOverflow),P=KD(d,P,T,s)),Ue(Ue({},v),{},Jt({},T,Ue(Ue({axisType:s},i.defaultProps),{},{hide:!0,orientation:Wa(MHe,"".concat(s,".").concat(x%2),null),domain:P,originalDomain:A,isCategorical:b,layout:u})))}return v},{})},IHe=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,s=n.AxisComp,a=n.graphicalItems,o=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.children,d="".concat(i,"Id"),h=Ga(u,s),m={};return h&&h.length?m=OHe(e,{axes:h,graphicalItems:a,axisType:i,axisIdKey:d,stackGroups:o,dataStartIndex:l,dataEndIndex:c}):a&&a.length&&(m=NHe(e,{Axis:s,graphicalItems:a,axisType:i,axisIdKey:d,stackGroups:o,dataStartIndex:l,dataEndIndex:c})),m},kHe=function(e){var n=Ud(e),r=fu(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:H3(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:FE(n,r)}},Lq=function(e){var n=e.children,r=e.defaultShowTooltip,i=Da(n,Uv),s=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(a=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!r}},DHe=function(e){return!e||!e.length?!1:e.some(function(n){var r=gu(n&&n.type);return r&&r.indexOf("Bar")>=0})},Uq=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},jHe=function(e,n){var r=e.props,i=e.graphicalItems,s=e.xAxisMap,a=s===void 0?{}:s,o=e.yAxisMap,l=o===void 0?{}:o,c=r.width,u=r.height,d=r.children,h=r.margin||{},m=Da(d,Uv),b=Da(d,tv),x=Object.keys(l).reduce(function(P,R){var N=l[R],L=N.orientation;return!N.mirror&&!N.hide?Ue(Ue({},P),{},Jt({},L,P[L]+N.width)):P},{left:h.left||0,right:h.right||0}),v=Object.keys(a).reduce(function(P,R){var N=a[R],L=N.orientation;return!N.mirror&&!N.hide?Ue(Ue({},P),{},Jt({},L,Wa(P,"".concat(L))+N.height)):P},{top:h.top||0,bottom:h.bottom||0}),_=Ue(Ue({},v),x),E=_.bottom;m&&(_.bottom+=m.props.height||Uv.defaultProps.height),b&&n&&(_=O3e(_,i,r,n));var T=c-_.left-_.right,A=u-_.top-_.bottom;return Ue(Ue({brushBottom:E},_),{},{width:Math.max(T,0),height:Math.max(A,0)})},LHe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},Ww=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,s=i===void 0?"axis":i,a=e.validateTooltipEventTypes,o=a===void 0?["axis"]:a,l=e.axisComponents,c=e.legendContent,u=e.formatAxisMap,d=e.defaultProps,h=function(_,E){var T=E.graphicalItems,A=E.stackGroups,P=E.offset,R=E.updateId,N=E.dataStartIndex,L=E.dataEndIndex,I=_.barSize,j=_.layout,B=_.barGap,H=_.barCategoryGap,J=_.maxBarSize,G=Uq(j),W=G.numericAxisName,K=G.cateAxisName,te=DHe(T),z=[];return T.forEach(function(V,X){var q=eM(_.data,{graphicalItems:[V],dataStartIndex:N,dataEndIndex:L}),Q=V.type.defaultProps!==void 0?Ue(Ue({},V.type.defaultProps),V.props):V.props,ie=Q.dataKey,ce=Q.maxBarSize,ye=Q["".concat(W,"Id")],Ce=Q["".concat(K,"Id")],he={},De=l.reduce(function(ge,$e){var Be=E["".concat($e.axisType,"Map")],Fe=Q["".concat($e.axisType,"Id")];Be&&Be[Fe]||$e.axisType==="zAxis"||gp();var mt=Be[Fe];return Ue(Ue({},ge),{},Jt(Jt({},$e.axisType,mt),"".concat($e.axisType,"Ticks"),fu(mt)))},he),be=De[K],_e=De["".concat(K,"Ticks")],Ee=A&&A[ye]&&A[ye].hasStack&&$3e(V,A[ye].stackGroups),ee=gu(V.type).indexOf("Bar")>=0,Me=FE(be,_e),xe=[],Le=te&&C3e({barSize:I,stackGroups:A,totalSize:LHe(De,K)});if(ee){var Pe,tt,Ze=an(ce)?J:ce,re=(Pe=(tt=FE(be,_e,!0))!==null&&tt!==void 0?tt:Ze)!==null&&Pe!==void 0?Pe:0;xe=R3e({barGap:B,barCategoryGap:H,bandSize:re!==Me?re:Me,sizeList:Le[Ce],maxBarSize:Ze}),re!==Me&&(xe=xe.map(function(ge){return Ue(Ue({},ge),{},{position:Ue(Ue({},ge.position),{},{offset:ge.position.offset-re/2})})}))}var Z=V&&V.type&&V.type.getComposedData;Z&&z.push({props:Ue(Ue({},Z(Ue(Ue({},De),{},{displayedData:q,props:_,dataKey:ie,item:V,bandSize:Me,barPosition:xe,offset:P,stackedData:Ee,layout:j,dataStartIndex:N,dataEndIndex:L}))),{},Jt(Jt(Jt({key:V.key||"item-".concat(X)},W,De[W]),K,De[K]),"animationId",R)),childIndex:k2e(V,_.children),item:V})}),z},m=function(_,E){var T=_.props,A=_.dataStartIndex,P=_.dataEndIndex,R=_.updateId;if(!GV({props:T}))return null;var N=T.children,L=T.layout,I=T.stackOffset,j=T.data,B=T.reverseStackOrder,H=Uq(L),J=H.numericAxisName,G=H.cateAxisName,W=Ga(N,r),K=B3e(j,W,"".concat(J,"Id"),"".concat(G,"Id"),I,B),te=l.reduce(function(Q,ie){var ce="".concat(ie.axisType,"Map");return Ue(Ue({},Q),{},Jt({},ce,IHe(T,Ue(Ue({},ie),{},{graphicalItems:W,stackGroups:ie.axisType===J&&K,dataStartIndex:A,dataEndIndex:P}))))},{}),z=jHe(Ue(Ue({},te),{},{props:T,graphicalItems:W}),E?.legendBBox);Object.keys(te).forEach(function(Q){te[Q]=u(T,te[Q],z,Q.replace("Map",""),n)});var V=te["".concat(G,"Map")],X=kHe(V),q=h(T,Ue(Ue({},te),{},{dataStartIndex:A,dataEndIndex:P,updateId:R,graphicalItems:W,stackGroups:K,offset:z}));return Ue(Ue({formattedGraphicalItems:q,graphicalItems:W,offset:z,stackGroups:K},X),te)},b=(function(v){function _(E){var T,A,P;return gHe(this,_),P=xHe(this,_,[E]),Jt(P,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Jt(P,"accessibilityManager",new nHe),Jt(P,"handleLegendBBoxUpdate",function(R){if(R){var N=P.state,L=N.dataStartIndex,I=N.dataEndIndex,j=N.updateId;P.setState(Ue({legendBBox:R},m({props:P.props,dataStartIndex:L,dataEndIndex:I,updateId:j},Ue(Ue({},P.state),{},{legendBBox:R}))))}}),Jt(P,"handleReceiveSyncEvent",function(R,N,L){if(P.props.syncId===R){if(L===P.eventEmitterSymbol&&typeof P.props.syncMethod!="function")return;P.applySyncEvent(N)}}),Jt(P,"handleBrushChange",function(R){var N=R.startIndex,L=R.endIndex;if(N!==P.state.dataStartIndex||L!==P.state.dataEndIndex){var I=P.state.updateId;P.setState(function(){return Ue({dataStartIndex:N,dataEndIndex:L},m({props:P.props,dataStartIndex:N,dataEndIndex:L,updateId:I},P.state))}),P.triggerSyncEvent({dataStartIndex:N,dataEndIndex:L})}}),Jt(P,"handleMouseEnter",function(R){var N=P.getMouseInfo(R);if(N){var L=Ue(Ue({},N),{},{isTooltipActive:!0});P.setState(L),P.triggerSyncEvent(L);var I=P.props.onMouseEnter;Ht(I)&&I(L,R)}}),Jt(P,"triggeredAfterMouseMove",function(R){var N=P.getMouseInfo(R),L=N?Ue(Ue({},N),{},{isTooltipActive:!0}):{isTooltipActive:!1};P.setState(L),P.triggerSyncEvent(L);var I=P.props.onMouseMove;Ht(I)&&I(L,R)}),Jt(P,"handleItemMouseEnter",function(R){P.setState(function(){return{isTooltipActive:!0,activeItem:R,activePayload:R.tooltipPayload,activeCoordinate:R.tooltipPosition||{x:R.cx,y:R.cy}}})}),Jt(P,"handleItemMouseLeave",function(){P.setState(function(){return{isTooltipActive:!1}})}),Jt(P,"handleMouseMove",function(R){R.persist(),P.throttleTriggeredAfterMouseMove(R)}),Jt(P,"handleMouseLeave",function(R){P.throttleTriggeredAfterMouseMove.cancel();var N={isTooltipActive:!1};P.setState(N),P.triggerSyncEvent(N);var L=P.props.onMouseLeave;Ht(L)&&L(N,R)}),Jt(P,"handleOuterEvent",function(R){var N=I2e(R),L=Wa(P.props,"".concat(N));if(N&&Ht(L)){var I,j;/.*touch.*/i.test(N)?j=P.getMouseInfo(R.changedTouches[0]):j=P.getMouseInfo(R),L((I=j)!==null&&I!==void 0?I:{},R)}}),Jt(P,"handleClick",function(R){var N=P.getMouseInfo(R);if(N){var L=Ue(Ue({},N),{},{isTooltipActive:!0});P.setState(L),P.triggerSyncEvent(L);var I=P.props.onClick;Ht(I)&&I(L,R)}}),Jt(P,"handleMouseDown",function(R){var N=P.props.onMouseDown;if(Ht(N)){var L=P.getMouseInfo(R);N(L,R)}}),Jt(P,"handleMouseUp",function(R){var N=P.props.onMouseUp;if(Ht(N)){var L=P.getMouseInfo(R);N(L,R)}}),Jt(P,"handleTouchMove",function(R){R.changedTouches!=null&&R.changedTouches.length>0&&P.throttleTriggeredAfterMouseMove(R.changedTouches[0])}),Jt(P,"handleTouchStart",function(R){R.changedTouches!=null&&R.changedTouches.length>0&&P.handleMouseDown(R.changedTouches[0])}),Jt(P,"handleTouchEnd",function(R){R.changedTouches!=null&&R.changedTouches.length>0&&P.handleMouseUp(R.changedTouches[0])}),Jt(P,"handleDoubleClick",function(R){var N=P.props.onDoubleClick;if(Ht(N)){var L=P.getMouseInfo(R);N(L,R)}}),Jt(P,"handleContextMenu",function(R){var N=P.props.onContextMenu;if(Ht(N)){var L=P.getMouseInfo(R);N(L,R)}}),Jt(P,"triggerSyncEvent",function(R){P.props.syncId!==void 0&&BN.emit(zN,P.props.syncId,R,P.eventEmitterSymbol)}),Jt(P,"applySyncEvent",function(R){var N=P.props,L=N.layout,I=N.syncMethod,j=P.state.updateId,B=R.dataStartIndex,H=R.dataEndIndex;if(R.dataStartIndex!==void 0||R.dataEndIndex!==void 0)P.setState(Ue({dataStartIndex:B,dataEndIndex:H},m({props:P.props,dataStartIndex:B,dataEndIndex:H,updateId:j},P.state)));else if(R.activeTooltipIndex!==void 0){var J=R.chartX,G=R.chartY,W=R.activeTooltipIndex,K=P.state,te=K.offset,z=K.tooltipTicks;if(!te)return;if(typeof I=="function")W=I(z,R);else if(I==="value"){W=-1;for(var V=0;V<z.length;V++)if(z[V].value===R.activeLabel){W=V;break}}var X=Ue(Ue({},te),{},{x:te.left,y:te.top}),q=Math.min(J,X.x+X.width),Q=Math.min(G,X.y+X.height),ie=z[W]&&z[W].value,ce=JD(P.state,P.props.data,W),ye=z[W]?{x:L==="horizontal"?z[W].coordinate:q,y:L==="horizontal"?Q:z[W].coordinate}:Lne;P.setState(Ue(Ue({},R),{},{activeLabel:ie,activeCoordinate:ye,activePayload:ce,activeTooltipIndex:W}))}else P.setState(R)}),Jt(P,"renderCursor",function(R){var N,L=P.state,I=L.isTooltipActive,j=L.activeCoordinate,B=L.activePayload,H=L.offset,J=L.activeTooltipIndex,G=L.tooltipAxisBandSize,W=P.getTooltipEventType(),K=(N=R.props.active)!==null&&N!==void 0?N:I,te=P.props.layout,z=R.key||"_recharts-cursor";return ne.createElement(cHe,{key:z,activeCoordinate:j,activePayload:B,activeTooltipIndex:J,chartName:n,element:R,isActive:K,layout:te,offset:H,tooltipAxisBandSize:G,tooltipEventType:W})}),Jt(P,"renderPolarAxis",function(R,N,L){var I=Wa(R,"type.axisType"),j=Wa(P.state,"".concat(I,"Map")),B=R.type.defaultProps,H=B!==void 0?Ue(Ue({},B),R.props):R.props,J=j&&j[H["".concat(I,"Id")]];return M.cloneElement(R,Ue(Ue({},J),{},{className:nn(I,J.className),key:R.key||"".concat(N,"-").concat(L),ticks:fu(J,!0)}))}),Jt(P,"renderPolarGrid",function(R){var N=R.props,L=N.radialLines,I=N.polarAngles,j=N.polarRadius,B=P.state,H=B.radiusAxisMap,J=B.angleAxisMap,G=Ud(H),W=Ud(J),K=W.cx,te=W.cy,z=W.innerRadius,V=W.outerRadius;return M.cloneElement(R,{polarAngles:Array.isArray(I)?I:fu(W,!0).map(function(X){return X.coordinate}),polarRadius:Array.isArray(j)?j:fu(G,!0).map(function(X){return X.coordinate}),cx:K,cy:te,innerRadius:z,outerRadius:V,key:R.key||"polar-grid",radialLines:L})}),Jt(P,"renderLegend",function(){var R=P.state.formattedGraphicalItems,N=P.props,L=N.children,I=N.width,j=N.height,B=P.props.margin||{},H=I-(B.left||0)-(B.right||0),J=ute({children:L,formattedGraphicalItems:R,legendWidth:H,legendContent:c});if(!J)return null;var G=J.item,W=kq(J,uHe);return M.cloneElement(G,Ue(Ue({},W),{},{chartWidth:I,chartHeight:j,margin:B,onBBoxUpdate:P.handleLegendBBoxUpdate}))}),Jt(P,"renderTooltip",function(){var R,N=P.props,L=N.children,I=N.accessibilityLayer,j=Da(L,di);if(!j)return null;var B=P.state,H=B.isTooltipActive,J=B.activeCoordinate,G=B.activePayload,W=B.activeLabel,K=B.offset,te=(R=j.props.active)!==null&&R!==void 0?R:H;return M.cloneElement(j,{viewBox:Ue(Ue({},K),{},{x:K.left,y:K.top}),active:te,label:W,payload:te?G:[],coordinate:J,accessibilityLayer:I})}),Jt(P,"renderBrush",function(R){var N=P.props,L=N.margin,I=N.data,j=P.state,B=j.offset,H=j.dataStartIndex,J=j.dataEndIndex,G=j.updateId;return M.cloneElement(R,{key:R.key||"_recharts-brush",onChange:h1(P.handleBrushChange,R.props.onChange),data:I,x:et(R.props.x)?R.props.x:B.left,y:et(R.props.y)?R.props.y:B.top+B.height+B.brushBottom-(L.bottom||0),width:et(R.props.width)?R.props.width:B.width,startIndex:H,endIndex:J,updateId:"brush-".concat(G)})}),Jt(P,"renderReferenceElement",function(R,N,L){if(!R)return null;var I=P,j=I.clipPathId,B=P.state,H=B.xAxisMap,J=B.yAxisMap,G=B.offset,W=R.type.defaultProps||{},K=R.props,te=K.xAxisId,z=te===void 0?W.xAxisId:te,V=K.yAxisId,X=V===void 0?W.yAxisId:V;return M.cloneElement(R,{key:R.key||"".concat(N,"-").concat(L),xAxis:H[z],yAxis:J[X],viewBox:{x:G.left,y:G.top,width:G.width,height:G.height},clipPathId:j})}),Jt(P,"renderActivePoints",function(R){var N=R.item,L=R.activePoint,I=R.basePoint,j=R.childIndex,B=R.isRange,H=[],J=N.props.key,G=N.item.type.defaultProps!==void 0?Ue(Ue({},N.item.type.defaultProps),N.item.props):N.item.props,W=G.activeDot,K=G.dataKey,te=Ue(Ue({index:j,dataKey:K,cx:L.x,cy:L.y,r:4,fill:gU(N.item),strokeWidth:2,stroke:"#fff",payload:L.payload,value:L.value},Rt(W,!1)),pE(W));return H.push(_.renderActiveDot(W,te,"".concat(J,"-activePoint-").concat(j))),I?H.push(_.renderActiveDot(W,Ue(Ue({},te),{},{cx:I.x,cy:I.y}),"".concat(J,"-basePoint-").concat(j))):B&&H.push(null),H}),Jt(P,"renderGraphicChild",function(R,N,L){var I=P.filterFormatItem(R,N,L);if(!I)return null;var j=P.getTooltipEventType(),B=P.state,H=B.isTooltipActive,J=B.tooltipAxis,G=B.activeTooltipIndex,W=B.activeLabel,K=P.props.children,te=Da(K,di),z=I.props,V=z.points,X=z.isRange,q=z.baseLine,Q=I.item.type.defaultProps!==void 0?Ue(Ue({},I.item.type.defaultProps),I.item.props):I.item.props,ie=Q.activeDot,ce=Q.hide,ye=Q.activeBar,Ce=Q.activeShape,he=!!(!ce&&H&&te&&(ie||ye||Ce)),De={};j!=="axis"&&te&&te.props.trigger==="click"?De={onClick:h1(P.handleItemMouseEnter,R.props.onClick)}:j!=="axis"&&(De={onMouseLeave:h1(P.handleItemMouseLeave,R.props.onMouseLeave),onMouseEnter:h1(P.handleItemMouseEnter,R.props.onMouseEnter)});var be=M.cloneElement(R,Ue(Ue({},I.props),De));function _e($e){return typeof J.dataKey=="function"?J.dataKey($e.payload):null}if(he)if(G>=0){var Ee,ee;if(J.dataKey&&!J.allowDuplicatedCategory){var Me=typeof J.dataKey=="function"?_e:"payload.".concat(J.dataKey.toString());Ee=hE(V,Me,W),ee=X&&q&&hE(q,Me,W)}else Ee=V?.[G],ee=X&&q&&q[G];if(Ce||ye){var xe=R.props.activeIndex!==void 0?R.props.activeIndex:G;return[M.cloneElement(R,Ue(Ue(Ue({},I.props),De),{},{activeIndex:xe})),null,null]}if(!an(Ee))return[be].concat(Jv(P.renderActivePoints({item:I,activePoint:Ee,basePoint:ee,childIndex:G,isRange:X})))}else{var Le,Pe=(Le=P.getItemByXY(P.state.activeCoordinate))!==null&&Le!==void 0?Le:{graphicalItem:be},tt=Pe.graphicalItem,Ze=tt.item,re=Ze===void 0?R:Ze,Z=tt.childIndex,ge=Ue(Ue(Ue({},I.props),De),{},{activeIndex:Z});return[M.cloneElement(re,ge),null,null]}return X?[be,null,null]:[be,null]}),Jt(P,"renderCustomized",function(R,N,L){return M.cloneElement(R,Ue(Ue({key:"recharts-customized-".concat(L)},P.props),P.state))}),Jt(P,"renderMap",{CartesianGrid:{handler:y1,once:!0},ReferenceArea:{handler:P.renderReferenceElement},ReferenceLine:{handler:y1},ReferenceDot:{handler:P.renderReferenceElement},XAxis:{handler:y1},YAxis:{handler:y1},Brush:{handler:P.renderBrush,once:!0},Bar:{handler:P.renderGraphicChild},Line:{handler:P.renderGraphicChild},Area:{handler:P.renderGraphicChild},Radar:{handler:P.renderGraphicChild},RadialBar:{handler:P.renderGraphicChild},Scatter:{handler:P.renderGraphicChild},Pie:{handler:P.renderGraphicChild},Funnel:{handler:P.renderGraphicChild},Tooltip:{handler:P.renderCursor,once:!0},PolarGrid:{handler:P.renderPolarGrid,once:!0},PolarAngleAxis:{handler:P.renderPolarAxis},PolarRadiusAxis:{handler:P.renderPolarAxis},Customized:{handler:P.renderCustomized}}),P.clipPathId="".concat((T=E.id)!==null&&T!==void 0?T:jp("recharts"),"-clip"),P.throttleTriggeredAfterMouseMove=cee(P.triggeredAfterMouseMove,(A=E.throttleDelay)!==null&&A!==void 0?A:1e3/60),P.state={},P}return _He(_,v),yHe(_,[{key:"componentDidMount",value:function(){var T,A;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(T=this.props.margin.left)!==null&&T!==void 0?T:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var T=this.props,A=T.children,P=T.data,R=T.height,N=T.layout,L=Da(A,di);if(L){var I=L.props.defaultIndex;if(!(typeof I!="number"||I<0||I>this.state.tooltipTicks.length-1)){var j=this.state.tooltipTicks[I]&&this.state.tooltipTicks[I].value,B=JD(this.state,P,I,j),H=this.state.tooltipTicks[I].coordinate,J=(this.state.offset.top+R)/2,G=N==="horizontal",W=G?{x:H,y:J}:{y:H,x:J},K=this.state.formattedGraphicalItems.find(function(z){var V=z.item;return V.type.name==="Scatter"});K&&(W=Ue(Ue({},W),K.props.points[I].tooltipPosition),B=K.props.points[I].tooltipPayload);var te={activeTooltipIndex:I,isTooltipActive:!0,activeLabel:j,activePayload:B,activeCoordinate:W};this.setState(te),this.renderCursor(L),this.accessibilityManager.setIndex(I)}}}},{key:"getSnapshotBeforeUpdate",value:function(T,A){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==A.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==T.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==T.margin){var P,R;this.accessibilityManager.setDetails({offset:{left:(P=this.props.margin.left)!==null&&P!==void 0?P:0,top:(R=this.props.margin.top)!==null&&R!==void 0?R:0}})}return null}},{key:"componentDidUpdate",value:function(T){Ok([Da(T.children,di)],[Da(this.props.children,di)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var T=Da(this.props.children,di);if(T&&typeof T.props.shared=="boolean"){var A=T.props.shared?"axis":"item";return o.indexOf(A)>=0?A:s}return s}},{key:"getMouseInfo",value:function(T){if(!this.container)return null;var A=this.container,P=A.getBoundingClientRect(),R=bke(P),N={chartX:Math.round(T.pageX-R.left),chartY:Math.round(T.pageY-R.top)},L=P.width/A.offsetWidth||1,I=this.inRange(N.chartX,N.chartY,L);if(!I)return null;var j=this.state,B=j.xAxisMap,H=j.yAxisMap,J=this.getTooltipEventType(),G=jq(this.state,this.props.data,this.props.layout,I);if(J!=="axis"&&B&&H){var W=Ud(B).scale,K=Ud(H).scale,te=W&&W.invert?W.invert(N.chartX):null,z=K&&K.invert?K.invert(N.chartY):null;return Ue(Ue({},N),{},{xValue:te,yValue:z},G)}return G?Ue(Ue({},N),G):null}},{key:"inRange",value:function(T,A){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,R=this.props.layout,N=T/P,L=A/P;if(R==="horizontal"||R==="vertical"){var I=this.state.offset,j=N>=I.left&&N<=I.left+I.width&&L>=I.top&&L<=I.top+I.height;return j?{x:N,y:L}:null}var B=this.state,H=B.angleAxisMap,J=B.radiusAxisMap;if(H&&J){var G=Ud(H);return k8({x:N,y:L},G)}return null}},{key:"parseEventsOfWrapper",value:function(){var T=this.props.children,A=this.getTooltipEventType(),P=Da(T,di),R={};P&&A==="axis"&&(P.props.trigger==="click"?R={onClick:this.handleClick}:R={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var N=pE(this.props,this.handleOuterEvent);return Ue(Ue({},N),R)}},{key:"addListener",value:function(){BN.on(zN,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){BN.removeListener(zN,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(T,A,P){for(var R=this.state.formattedGraphicalItems,N=0,L=R.length;N<L;N++){var I=R[N];if(I.item===T||I.props.key===T.key||A===gu(I.item.type)&&P===I.childIndex)return I}return null}},{key:"renderClipPath",value:function(){var T=this.clipPathId,A=this.state.offset,P=A.left,R=A.top,N=A.height,L=A.width;return ne.createElement("defs",null,ne.createElement("clipPath",{id:T},ne.createElement("rect",{x:P,y:R,height:N,width:L})))}},{key:"getXScales",value:function(){var T=this.state.xAxisMap;return T?Object.entries(T).reduce(function(A,P){var R=Iq(P,2),N=R[0],L=R[1];return Ue(Ue({},A),{},Jt({},N,L.scale))},{}):null}},{key:"getYScales",value:function(){var T=this.state.yAxisMap;return T?Object.entries(T).reduce(function(A,P){var R=Iq(P,2),N=R[0],L=R[1];return Ue(Ue({},A),{},Jt({},N,L.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(T){var A;return(A=this.state.xAxisMap)===null||A===void 0||(A=A[T])===null||A===void 0?void 0:A.scale}},{key:"getYScaleByAxisId",value:function(T){var A;return(A=this.state.yAxisMap)===null||A===void 0||(A=A[T])===null||A===void 0?void 0:A.scale}},{key:"getItemByXY",value:function(T){var A=this.state,P=A.formattedGraphicalItems,R=A.activeItem;if(P&&P.length)for(var N=0,L=P.length;N<L;N++){var I=P[N],j=I.props,B=I.item,H=B.type.defaultProps!==void 0?Ue(Ue({},B.type.defaultProps),B.props):B.props,J=gu(B.type);if(J==="Bar"){var G=(j.data||[]).find(function(z){return OBe(T,z)});if(G)return{graphicalItem:I,payload:G}}else if(J==="RadialBar"){var W=(j.data||[]).find(function(z){return k8(T,z)});if(W)return{graphicalItem:I,payload:W}}else if(qA(I,R)||KA(I,R)||Zb(I,R)){var K=uze({graphicalItem:I,activeTooltipItem:R,itemData:H.data}),te=H.activeIndex===void 0?K:H.activeIndex;return{graphicalItem:Ue(Ue({},I),{},{childIndex:te}),payload:Zb(I,R)?H.data[K]:I.props.data[K]}}}return null}},{key:"render",value:function(){var T=this;if(!GV(this))return null;var A=this.props,P=A.children,R=A.className,N=A.width,L=A.height,I=A.style,j=A.compact,B=A.title,H=A.desc,J=kq(A,dHe),G=Rt(J,!1);if(j)return ne.createElement(fq,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ne.createElement(Ik,qg({},G,{width:N,height:L,title:B,desc:H}),this.renderClipPath(),KV(P,this.renderMap)));if(this.props.accessibilityLayer){var W,K;G.tabIndex=(W=this.props.tabIndex)!==null&&W!==void 0?W:0,G.role=(K=this.props.role)!==null&&K!==void 0?K:"application",G.onKeyDown=function(z){T.accessibilityManager.keyboardEvent(z)},G.onFocus=function(){T.accessibilityManager.focus()}}var te=this.parseEventsOfWrapper();return ne.createElement(fq,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ne.createElement("div",qg({className:nn("recharts-wrapper",R),style:Ue({position:"relative",cursor:"default",width:N,height:L},I)},te,{ref:function(V){T.container=V}}),ne.createElement(Ik,qg({},G,{width:N,height:L,title:B,desc:H,style:PHe}),this.renderClipPath(),KV(P,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(M.Component);Jt(b,"displayName",n),Jt(b,"defaultProps",Ue({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),Jt(b,"getDerivedStateFromProps",function(v,_){var E=v.dataKey,T=v.data,A=v.children,P=v.width,R=v.height,N=v.layout,L=v.stackOffset,I=v.margin,j=_.dataStartIndex,B=_.dataEndIndex;if(_.updateId===void 0){var H=Lq(v);return Ue(Ue(Ue({},H),{},{updateId:0},m(Ue(Ue({props:v},H),{},{updateId:0}),_)),{},{prevDataKey:E,prevData:T,prevWidth:P,prevHeight:R,prevLayout:N,prevStackOffset:L,prevMargin:I,prevChildren:A})}if(E!==_.prevDataKey||T!==_.prevData||P!==_.prevWidth||R!==_.prevHeight||N!==_.prevLayout||L!==_.prevStackOffset||!ev(I,_.prevMargin)){var J=Lq(v),G={chartX:_.chartX,chartY:_.chartY,isTooltipActive:_.isTooltipActive},W=Ue(Ue({},jq(_,T,N)),{},{updateId:_.updateId+1}),K=Ue(Ue(Ue({},J),G),W);return Ue(Ue(Ue({},K),m(Ue({props:v},K),_)),{},{prevDataKey:E,prevData:T,prevWidth:P,prevHeight:R,prevLayout:N,prevStackOffset:L,prevMargin:I,prevChildren:A})}if(!Ok(A,_.prevChildren)){var te,z,V,X,q=Da(A,Uv),Q=q&&(te=(z=q.props)===null||z===void 0?void 0:z.startIndex)!==null&&te!==void 0?te:j,ie=q&&(V=(X=q.props)===null||X===void 0?void 0:X.endIndex)!==null&&V!==void 0?V:B,ce=Q!==j||ie!==B,ye=!an(T),Ce=ye&&!ce?_.updateId:_.updateId+1;return Ue(Ue({updateId:Ce},m(Ue(Ue({props:v},_),{},{updateId:Ce,dataStartIndex:Q,dataEndIndex:ie}),_)),{},{prevChildren:A,dataStartIndex:Q,dataEndIndex:ie})}return null}),Jt(b,"renderActiveDot",function(v,_,E){var T;return M.isValidElement(v)?T=M.cloneElement(v,_):Ht(v)?T=v(_):T=ne.createElement(Ey,_),ne.createElement(En,{className:"recharts-active-dot",key:E},T)});var x=M.forwardRef(function(_,E){return ne.createElement(b,qg({},_,{ref:E}))});return x.displayName=b.displayName,x},UHe=Ww({chartName:"LineChart",GraphicalChild:Gv,axisComponents:[{axisType:"xAxis",AxisComp:_o},{axisType:"yAxis",AxisComp:So}],formatAxisMap:yU}),Fne=Ww({chartName:"BarChart",GraphicalChild:Ru,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:_o},{axisType:"yAxis",AxisComp:So}],formatAxisMap:yU}),Bne=Ww({chartName:"PieChart",GraphicalChild:hc,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Ay},{axisType:"radiusAxis",AxisComp:Ty}],formatAxisMap:_te,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),FHe=Ww({chartName:"RadarChart",GraphicalChild:jv,axisComponents:[{axisType:"angleAxis",AxisComp:Ay},{axisType:"radiusAxis",AxisComp:Ty}],formatAxisMap:_te,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),Gw=Ww({chartName:"AreaChart",GraphicalChild:ls,axisComponents:[{axisType:"xAxis",AxisComp:_o},{axisType:"yAxis",AxisComp:So}],formatAxisMap:yU});const fo={primary:"#3b82f6",secondary:"#fbbf24",cyan:"#06b6d4"},Fq=["#3b82f6","#06b6d4","#fbbf24","#f97316"];function tM({active:t,payload:e,label:n}){return!t||!e?null:p.jsxs("div",{className:"glass-panel px-4 py-3",children:[p.jsx("p",{className:"font-display font-semibold text-foreground mb-2",children:n}),e.map((r,i)=>p.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[p.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:r.color}}),p.jsxs("span",{className:"text-muted-foreground",children:[r.name,":"]}),p.jsx("span",{className:"text-foreground font-medium",children:r.value.toLocaleString()})]},i))]})}function BHe(){return p.jsxs(at.div,{className:"glass-panel p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[p.jsx("h3",{className:"font-display font-semibold text-lg text-foreground mb-1",children:"Citation Growth Trend"}),p.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"10-year citation and publication analysis"}),p.jsx("div",{className:"h-[280px]",children:p.jsx(yl,{width:"100%",height:"100%",children:p.jsxs(Gw,{data:wRe,children:[p.jsxs("defs",{children:[p.jsxs("linearGradient",{id:"citationGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[p.jsx("stop",{offset:"5%",stopColor:fo.primary,stopOpacity:.3}),p.jsx("stop",{offset:"95%",stopColor:fo.primary,stopOpacity:0})]}),p.jsxs("linearGradient",{id:"paperGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[p.jsx("stop",{offset:"5%",stopColor:fo.secondary,stopOpacity:.3}),p.jsx("stop",{offset:"95%",stopColor:fo.secondary,stopOpacity:0})]})]}),p.jsx(Hv,{strokeDasharray:"3 3",stroke:"hsl(222 47% 18%)"}),p.jsx(_o,{dataKey:"year",stroke:"hsl(215 20% 65%)",fontSize:12}),p.jsx(So,{stroke:"hsl(215 20% 65%)",fontSize:12,tickFormatter:t=>`${(t/1e3).toFixed(0)}k`}),p.jsx(di,{content:p.jsx(tM,{})}),p.jsx(ls,{type:"monotone",dataKey:"citations",stroke:fo.primary,strokeWidth:2,fill:"url(#citationGradient)",name:"Citations"}),p.jsx(ls,{type:"monotone",dataKey:"papers",stroke:fo.secondary,strokeWidth:2,fill:"url(#paperGradient)",name:"Papers"})]})})})]})}function zHe(){return p.jsxs(at.div,{className:"glass-panel p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:[p.jsx("h3",{className:"font-display font-semibold text-lg text-foreground mb-1",children:"Journal Quartile Distribution"}),p.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Publication quality metrics"}),p.jsx("div",{className:"h-[280px] flex items-center justify-center",children:p.jsx(yl,{width:"100%",height:"100%",children:p.jsxs(Bne,{children:[p.jsx(hc,{data:zC,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:4,dataKey:"count",nameKey:"quartile",children:zC.map((t,e)=>p.jsx(Av,{fill:Fq[e],stroke:"transparent"},`cell-${e}`))}),p.jsx(di,{content:p.jsx(tM,{})})]})})}),p.jsx("div",{className:"flex justify-center gap-6 mt-4",children:zC.map((t,e)=>p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Fq[e]}}),p.jsxs("span",{className:"text-sm text-muted-foreground",children:[t.quartile," (",t.percentage,"%)"]})]},t.quartile))})]})}function $He(){const t=_Re.map(e=>({topic:e.topic.split(" ")[0],fullTopic:e.topic,papers:e.papers,citations:e.citations/100}));return p.jsxs(at.div,{className:"glass-panel p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[p.jsx("h3",{className:"font-display font-semibold text-lg text-foreground mb-1",children:"Research Discipline Strength"}),p.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Topic influence radar analysis"}),p.jsx("div",{className:"h-[280px]",children:p.jsx(yl,{width:"100%",height:"100%",children:p.jsxs(FHe,{data:t,children:[p.jsx(jte,{stroke:"hsl(222 47% 18%)"}),p.jsx(Ay,{dataKey:"topic",stroke:"hsl(215 20% 65%)",fontSize:11}),p.jsx(Ty,{stroke:"hsl(215 20% 65%)",fontSize:10}),p.jsx(jv,{name:"Papers",dataKey:"papers",stroke:fo.primary,fill:fo.primary,fillOpacity:.3}),p.jsx(jv,{name:"Citations",dataKey:"citations",stroke:fo.secondary,fill:fo.secondary,fillOpacity:.3}),p.jsx(di,{content:p.jsx(tM,{})})]})})})]})}function VHe(){return p.jsxs(at.div,{className:"glass-panel p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},children:[p.jsx("h3",{className:"font-display font-semibold text-lg text-foreground mb-1",children:"Monthly Engagement"}),p.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Global reads and downloads this year"}),p.jsx("div",{className:"h-[280px]",children:p.jsx(yl,{width:"100%",height:"100%",children:p.jsxs(Fne,{data:SRe,children:[p.jsx(Hv,{strokeDasharray:"3 3",stroke:"hsl(222 47% 18%)"}),p.jsx(_o,{dataKey:"month",stroke:"hsl(215 20% 65%)",fontSize:12}),p.jsx(So,{stroke:"hsl(215 20% 65%)",fontSize:12,tickFormatter:t=>`${(t/1e3).toFixed(0)}k`}),p.jsx(di,{content:p.jsx(tM,{})}),p.jsx(Ru,{dataKey:"reads",fill:fo.primary,name:"Reads",radius:[4,4,0,0]}),p.jsx(Ru,{dataKey:"downloads",fill:fo.cyan,name:"Downloads",radius:[4,4,0,0]})]})})})]})}function HHe(){return p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsx(BHe,{}),p.jsx(zHe,{}),p.jsx($He,{}),p.jsx(VHe,{})]})}function WHe(){const t={institution:"#3b82f6",partner:"#06b6d4",funding:"#fbbf24"},e={institution:Kl,partner:GF,funding:XF},n=400,r=300,i=200,s=$C.nodes.map((o,l)=>{if(o.id==="UDSM")return{...o,x:n,y:r};const c=(l-1)/($C.nodes.length-1)*2*Math.PI;return{...o,x:n+i*Math.cos(c),y:r+i*Math.sin(c)}}),a=o=>s.find(l=>l.id===o)||{x:n,y:r};return p.jsxs("div",{className:"space-y-6",children:[p.jsxs(at.div,{className:"glass-panel p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[p.jsx("h3",{className:"font-display font-semibold text-lg text-foreground mb-1",children:"Research Collaboration Network"}),p.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"UDSM's global partnership ecosystem"}),p.jsxs("div",{className:"relative w-full h-[600px] bg-gradient-to-br from-muted/20 to-transparent rounded-xl overflow-hidden",children:[p.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 800 600",children:[$C.edges.map((o,l)=>{const c=a(o.source),u=a(o.target),d=o.weight/100;return p.jsx(at.line,{x1:c.x,y1:c.y,x2:u.x,y2:u.y,stroke:"#3b82f6",strokeWidth:2,strokeOpacity:d,initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:d},transition:{duration:1,delay:l*.1}},`edge-${l}`)}),s.map((o,l)=>{const c=t[o.type],u=o.id==="UDSM",d=u?50:o.size;return p.jsxs(at.g,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.5+l*.05},children:[p.jsx("circle",{cx:o.x,cy:o.y,r:d+8,fill:c,opacity:.2}),p.jsx("circle",{cx:o.x,cy:o.y,r:d,fill:c,className:"cursor-pointer hover:opacity-80 transition-opacity"}),p.jsx("text",{x:o.x,y:o.y+d+20,textAnchor:"middle",fill:"hsl(215 20% 65%)",fontSize:u?14:11,fontWeight:u?600:400,fontFamily:"Space Grotesk, sans-serif",children:o.label}),u&&p.jsx("text",{x:o.x,y:o.y+6,textAnchor:"middle",fill:"white",fontSize:16,fontWeight:700,fontFamily:"Space Grotesk, sans-serif",children:"UDSM"})]},o.id)})]}),p.jsx("div",{className:"absolute bottom-4 left-4 flex gap-4",children:Object.entries(t).map(([o,l])=>{const c=e[o];return p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 rounded-full flex items-center justify-center",style:{backgroundColor:l},children:p.jsx(c,{className:"w-2.5 h-2.5 text-white"})}),p.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:o})]},o)})})]})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{label:"Partner Institutions",count:48,icon:Kl,color:"primary"},{label:"Funding Bodies",count:12,icon:XF,color:"secondary"},{label:"Active Collaborations",count:156,icon:GF,color:"cyan"}].map((o,l)=>p.jsxs(at.div,{className:"glass-panel p-6 flex items-center gap-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2+l*.1},children:[p.jsx("div",{className:`p-3 rounded-xl bg-${o.color}/20`,children:p.jsx(o.icon,{className:`w-6 h-6 text-${o.color}`})}),p.jsxs("div",{children:[p.jsx("p",{className:"metric-value",children:o.count}),p.jsx("p",{className:"metric-label",children:o.label})]})]},o.label))}),p.jsxs(at.div,{className:"glass-panel p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[p.jsx("h3",{className:"font-display font-semibold text-lg text-foreground mb-4",children:"Top Research Partners"}),p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"border-b border-border",children:[p.jsx("th",{className:"text-left py-3 px-4 text-sm text-muted-foreground font-medium",children:"Institution"}),p.jsx("th",{className:"text-left py-3 px-4 text-sm text-muted-foreground font-medium",children:"Type"}),p.jsx("th",{className:"text-left py-3 px-4 text-sm text-muted-foreground font-medium",children:"Collaborations"}),p.jsx("th",{className:"text-left py-3 px-4 text-sm text-muted-foreground font-medium",children:"Joint Publications"}),p.jsx("th",{className:"text-left py-3 px-4 text-sm text-muted-foreground font-medium",children:"Impact Score"})]})}),p.jsx("tbody",{children:[{name:"University of Cape Town",type:"University",collabs:67,pubs:124,score:8.9},{name:"University of Nairobi",type:"University",collabs:78,pubs:156,score:8.7},{name:"Oxford University",type:"University",collabs:52,pubs:89,score:9.2},{name:"Gates Foundation",type:"Funding",collabs:29,pubs:45,score:8.5},{name:"MIT",type:"University",collabs:45,pubs:67,score:9}].map((o,l)=>p.jsxs(at.tr,{className:"border-b border-border/50 hover:bg-muted/30 transition-colors",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5+l*.05},children:[p.jsx("td",{className:"py-3 px-4 font-medium text-foreground",children:o.name}),p.jsx("td",{className:"py-3 px-4",children:p.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${o.type==="University"?"bg-primary/20 text-primary":"bg-secondary/20 text-secondary"}`,children:o.type})}),p.jsx("td",{className:"py-3 px-4 text-muted-foreground",children:o.collabs}),p.jsx("td",{className:"py-3 px-4 text-muted-foreground",children:o.pubs}),p.jsx("td",{className:"py-3 px-4",children:p.jsx("span",{className:"font-semibold text-emerald",children:o.score})})]},o.name))})]})})]})]})}function GHe({active:t,payload:e,label:n}){return!t||!e?null:p.jsxs("div",{className:"glass-panel px-4 py-3",children:[p.jsx("p",{className:"font-display font-semibold text-foreground mb-2",children:n}),e.map((r,i)=>p.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[p.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:r.color}}),p.jsxs("span",{className:"text-muted-foreground",children:[r.name,":"]}),p.jsx("span",{className:"text-foreground font-medium",children:r.value.toLocaleString()})]},i))]})}function qHe(){const t=S3.citationGrowth.map(e=>({year:e.year.toString(),predicted:e.predicted,lower:e.lower,upper:e.upper}));return p.jsxs(at.div,{className:"glass-panel p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[p.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[p.jsx("div",{className:"p-2 rounded-lg bg-primary/20 text-primary",children:p.jsx(Ps,{className:"w-5 h-5"})}),p.jsx("h3",{className:"font-display font-semibold text-lg text-foreground",children:"Citation Forecast (2025-2029)"})]}),p.jsx("p",{className:"text-sm text-muted-foreground mb-6 ml-12",children:"ML-powered prediction with confidence intervals"}),p.jsx("div",{className:"h-[300px]",children:p.jsx(yl,{width:"100%",height:"100%",children:p.jsxs(Gw,{data:t,children:[p.jsxs("defs",{children:[p.jsxs("linearGradient",{id:"forecastGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[p.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.4}),p.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]}),p.jsxs("linearGradient",{id:"confidenceGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[p.jsx("stop",{offset:"5%",stopColor:"#06b6d4",stopOpacity:.2}),p.jsx("stop",{offset:"95%",stopColor:"#06b6d4",stopOpacity:0})]})]}),p.jsx(Hv,{strokeDasharray:"3 3",stroke:"hsl(222 47% 18%)"}),p.jsx(_o,{dataKey:"year",stroke:"hsl(215 20% 65%)",fontSize:12}),p.jsx(So,{stroke:"hsl(215 20% 65%)",fontSize:12,tickFormatter:e=>`${(e/1e3).toFixed(0)}k`}),p.jsx(di,{content:p.jsx(GHe,{})}),p.jsx(ls,{type:"monotone",dataKey:"upper",stroke:"transparent",fill:"url(#confidenceGradient)",name:"Upper Bound"}),p.jsx(ls,{type:"monotone",dataKey:"lower",stroke:"transparent",fill:"hsl(222 47% 6%)",name:"Lower Bound"}),p.jsx(ls,{type:"monotone",dataKey:"predicted",stroke:"#3b82f6",strokeWidth:3,strokeDasharray:"8 4",fill:"url(#forecastGradient)",name:"Predicted"})]})})})]})}function KHe(){return p.jsxs(at.div,{className:"glass-panel p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:[p.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[p.jsx("div",{className:"p-2 rounded-lg bg-secondary/20 text-secondary",children:p.jsx(dle,{className:"w-5 h-5"})}),p.jsx("h3",{className:"font-display font-semibold text-lg text-foreground",children:"Emerging Research Topics"})]}),p.jsx("p",{className:"text-sm text-muted-foreground mb-6 ml-12",children:"High-growth areas for strategic investment"}),p.jsx("div",{className:"space-y-4",children:S3.emergingTopics.map((t,e)=>p.jsxs(at.div,{className:"p-4 rounded-lg bg-muted/50 border border-border",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2+e*.1},children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsx("span",{className:"font-medium text-foreground",children:t.topic}),p.jsxs("span",{className:"text-sm text-emerald font-semibold",children:["+",t.growthRate,"% growth"]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"flex-1 h-2 bg-muted rounded-full overflow-hidden",children:p.jsx(at.div,{className:"h-full bg-gradient-to-r from-primary to-cyan rounded-full",initial:{width:0},animate:{width:`${t.confidence*100}%`},transition:{duration:1,delay:.3+e*.1}})}),p.jsxs("span",{className:"text-xs text-muted-foreground",children:[(t.confidence*100).toFixed(0),"% confidence"]})]})]},t.topic))})]})}function XHe(){return p.jsxs(at.div,{className:"glass-panel p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[p.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[p.jsx("div",{className:"p-2 rounded-lg bg-purple/20 text-purple",children:p.jsx(pi,{className:"w-5 h-5"})}),p.jsx("h3",{className:"font-display font-semibold text-lg text-foreground",children:"Strategic Partner Recommendations"})]}),p.jsx("p",{className:"text-sm text-muted-foreground mb-6 ml-12",children:"AI-identified collaboration opportunities"}),p.jsx("div",{className:"space-y-4",children:S3.partnerRecommendations.map((t,e)=>p.jsxs(at.div,{className:"p-4 rounded-lg bg-gradient-to-r from-muted/50 to-transparent border border-border hover:border-primary/30 transition-colors cursor-pointer",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3+e*.1},whileHover:{x:4},children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsx("span",{className:"font-medium text-foreground",children:t.institution}),p.jsx("div",{className:"flex items-center gap-2",children:p.jsxs("span",{className:"text-sm text-secondary font-semibold",children:[(t.score*100).toFixed(0),"% match"]})})]}),p.jsx("p",{className:"text-sm text-muted-foreground",children:t.reason})]},t.institution))})]})}function YHe(){const t=[{name:"Open Access +20%",rankingChange:"+5 positions",impact:"positive",description:"Increasing open access publications improves global visibility"},{name:"Asia Collaboration x2",rankingChange:"+8 positions",impact:"positive",description:"Doubling Asian partnerships expands research network reach"},{name:"Q1 Publications +30%",rankingChange:"+12 positions",impact:"positive",description:"Higher quality journal targeting elevates institutional prestige"}];return p.jsxs(at.div,{className:"glass-panel-gold p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:[p.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[p.jsx("div",{className:"p-2 rounded-lg bg-secondary/20 text-secondary",children:p.jsx(w9,{className:"w-5 h-5"})}),p.jsx("h3",{className:"font-display font-semibold text-lg text-foreground",children:"Ranking Impact Simulator"})]}),p.jsx("p",{className:"text-sm text-muted-foreground mb-6 ml-12",children:'"What-if" analysis for strategic planning'}),p.jsx("div",{className:"space-y-3",children:t.map((e,n)=>p.jsxs(at.div,{className:"flex items-center justify-between p-4 rounded-lg bg-background/50 border border-border",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4+n*.1},children:[p.jsxs("div",{children:[p.jsx("p",{className:"font-medium text-foreground",children:e.name}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.description})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("span",{className:"text-lg font-display font-bold text-emerald",children:e.rankingChange}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"QS/THE Impact"})]})]},e.name))})]})}function JHe(){return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsx(qHe,{}),p.jsx(KHe,{})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsx(XHe,{}),p.jsx(YHe,{})]})]})}function QHe(){const{user:t}=qr(),[e,n]=M.useState([]),[r,i]=M.useState(null),[s,a]=M.useState(!1),o=M.useCallback(async()=>{if(!t)return;a(!0);const{data:h,error:m}=await ot.from("chat_history").select("*").eq("user_id",t.id).order("updated_at",{ascending:!1});!m&&h&&n(h.map(b=>({...b,messages:b.messages||[]}))),a(!1)},[t]);M.useEffect(()=>{o()},[o]);const l=M.useCallback(async h=>{if(!t)return null;const m=h?[h]:[],b=h?.content.slice(0,50)||"New Conversation",{data:x,error:v}=await ot.from("chat_history").insert({user_id:t.id,title:b,messages:m}).select().single();if(!v&&x){const _={...x,messages:x.messages||[]};return n(E=>[_,...E]),i(x.id),x.id}return null},[t]),c=M.useCallback(async(h,m,b)=>{if(!t)return;const x={messages:m,updated_at:new Date().toISOString()};b&&(x.title=b);const{error:v}=await ot.from("chat_history").update(x).eq("id",h).eq("user_id",t.id);v||n(_=>_.map(E=>E.id===h?{...E,messages:m,title:b||E.title,updated_at:new Date().toISOString()}:E))},[t]),u=M.useCallback(async h=>{if(!t)return;const{error:m}=await ot.from("chat_history").delete().eq("id",h).eq("user_id",t.id);m||(n(b=>b.filter(x=>x.id!==h)),r===h&&i(null))},[t,r]),d=M.useCallback(()=>r?e.find(m=>m.id===r)?.messages||[]:[],[r,e]);return{conversations:e,currentConversationId:r,setCurrentConversationId:i,isLoading:s,createConversation:l,updateConversation:c,deleteConversation:u,getCurrentMessages:d,refreshConversations:o}}function ZHe({conversations:t,currentConversationId:e,onSelectConversation:n,onNewConversation:r,onDeleteConversation:i,isLoading:s}){return p.jsxs("div",{className:"h-full flex flex-col",children:[p.jsx("div",{className:"p-3 border-b border-border",children:p.jsxs(ut,{onClick:r,className:"w-full bg-gradient-to-r from-primary to-cyan hover:opacity-90",size:"sm",children:[p.jsx(vj,{className:"w-4 h-4 mr-2"}),"New Chat"]})}),p.jsx(gl,{className:"flex-1",children:p.jsx("div",{className:"p-2 space-y-1",children:s?p.jsx("div",{className:"p-4 text-center text-muted-foreground text-sm",children:"Loading conversations..."}):t.length===0?p.jsx("div",{className:"p-4 text-center text-muted-foreground text-sm",children:"No saved conversations yet"}):t.map(a=>p.jsxs(at.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:`group relative p-3 rounded-lg cursor-pointer transition-colors ${e===a.id?"bg-primary/20 border border-primary/30":"hover:bg-muted/50"}`,onClick:()=>n(a.id),children:[p.jsxs("div",{className:"flex items-start gap-2",children:[p.jsx(C9,{className:"w-4 h-4 text-muted-foreground mt-0.5 flex-shrink-0"}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:a.title||"Untitled"}),p.jsxs("div",{className:"flex items-center gap-1 mt-1 text-xs text-muted-foreground",children:[p.jsx(F1,{className:"w-3 h-3"}),p.jsx("span",{children:Qg(new Date(a.updated_at),{addSuffix:!0})})]})]})]}),p.jsx(ut,{variant:"ghost",size:"icon",className:"absolute right-2 top-2 opacity-0 group-hover:opacity-100 h-6 w-6",onClick:o=>{o.stopPropagation(),i(a.id)},children:p.jsx(op,{className:"w-3 h-3 text-destructive"})})]},a.id))})})]})}const eWe=["Which UDSM papers influence Europe most?","Which topics should we invest in for 2027 impact?","Suggest new collaboration targets in Asia.","What's our current Q1 publication trend?","Which authors have the highest h-index growth?"],tWe="https://jyxoltkvmtyfbfysbknb.supabase.co/functions/v1/research-advisor";async function nWe({messages:t,onDelta:e,onDone:n,onError:r}){try{const i=await fetch(tWe,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp5eG9sdGt2bXR5ZmJmeXNia25iIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkzNTYzNzEsImV4cCI6MjA4NDkzMjM3MX0.DwGUUMDCDrjXNbsPrLllWn1TSu1u9oa8Bzvb0UY6ZRo"},body:JSON.stringify({messages:t})});if(i.status===429){r(new Error("Rate limit exceeded. Please try again later."));return}if(i.status===402){r(new Error("AI credits exhausted. Please add credits to continue."));return}if(!i.ok||!i.body){r(new Error("Failed to start stream"));return}const s=i.body.getReader(),a=new TextDecoder;let o="",l=!1;for(;!l;){const{done:c,value:u}=await s.read();if(c)break;o+=a.decode(u,{stream:!0});let d;for(;(d=o.indexOf(`
`))!==-1;){let h=o.slice(0,d);if(o=o.slice(d+1),h.endsWith("\r")&&(h=h.slice(0,-1)),h.startsWith(":")||h.trim()===""||!h.startsWith("data: "))continue;const m=h.slice(6).trim();if(m==="[DONE]"){l=!0;break}try{const x=JSON.parse(m).choices?.[0]?.delta?.content;x&&e(x)}catch{o=h+`
`+o;break}}}if(o.trim())for(let c of o.split(`
`)){if(!c||(c.endsWith("\r")&&(c=c.slice(0,-1)),c.startsWith(":")||c.trim()==="")||!c.startsWith("data: "))continue;const u=c.slice(6).trim();if(u!=="[DONE]")try{const h=JSON.parse(u).choices?.[0]?.delta?.content;h&&e(h)}catch{}}n()}catch(i){r(i instanceof Error?i:new Error("Unknown error"))}}const Bq={id:"1",role:"assistant",content:"Hello! I'm the UDSM Research Intelligence Advisor powered by AI. I can help you analyze research impact, identify collaboration opportunities, and provide strategic insights. What would you like to know?"};function rWe(){const[t,e]=M.useState(!1),[n,r]=M.useState(!1),[i,s]=M.useState([Bq]),[a,o]=M.useState(""),[l,c]=M.useState(!1),u=M.useRef(null),{toast:d}=ga(),{user:h}=qr(),{conversations:m,currentConversationId:b,setCurrentConversationId:x,isLoading:v,createConversation:_,updateConversation:E,deleteConversation:T,getCurrentMessages:A}=QHe();M.useEffect(()=>{if(b){const I=A();I.length>0&&s(I)}},[b,A]);const P=()=>{u.current?.scrollIntoView({behavior:"smooth"})};M.useEffect(()=>{P()},[i]);const R=M.useCallback(()=>{x(null),s([Bq]),r(!1)},[x]),N=M.useCallback(I=>{x(I),r(!1)},[x]),L=M.useCallback(async(I=a)=>{if(!I.trim()||l)return;const j={id:Date.now().toString(),role:"user",content:I},B=[...i,j];s(B),o(""),c(!0);let H=b;h&&!H&&(H=await _(j));let J="";const G=K=>{J+=K,s(te=>{const z=te[te.length-1];return z?.role==="assistant"&&z.id.startsWith("stream-")?te.map((V,X)=>X===te.length-1?{...V,content:J}:V):[...te,{id:`stream-${Date.now()}`,role:"assistant",content:J}]})},W=B.map(K=>({role:K.role,content:K.content}));await nWe({messages:W,onDelta:K=>G(K),onDone:async()=>{if(c(!1),h&&H){const K=[...B,{id:`stream-${Date.now()}`,role:"assistant",content:J}];await E(H,K)}},onError:K=>{c(!1),d({variant:"destructive",title:"Error",description:K.message||"Failed to get AI response"})}})},[a,l,i,d,h,b,_,E]);return p.jsxs(p.Fragment,{children:[p.jsxs(at.button,{className:"fixed bottom-6 right-6 z-50 w-14 h-14 rounded-full bg-gradient-to-br from-primary to-cyan text-primary-foreground shadow-lg flex items-center justify-center hover:scale-110 transition-transform",whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>e(!0),style:{boxShadow:"0 0 30px rgba(59, 130, 246, 0.5)"},children:[p.jsx(QM,{className:"w-6 h-6"}),p.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-secondary rounded-full animate-pulse"})]}),p.jsx(cf,{children:t&&p.jsxs(at.div,{className:"fixed bottom-24 right-6 z-50 w-[480px] max-h-[650px] glass-panel overflow-hidden flex flex-col",initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},transition:{duration:.2},children:[p.jsxs("div",{className:"p-4 border-b border-border flex items-center justify-between bg-gradient-to-r from-primary/10 to-cyan/10",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[n?p.jsx(ut,{variant:"ghost",size:"icon",onClick:()=>r(!1),children:p.jsx(ele,{className:"w-5 h-5"})}):p.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-primary to-cyan flex items-center justify-center",children:p.jsx(mle,{className:"w-5 h-5 text-primary-foreground"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-display font-semibold text-foreground",children:n?"Chat History":"AI Research Advisor"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:n?`${m.length} conversations`:"Powered by Lovable AI"})]})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[h&&!n&&p.jsx(ut,{variant:"ghost",size:"icon",onClick:()=>r(!0),title:"Chat History",children:p.jsx(cle,{className:"w-4 h-4"})}),p.jsx(ut,{variant:"ghost",size:"icon",onClick:()=>e(!1),children:p.jsx(xo,{className:"w-4 h-4"})})]})]}),n?p.jsx(ZHe,{conversations:m,currentConversationId:b,onSelectConversation:N,onNewConversation:R,onDeleteConversation:T,isLoading:v}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 scrollbar-thin max-h-[400px]",children:[i.map(I=>p.jsxs(at.div,{className:`flex gap-3 ${I.role==="user"?"flex-row-reverse":""}`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[p.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${I.role==="user"?"bg-secondary/20 text-secondary":"bg-primary/20 text-primary"}`,children:I.role==="user"?p.jsx(bj,{className:"w-4 h-4"}):p.jsx(QM,{className:"w-4 h-4"})}),p.jsx("div",{className:`max-w-[80%] p-3 rounded-xl ${I.role==="user"?"bg-secondary/20 text-foreground":"bg-muted text-foreground"}`,children:p.jsx("p",{className:"text-sm whitespace-pre-wrap",children:I.content})})]},I.id)),l&&i[i.length-1]?.role!=="assistant"&&p.jsxs(at.div,{className:"flex gap-3",initial:{opacity:0},animate:{opacity:1},children:[p.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary/20 text-primary flex items-center justify-center",children:p.jsx(QM,{className:"w-4 h-4"})}),p.jsx("div",{className:"bg-muted p-3 rounded-xl",children:p.jsxs("div",{className:"flex gap-1",children:[p.jsx("span",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce"}),p.jsx("span",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce animation-delay-200"}),p.jsx("span",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce animation-delay-400"})]})})]}),p.jsx("div",{ref:u})]}),i.length<=2&&p.jsxs("div",{className:"px-4 pb-2",children:[p.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Suggested questions:"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:eWe.slice(0,3).map(I=>p.jsx("button",{onClick:()=>L(I),disabled:l,className:"text-xs px-3 py-1.5 rounded-full bg-muted hover:bg-muted/80 text-muted-foreground hover:text-foreground transition-colors disabled:opacity-50",children:I.length>35?I.substring(0,35)+"...":I},I))})]}),p.jsxs("div",{className:"p-4 border-t border-border",children:[!h&&p.jsx("p",{className:"text-xs text-muted-foreground mb-2 text-center",children:"Sign in to save your conversation history"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"text",value:a,onChange:I=>o(I.target.value),onKeyDown:I=>I.key==="Enter"&&L(),placeholder:"Ask about research impact...",disabled:l,className:"flex-1 px-4 py-2 rounded-xl bg-muted border border-border text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/50 disabled:opacity-50"}),p.jsx(ut,{onClick:()=>L(),disabled:!a.trim()||l,className:"rounded-xl bg-gradient-to-r from-primary to-cyan hover:opacity-90",children:p.jsx(ple,{className:"w-4 h-4"})})]})]})]})]})})]})}const sr=M.forwardRef(({className:t,type:e,...n},r)=>p.jsx("input",{type:e,className:kt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));sr.displayName="Input";function zne({isOpen:t,onClose:e}){const[n,r]=M.useState(!1),[i,s]=M.useState(""),[a,o]=M.useState(""),[l,c]=M.useState(""),[u,d]=M.useState(!1),{signIn:h,signUp:m}=qr(),{toast:b}=ga(),x=async v=>{v.preventDefault(),d(!0);try{if(n){const{error:_}=await m(i,a,l);if(_)throw _;b({title:"Account created!",description:"Welcome to UDSM Research Intelligence Platform."})}else{const{error:_}=await h(i,a);if(_)throw _;b({title:"Welcome back!",description:"You've successfully signed in."})}e(),s(""),o(""),c("")}catch(_){b({variant:"destructive",title:"Error",description:_.message||"Authentication failed"})}finally{d(!1)}};return p.jsx(cf,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(at.div,{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),p.jsx(at.div,{className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-50 w-full max-w-md",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},children:p.jsxs("div",{className:"glass-panel p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-xl font-display font-bold text-foreground",children:n?"Create Account":"Welcome Back"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:n?"Join the UDSM research community":"Sign in to your research dashboard"})]}),p.jsx(ut,{variant:"ghost",size:"icon",onClick:e,children:p.jsx(xo,{className:"w-4 h-4"})})]}),p.jsxs("form",{onSubmit:x,className:"space-y-4",children:[n&&p.jsxs("div",{className:"relative",children:[p.jsx(bj,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),p.jsx(sr,{type:"text",placeholder:"Full Name",value:l,onChange:v=>c(v.target.value),className:"pl-10",required:n})]}),p.jsxs("div",{className:"relative",children:[p.jsx(M9,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),p.jsx(sr,{type:"email",placeholder:"Email Address",value:i,onChange:v=>s(v.target.value),className:"pl-10",required:!0})]}),p.jsxs("div",{className:"relative",children:[p.jsx(mj,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),p.jsx(sr,{type:"password",placeholder:"Password",value:a,onChange:v=>o(v.target.value),className:"pl-10",required:!0,minLength:6})]}),p.jsx(ut,{type:"submit",className:"w-full bg-gradient-to-r from-primary to-cyan hover:opacity-90",disabled:u,children:u?p.jsx(bu,{className:"w-4 h-4 animate-spin"}):n?"Create Account":"Sign In"})]}),p.jsx("div",{className:"mt-6 text-center",children:p.jsx("button",{type:"button",onClick:()=>r(!n),className:"text-sm text-muted-foreground hover:text-foreground transition-colors",children:n?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})})]})})}const qw=M.forwardRef(({className:t,...e},n)=>p.jsx("textarea",{className:kt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));qw.displayName="Textarea";var iWe="Label",$ne=M.forwardRef((t,e)=>p.jsx(Pt.label,{...t,ref:e,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));$ne.displayName=iWe;var Vne=$ne;const sWe=wT("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Mi=M.forwardRef(({className:t,...e},n)=>p.jsx(Vne,{ref:n,className:kt(sWe(),t),...e}));Mi.displayName=Vne.displayName;function PU(t){const e=M.useRef({value:t,previous:t});return M.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var aWe=[" ","Enter","ArrowUp","ArrowDown"],oWe=[" ","Enter"],yp="Select",[nM,rM,lWe]=cw(yp),[Py]=cs(yp,[lWe,lf]),iM=lf(),[cWe,bf]=Py(yp),[uWe,dWe]=Py(yp),Hne=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:a,defaultValue:o,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:h,required:m,form:b}=t,x=iM(e),[v,_]=M.useState(null),[E,T]=M.useState(null),[A,P]=M.useState(!1),R=dy(c),[N,L]=bl({prop:r,defaultProp:i??!1,onChange:s,caller:yp}),[I,j]=bl({prop:a,defaultProp:o,onChange:l,caller:yp}),B=M.useRef(null),H=v?b||!!v.closest("form"):!0,[J,G]=M.useState(new Set),W=Array.from(J).map(K=>K.props.value).join(";");return p.jsx(Nj,{...x,children:p.jsxs(cWe,{required:m,scope:e,trigger:v,onTriggerChange:_,valueNode:E,onValueNodeChange:T,valueNodeHasChildren:A,onValueNodeHasChildrenChange:P,contentId:go(),value:I,onValueChange:j,open:N,onOpenChange:L,dir:R,triggerPointerDownPosRef:B,disabled:h,children:[p.jsx(nM.Provider,{scope:e,children:p.jsx(uWe,{scope:t.__scopeSelect,onNativeOptionAdd:M.useCallback(K=>{G(te=>new Set(te).add(K))},[]),onNativeOptionRemove:M.useCallback(K=>{G(te=>{const z=new Set(te);return z.delete(K),z})},[]),children:n})}),H?p.jsxs(pre,{"aria-hidden":!0,required:m,tabIndex:-1,name:u,autoComplete:d,value:I,onChange:K=>j(K.target.value),disabled:h,form:b,children:[I===void 0?p.jsx("option",{value:""}):null,Array.from(J)]},W):null]})})};Hne.displayName=yp;var Wne="SelectTrigger",Gne=M.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=iM(n),a=bf(Wne,n),o=a.disabled||r,l=tn(e,a.onTriggerChange),c=rM(n),u=M.useRef("touch"),[d,h,m]=gre(x=>{const v=c().filter(T=>!T.disabled),_=v.find(T=>T.value===a.value),E=vre(v,x,_);E!==void 0&&a.onValueChange(E.value)}),b=x=>{o||(a.onOpenChange(!0),m()),x&&(a.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return p.jsx(hw,{asChild:!0,...s,children:p.jsx(Pt.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":mre(a.value)?"":void 0,...i,ref:l,onClick:Je(i.onClick,x=>{x.currentTarget.focus(),u.current!=="mouse"&&b(x)}),onPointerDown:Je(i.onPointerDown,x=>{u.current=x.pointerType;const v=x.target;v.hasPointerCapture(x.pointerId)&&v.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(b(x),x.preventDefault())}),onKeyDown:Je(i.onKeyDown,x=>{const v=d.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&h(x.key),!(v&&x.key===" ")&&aWe.includes(x.key)&&(b(),x.preventDefault())})})})});Gne.displayName=Wne;var qne="SelectValue",Kne=M.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:a="",...o}=t,l=bf(qne,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,d=tn(e,l.onValueNodeChange);return Gr(()=>{c(u)},[c,u]),p.jsx(Pt.span,{...o,ref:d,style:{pointerEvents:"none"},children:mre(l.value)?p.jsx(p.Fragment,{children:a}):s})});Kne.displayName=qne;var fWe="SelectIcon",Xne=M.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return p.jsx(Pt.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});Xne.displayName=fWe;var hWe="SelectPortal",Yne=t=>p.jsx(ey,{asChild:!0,...t});Yne.displayName=hWe;var xp="SelectContent",Jne=M.forwardRef((t,e)=>{const n=bf(xp,t.__scopeSelect),[r,i]=M.useState();if(Gr(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?Zv.createPortal(p.jsx(Qne,{scope:t.__scopeSelect,children:p.jsx(nM.Slot,{scope:t.__scopeSelect,children:p.jsx("div",{children:t.children})})}),s):null}return p.jsx(Zne,{...t,ref:e})});Jne.displayName=xp;var sl=10,[Qne,wf]=Py(xp),pWe="SelectContentImpl",mWe=Kd("SelectContent.RemoveScroll"),Zne=M.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:a,side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:m,sticky:b,hideWhenDetached:x,avoidCollisions:v,..._}=t,E=bf(xp,n),[T,A]=M.useState(null),[P,R]=M.useState(null),N=tn(e,he=>A(he)),[L,I]=M.useState(null),[j,B]=M.useState(null),H=rM(n),[J,G]=M.useState(!1),W=M.useRef(!1);M.useEffect(()=>{if(T)return WT(T)},[T]),HT();const K=M.useCallback(he=>{const[De,...be]=H().map(ee=>ee.ref.current),[_e]=be.slice(-1),Ee=document.activeElement;for(const ee of he)if(ee===Ee||(ee?.scrollIntoView({block:"nearest"}),ee===De&&P&&(P.scrollTop=0),ee===_e&&P&&(P.scrollTop=P.scrollHeight),ee?.focus(),document.activeElement!==Ee))return},[H,P]),te=M.useCallback(()=>K([L,T]),[K,L,T]);M.useEffect(()=>{J&&te()},[J,te]);const{onOpenChange:z,triggerPointerDownPosRef:V}=E;M.useEffect(()=>{if(T){let he={x:0,y:0};const De=_e=>{he={x:Math.abs(Math.round(_e.pageX)-(V.current?.x??0)),y:Math.abs(Math.round(_e.pageY)-(V.current?.y??0))}},be=_e=>{he.x<=10&&he.y<=10?_e.preventDefault():T.contains(_e.target)||z(!1),document.removeEventListener("pointermove",De),V.current=null};return V.current!==null&&(document.addEventListener("pointermove",De),document.addEventListener("pointerup",be,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",De),document.removeEventListener("pointerup",be,{capture:!0})}}},[T,z,V]),M.useEffect(()=>{const he=()=>z(!1);return window.addEventListener("blur",he),window.addEventListener("resize",he),()=>{window.removeEventListener("blur",he),window.removeEventListener("resize",he)}},[z]);const[X,q]=gre(he=>{const De=H().filter(Ee=>!Ee.disabled),be=De.find(Ee=>Ee.ref.current===document.activeElement),_e=vre(De,he,be);_e&&setTimeout(()=>_e.ref.current.focus())}),Q=M.useCallback((he,De,be)=>{const _e=!W.current&&!be;(E.value!==void 0&&E.value===De||_e)&&(I(he),_e&&(W.current=!0))},[E.value]),ie=M.useCallback(()=>T?.focus(),[T]),ce=M.useCallback((he,De,be)=>{const _e=!W.current&&!be;(E.value!==void 0&&E.value===De||_e)&&B(he)},[E.value]),ye=r==="popper"?QD:ere,Ce=ye===QD?{side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:m,sticky:b,hideWhenDetached:x,avoidCollisions:v}:{};return p.jsx(Qne,{scope:n,content:T,viewport:P,onViewportChange:R,itemRefCallback:Q,selectedItem:L,onItemLeave:ie,itemTextRefCallback:ce,focusSelectedItem:te,selectedItemText:j,position:r,isPositioned:J,searchRef:X,children:p.jsx(Sw,{as:mWe,allowPinchZoom:!0,children:p.jsx(_w,{asChild:!0,trapped:E.open,onMountAutoFocus:he=>{he.preventDefault()},onUnmountAutoFocus:Je(i,he=>{E.trigger?.focus({preventScroll:!0}),he.preventDefault()}),children:p.jsx(Ap,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:he=>he.preventDefault(),onDismiss:()=>E.onOpenChange(!1),children:p.jsx(ye,{role:"listbox",id:E.contentId,"data-state":E.open?"open":"closed",dir:E.dir,onContextMenu:he=>he.preventDefault(),..._,...Ce,onPlaced:()=>G(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:Je(_.onKeyDown,he=>{const De=he.ctrlKey||he.altKey||he.metaKey;if(he.key==="Tab"&&he.preventDefault(),!De&&he.key.length===1&&q(he.key),["ArrowUp","ArrowDown","Home","End"].includes(he.key)){let _e=H().filter(Ee=>!Ee.disabled).map(Ee=>Ee.ref.current);if(["ArrowUp","End"].includes(he.key)&&(_e=_e.slice().reverse()),["ArrowUp","ArrowDown"].includes(he.key)){const Ee=he.target,ee=_e.indexOf(Ee);_e=_e.slice(ee+1)}setTimeout(()=>K(_e)),he.preventDefault()}})})})})})})});Zne.displayName=pWe;var gWe="SelectItemAlignedPosition",ere=M.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=bf(xp,n),a=wf(xp,n),[o,l]=M.useState(null),[c,u]=M.useState(null),d=tn(e,N=>u(N)),h=rM(n),m=M.useRef(!1),b=M.useRef(!0),{viewport:x,selectedItem:v,selectedItemText:_,focusSelectedItem:E}=a,T=M.useCallback(()=>{if(s.trigger&&s.valueNode&&o&&c&&x&&v&&_){const N=s.trigger.getBoundingClientRect(),L=c.getBoundingClientRect(),I=s.valueNode.getBoundingClientRect(),j=_.getBoundingClientRect();if(s.dir!=="rtl"){const Ee=j.left-L.left,ee=I.left-Ee,Me=N.left-ee,xe=N.width+Me,Le=Math.max(xe,L.width),Pe=window.innerWidth-sl,tt=Zx(ee,[sl,Math.max(sl,Pe-Le)]);o.style.minWidth=xe+"px",o.style.left=tt+"px"}else{const Ee=L.right-j.right,ee=window.innerWidth-I.right-Ee,Me=window.innerWidth-N.right-ee,xe=N.width+Me,Le=Math.max(xe,L.width),Pe=window.innerWidth-sl,tt=Zx(ee,[sl,Math.max(sl,Pe-Le)]);o.style.minWidth=xe+"px",o.style.right=tt+"px"}const B=h(),H=window.innerHeight-sl*2,J=x.scrollHeight,G=window.getComputedStyle(c),W=parseInt(G.borderTopWidth,10),K=parseInt(G.paddingTop,10),te=parseInt(G.borderBottomWidth,10),z=parseInt(G.paddingBottom,10),V=W+K+J+z+te,X=Math.min(v.offsetHeight*5,V),q=window.getComputedStyle(x),Q=parseInt(q.paddingTop,10),ie=parseInt(q.paddingBottom,10),ce=N.top+N.height/2-sl,ye=H-ce,Ce=v.offsetHeight/2,he=v.offsetTop+Ce,De=W+K+he,be=V-De;if(De<=ce){const Ee=B.length>0&&v===B[B.length-1].ref.current;o.style.bottom="0px";const ee=c.clientHeight-x.offsetTop-x.offsetHeight,Me=Math.max(ye,Ce+(Ee?ie:0)+ee+te),xe=De+Me;o.style.height=xe+"px"}else{const Ee=B.length>0&&v===B[0].ref.current;o.style.top="0px";const Me=Math.max(ce,W+x.offsetTop+(Ee?Q:0)+Ce)+be;o.style.height=Me+"px",x.scrollTop=De-ce+x.offsetTop}o.style.margin=`${sl}px 0`,o.style.minHeight=X+"px",o.style.maxHeight=H+"px",r?.(),requestAnimationFrame(()=>m.current=!0)}},[h,s.trigger,s.valueNode,o,c,x,v,_,s.dir,r]);Gr(()=>T(),[T]);const[A,P]=M.useState();Gr(()=>{c&&P(window.getComputedStyle(c).zIndex)},[c]);const R=M.useCallback(N=>{N&&b.current===!0&&(T(),E?.(),b.current=!1)},[T,E]);return p.jsx(yWe,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:m,onScrollButtonChange:R,children:p.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:p.jsx(Pt.div,{...i,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});ere.displayName=gWe;var vWe="SelectPopperPosition",QD=M.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=sl,...s}=t,a=iM(n);return p.jsx(AT,{...a,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});QD.displayName=vWe;var[yWe,CU]=Py(xp,{}),ZD="SelectViewport",tre=M.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,s=wf(ZD,n),a=CU(ZD,n),o=tn(e,s.onViewportChange),l=M.useRef(0);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),p.jsx(nM.Slot,{scope:n,children:p.jsx(Pt.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Je(i.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:h}=a;if(h?.current&&d){const m=Math.abs(l.current-u.scrollTop);if(m>0){const b=window.innerHeight-sl*2,x=parseFloat(d.style.minHeight),v=parseFloat(d.style.height),_=Math.max(x,v);if(_<b){const E=_+m,T=Math.min(b,E),A=E-T;d.style.height=T+"px",d.style.bottom==="0px"&&(u.scrollTop=A>0?A:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});tre.displayName=ZD;var nre="SelectGroup",[xWe,bWe]=Py(nre),wWe=M.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=go();return p.jsx(xWe,{scope:n,id:i,children:p.jsx(Pt.div,{role:"group","aria-labelledby":i,...r,ref:e})})});wWe.displayName=nre;var rre="SelectLabel",ire=M.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=bWe(rre,n);return p.jsx(Pt.div,{id:i.id,...r,ref:e})});ire.displayName=rre;var pT="SelectItem",[_We,sre]=Py(pT),are=M.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...a}=t,o=bf(pT,n),l=wf(pT,n),c=o.value===r,[u,d]=M.useState(s??""),[h,m]=M.useState(!1),b=tn(e,E=>l.itemRefCallback?.(E,r,i)),x=go(),v=M.useRef("touch"),_=()=>{i||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return p.jsx(_We,{scope:n,value:r,disabled:i,textId:x,isSelected:c,onItemTextChange:M.useCallback(E=>{d(T=>T||(E?.textContent??"").trim())},[]),children:p.jsx(nM.ItemSlot,{scope:n,value:r,disabled:i,textValue:u,children:p.jsx(Pt.div,{role:"option","aria-labelledby":x,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...a,ref:b,onFocus:Je(a.onFocus,()=>m(!0)),onBlur:Je(a.onBlur,()=>m(!1)),onClick:Je(a.onClick,()=>{v.current!=="mouse"&&_()}),onPointerUp:Je(a.onPointerUp,()=>{v.current==="mouse"&&_()}),onPointerDown:Je(a.onPointerDown,E=>{v.current=E.pointerType}),onPointerMove:Je(a.onPointerMove,E=>{v.current=E.pointerType,i?l.onItemLeave?.():v.current==="mouse"&&E.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Je(a.onPointerLeave,E=>{E.currentTarget===document.activeElement&&l.onItemLeave?.()}),onKeyDown:Je(a.onKeyDown,E=>{l.searchRef?.current!==""&&E.key===" "||(oWe.includes(E.key)&&_(),E.key===" "&&E.preventDefault())})})})})});are.displayName=pT;var cx="SelectItemText",ore=M.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,a=bf(cx,n),o=wf(cx,n),l=sre(cx,n),c=dWe(cx,n),[u,d]=M.useState(null),h=tn(e,_=>d(_),l.onItemTextChange,_=>o.itemTextRefCallback?.(_,l.value,l.disabled)),m=u?.textContent,b=M.useMemo(()=>p.jsx("option",{value:l.value,disabled:l.disabled,children:m},l.value),[l.disabled,l.value,m]),{onNativeOptionAdd:x,onNativeOptionRemove:v}=c;return Gr(()=>(x(b),()=>v(b)),[x,v,b]),p.jsxs(p.Fragment,{children:[p.jsx(Pt.span,{id:l.textId,...s,ref:h}),l.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Zv.createPortal(s.children,a.valueNode):null]})});ore.displayName=cx;var lre="SelectItemIndicator",cre=M.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return sre(lre,n).isSelected?p.jsx(Pt.span,{"aria-hidden":!0,...r,ref:e}):null});cre.displayName=lre;var ej="SelectScrollUpButton",ure=M.forwardRef((t,e)=>{const n=wf(ej,t.__scopeSelect),r=CU(ej,t.__scopeSelect),[i,s]=M.useState(!1),a=tn(e,r.onScrollButtonChange);return Gr(()=>{if(n.viewport&&n.isPositioned){let o=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),i?p.jsx(fre,{...t,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop-l.offsetHeight)}}):null});ure.displayName=ej;var tj="SelectScrollDownButton",dre=M.forwardRef((t,e)=>{const n=wf(tj,t.__scopeSelect),r=CU(tj,t.__scopeSelect),[i,s]=M.useState(!1),a=tn(e,r.onScrollButtonChange);return Gr(()=>{if(n.viewport&&n.isPositioned){let o=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),i?p.jsx(fre,{...t,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop+l.offsetHeight)}}):null});dre.displayName=tj;var fre=M.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,s=wf("SelectScrollButton",n),a=M.useRef(null),o=rM(n),l=M.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return M.useEffect(()=>()=>l(),[l]),Gr(()=>{o().find(u=>u.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[o]),p.jsx(Pt.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Je(i.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:Je(i.onPointerMove,()=>{s.onItemLeave?.(),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:Je(i.onPointerLeave,()=>{l()})})}),SWe="SelectSeparator",hre=M.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return p.jsx(Pt.div,{"aria-hidden":!0,...r,ref:e})});hre.displayName=SWe;var nj="SelectArrow",EWe=M.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=iM(n),s=bf(nj,n),a=wf(nj,n);return s.open&&a.position==="popper"?p.jsx(MT,{...i,...r,ref:e}):null});EWe.displayName=nj;var TWe="SelectBubbleInput",pre=M.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const i=M.useRef(null),s=tn(r,i),a=PU(e);return M.useEffect(()=>{const o=i.current;if(!o)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==e&&u){const d=new Event("change",{bubbles:!0});u.call(o,e),o.dispatchEvent(d)}},[a,e]),p.jsx(Pt.select,{...n,style:{...Qq,...n.style},ref:s,defaultValue:e})});pre.displayName=TWe;function mre(t){return t===""||t===void 0}function gre(t){const e=Wr(t),n=M.useRef(""),r=M.useRef(0),i=M.useCallback(a=>{const o=n.current+a;e(o),(function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))})(o)},[e]),s=M.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return M.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function vre(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let a=AWe(t,Math.max(s,0));i.length===1&&(a=a.filter(c=>c!==n));const l=a.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function AWe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var MWe=Hne,yre=Gne,PWe=Kne,CWe=Xne,RWe=Yne,xre=Jne,OWe=tre,bre=ire,wre=are,NWe=ore,IWe=cre,_re=ure,Sre=dre,Ere=hre;const bp=MWe,wp=PWe,af=M.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(yre,{ref:r,className:kt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,p.jsx(CWe,{asChild:!0,children:p.jsx(_T,{className:"h-4 w-4 opacity-50"})})]}));af.displayName=yre.displayName;const Tre=M.forwardRef(({className:t,...e},n)=>p.jsx(_re,{ref:n,className:kt("flex cursor-default items-center justify-center py-1",t),...e,children:p.jsx(nle,{className:"h-4 w-4"})}));Tre.displayName=_re.displayName;const Are=M.forwardRef(({className:t,...e},n)=>p.jsx(Sre,{ref:n,className:kt("flex cursor-default items-center justify-center py-1",t),...e,children:p.jsx(_T,{className:"h-4 w-4"})}));Are.displayName=Sre.displayName;const of=M.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>p.jsx(RWe,{children:p.jsxs(xre,{ref:i,className:kt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[p.jsx(Tre,{}),p.jsx(OWe,{className:kt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),p.jsx(Are,{})]})}));of.displayName=xre.displayName;const kWe=M.forwardRef(({className:t,...e},n)=>p.jsx(bre,{ref:n,className:kt("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));kWe.displayName=bre.displayName;const Tr=M.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(wre,{ref:r,className:kt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...n,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(IWe,{children:p.jsx(ty,{className:"h-4 w-4"})})}),p.jsx(NWe,{children:e})]}));Tr.displayName=wre.displayName;const DWe=M.forwardRef(({className:t,...e},n)=>p.jsx(Ere,{ref:n,className:kt("-mx-1 my-1 h-px bg-muted",t),...e}));DWe.displayName=Ere.displayName;function jWe({onSuccess:t}){const{user:e}=qr(),{toast:n}=ga(),[r,i]=M.useState(!1),[s,a]=M.useState(!1),[o,l]=M.useState(null),[c,u]=M.useState(!1),d=M.useRef(null),[h,m]=M.useState({title:"",journal:"",year:new Date().getFullYear(),doi:"",abstract:"",quartile:"Q1",keywords:"",co_authors:""}),b=async()=>{if(!o||!e)return null;u(!0);const T=o.name.split(".").pop(),A=`${e.id}/${Date.now()}.${T}`,{error:P}=await ot.storage.from("publications").upload(A,o,{cacheControl:"3600",upsert:!1});if(u(!1),P)return n({variant:"destructive",title:"PDF upload failed",description:P.message}),null;const{data:{publicUrl:R}}=ot.storage.from("publications").getPublicUrl(A);return R},x=async T=>{if(T.preventDefault(),!e){n({variant:"destructive",title:"Authentication required",description:"Please log in to upload publications."});return}if(!h.title||!h.journal){n({variant:"destructive",title:"Missing fields",description:"Title and journal are required."});return}a(!0);let A=null;o&&(A=await b());const P=h.keywords.split(",").map(L=>L.trim()).filter(L=>L.length>0),R=h.co_authors.split(",").map(L=>L.trim()).filter(L=>L.length>0),{error:N}=await ot.from("researcher_publications").insert({user_id:e.id,title:h.title,journal:h.journal,year:h.year,doi:h.doi||null,abstract:h.abstract||null,quartile:h.quartile||null,keywords:P.length>0?P:null,co_authors:R.length>0?R:null,pdf_url:A,citations:0});a(!1),N?n({variant:"destructive",title:"Upload failed",description:N.message}):(n({title:"Publication added",description:"Your publication has been successfully uploaded."}),v(),t?.())},v=()=>{m({title:"",journal:"",year:new Date().getFullYear(),doi:"",abstract:"",quartile:"Q1",keywords:"",co_authors:""}),l(null),i(!1)},_=(T,A)=>{m(P=>({...P,[T]:A}))},E=T=>{const A=T.target.files?.[0];if(A){if(A.type!=="application/pdf"){n({variant:"destructive",title:"Invalid file type",description:"Please upload a PDF file."});return}if(A.size>20*1024*1024){n({variant:"destructive",title:"File too large",description:"PDF must be under 20MB."});return}l(A)}};return r?p.jsxs(at.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"glass-panel p-6 mb-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("h3",{className:"font-semibold text-foreground flex items-center gap-2",children:[p.jsx(yo,{className:"w-5 h-5"}),"Add New Publication"]}),p.jsx(ut,{variant:"ghost",size:"icon",onClick:v,children:p.jsx(xo,{className:"w-4 h-4"})})]}),p.jsxs("form",{onSubmit:x,className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"md:col-span-2",children:[p.jsx(Mi,{htmlFor:"title",children:"Title *"}),p.jsx(sr,{id:"title",placeholder:"Publication title",value:h.title,onChange:T=>_("title",T.target.value),required:!0})]}),p.jsxs("div",{children:[p.jsx(Mi,{htmlFor:"journal",children:"Journal *"}),p.jsx(sr,{id:"journal",placeholder:"Journal name",value:h.journal,onChange:T=>_("journal",T.target.value),required:!0})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsxs("div",{children:[p.jsx(Mi,{htmlFor:"year",children:"Year"}),p.jsx(sr,{id:"year",type:"number",min:"1900",max:new Date().getFullYear(),value:h.year,onChange:T=>_("year",parseInt(T.target.value))})]}),p.jsxs("div",{children:[p.jsx(Mi,{htmlFor:"quartile",children:"Quartile"}),p.jsxs(bp,{value:h.quartile,onValueChange:T=>_("quartile",T),children:[p.jsx(af,{children:p.jsx(wp,{placeholder:"Select quartile"})}),p.jsxs(of,{children:[p.jsx(Tr,{value:"Q1",children:"Q1"}),p.jsx(Tr,{value:"Q2",children:"Q2"}),p.jsx(Tr,{value:"Q3",children:"Q3"}),p.jsx(Tr,{value:"Q4",children:"Q4"})]})]})]})]}),p.jsxs("div",{children:[p.jsx(Mi,{htmlFor:"doi",children:"DOI"}),p.jsx(sr,{id:"doi",placeholder:"10.1000/example",value:h.doi,onChange:T=>_("doi",T.target.value)})]}),p.jsxs("div",{children:[p.jsx(Mi,{children:"PDF File"}),p.jsx("input",{ref:d,type:"file",accept:".pdf",onChange:E,className:"hidden"}),p.jsx("div",{onClick:()=>d.current?.click(),className:"flex items-center gap-2 p-3 border border-input rounded-md cursor-pointer hover:bg-muted/50 transition-colors",children:o?p.jsxs(p.Fragment,{children:[p.jsx(lle,{className:"w-4 h-4 text-primary"}),p.jsx("span",{className:"text-sm text-foreground truncate flex-1",children:o.name}),p.jsx(ut,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6",onClick:T=>{T.stopPropagation(),l(null)},children:p.jsx(xo,{className:"w-3 h-3"})})]}):p.jsxs(p.Fragment,{children:[p.jsx(qF,{className:"w-4 h-4 text-muted-foreground"}),p.jsx("span",{className:"text-sm text-muted-foreground",children:"Upload PDF (max 20MB)"})]})})]}),p.jsxs("div",{className:"md:col-span-2",children:[p.jsx(Mi,{htmlFor:"abstract",children:"Abstract"}),p.jsx(qw,{id:"abstract",placeholder:"Publication abstract...",rows:4,value:h.abstract,onChange:T=>_("abstract",T.target.value)})]}),p.jsxs("div",{children:[p.jsx(Mi,{htmlFor:"keywords",children:"Keywords (comma-separated)"}),p.jsx(sr,{id:"keywords",placeholder:"climate, machine learning, data science",value:h.keywords,onChange:T=>_("keywords",T.target.value)})]}),p.jsxs("div",{children:[p.jsx(Mi,{htmlFor:"co_authors",children:"Co-Authors (comma-separated)"}),p.jsx(sr,{id:"co_authors",placeholder:"Dr. Jane Smith, Prof. John Doe",value:h.co_authors,onChange:T=>_("co_authors",T.target.value)})]})]}),p.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[p.jsx(ut,{type:"button",variant:"ghost",onClick:v,children:"Cancel"}),p.jsxs(ut,{type:"submit",disabled:s||c,className:"gap-2",children:[s||c?p.jsx(bu,{className:"w-4 h-4 animate-spin"}):p.jsx(qF,{className:"w-4 h-4"}),c?"Uploading PDF...":"Upload Publication"]})]})]})]}):p.jsxs(ut,{onClick:()=>i(!0),className:"gap-2",children:[p.jsx(vj,{className:"w-4 h-4"}),"Add Publication"]})}var sM="Dialog",[Mre,Pre]=cs(sM),[LWe,Pl]=Mre(sM),Cre=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:a=!0}=t,o=M.useRef(null),l=M.useRef(null),[c,u]=bl({prop:r,defaultProp:i??!1,onChange:s,caller:sM});return p.jsx(LWe,{scope:e,triggerRef:o,contentRef:l,contentId:go(),titleId:go(),descriptionId:go(),open:c,onOpenChange:u,onOpenToggle:M.useCallback(()=>u(d=>!d),[u]),modal:a,children:n})};Cre.displayName=sM;var Rre="DialogTrigger",Ore=M.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Pl(Rre,n),s=tn(e,i.triggerRef);return p.jsx(Pt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":NU(i.open),...r,ref:s,onClick:Je(t.onClick,i.onOpenToggle)})});Ore.displayName=Rre;var RU="DialogPortal",[UWe,Nre]=Mre(RU,{forceMount:void 0}),Ire=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=Pl(RU,e);return p.jsx(UWe,{scope:e,forceMount:n,children:M.Children.map(r,a=>p.jsx(Wi,{present:n||s.open,children:p.jsx(ey,{asChild:!0,container:i,children:a})}))})};Ire.displayName=RU;var mT="DialogOverlay",kre=M.forwardRef((t,e)=>{const n=Nre(mT,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Pl(mT,t.__scopeDialog);return s.modal?p.jsx(Wi,{present:r||s.open,children:p.jsx(BWe,{...i,ref:e})}):null});kre.displayName=mT;var FWe=Kd("DialogOverlay.RemoveScroll"),BWe=M.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Pl(mT,n);return p.jsx(Sw,{as:FWe,allowPinchZoom:!0,shards:[i.contentRef],children:p.jsx(Pt.div,{"data-state":NU(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),_p="DialogContent",Dre=M.forwardRef((t,e)=>{const n=Nre(_p,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Pl(_p,t.__scopeDialog);return p.jsx(Wi,{present:r||s.open,children:s.modal?p.jsx(zWe,{...i,ref:e}):p.jsx($We,{...i,ref:e})})});Dre.displayName=_p;var zWe=M.forwardRef((t,e)=>{const n=Pl(_p,t.__scopeDialog),r=M.useRef(null),i=tn(e,n.contentRef,r);return M.useEffect(()=>{const s=r.current;if(s)return WT(s)},[]),p.jsx(jre,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Je(t.onCloseAutoFocus,s=>{s.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Je(t.onPointerDownOutside,s=>{const a=s.detail.originalEvent,o=a.button===0&&a.ctrlKey===!0;(a.button===2||o)&&s.preventDefault()}),onFocusOutside:Je(t.onFocusOutside,s=>s.preventDefault())})}),$We=M.forwardRef((t,e)=>{const n=Pl(_p,t.__scopeDialog),r=M.useRef(!1),i=M.useRef(!1);return p.jsx(jre,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{t.onCloseAutoFocus?.(s),s.defaultPrevented||(r.current||n.triggerRef.current?.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{t.onInteractOutside?.(s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=s.target;n.triggerRef.current?.contains(a)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),jre=M.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...a}=t,o=Pl(_p,n),l=M.useRef(null),c=tn(e,l);return HT(),p.jsxs(p.Fragment,{children:[p.jsx(_w,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:p.jsx(Ap,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":NU(o.open),...a,ref:c,onDismiss:()=>o.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(HWe,{titleId:o.titleId}),p.jsx(GWe,{contentRef:l,descriptionId:o.descriptionId})]})]})}),OU="DialogTitle",Lre=M.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Pl(OU,n);return p.jsx(Pt.h2,{id:i.titleId,...r,ref:e})});Lre.displayName=OU;var Ure="DialogDescription",Fre=M.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Pl(Ure,n);return p.jsx(Pt.p,{id:i.descriptionId,...r,ref:e})});Fre.displayName=Ure;var Bre="DialogClose",zre=M.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Pl(Bre,n);return p.jsx(Pt.button,{type:"button",...r,ref:e,onClick:Je(t.onClick,()=>i.onOpenChange(!1))})});zre.displayName=Bre;function NU(t){return t?"open":"closed"}var $re="DialogTitleWarning",[VWe,Vre]=soe($re,{contentName:_p,titleName:OU,docsSlug:"dialog"}),HWe=({titleId:t})=>{const e=Vre($re),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return M.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},WWe="DialogDescriptionWarning",GWe=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Vre(WWe).contentName}}.`;return M.useEffect(()=>{const i=t.current?.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Hre=Cre,Wre=Ore,Gre=Ire,IU=kre,kU=Dre,DU=Lre,jU=Fre,LU=zre,qre="AlertDialog",[qWe]=cs(qre,[Pre]),Lu=Pre(),Kre=t=>{const{__scopeAlertDialog:e,...n}=t,r=Lu(e);return p.jsx(Hre,{...r,...n,modal:!0})};Kre.displayName=qre;var KWe="AlertDialogTrigger",Xre=M.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Lu(n);return p.jsx(Wre,{...i,...r,ref:e})});Xre.displayName=KWe;var XWe="AlertDialogPortal",Yre=t=>{const{__scopeAlertDialog:e,...n}=t,r=Lu(e);return p.jsx(Gre,{...r,...n})};Yre.displayName=XWe;var YWe="AlertDialogOverlay",Jre=M.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Lu(n);return p.jsx(IU,{...i,...r,ref:e})});Jre.displayName=YWe;var iv="AlertDialogContent",[JWe,QWe]=qWe(iv),ZWe=Kq("AlertDialogContent"),Qre=M.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...i}=t,s=Lu(n),a=M.useRef(null),o=tn(e,a),l=M.useRef(null);return p.jsx(VWe,{contentName:iv,titleName:Zre,docsSlug:"alert-dialog",children:p.jsx(JWe,{scope:n,cancelRef:l,children:p.jsxs(kU,{role:"alertdialog",...s,...i,ref:o,onOpenAutoFocus:Je(i.onOpenAutoFocus,c=>{c.preventDefault(),l.current?.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[p.jsx(ZWe,{children:r}),p.jsx(t6e,{contentRef:a})]})})})});Qre.displayName=iv;var Zre="AlertDialogTitle",eie=M.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Lu(n);return p.jsx(DU,{...i,...r,ref:e})});eie.displayName=Zre;var tie="AlertDialogDescription",nie=M.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Lu(n);return p.jsx(jU,{...i,...r,ref:e})});nie.displayName=tie;var e6e="AlertDialogAction",rie=M.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Lu(n);return p.jsx(LU,{...i,...r,ref:e})});rie.displayName=e6e;var iie="AlertDialogCancel",sie=M.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:i}=QWe(iie,n),s=Lu(n),a=tn(e,i);return p.jsx(LU,{...s,...r,ref:a})});sie.displayName=iie;var t6e=({contentRef:t})=>{const e=`\`${iv}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${iv}\` by passing a \`${tie}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${iv}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return M.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},n6e=Kre,r6e=Xre,i6e=Yre,aie=Jre,oie=Qre,lie=rie,cie=sie,uie=eie,die=nie;const s6e=n6e,a6e=r6e,o6e=i6e,fie=M.forwardRef(({className:t,...e},n)=>p.jsx(aie,{className:kt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));fie.displayName=aie.displayName;const hie=M.forwardRef(({className:t,...e},n)=>p.jsxs(o6e,{children:[p.jsx(fie,{}),p.jsx(oie,{ref:n,className:kt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));hie.displayName=oie.displayName;const pie=({className:t,...e})=>p.jsx("div",{className:kt("flex flex-col space-y-2 text-center sm:text-left",t),...e});pie.displayName="AlertDialogHeader";const mie=({className:t,...e})=>p.jsx("div",{className:kt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});mie.displayName="AlertDialogFooter";const gie=M.forwardRef(({className:t,...e},n)=>p.jsx(uie,{ref:n,className:kt("text-lg font-semibold",t),...e}));gie.displayName=uie.displayName;const vie=M.forwardRef(({className:t,...e},n)=>p.jsx(die,{ref:n,className:kt("text-sm text-muted-foreground",t),...e}));vie.displayName=die.displayName;const yie=M.forwardRef(({className:t,...e},n)=>p.jsx(lie,{ref:n,className:kt(EL(),t),...e}));yie.displayName=lie.displayName;const xie=M.forwardRef(({className:t,...e},n)=>p.jsx(cie,{ref:n,className:kt(EL({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));xie.displayName=cie.displayName;function l6e({publication:t,index:e,onUpdate:n}){const{toast:r}=ga(),[i,s]=M.useState(!1),[a,o]=M.useState(!1),[l,c]=M.useState(!1),[u,d]=M.useState({title:t.title,journal:t.journal||"",year:t.year||new Date().getFullYear(),doi:t.doi||"",abstract:t.abstract||"",quartile:t.quartile||"Q1",keywords:t.keywords?.join(", ")||"",co_authors:t.co_authors?.join(", ")||""}),h=x=>{switch(x){case"Q1":return"bg-emerald/20 text-emerald border-emerald/30";case"Q2":return"bg-primary/20 text-primary border-primary/30";case"Q3":return"bg-secondary/20 text-secondary border-secondary/30";default:return"bg-muted text-muted-foreground border-border"}},m=async()=>{c(!0);const x=u.keywords.split(",").map(E=>E.trim()).filter(E=>E.length>0),v=u.co_authors.split(",").map(E=>E.trim()).filter(E=>E.length>0),{error:_}=await ot.from("researcher_publications").update({title:u.title,journal:u.journal||null,year:u.year,doi:u.doi||null,abstract:u.abstract||null,quartile:u.quartile||null,keywords:x.length>0?x:null,co_authors:v.length>0?v:null}).eq("id",t.id);c(!1),_?r({variant:"destructive",title:"Update failed",description:_.message}):(r({title:"Publication updated",description:"Your changes have been saved."}),s(!1),n())},b=async()=>{if(o(!0),t.pdf_url){const v=t.pdf_url.split("/publications/");v.length>1&&await ot.storage.from("publications").remove([v[1]])}const{error:x}=await ot.from("researcher_publications").delete().eq("id",t.id);o(!1),x?r({variant:"destructive",title:"Delete failed",description:x.message}):(r({title:"Publication deleted",description:"The publication has been removed."}),n())};return i?p.jsx(at.div,{className:"glass-panel p-4",initial:{opacity:0},animate:{opacity:1},children:p.jsxs("div",{className:"space-y-3",children:[p.jsx(sr,{value:u.title,onChange:x=>d({...u,title:x.target.value}),placeholder:"Title",className:"font-medium"}),p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsx(sr,{value:u.journal,onChange:x=>d({...u,journal:x.target.value}),placeholder:"Journal"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx(sr,{type:"number",value:u.year,onChange:x=>d({...u,year:parseInt(x.target.value)}),placeholder:"Year",className:"w-24"}),p.jsxs(bp,{value:u.quartile,onValueChange:x=>d({...u,quartile:x}),children:[p.jsx(af,{className:"w-20",children:p.jsx(wp,{})}),p.jsxs(of,{children:[p.jsx(Tr,{value:"Q1",children:"Q1"}),p.jsx(Tr,{value:"Q2",children:"Q2"}),p.jsx(Tr,{value:"Q3",children:"Q3"}),p.jsx(Tr,{value:"Q4",children:"Q4"})]})]})]})]}),p.jsx(sr,{value:u.doi,onChange:x=>d({...u,doi:x.target.value}),placeholder:"DOI"}),p.jsx(qw,{value:u.abstract,onChange:x=>d({...u,abstract:x.target.value}),placeholder:"Abstract",rows:3}),p.jsx(sr,{value:u.keywords,onChange:x=>d({...u,keywords:x.target.value}),placeholder:"Keywords (comma-separated)"}),p.jsx(sr,{value:u.co_authors,onChange:x=>d({...u,co_authors:x.target.value}),placeholder:"Co-authors (comma-separated)"}),p.jsxs("div",{className:"flex justify-end gap-2",children:[p.jsxs(ut,{variant:"ghost",size:"sm",onClick:()=>s(!1),children:[p.jsx(xo,{className:"w-4 h-4 mr-1"}),"Cancel"]}),p.jsxs(ut,{size:"sm",onClick:m,disabled:l,children:[l?p.jsx(bu,{className:"w-4 h-4 animate-spin mr-1"}):p.jsx(yj,{className:"w-4 h-4 mr-1"}),"Save"]})]})]})}):p.jsx(at.div,{className:"glass-panel p-4 hover:bg-muted/50 transition-colors group",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:e*.05},children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary/10 text-primary flex items-center justify-center flex-shrink-0 mt-1",children:p.jsx(Oi,{className:"w-4 h-4"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("h4",{className:"font-medium text-foreground text-sm line-clamp-2",children:t.title}),p.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[t.journal||"Unknown journal","  ",t.year||"Year unknown"]}),p.jsxs("div",{className:"flex items-center gap-3 mt-2 flex-wrap",children:[t.quartile&&p.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full border ${h(t.quartile)}`,children:t.quartile}),p.jsxs("span",{className:"text-xs text-muted-foreground",children:[t.citations||0," citations"]}),t.doi&&p.jsxs("a",{href:`https://doi.org/${t.doi}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary hover:underline flex items-center gap-1",children:["DOI ",p.jsx(Dx,{className:"w-3 h-3"})]}),t.pdf_url&&p.jsxs("a",{href:t.pdf_url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-cyan hover:underline flex items-center gap-1",children:["PDF ",p.jsx(Dx,{className:"w-3 h-3"})]})]})]}),p.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[p.jsx(ut,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>s(!0),children:p.jsx(gj,{className:"w-4 h-4"})}),p.jsxs(s6e,{children:[p.jsx(a6e,{asChild:!0,children:p.jsx(ut,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",children:p.jsx(op,{className:"w-4 h-4"})})}),p.jsxs(hie,{children:[p.jsxs(pie,{children:[p.jsx(gie,{children:"Delete Publication?"}),p.jsxs(vie,{children:['This will permanently delete "',t.title,'" and any associated PDF files. This action cannot be undone.']})]}),p.jsxs(mie,{children:[p.jsx(xie,{children:"Cancel"}),p.jsxs(yie,{onClick:b,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:a,children:[a?p.jsx(bu,{className:"w-4 h-4 animate-spin mr-1"}):null,"Delete"]})]})]})]})]})]})})}function bie(){const{user:t}=qr(),[e,n]=M.useState([]),[r,i]=M.useState(!0),[s,a]=M.useState([]),o=async()=>{if(!t)return;i(!0);const{data:l,error:c}=await ot.from("researcher_publications").select("id, title, journal, year, citations, quartile, doi, abstract, pdf_url, keywords, co_authors").eq("user_id",t.id).order("year",{ascending:!1});if(!c&&l){n(l);const u=new Map;l.forEach(h=>{const m=h.year||new Date().getFullYear(),b=u.get(m)||{publications:0,citations:0};u.set(m,{publications:b.publications+1,citations:b.citations+(h.citations||0)})});const d=Array.from(u.entries()).sort((h,m)=>h[0]-m[0]).slice(-6).map(([h,m])=>({year:h.toString(),...m}));a(d)}i(!1)};return M.useEffect(()=>{o()},[t]),r?p.jsx("div",{className:"flex items-center justify-center py-12",children:p.jsx(bu,{className:"w-6 h-6 animate-spin text-muted-foreground"})}):p.jsxs("div",{className:"space-y-6",children:[p.jsx(jWe,{onSuccess:o}),s.length>0&&p.jsxs("div",{className:"glass-panel p-4",children:[p.jsx("h3",{className:"font-semibold text-foreground mb-4",children:"Publication & Citation Trends"}),p.jsx(yl,{width:"100%",height:200,children:p.jsxs(Gw,{data:s,children:[p.jsxs("defs",{children:[p.jsxs("linearGradient",{id:"pubGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[p.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),p.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]}),p.jsxs("linearGradient",{id:"citeGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[p.jsx("stop",{offset:"5%",stopColor:"hsl(var(--secondary))",stopOpacity:.3}),p.jsx("stop",{offset:"95%",stopColor:"hsl(var(--secondary))",stopOpacity:0})]})]}),p.jsx(_o,{dataKey:"year",stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1}),p.jsx(So,{stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,axisLine:!1}),p.jsx(di,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),p.jsx(ls,{type:"monotone",dataKey:"publications",stroke:"hsl(var(--primary))",fill:"url(#pubGradient)",strokeWidth:2,name:"Publications"}),p.jsx(ls,{type:"monotone",dataKey:"citations",stroke:"hsl(var(--secondary))",fill:"url(#citeGradient)",strokeWidth:2,name:"Citations"})]})})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("h3",{className:"font-semibold text-foreground",children:["Your Publications (",e.length,")"]}),e.length===0?p.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[p.jsx(Oi,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),p.jsx("p",{children:"No publications yet. Add your first publication above!"})]}):e.map((l,c)=>p.jsx(l6e,{publication:l,index:c,onUpdate:o},l.id))]})]})}const VN=[{id:"1",name:"Dr. Sarah Chen",institution:"MIT",country:"USA",papers:8,flag:""},{id:"2",name:"Prof. Hans Mueller",institution:"ETH Zurich",country:"Switzerland",papers:6,flag:""},{id:"3",name:"Dr. Aisha Patel",institution:"University of Cape Town",country:"South Africa",papers:12,flag:""},{id:"4",name:"Prof. Kenji Tanaka",institution:"University of Tokyo",country:"Japan",papers:5,flag:""},{id:"5",name:"Dr. Emma Williams",institution:"University of Oxford",country:"UK",papers:9,flag:""},{id:"6",name:"Prof. Jean-Pierre Dubois",institution:"Sorbonne University",country:"France",papers:4,flag:""}],c6e=[{country:"USA",papers:23,institutions:5,flag:""},{country:"UK",papers:18,institutions:4,flag:""},{country:"South Africa",papers:15,institutions:3,flag:""},{country:"Kenya",papers:12,institutions:2,flag:""},{country:"Germany",papers:10,institutions:3,flag:""},{country:"Japan",papers:8,institutions:2,flag:""}];function wie(){return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"glass-panel p-4",children:[p.jsxs("h3",{className:"font-semibold text-foreground mb-4 flex items-center gap-2",children:[p.jsx(pi,{className:"w-4 h-4"}),"Collaboration Network"]}),p.jsxs("div",{className:"relative h-64 flex items-center justify-center",children:[p.jsx(at.div,{className:"absolute w-16 h-16 rounded-full bg-gradient-to-br from-primary to-cyan flex items-center justify-center text-primary-foreground font-bold z-10",animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},children:"YOU"}),VN.map((t,e)=>{const n=e/VN.length*2*Math.PI-Math.PI/2,r=100,i=Math.cos(n)*r,s=Math.sin(n)*r;return p.jsxs(at.div,{className:"absolute",style:{left:`calc(50% + ${i}px - 20px)`,top:`calc(50% + ${s}px - 20px)`},initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{delay:e*.1},children:[p.jsx("svg",{className:"absolute",style:{left:"20px",top:"20px",width:`${Math.abs(i)}px`,height:`${Math.abs(s)}px`,overflow:"visible"},children:p.jsx("line",{x1:"0",y1:"0",x2:-i,y2:-s,stroke:"hsl(var(--primary))",strokeWidth:"2",strokeOpacity:"0.3",strokeDasharray:"4 4"})}),p.jsxs("div",{className:"relative group",children:[p.jsx("div",{className:"w-10 h-10 rounded-full bg-muted border-2 border-primary/30 flex items-center justify-center text-lg cursor-pointer hover:scale-110 transition-transform",children:t.flag}),p.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-background border border-border rounded-lg shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-20",children:[p.jsx("p",{className:"font-medium text-sm",children:t.name}),p.jsx("p",{className:"text-xs text-muted-foreground",children:t.institution}),p.jsxs("p",{className:"text-xs text-primary",children:[t.papers," papers"]})]})]})]},t.id)})]})]}),p.jsxs("div",{className:"glass-panel p-4",children:[p.jsxs("h3",{className:"font-semibold text-foreground mb-4 flex items-center gap-2",children:[p.jsx(YN,{className:"w-4 h-4"}),"Collaborations by Country"]}),p.jsx("div",{className:"space-y-3",children:c6e.map((t,e)=>p.jsxs(at.div,{className:"flex items-center gap-3",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:e*.05},children:[p.jsx("span",{className:"text-2xl",children:t.flag}),p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsx("span",{className:"text-sm font-medium",children:t.country}),p.jsxs("span",{className:"text-xs text-muted-foreground",children:[t.papers," papers"]})]}),p.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:p.jsx(at.div,{className:"h-full bg-gradient-to-r from-primary to-cyan rounded-full",initial:{width:0},animate:{width:`${t.papers/23*100}%`},transition:{delay:e*.05+.2,duration:.5}})})]})]},t.country))})]}),p.jsxs("div",{className:"glass-panel p-4",children:[p.jsxs("h3",{className:"font-semibold text-foreground mb-4 flex items-center gap-2",children:[p.jsx(Kl,{className:"w-4 h-4"}),"Key Co-Authors"]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:VN.slice(0,4).map((t,e)=>p.jsx(at.div,{className:"p-3 rounded-lg bg-muted/50 hover:bg-muted transition-colors",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:e*.1},children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"text-2xl",children:t.flag}),p.jsxs("div",{children:[p.jsx("p",{className:"font-medium text-sm",children:t.name}),p.jsx("p",{className:"text-xs text-muted-foreground",children:t.institution}),p.jsxs("p",{className:"text-xs text-primary mt-1",children:[t.papers," joint publications"]})]})]})},t.id))})]})]})}const u6e=[{year:"2018",hIndex:8,benchmark:10},{year:"2019",hIndex:10,benchmark:12},{year:"2020",hIndex:13,benchmark:14},{year:"2021",hIndex:17,benchmark:16},{year:"2022",hIndex:21,benchmark:18},{year:"2023",hIndex:26,benchmark:20},{year:"2024",hIndex:29,benchmark:22}];function _ie(){return p.jsx(yl,{width:"100%",height:180,children:p.jsxs(UHe,{data:u6e,margin:{top:10,right:10,left:0,bottom:0},children:[p.jsx("defs",{children:p.jsxs("linearGradient",{id:"hIndexGradient",x1:"0",y1:"0",x2:"1",y2:"0",children:[p.jsx("stop",{offset:"0%",stopColor:"hsl(var(--primary))"}),p.jsx("stop",{offset:"100%",stopColor:"hsl(var(--cyan))"})]})}),p.jsx(_o,{dataKey:"year",stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,axisLine:!1}),p.jsx(So,{stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,axisLine:!1,domain:[0,"auto"]}),p.jsx(di,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px"},labelStyle:{color:"hsl(var(--foreground))"}}),p.jsx(Gv,{type:"monotone",dataKey:"benchmark",stroke:"hsl(var(--muted-foreground))",strokeWidth:1,strokeDasharray:"5 5",dot:!1,name:"Field Average"}),p.jsx(Gv,{type:"monotone",dataKey:"hIndex",stroke:"url(#hIndexGradient)",strokeWidth:3,dot:{fill:"hsl(var(--primary))",strokeWidth:2,r:4},activeDot:{r:6,fill:"hsl(var(--primary))"},name:"Your H-Index"})]})})}function Sie({currentOrcidId:t,onSyncComplete:e}){const[n,r]=M.useState(t||""),[i,s]=M.useState(!1),[a,o]=M.useState(null),{toast:l}=ga(),{session:c}=qr(),u=async()=>{if(!n.trim()){l({variant:"destructive",title:"Error",description:"Please enter your ORCID ID"});return}s(!0),o(null);try{const d=await fetch("https://jyxoltkvmtyfbfysbknb.supabase.co/functions/v1/orcid-sync",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c?.access_token}`},body:JSON.stringify({orcid_id:n.trim()})}),h=await d.json();if(!d.ok)throw new Error(h.error||"Failed to sync ORCID");o({success:!0,imported:h.imported,skipped:h.skipped,message:h.message}),l({title:"Sync Complete",description:h.message}),e()}catch(d){const h=d instanceof Error?d.message:"Unknown error";o({success:!1,imported:0,skipped:0,message:h}),l({variant:"destructive",title:"Sync Failed",description:h})}finally{s(!1)}};return p.jsxs("div",{className:"glass-panel p-6",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[p.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald/20 flex items-center justify-center",children:p.jsx(pj,{className:"w-5 h-5 text-emerald"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-display font-semibold text-foreground",children:"ORCID Integration"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Import your publications automatically from ORCID"})]})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex gap-2",children:[p.jsx(sr,{placeholder:"0000-0000-0000-0000",value:n,onChange:d=>r(d.target.value),className:"flex-1",disabled:i}),p.jsx(ut,{onClick:u,disabled:i||!n.trim(),className:"bg-gradient-to-r from-emerald to-cyan hover:opacity-90",children:i?p.jsxs(p.Fragment,{children:[p.jsx(bu,{className:"w-4 h-4 mr-2 animate-spin"}),"Syncing..."]}):p.jsxs(p.Fragment,{children:[p.jsx(mx,{className:"w-4 h-4 mr-2"}),"Sync"]})})]}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter your ORCID iD (e.g., 0000-0002-1825-0097) or full URL"}),a&&p.jsx(at.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`p-4 rounded-lg ${a.success?"bg-emerald/10 border border-emerald/30":"bg-destructive/10 border border-destructive/30"}`,children:p.jsxs("div",{className:"flex items-start gap-3",children:[a.success?p.jsx(WF,{className:"w-5 h-5 text-emerald flex-shrink-0"}):p.jsx(w9,{className:"w-5 h-5 text-destructive flex-shrink-0"}),p.jsxs("div",{children:[p.jsx("p",{className:`text-sm font-medium ${a.success?"text-emerald":"text-destructive"}`,children:a.success?"Sync Successful":"Sync Failed"}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a.message}),a.success&&p.jsxs("div",{className:"flex gap-4 mt-2 text-xs",children:[p.jsxs("span",{className:"text-emerald",children:[a.imported," imported"]}),p.jsxs("span",{className:"text-muted-foreground",children:[a.skipped," skipped (duplicates)"]})]})]})]})}),t&&p.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[p.jsx(WF,{className:"w-4 h-4 text-emerald"}),p.jsxs("span",{children:["Linked to ORCID: ",t]})]})]})]})}const Qv=Hre,Eie=Wre,d6e=Gre,Tie=M.forwardRef(({className:t,...e},n)=>p.jsx(IU,{ref:n,className:kt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));Tie.displayName=IU.displayName;const Sp=M.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(d6e,{children:[p.jsx(Tie,{}),p.jsxs(kU,{ref:r,className:kt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,p.jsxs(LU,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[p.jsx(xo,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Sp.displayName=kU.displayName;const Ep=({className:t,...e})=>p.jsx("div",{className:kt("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Ep.displayName="DialogHeader";const Aie=({className:t,...e})=>p.jsx("div",{className:kt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Aie.displayName="DialogFooter";const Tp=M.forwardRef(({className:t,...e},n)=>p.jsx(DU,{ref:n,className:kt("text-lg font-semibold leading-none tracking-tight",t),...e}));Tp.displayName=DU.displayName;const f6e=M.forwardRef(({className:t,...e},n)=>p.jsx(jU,{ref:n,className:kt("text-sm text-muted-foreground",t),...e}));f6e.displayName=jU.displayName;var Mie=["PageUp","PageDown"],Pie=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Cie={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Cy="Slider",[rj,h6e,p6e]=cw(Cy),[Rie]=cs(Cy,[p6e]),[m6e,aM]=Rie(Cy),Oie=M.forwardRef((t,e)=>{const{name:n,min:r=0,max:i=100,step:s=1,orientation:a="horizontal",disabled:o=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:u,onValueChange:d=()=>{},onValueCommit:h=()=>{},inverted:m=!1,form:b,...x}=t,v=M.useRef(new Set),_=M.useRef(0),T=a==="horizontal"?g6e:v6e,[A=[],P]=bl({prop:u,defaultProp:c,onChange:B=>{[...v.current][_.current]?.focus(),d(B)}}),R=M.useRef(A);function N(B){const H=_6e(A,B);j(B,H)}function L(B){j(B,_.current)}function I(){const B=R.current[_.current];A[_.current]!==B&&h(A)}function j(B,H,{commit:J}={commit:!1}){const G=A6e(s),W=M6e(Math.round((B-r)/s)*s+r,G),K=Zx(W,[r,i]);P((te=[])=>{const z=b6e(te,K,H);if(T6e(z,l*s)){_.current=z.indexOf(K);const V=String(z)!==String(te);return V&&J&&h(z),V?z:te}else return te})}return p.jsx(m6e,{scope:t.__scopeSlider,name:n,disabled:o,min:r,max:i,valueIndexToChangeRef:_,thumbs:v.current,values:A,orientation:a,form:b,children:p.jsx(rj.Provider,{scope:t.__scopeSlider,children:p.jsx(rj.Slot,{scope:t.__scopeSlider,children:p.jsx(T,{"aria-disabled":o,"data-disabled":o?"":void 0,...x,ref:e,onPointerDown:Je(x.onPointerDown,()=>{o||(R.current=A)}),min:r,max:i,inverted:m,onSlideStart:o?void 0:N,onSlideMove:o?void 0:L,onSlideEnd:o?void 0:I,onHomeKeyDown:()=>!o&&j(r,0,{commit:!0}),onEndKeyDown:()=>!o&&j(i,A.length-1,{commit:!0}),onStepKeyDown:({event:B,direction:H})=>{if(!o){const W=Mie.includes(B.key)||B.shiftKey&&Pie.includes(B.key)?10:1,K=_.current,te=A[K],z=s*W*H;j(te+z,K,{commit:!0})}}})})})})});Oie.displayName=Cy;var[Nie,Iie]=Rie(Cy,{startEdge:"left",endEdge:"right",size:"width",direction:1}),g6e=M.forwardRef((t,e)=>{const{min:n,max:r,dir:i,inverted:s,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=t,[d,h]=M.useState(null),m=tn(e,T=>h(T)),b=M.useRef(void 0),x=dy(i),v=x==="ltr",_=v&&!s||!v&&s;function E(T){const A=b.current||d.getBoundingClientRect(),P=[0,A.width],N=UU(P,_?[n,r]:[r,n]);return b.current=A,N(T-A.left)}return p.jsx(Nie,{scope:t.__scopeSlider,startEdge:_?"left":"right",endEdge:_?"right":"left",direction:_?1:-1,size:"width",children:p.jsx(kie,{dir:x,"data-orientation":"horizontal",...u,ref:m,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:T=>{const A=E(T.clientX);a?.(A)},onSlideMove:T=>{const A=E(T.clientX);o?.(A)},onSlideEnd:()=>{b.current=void 0,l?.()},onStepKeyDown:T=>{const P=Cie[_?"from-left":"from-right"].includes(T.key);c?.({event:T,direction:P?-1:1})}})})}),v6e=M.forwardRef((t,e)=>{const{min:n,max:r,inverted:i,onSlideStart:s,onSlideMove:a,onSlideEnd:o,onStepKeyDown:l,...c}=t,u=M.useRef(null),d=tn(e,u),h=M.useRef(void 0),m=!i;function b(x){const v=h.current||u.current.getBoundingClientRect(),_=[0,v.height],T=UU(_,m?[r,n]:[n,r]);return h.current=v,T(x-v.top)}return p.jsx(Nie,{scope:t.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:p.jsx(kie,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:x=>{const v=b(x.clientY);s?.(v)},onSlideMove:x=>{const v=b(x.clientY);a?.(v)},onSlideEnd:()=>{h.current=void 0,o?.()},onStepKeyDown:x=>{const _=Cie[m?"from-bottom":"from-top"].includes(x.key);l?.({event:x,direction:_?-1:1})}})})}),kie=M.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:a,onEndKeyDown:o,onStepKeyDown:l,...c}=t,u=aM(Cy,n);return p.jsx(Pt.span,{...c,ref:e,onKeyDown:Je(t.onKeyDown,d=>{d.key==="Home"?(a(d),d.preventDefault()):d.key==="End"?(o(d),d.preventDefault()):Mie.concat(Pie).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:Je(t.onPointerDown,d=>{const h=d.target;h.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(h)?h.focus():r(d)}),onPointerMove:Je(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&i(d)}),onPointerUp:Je(t.onPointerUp,d=>{const h=d.target;h.hasPointerCapture(d.pointerId)&&(h.releasePointerCapture(d.pointerId),s(d))})})}),Die="SliderTrack",jie=M.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=aM(Die,n);return p.jsx(Pt.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:e})});jie.displayName=Die;var ij="SliderRange",Lie=M.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=aM(ij,n),s=Iie(ij,n),a=M.useRef(null),o=tn(e,a),l=i.values.length,c=i.values.map(h=>Bie(h,i.min,i.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return p.jsx(Pt.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:o,style:{...t.style,[s.startEdge]:u+"%",[s.endEdge]:d+"%"}})});Lie.displayName=ij;var sj="SliderThumb",Uie=M.forwardRef((t,e)=>{const n=h6e(t.__scopeSlider),[r,i]=M.useState(null),s=tn(e,o=>i(o)),a=M.useMemo(()=>r?n().findIndex(o=>o.ref.current===r):-1,[n,r]);return p.jsx(y6e,{...t,ref:s,index:a})}),y6e=M.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:i,...s}=t,a=aM(sj,n),o=Iie(sj,n),[l,c]=M.useState(null),u=tn(e,E=>c(E)),d=l?a.form||!!l.closest("form"):!0,h=Cj(l),m=a.values[r],b=m===void 0?0:Bie(m,a.min,a.max),x=w6e(r,a.values.length),v=h?.[o.size],_=v?S6e(v,b,o.direction):0;return M.useEffect(()=>{if(l)return a.thumbs.add(l),()=>{a.thumbs.delete(l)}},[l,a.thumbs]),p.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${b}% + ${_}px)`},children:[p.jsx(rj.ItemSlot,{scope:t.__scopeSlider,children:p.jsx(Pt.span,{role:"slider","aria-label":t["aria-label"]||x,"aria-valuemin":a.min,"aria-valuenow":m,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...s,ref:u,style:m===void 0?{display:"none"}:t.style,onFocus:Je(t.onFocus,()=>{a.valueIndexToChangeRef.current=r})})}),d&&p.jsx(Fie,{name:i??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:m},r)]})});Uie.displayName=sj;var x6e="RadioBubbleInput",Fie=M.forwardRef(({__scopeSlider:t,value:e,...n},r)=>{const i=M.useRef(null),s=tn(i,r),a=PU(e);return M.useEffect(()=>{const o=i.current;if(!o)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==e&&u){const d=new Event("input",{bubbles:!0});u.call(o,e),o.dispatchEvent(d)}},[a,e]),p.jsx(Pt.input,{style:{display:"none"},...n,ref:s,defaultValue:e})});Fie.displayName=x6e;function b6e(t=[],e,n){const r=[...t];return r[n]=e,r.sort((i,s)=>i-s)}function Bie(t,e,n){const s=100/(n-e)*(t-e);return Zx(s,[0,100])}function w6e(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function _6e(t,e){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-e)),r=Math.min(...n);return n.indexOf(r)}function S6e(t,e,n){const r=t/2,s=UU([0,50],[0,r]);return(r-s(e)*n)*n}function E6e(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function T6e(t,e){if(e>0){const n=E6e(t);return Math.min(...n)>=e}return!0}function UU(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function A6e(t){return(String(t).split(".")[1]||"").length}function M6e(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var zie=Oie,P6e=jie,C6e=Lie,R6e=Uie;const aj=M.forwardRef(({className:t,...e},n)=>p.jsxs(zie,{ref:n,className:kt("relative flex w-full touch-none select-none items-center",t),...e,children:[p.jsx(P6e,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:p.jsx(C6e,{className:"absolute h-full bg-primary"})}),p.jsx(R6e,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));aj.displayName=zie.displayName;function O6e(){const[t,e]=M.useState([]),[n,r]=M.useState(!1),[i,s]=M.useState(0),{user:a}=qr(),o=M.useCallback(async(d,h=0,m=20)=>{if(a){r(!0);try{let b=ot.from("researcher_publications").select("*",{count:"exact"}).eq("user_id",a.id);d.query&&d.query.trim()&&(b=b.or(`title.ilike.%${d.query}%,journal.ilike.%${d.query}%`)),d.yearFrom&&(b=b.gte("year",d.yearFrom)),d.yearTo&&(b=b.lte("year",d.yearTo)),d.quartile&&(b=b.eq("quartile",d.quartile)),d.minCitations!==void 0&&(b=b.gte("citations",d.minCitations)),d.maxCitations!==void 0&&(b=b.lte("citations",d.maxCitations)),d.journal&&(b=b.ilike("journal",`%${d.journal}%`)),b=b.order("year",{ascending:!1}).order("citations",{ascending:!1}).range(h*m,(h+1)*m-1);const{data:x,error:v,count:_}=await b;v?(console.error("Search error:",v),e([]),s(0)):(e(x||[]),s(_||0))}catch(b){console.error("Search error:",b),e([]),s(0)}finally{r(!1)}}},[a]),l=M.useCallback(async()=>{if(!a)return;r(!0);const{data:d,error:h,count:m}=await ot.from("researcher_publications").select("*",{count:"exact"}).eq("user_id",a.id).order("year",{ascending:!1}).limit(100);h?console.error("Error fetching publications:",h):(e(d||[]),s(m||0)),r(!1)},[a]),c=M.useCallback(async()=>{if(!a)return[];const{data:d,error:h}=await ot.from("researcher_publications").select("journal").eq("user_id",a.id).not("journal","is",null);return h?(console.error("Error fetching journals:",h),[]):[...new Set(d?.map(b=>b.journal).filter(Boolean))].sort()},[a]),u=M.useCallback(async()=>{if(!a)return{min:2e3,max:new Date().getFullYear()};const{data:d,error:h}=await ot.from("researcher_publications").select("year").eq("user_id",a.id).not("year","is",null).order("year",{ascending:!0});if(h||!d?.length)return{min:2e3,max:new Date().getFullYear()};const m=d.map(b=>b.year).filter(Boolean);return{min:Math.min(...m),max:Math.max(...m)}},[a]);return{results:t,isSearching:n,totalCount:i,search:o,getAllPublications:l,getDistinctJournals:c,getYearRange:u}}const N6e={Q1:"bg-emerald-500/20 text-emerald-500 border-emerald-500/30",Q2:"bg-primary/20 text-primary border-primary/30",Q3:"bg-secondary/20 text-secondary border-secondary/30",Q4:"bg-muted text-muted-foreground border-border"};function $ie(){const{results:t,isSearching:e,totalCount:n,search:r,getAllPublications:i,getDistinctJournals:s,getYearRange:a}=O6e(),[o,l]=M.useState({query:""}),[c,u]=M.useState(!1),[d,h]=M.useState([]),[m,b]=M.useState({min:2e3,max:new Date().getFullYear()}),[x,v]=M.useState([2e3,new Date().getFullYear()]),[_,E]=M.useState([0,1e3]);M.useEffect(()=>{(async()=>{await i();const N=await s();h(N);const L=await a();b(L),v([L.min,L.max])})()},[]);const T=()=>{const R={query:o.query,yearFrom:x[0],yearTo:x[1],quartile:o.quartile,minCitations:_[0],maxCitations:_[1]===1e3?void 0:_[1],journal:o.journal};r(R)},A=()=>{l({query:""}),v([m.min,m.max]),E([0,1e3]),i()},P=[o.quartile,o.journal,x[0]!==m.min||x[1]!==m.max,_[0]>0||_[1]<1e3].filter(Boolean).length;return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("div",{className:"relative flex-1",children:[p.jsx(ap,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),p.jsx(sr,{placeholder:"Search publications by title, journal...",value:o.query,onChange:R=>l({...o,query:R.target.value}),onKeyDown:R=>R.key==="Enter"&&T(),className:"pl-10"})]}),p.jsx(ut,{onClick:T,disabled:e,children:e?p.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):"Search"}),p.jsxs(Qv,{open:c,onOpenChange:u,children:[p.jsx(Eie,{asChild:!0,children:p.jsxs(ut,{variant:"outline",className:"relative",children:[p.jsx(E9,{className:"w-4 h-4 mr-2"}),"Filters",P>0&&p.jsx($i,{className:"absolute -top-2 -right-2 h-5 min-w-5 p-0 flex items-center justify-center",children:P})]})}),p.jsxs(Sp,{children:[p.jsx(Ep,{children:p.jsx(Tp,{children:"Filter Publications"})}),p.jsxs("div",{className:"space-y-6 py-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Mi,{children:"Journal Quartile"}),p.jsxs(bp,{value:o.quartile||"all",onValueChange:R=>l({...o,quartile:R==="all"?void 0:R}),children:[p.jsx(af,{children:p.jsx(wp,{placeholder:"Select quartile"})}),p.jsxs(of,{children:[p.jsx(Tr,{value:"all",children:"All Quartiles"}),p.jsx(Tr,{value:"Q1",children:"Q1 - Top 25%"}),p.jsx(Tr,{value:"Q2",children:"Q2 - Top 50%"}),p.jsx(Tr,{value:"Q3",children:"Q3 - Top 75%"}),p.jsx(Tr,{value:"Q4",children:"Q4 - Bottom 25%"})]})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Mi,{children:"Journal"}),p.jsxs(bp,{value:o.journal||"all",onValueChange:R=>l({...o,journal:R==="all"?void 0:R}),children:[p.jsx(af,{children:p.jsx(wp,{placeholder:"Select journal"})}),p.jsxs(of,{children:[p.jsx(Tr,{value:"all",children:"All Journals"}),d.map(R=>p.jsx(Tr,{value:R,children:R},R))]})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs(Mi,{children:["Publication Year: ",x[0]," - ",x[1]]}),p.jsx(aj,{min:m.min,max:m.max,step:1,value:x,onValueChange:R=>v(R),className:"py-2"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs(Mi,{children:["Citations: ",_[0]," - ",_[1]===1e3?"1000+":_[1]]}),p.jsx(aj,{min:0,max:1e3,step:10,value:_,onValueChange:R=>E(R),className:"py-2"})]}),p.jsxs("div",{className:"flex gap-2 pt-4",children:[p.jsx(ut,{variant:"outline",className:"flex-1",onClick:A,children:"Clear All"}),p.jsx(ut,{className:"flex-1",onClick:()=>{T(),u(!1)},children:"Apply Filters"})]})]})]})]})]}),p.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[p.jsxs("span",{children:[n," publication",n!==1?"s":""," found"]}),P>0&&p.jsxs(ut,{variant:"ghost",size:"sm",onClick:A,children:[p.jsx(xo,{className:"w-3 h-3 mr-1"}),"Clear filters"]})]}),p.jsx(gl,{className:"h-[500px] pr-4",children:p.jsxs("div",{className:"space-y-3",children:[t.map((R,N)=>p.jsx(at.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:N*.03},className:"glass-panel p-4 hover:border-primary/30 transition-all",children:p.jsxs("div",{className:"flex items-start justify-between gap-4",children:[p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[p.jsx(yo,{className:"w-4 h-4 text-primary flex-shrink-0"}),p.jsx("h4",{className:"font-medium text-foreground line-clamp-1",children:R.title})]}),p.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[R.journal&&p.jsxs(p.Fragment,{children:[p.jsx(Oi,{className:"w-3 h-3"}),p.jsx("span",{className:"line-clamp-1",children:R.journal})]}),R.year&&p.jsxs("span",{children:[" ",R.year]})]}),p.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[R.quartile&&p.jsx($i,{variant:"outline",className:N6e[R.quartile]||"",children:R.quartile}),p.jsxs($i,{variant:"secondary",children:[R.citations||0," citations"]}),R.co_authors&&R.co_authors.length>0&&p.jsxs($i,{variant:"outline",className:"text-muted-foreground",children:[R.co_authors.length," co-author",R.co_authors.length>1?"s":""]})]})]}),R.doi&&p.jsx(ut,{variant:"ghost",size:"icon",className:"flex-shrink-0",onClick:()=>window.open(`https://doi.org/${R.doi}`,"_blank"),children:p.jsx(Dx,{className:"w-4 h-4"})})]})},R.id)),t.length===0&&!e&&p.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-muted-foreground",children:[p.jsx(ap,{className:"w-12 h-12 mb-4 opacity-50"}),p.jsx("p",{className:"text-lg font-medium",children:"No publications found"}),p.jsx("p",{className:"text-sm",children:"Try adjusting your search or filters"})]})]})})]})}var oM="Switch",[I6e]=cs(oM),[k6e,D6e]=I6e(oM),Vie=M.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:a,disabled:o,value:l="on",onCheckedChange:c,form:u,...d}=t,[h,m]=M.useState(null),b=tn(e,T=>m(T)),x=M.useRef(!1),v=h?u||!!h.closest("form"):!0,[_,E]=bl({prop:i,defaultProp:s??!1,onChange:c,caller:oM});return p.jsxs(k6e,{scope:n,checked:_,disabled:o,children:[p.jsx(Pt.button,{type:"button",role:"switch","aria-checked":_,"aria-required":a,"data-state":qie(_),"data-disabled":o?"":void 0,disabled:o,value:l,...d,ref:b,onClick:Je(t.onClick,T=>{E(A=>!A),v&&(x.current=T.isPropagationStopped(),x.current||T.stopPropagation())})}),v&&p.jsx(Gie,{control:h,bubbles:!x.current,name:r,value:l,checked:_,required:a,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});Vie.displayName=oM;var Hie="SwitchThumb",Wie=M.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=D6e(Hie,n);return p.jsx(Pt.span,{"data-state":qie(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});Wie.displayName=Hie;var j6e="SwitchBubbleInput",Gie=M.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...i},s)=>{const a=M.useRef(null),o=tn(a,s),l=PU(n),c=Cj(e);return M.useEffect(()=>{const u=a.current;if(!u)return;const d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&m){const b=new Event("click",{bubbles:r});m.call(u,n),u.dispatchEvent(b)}},[l,n,r]),p.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:o,style:{...i.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Gie.displayName=j6e;function qie(t){return t?"checked":"unchecked"}var Kie=Vie,L6e=Wie;const Xie=M.forwardRef(({className:t,...e},n)=>p.jsx(Kie,{className:kt("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...e,ref:n,children:p.jsx(L6e,{className:kt("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Xie.displayName=Kie.displayName;var HN="rovingFocusGroup.onEntryFocus",U6e={bubbles:!1,cancelable:!0},Kw="RovingFocusGroup",[oj,Yie,F6e]=cw(Kw),[B6e,lM]=cs(Kw,[F6e]),[z6e,$6e]=B6e(Kw),Jie=M.forwardRef((t,e)=>p.jsx(oj.Provider,{scope:t.__scopeRovingFocusGroup,children:p.jsx(oj.Slot,{scope:t.__scopeRovingFocusGroup,children:p.jsx(V6e,{...t,ref:e})})}));Jie.displayName=Kw;var V6e=M.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,h=M.useRef(null),m=tn(e,h),b=dy(s),[x,v]=bl({prop:a,defaultProp:o??null,onChange:l,caller:Kw}),[_,E]=M.useState(!1),T=Wr(c),A=Yie(n),P=M.useRef(!1),[R,N]=M.useState(0);return M.useEffect(()=>{const L=h.current;if(L)return L.addEventListener(HN,T),()=>L.removeEventListener(HN,T)},[T]),p.jsx(z6e,{scope:n,orientation:r,dir:b,loop:i,currentTabStopId:x,onItemFocus:M.useCallback(L=>v(L),[v]),onItemShiftTab:M.useCallback(()=>E(!0),[]),onFocusableItemAdd:M.useCallback(()=>N(L=>L+1),[]),onFocusableItemRemove:M.useCallback(()=>N(L=>L-1),[]),children:p.jsx(Pt.div,{tabIndex:_||R===0?-1:0,"data-orientation":r,...d,ref:m,style:{outline:"none",...t.style},onMouseDown:Je(t.onMouseDown,()=>{P.current=!0}),onFocus:Je(t.onFocus,L=>{const I=!P.current;if(L.target===L.currentTarget&&I&&!_){const j=new CustomEvent(HN,U6e);if(L.currentTarget.dispatchEvent(j),!j.defaultPrevented){const B=A().filter(K=>K.focusable),H=B.find(K=>K.active),J=B.find(K=>K.id===x),W=[H,J,...B].filter(Boolean).map(K=>K.ref.current);ese(W,u)}}P.current=!1}),onBlur:Je(t.onBlur,()=>E(!1))})})}),Qie="RovingFocusGroupItem",Zie=M.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:a,...o}=t,l=go(),c=s||l,u=$6e(Qie,n),d=u.currentTabStopId===c,h=Yie(n),{onFocusableItemAdd:m,onFocusableItemRemove:b,currentTabStopId:x}=u;return M.useEffect(()=>{if(r)return m(),()=>b()},[r,m,b]),p.jsx(oj.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:p.jsx(Pt.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:Je(t.onMouseDown,v=>{r?u.onItemFocus(c):v.preventDefault()}),onFocus:Je(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:Je(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const _=G6e(v,u.orientation,u.dir);if(_!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let T=h().filter(A=>A.focusable).map(A=>A.ref.current);if(_==="last")T.reverse();else if(_==="prev"||_==="next"){_==="prev"&&T.reverse();const A=T.indexOf(v.currentTarget);T=u.loop?q6e(T,A+1):T.slice(A+1)}setTimeout(()=>ese(T))}}),children:typeof a=="function"?a({isCurrentTabStop:d,hasTabStop:x!=null}):a})})});Zie.displayName=Qie;var H6e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function W6e(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function G6e(t,e,n){const r=W6e(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return H6e[r]}function ese(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function q6e(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var tse=Jie,nse=Zie,cM="Tabs",[K6e]=cs(cM,[lM]),rse=lM(),[X6e,FU]=K6e(cM),ise=M.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:a="horizontal",dir:o,activationMode:l="automatic",...c}=t,u=dy(o),[d,h]=bl({prop:r,onChange:i,defaultProp:s??"",caller:cM});return p.jsx(X6e,{scope:n,baseId:go(),value:d,onValueChange:h,orientation:a,dir:u,activationMode:l,children:p.jsx(Pt.div,{dir:u,"data-orientation":a,...c,ref:e})})});ise.displayName=cM;var sse="TabsList",ase=M.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=FU(sse,n),a=rse(n);return p.jsx(tse,{asChild:!0,...a,orientation:s.orientation,dir:s.dir,loop:r,children:p.jsx(Pt.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});ase.displayName=sse;var ose="TabsTrigger",lse=M.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,a=FU(ose,n),o=rse(n),l=dse(a.baseId,r),c=fse(a.baseId,r),u=r===a.value;return p.jsx(nse,{asChild:!0,...o,focusable:!i,active:u,children:p.jsx(Pt.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:e,onMouseDown:Je(t.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?a.onValueChange(r):d.preventDefault()}),onKeyDown:Je(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&a.onValueChange(r)}),onFocus:Je(t.onFocus,()=>{const d=a.activationMode!=="manual";!u&&!i&&d&&a.onValueChange(r)})})})});lse.displayName=ose;var cse="TabsContent",use=M.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...a}=t,o=FU(cse,n),l=dse(o.baseId,r),c=fse(o.baseId,r),u=r===o.value,d=M.useRef(u);return M.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),p.jsx(Wi,{present:i||u,children:({present:h})=>p.jsx(Pt.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:c,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:h&&s})})});use.displayName=cse;function dse(t,e){return`${t}-trigger-${e}`}function fse(t,e){return`${t}-content-${e}`}var Y6e=ise,hse=ase,pse=lse,mse=use;const gse=Y6e,BU=M.forwardRef(({className:t,...e},n)=>p.jsx(hse,{ref:n,className:kt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));BU.displayName=hse.displayName;const sv=M.forwardRef(({className:t,...e},n)=>p.jsx(pse,{ref:n,className:kt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t),...e}));sv.displayName=pse.displayName;const av=M.forwardRef(({className:t,...e},n)=>p.jsx(mse,{ref:n,className:kt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));av.displayName=mse.displayName;function vse(){const[t,e]=M.useState([]),[n,r]=M.useState([]),[i,s]=M.useState(!0),{user:a}=qr(),{createNotification:o}=vY(),l=M.useCallback(async()=>{if(!a){e([]),r([]),s(!1);return}s(!0);const{data:_,error:E}=await ot.from("research_teams").select("*").order("created_at",{ascending:!1});E?console.error("Error fetching teams:",E):e(_||[]);const{data:T}=await ot.from("team_members").select("team_id").eq("user_id",a.id),A=T?.map(N=>N.team_id)||[],P=(_||[]).filter(N=>N.owner_id===a.id),R=(_||[]).filter(N=>A.includes(N.id));r([...new Map([...P,...R].map(N=>[N.id,N])).values()]),s(!1)},[a]);return M.useEffect(()=>{l()},[l]),{teams:t,myTeams:n,isLoading:i,createTeam:async(_,E,T)=>{if(!a)return{error:new Error("Not authenticated")};const{data:A,error:P}=await ot.from("research_teams").insert({name:_,description:E,owner_id:a.id,is_public:T}).select().single();return P?{error:P,data:null}:(await ot.from("team_members").insert({team_id:A.id,user_id:a.id,role:"owner"}),await l(),{error:null,data:A})},updateTeam:async(_,E)=>{const{error:T}=await ot.from("research_teams").update(E).eq("id",_);return T||await l(),{error:T}},deleteTeam:async _=>{const{error:E}=await ot.from("research_teams").delete().eq("id",_);return E||await l(),{error:E}},getTeamMembers:async _=>{const{data:E,error:T}=await ot.from("team_members").select("*").eq("team_id",_);if(T)return console.error("Error fetching team members:",T),[];const A=E.map(N=>N.user_id),{data:P}=await ot.from("profiles").select("user_id, display_name, email, institution").in("user_id",A),R=new Map(P?.map(N=>[N.user_id,N]));return E.map(N=>({...N,role:N.role,profile:R.get(N.user_id)}))},inviteToTeam:async(_,E,T)=>{if(!a)return{error:new Error("Not authenticated")};const{error:A}=await ot.from("collaboration_requests").insert({from_user_id:a.id,to_user_id:E,team_id:_,message:T,status:"pending"});if(A)return{error:A};const P=t.find(R=>R.id===_);return await o(E,"team_invite","Team Invitation",`You've been invited to join the research team "${P?.name||"a team"}"`,{team_id:_,from_user_id:a.id}),{error:null}},respondToRequest:async(_,E)=>{if(!a)return{error:new Error("Not authenticated")};const{data:T,error:A}=await ot.from("collaboration_requests").select("*").eq("id",_).single();if(A||!T)return{error:A||new Error("Request not found")};const{error:P}=await ot.from("collaboration_requests").update({status:E?"accepted":"declined"}).eq("id",_);return P?{error:P}:(E&&T.team_id&&(await ot.from("team_members").insert({team_id:T.team_id,user_id:a.id,role:"member"}),await o(T.from_user_id,"team_joined","Invitation Accepted","Your team invitation was accepted!",{team_id:T.team_id}),await l()),{error:null})},getPendingRequests:async()=>{if(!a)return[];const{data:_,error:E}=await ot.from("collaboration_requests").select("*").eq("to_user_id",a.id).eq("status","pending").order("created_at",{ascending:!1});return E?(console.error("Error fetching requests:",E),[]):_.map(T=>({...T,status:T.status}))},leaveTeam:async _=>{if(!a)return{error:new Error("Not authenticated")};const{error:E}=await ot.from("team_members").delete().eq("team_id",_).eq("user_id",a.id);return E||await l(),{error:E}},refetch:l}}function J6e({team:t,onClose:e}){const[n,r]=M.useState([]),[i,s]=M.useState(!0),[a,o]=M.useState(""),[l,c]=M.useState(""),{getTeamMembers:u,inviteToTeam:d,leaveTeam:h,deleteTeam:m}=vse(),{user:b}=qr();M.useEffect(()=>{(async()=>{const P=await u(t.id);r(P),s(!1)})()},[t.id]);const x=t.owner_id===b?.id,v=async()=>{if(!a)return;const{data:A}=await ot.from("profiles").select("user_id").eq("email",a).maybeSingle();if(!A){alert("User not found");return}const{error:P}=await d(t.id,A.user_id,l);P?alert("Error sending invitation"):(o(""),c(""),alert("Invitation sent!"))},_=async()=>{confirm("Are you sure you want to leave this team?")&&(await h(t.id),e())},E=async()=>{confirm("Are you sure you want to delete this team? This action cannot be undone.")&&(await m(t.id),e())},T=A=>{switch(A){case"owner":return p.jsx(_9,{className:"w-3 h-3 text-secondary"});case"admin":return p.jsx($d,{className:"w-3 h-3 text-primary"});default:return null}};return p.jsxs(Sp,{className:"max-w-lg",children:[p.jsx(Ep,{children:p.jsxs(Tp,{className:"flex items-center gap-2",children:[t.is_public?p.jsx(xu,{className:"w-4 h-4"}):p.jsx(mj,{className:"w-4 h-4"}),t.name]})}),p.jsxs(gse,{defaultValue:"members",className:"mt-4",children:[p.jsxs(BU,{className:"grid grid-cols-2",children:[p.jsx(sv,{value:"members",children:"Members"}),x&&p.jsx(sv,{value:"invite",children:"Invite"})]}),p.jsxs(av,{value:"members",className:"space-y-4",children:[t.description&&p.jsx("p",{className:"text-sm text-muted-foreground",children:t.description}),p.jsx(gl,{className:"h-60",children:i?p.jsx("div",{className:"flex justify-center py-8",children:p.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):p.jsx("div",{className:"space-y-2",children:n.map(A=>p.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-muted/50",children:[p.jsx(bw,{className:"h-8 w-8",children:p.jsx(ww,{className:"text-xs",children:(A.profile?.display_name||A.profile?.email||"?")[0].toUpperCase()})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-center gap-1.5",children:[p.jsx("span",{className:"text-sm font-medium truncate",children:A.profile?.display_name||A.profile?.email}),T(A.role)]}),p.jsx("p",{className:"text-xs text-muted-foreground truncate",children:A.profile?.institution||"No institution"})]}),p.jsx($i,{variant:"outline",className:"text-xs capitalize",children:A.role})]},A.id))})}),p.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[!x&&p.jsxs(ut,{variant:"outline",className:"flex-1",onClick:_,children:[p.jsx(A9,{className:"w-4 h-4 mr-2"}),"Leave Team"]}),x&&p.jsxs(ut,{variant:"destructive",className:"flex-1",onClick:E,children:[p.jsx(op,{className:"w-4 h-4 mr-2"}),"Delete Team"]})]})]}),x&&p.jsxs(av,{value:"invite",className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Mi,{children:"Researcher Email"}),p.jsx(sr,{placeholder:"researcher@university.edu",value:a,onChange:A=>o(A.target.value)})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Mi,{children:"Personal Message (optional)"}),p.jsx(qw,{placeholder:"I'd like to invite you to collaborate on...",value:l,onChange:A=>c(A.target.value),rows:3})]}),p.jsxs(ut,{className:"w-full",onClick:v,children:[p.jsx(dw,{className:"w-4 h-4 mr-2"}),"Send Invitation"]})]})]})]})}function yse(){const{myTeams:t,teams:e,isLoading:n,createTeam:r,getPendingRequests:i,respondToRequest:s}=vse(),[a,o]=M.useState(!1),[l,c]=M.useState(null),[u,d]=M.useState([]),[h,m]=M.useState(""),[b,x]=M.useState(""),[v,_]=M.useState(!1);M.useEffect(()=>{(async()=>{const P=await i();d(P)})()},[]);const E=async()=>{if(!h)return;const{error:A}=await r(h,b,v);A||(m(""),x(""),_(!1),o(!1))},T=async(A,P)=>{await s(A,P),d(R=>R.filter(N=>N.id!==A))};return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Research Teams"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Collaborate with other researchers"})]}),p.jsxs(Qv,{open:a,onOpenChange:o,children:[p.jsx(Eie,{asChild:!0,children:p.jsxs(ut,{children:[p.jsx(vj,{className:"w-4 h-4 mr-2"}),"Create Team"]})}),p.jsxs(Sp,{children:[p.jsx(Ep,{children:p.jsx(Tp,{children:"Create Research Team"})}),p.jsxs("div",{className:"space-y-4 py-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Mi,{children:"Team Name"}),p.jsx(sr,{placeholder:"e.g., Climate Research Group",value:h,onChange:A=>m(A.target.value)})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Mi,{children:"Description"}),p.jsx(qw,{placeholder:"Describe the team's research focus...",value:b,onChange:A=>x(A.target.value),rows:3})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx(Mi,{children:"Public Team"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Anyone can discover this team"})]}),p.jsx(Xie,{checked:v,onCheckedChange:_})]}),p.jsx(ut,{className:"w-full",onClick:E,children:"Create Team"})]})]})]})]}),u.length>0&&p.jsxs("div",{className:"glass-panel p-4 border-secondary/30",children:[p.jsxs("h3",{className:"text-sm font-medium text-foreground mb-3 flex items-center gap-2",children:[p.jsx(dw,{className:"w-4 h-4 text-secondary"}),"Pending Invitations"]}),p.jsx("div",{className:"space-y-2",children:u.map(A=>p.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/50",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-medium",children:"Team invitation"}),A.message&&p.jsx("p",{className:"text-xs text-muted-foreground",children:A.message})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx(ut,{size:"sm",variant:"outline",onClick:()=>T(A.id,!1),children:"Decline"}),p.jsx(ut,{size:"sm",onClick:()=>T(A.id,!0),children:"Accept"})]})]},A.id))})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"My Teams"}),n?p.jsx("div",{className:"flex justify-center py-8",children:p.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):t.length===0?p.jsxs("div",{className:"glass-panel p-8 text-center",children:[p.jsx(pi,{className:"w-12 h-12 text-muted-foreground/50 mx-auto mb-3"}),p.jsx("p",{className:"text-muted-foreground",children:"You haven't joined any teams yet"}),p.jsx("p",{className:"text-sm text-muted-foreground/70",children:"Create a team or join an existing one"})]}):p.jsx("div",{className:"grid gap-3",children:p.jsx(cf,{children:t.map((A,P)=>p.jsx(at.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:P*.05},className:"glass-panel p-4 hover:border-primary/30 transition-all cursor-pointer",onClick:()=>c(A),children:p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"p-2 rounded-lg bg-primary/20",children:p.jsx(pi,{className:"w-5 h-5 text-primary"})}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("h4",{className:"font-medium text-foreground",children:A.name}),A.is_public?p.jsx(xu,{className:"w-3 h-3 text-muted-foreground"}):p.jsx(mj,{className:"w-3 h-3 text-muted-foreground"})]}),A.description&&p.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:A.description})]})]}),p.jsx(ut,{variant:"ghost",size:"icon",children:p.jsx(xj,{className:"w-4 h-4"})})]})},A.id))})})]}),e.filter(A=>A.is_public&&!t.find(P=>P.id===A.id)).length>0&&p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Discover Teams"}),p.jsx("div",{className:"grid gap-3",children:e.filter(A=>A.is_public&&!t.find(P=>P.id===A.id)).slice(0,5).map((A,P)=>p.jsx(at.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:P*.05},className:"glass-panel p-4",children:p.jsx("div",{className:"flex items-center justify-between",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(xu,{className:"w-4 h-4 text-muted-foreground"}),p.jsxs("div",{children:[p.jsx("h4",{className:"font-medium text-foreground",children:A.name}),A.description&&p.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:A.description})]})]})})},A.id))})]}),l&&p.jsx(Qv,{open:!!l,onOpenChange:()=>c(null),children:p.jsx(J6e,{team:l,onClose:()=>c(null)})})]})}async function Q6e(t){try{const e=await fetch(`https://api.crossref.org/works/${encodeURIComponent(t)}`);return e.ok?(await e.json()).message?.["is-referenced-by-count"]||0:(console.warn(`CrossRef API error for DOI ${t}: ${e.status}`),null)}catch(e){return console.error("Error fetching CrossRef citations:",e),null}}async function Z6e(t){try{let e;if(t.doi)e=`https://api.semanticscholar.org/graph/v1/paper/DOI:${encodeURIComponent(t.doi)}?fields=citationCount,paperId`;else{const i=`https://api.semanticscholar.org/graph/v1/paper/search?query=${encodeURIComponent(t.title)}&fields=citationCount,paperId,title,year&limit=1`,s=await fetch(i);if(!s.ok)return console.warn(`Semantic Scholar search error: ${s.status}`),null;const a=await s.json();if(!a.data||a.data.length===0)return null;const o=a.data[0];return{count:o.citationCount||0,paperId:o.paperId}}const n=await fetch(e);if(!n.ok)return console.warn(`Semantic Scholar API error: ${n.status}`),null;const r=await n.json();return{count:r.citationCount||0,paperId:r.paperId}}catch(e){return console.error("Error fetching Semantic Scholar citations:",e),null}}async function xse(t){const e=[];if(t.doi){const r=await Q6e(t.doi);r!==null&&e.push({source:"crossref",count:r,lastUpdated:new Date().toISOString(),doi:t.doi})}const n=await Z6e(t);return n!==null&&e.push({source:"semanticscholar",count:n.count,lastUpdated:new Date().toISOString(),paperId:n.paperId}),e.length===0?null:e.reduce((r,i)=>i.count>r.count?i:r)}async function e8e(t){const e=new Map,n=5;for(let r=0;r<t.length;r+=n){const s=t.slice(r,r+n).map(async a=>{await new Promise(l=>setTimeout(l,200*(r/n)));const o=await xse(a);if(o){const l=a.doi||a.title;e.set(l,o)}});await Promise.all(s)}return e}function t8e(){const[t,e]=M.useState([]),[n,r]=M.useState(!1),{user:i}=qr(),s=M.useCallback(async()=>{if(!i)return;r(!0);const{data:d,error:h}=await ot.from("researcher_publications").select("id, title, journal, year, citations").eq("user_id",i.id).order("citations",{ascending:!1});if(h){console.error("Error fetching publications:",h),r(!1);return}if(!d?.length){e([]),r(!1);return}const m=d.map(E=>E.id),{data:b,error:x}=await ot.from("citation_snapshots").select("*").in("publication_id",m).order("snapshot_date",{ascending:!0});x&&console.error("Error fetching snapshots:",x);const v=new Map;(b||[]).forEach(E=>{const T=v.get(E.publication_id)||[];v.set(E.publication_id,[...T,E])});const _=d.map(E=>{const T=v.get(E.id)||[],A=E.citations||0;let P=0,R="stable";if(T.length>=2){const N=T[0],L=T[T.length-1],I=N.citations,j=L.citations;I>0?P=(j-I)/I*100:j>0&&(P=100),R=P>5?"up":P<-5?"down":"stable"}else if(T.length===1){const N=T[0].citations;N>0?P=(A-N)/N*100:A>0&&(P=100),R=P>5?"up":P<-5?"down":"stable"}return{id:E.id,title:E.title,journal:E.journal,year:E.year,current_citations:A,snapshots:T,growth_rate:Math.round(P*10)/10,trend:R}});e(_),r(!1)},[i]),a=async(d,h)=>{const m=new Date().toISOString().split("T")[0],{error:b}=await ot.from("citation_snapshots").upsert({publication_id:d,citations:h,snapshot_date:m},{onConflict:"publication_id,snapshot_date"});return b?(console.error("Error recording snapshot:",b),{error:b}):{error:null}},o=async()=>{if(!i)return{error:new Error("Not authenticated")};const{data:d,error:h}=await ot.from("researcher_publications").select("id, citations").eq("user_id",i.id);if(h)return{error:h};const m=new Date().toISOString().split("T")[0],b=(d||[]).map(v=>({publication_id:v.id,citations:v.citations||0,snapshot_date:m}));if(b.length===0)return{error:null};const{error:x}=await ot.from("citation_snapshots").upsert(b,{onConflict:"publication_id,snapshot_date"});return x?(console.error("Error recording snapshots:",x),{error:x}):(await s(),{error:null})},l=async()=>{if(!i)return{error:new Error("Not authenticated"),updated:0};const{data:d,error:h}=await ot.from("researcher_publications").select("id, title, doi, year, co_authors, citations").eq("user_id",i.id);if(h)return{error:h,updated:0};if(!d||d.length===0)return{error:null,updated:0};const m=d.map(E=>({doi:E.doi||void 0,title:E.title,year:E.year||void 0})),b=await e8e(m),x=[],v=[],_=new Date().toISOString().split("T")[0];if(d.forEach(E=>{const T=E.doi||E.title,A=b.get(T);A&&A.count!==E.citations&&(x.push({id:E.id,citations:A.count}),v.push({publication_id:E.id,citations:A.count,snapshot_date:_}))}),x.length>0){for(const E of x)await ot.from("researcher_publications").update({citations:E.citations}).eq("id",E.id);await ot.from("citation_snapshots").upsert(v,{onConflict:"publication_id,snapshot_date"}),await s()}return{error:null,updated:x.length}},c=async d=>{if(!i)return{error:new Error("Not authenticated")};const{data:h,error:m}=await ot.from("researcher_publications").select("id, title, doi, year, citations").eq("id",d).eq("user_id",i.id).single();if(m||!h)return{error:m||new Error("Publication not found")};const b=await xse({doi:h.doi||void 0,title:h.title,year:h.year||void 0});if(!b)return{error:new Error("Could not fetch citation data from external APIs")};const{error:x}=await ot.from("researcher_publications").update({citations:b.count}).eq("id",d);if(x)return{error:x};const v=new Date().toISOString().split("T")[0];return await ot.from("citation_snapshots").upsert({publication_id:d,citations:b.count,snapshot_date:v},{onConflict:"publication_id,snapshot_date"}),await s(),{error:null,citationData:b}},u=M.useCallback(()=>{const d=t.reduce((v,_)=>v+_.current_citations,0),h=t.length>0?t.reduce((v,_)=>v+_.growth_rate,0)/t.length:0,m=t.filter(v=>v.trend==="up").length,b=t.filter(v=>v.trend==="down").length,x=t.filter(v=>v.trend==="stable").length;return{totalCitations:d,avgGrowth:Math.round(h*10)/10,trending:m,declining:b,stable:x,totalPublications:t.length}},[t]);return{publications:t,isLoading:n,fetchCitationHistory:s,recordSnapshot:a,recordAllSnapshots:o,updateCitationsFromAPIs:l,updateSinglePublication:c,getAggregateStats:u}}const n8e={up:Ps,down:gle,stable:fle},r8e={up:"text-emerald-500",down:"text-destructive",stable:"text-muted-foreground"};function i8e({publication:t}){const e=t.snapshots.map(n=>({date:TY(AY(n.snapshot_date),"MMM dd"),citations:n.citations}));return e.length>0&&e[e.length-1].citations!==t.current_citations&&e.push({date:"Now",citations:t.current_citations}),e.length<2?p.jsx("div",{className:"h-24 flex items-center justify-center text-muted-foreground text-sm",children:"Not enough data for chart"}):p.jsx(yl,{width:"100%",height:80,children:p.jsxs(Gw,{data:e,children:[p.jsx("defs",{children:p.jsxs("linearGradient",{id:`gradient-${t.id}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[p.jsx("stop",{offset:"0%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),p.jsx("stop",{offset:"100%",stopColor:"hsl(var(--primary))",stopOpacity:0})]})}),p.jsx(ls,{type:"monotone",dataKey:"citations",stroke:"hsl(var(--primary))",strokeWidth:2,fill:`url(#gradient-${t.id})`}),p.jsx(di,{contentStyle:{backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",borderRadius:"8px"},labelStyle:{color:"hsl(var(--foreground))"}})]})})}function bse(){const{publications:t,isLoading:e,fetchCitationHistory:n,recordAllSnapshots:r,updateCitationsFromAPIs:i,updateSinglePublication:s,getAggregateStats:a}=t8e(),[o,l]=M.useState(!1),[c,u]=M.useState(!1),[d,h]=M.useState(null),[m,b]=M.useState(null),{toast:x}=ga();M.useEffect(()=>{n()},[]);const v=async()=>{l(!0),await r(),l(!1)},_=async()=>{u(!0);const A=await i();u(!1),A.error?x({title:"Update Failed",description:A.error.message,variant:"destructive"}):x({title:"Citations Updated",description:`Successfully updated ${A.updated} publication${A.updated!==1?"s":""} from external APIs`})},E=async A=>{h(A);const P=await s(A);h(null),P.error?x({title:"Update Failed",description:P.error.message,variant:"destructive"}):x({title:"Citation Updated",description:`Updated to ${P.citationData?.count} citations from ${P.citationData?.source}`})},T=a();return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Citation Impact Tracker"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Monitor your research impact over time"})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs(ut,{onClick:_,disabled:c||t.length===0,variant:"default",children:[p.jsx(xle,{className:`w-4 h-4 mr-2 ${c?"animate-pulse":""}`}),c?"Updating...":"Auto-Update All"]}),p.jsxs(ut,{onClick:v,disabled:o,variant:"outline",children:[p.jsx(Xd,{className:`w-4 h-4 mr-2 ${o?"animate-bounce":""}`}),o?"Recording...":"Snapshot"]})]})]}),p.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[p.jsxs(at.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"glass-panel p-4",children:[p.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[p.jsx(yu,{className:"w-4 h-4"}),p.jsx("span",{className:"text-xs",children:"Total Citations"})]}),p.jsx("p",{className:"text-2xl font-bold text-foreground",children:T.totalCitations.toLocaleString()})]}),p.jsxs(at.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-panel p-4",children:[p.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[p.jsx(ov,{className:"w-4 h-4"}),p.jsx("span",{className:"text-xs",children:"Avg. Growth"})]}),p.jsxs("p",{className:`text-2xl font-bold ${T.avgGrowth>=0?"text-emerald-500":"text-destructive"}`,children:[T.avgGrowth>=0?"+":"",T.avgGrowth,"%"]})]}),p.jsxs(at.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"glass-panel p-4",children:[p.jsxs("div",{className:"flex items-center gap-2 text-emerald-500 mb-1",children:[p.jsx(Ps,{className:"w-4 h-4"}),p.jsx("span",{className:"text-xs",children:"Trending Up"})]}),p.jsx("p",{className:"text-2xl font-bold text-foreground",children:T.trending})]}),p.jsxs(at.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"glass-panel p-4",children:[p.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[p.jsx(px,{className:"w-4 h-4"}),p.jsx("span",{className:"text-xs",children:"Publications"})]}),p.jsx("p",{className:"text-2xl font-bold text-foreground",children:T.totalPublications})]})]}),p.jsxs("div",{className:"glass-panel p-4",children:[p.jsx("h3",{className:"font-medium text-foreground mb-4",children:"Publication Performance"}),e?p.jsx("div",{className:"flex justify-center py-12",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):t.length===0?p.jsxs("div",{className:"text-center py-12",children:[p.jsx(ov,{className:"w-12 h-12 text-muted-foreground/50 mx-auto mb-3"}),p.jsx("p",{className:"text-muted-foreground",children:"No publications to track"}),p.jsx("p",{className:"text-sm text-muted-foreground/70",children:"Import your publications to start tracking citation impact"})]}):p.jsx(gl,{className:"h-[400px] pr-4",children:p.jsx("div",{className:"space-y-4",children:t.map((A,P)=>{const R=n8e[A.trend],N=r8e[A.trend];return p.jsxs(at.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:P*.03},className:"p-4 rounded-lg bg-muted/30 hover:bg-muted/50 transition-colors",children:[p.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[p.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>b(m?.id===A.id?null:A),children:[p.jsx("h4",{className:"font-medium text-foreground line-clamp-1",children:A.title}),p.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[A.journal&&p.jsx("span",{className:"text-xs text-muted-foreground",children:A.journal}),A.year&&p.jsxs("span",{className:"text-xs text-muted-foreground",children:[" ",A.year]})]})]}),p.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[p.jsx(ut,{size:"sm",variant:"ghost",onClick:()=>E(A.id),disabled:d===A.id,className:"h-8 px-2",children:p.jsx(mx,{className:`w-3 h-3 ${d===A.id?"animate-spin":""}`})}),p.jsxs("div",{className:"text-right",children:[p.jsx("p",{className:"text-lg font-bold text-foreground",children:A.current_citations}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"citations"})]}),p.jsxs("div",{className:`flex items-center gap-1 ${N}`,children:[p.jsx(R,{className:"w-4 h-4"}),p.jsxs("span",{className:"text-sm font-medium",children:[A.growth_rate>=0?"+":"",A.growth_rate,"%"]})]})]})]}),m?.id===A.id&&p.jsxs(at.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 pt-4 border-t border-border",children:[p.jsx(i8e,{publication:A}),p.jsxs("div",{className:"flex items-center justify-between mt-2 text-xs text-muted-foreground",children:[p.jsxs("span",{children:[A.snapshots.length," data points"]}),A.snapshots.length>0&&p.jsxs("span",{children:["First recorded: ",TY(AY(A.snapshots[0].snapshot_date),"MMM dd, yyyy")]})]})]})]},A.id)})})})]}),p.jsxs("div",{className:"glass-panel p-4 border-primary/20",children:[p.jsx("h4",{className:"text-sm font-medium text-foreground mb-2",children:" Auto-Update Features"}),p.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[p.jsx("li",{children:' Click "Auto-Update All" to fetch latest citations from CrossRef and Semantic Scholar'}),p.jsx("li",{children:" Use the refresh icon on individual publications for targeted updates"}),p.jsx("li",{children:" Citations are automatically sourced from DOI (CrossRef) or title search (Semantic Scholar)"}),p.jsx("li",{children:" Snapshots are recorded automatically when citations are updated"})]})]})]})}function s8e({isOpen:t,onClose:e}){const{profile:n,updateProfile:r}=qr(),{toast:i}=ga(),[s,a]=M.useState(!1),[o,l]=M.useState(!1),[c,u]=M.useState("overview"),[d,h]=M.useState({display_name:"",institution:"",department:"",orcid_id:"",bio:""});M.useEffect(()=>{n&&h({display_name:n.display_name||"",institution:n.institution||"",department:n.department||"",orcid_id:n.orcid_id||"",bio:n.bio||""})},[n]);const m=async()=>{l(!0);const{error:_}=await r(d);l(!1),_?i({variant:"destructive",title:"Error",description:"Failed to update profile"}):(i({title:"Profile updated",description:"Your changes have been saved."}),a(!1))},b=()=>{window.location.reload()};if(!t||!n)return null;const x=n.display_name?.split(" ").map(_=>_[0]).join("").toUpperCase().slice(0,2)||"R",v=[{id:"overview",label:"Overview"},{id:"publications",label:"Publications"},{id:"search",label:"Search",icon:ap},{id:"teams",label:"Teams",icon:pi},{id:"citations",label:"Impact",icon:ov},{id:"collaborations",label:"Network"},{id:"orcid",label:"ORCID",icon:pj}];return p.jsxs(p.Fragment,{children:[p.jsx(at.div,{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),p.jsxs(at.div,{className:"fixed right-0 top-0 bottom-0 w-full max-w-3xl glass-panel z-50 overflow-y-auto",initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:100},children:[p.jsxs("div",{className:"sticky top-0 bg-background/95 backdrop-blur-sm border-b border-border p-6 z-10",children:[p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs(bw,{className:"h-16 w-16",children:[p.jsx(zT,{src:n.avatar_url||void 0}),p.jsx(ww,{className:"bg-gradient-to-br from-primary to-cyan text-primary-foreground text-xl",children:x})]}),p.jsxs("div",{children:[s?p.jsx(sr,{value:d.display_name,onChange:_=>h({...d,display_name:_.target.value}),className:"text-xl font-display font-bold mb-1"}):p.jsx("h2",{className:"text-xl font-display font-bold text-foreground",children:n.display_name||"Researcher"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:n.email})]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[s?p.jsxs(p.Fragment,{children:[p.jsx(ut,{variant:"ghost",onClick:()=>a(!1),children:"Cancel"}),p.jsxs(ut,{onClick:m,disabled:o,children:[o?p.jsx(bu,{className:"w-4 h-4 animate-spin"}):p.jsx(yj,{className:"w-4 h-4 mr-2"}),"Save"]})]}):p.jsxs(ut,{variant:"ghost",onClick:()=>a(!0),children:[p.jsx(gj,{className:"w-4 h-4 mr-2"}),"Edit"]}),p.jsx(ut,{variant:"ghost",size:"icon",onClick:e,children:p.jsx(xo,{className:"w-4 h-4"})})]})]}),p.jsx("div",{className:"flex gap-1 mt-6",children:v.map(_=>p.jsx("button",{onClick:()=>u(_.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${c===_.id?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted"}`,children:_.label},_.id))})]}),p.jsxs("div",{className:"p-6",children:[c==="overview"&&p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[p.jsx(x1,{icon:yu,label:"H-Index",value:n.h_index,trend:"+3 this year",color:"primary"}),p.jsx(x1,{icon:Ps,label:"Citations",value:n.total_citations.toLocaleString(),trend:"+128 this month",color:"secondary"}),p.jsx(x1,{icon:Oi,label:"Publications",value:n.total_publications,trend:"12 in Q1 journals",color:"cyan"}),p.jsx(x1,{icon:pi,label:"Co-Authors",value:"47",trend:"8 countries",color:"emerald"})]}),p.jsxs("div",{className:"glass-panel p-4 space-y-4",children:[p.jsxs("h3",{className:"font-semibold text-foreground flex items-center gap-2",children:[p.jsx(Kl,{className:"w-4 h-4"}),"Affiliation"]}),s?p.jsxs("div",{className:"space-y-3",children:[p.jsx(sr,{placeholder:"Institution",value:d.institution,onChange:_=>h({...d,institution:_.target.value})}),p.jsx(sr,{placeholder:"Department",value:d.department,onChange:_=>h({...d,department:_.target.value})}),p.jsx(sr,{placeholder:"ORCID ID",value:d.orcid_id,onChange:_=>h({...d,orcid_id:_.target.value})})]}):p.jsxs("div",{className:"space-y-2 text-sm",children:[p.jsx("p",{className:"text-foreground",children:n.institution||"Not specified"}),p.jsx("p",{className:"text-muted-foreground",children:n.department||"Department not specified"}),n.orcid_id&&p.jsxs("a",{href:`https://orcid.org/${n.orcid_id}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-primary hover:underline",children:["ORCID: ",n.orcid_id,p.jsx(Dx,{className:"w-3 h-3"})]})]})]}),p.jsxs("div",{className:"glass-panel p-4",children:[p.jsxs("h3",{className:"font-semibold text-foreground mb-4 flex items-center gap-2",children:[p.jsx(Ps,{className:"w-4 h-4"}),"H-Index Growth"]}),p.jsx(_ie,{})]}),p.jsxs("div",{className:"glass-panel p-4",children:[p.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Biography"}),s?p.jsx("textarea",{className:"w-full min-h-[100px] p-3 rounded-lg bg-muted border border-border text-foreground resize-none",placeholder:"Tell us about your research interests...",value:d.bio,onChange:_=>h({...d,bio:_.target.value})}):p.jsx("p",{className:"text-sm text-muted-foreground",children:n.bio||"No biography added yet."})]})]}),c==="publications"&&p.jsx(bie,{}),c==="search"&&p.jsx($ie,{}),c==="teams"&&p.jsx(yse,{}),c==="citations"&&p.jsx(bse,{}),c==="collaborations"&&p.jsx(wie,{}),c==="orcid"&&p.jsx(Sie,{currentOrcidId:n.orcid_id,onSyncComplete:b})]})]})]})}function x1({icon:t,label:e,value:n,trend:r,color:i}){const s={primary:"bg-primary/10 text-primary",secondary:"bg-secondary/10 text-secondary",cyan:"bg-cyan/10 text-cyan",emerald:"bg-emerald/10 text-emerald"};return p.jsxs("div",{className:"glass-panel p-4",children:[p.jsx("div",{className:`w-8 h-8 rounded-lg ${s[i]} flex items-center justify-center mb-3`,children:p.jsx(t,{className:"w-4 h-4"})}),p.jsx("p",{className:"text-2xl font-bold text-foreground",children:n}),p.jsx("p",{className:"text-sm text-muted-foreground",children:e}),p.jsx("p",{className:"text-xs text-emerald mt-1",children:r})]})}function a8e({isOpen:t,onClose:e}){const[n,r]=M.useState("pdf"),[i,s]=M.useState("analytics"),[a,o]=M.useState(!1),[l,c]=M.useState(!1),{toast:u}=ga(),d=[{id:"analytics",label:"Research Analytics",description:"KPIs, trends, and impact metrics"},{id:"publications",label:"Publication List",description:"All publications with citations"},{id:"collaborations",label:"Collaboration Network",description:"Partners and co-authors"},{id:"full",label:"Full Report",description:"Complete research profile"}],h=x=>{let v="";switch(x){case"analytics":v=`Metric,Value
`,v+=`Global Impact Index,${_s.globalImpactIndex}
`,v+=`H-Index Growth,${_s.hIndexGrowth}%
`,v+=`Total Citations,${_s.totalCitations}
`,v+=`Open Access Rate,${_s.openAccessPercentage}%
`,v+=`Q1 Publications,${_s.q1Publications}
`;break;case"publications":v=`Author,H-Index,Citations,Papers
`,BC.forEach(_=>{v+=`"${_.name}",${_.hIndex},${_.citations},${_.papers}
`});break;case"collaborations":v=`Country,Reads,Downloads,Citations,Collaborations
`,po.forEach(_=>{v+=`"${_.name}",${_.reads},${_.downloads},${_.citations},${_.collaborations}
`});break;case"full":v=`=== UDSM Research Analytics Report ===

`,v+=`Key Performance Indicators
`,v+=`Global Impact Index,${_s.globalImpactIndex}
`,v+=`H-Index Growth,${_s.hIndexGrowth}%

`,v+=`Top Authors
`,v+=`Name,H-Index,Citations
`,BC.slice(0,5).forEach(_=>{v+=`"${_.name}",${_.hIndex},${_.citations}
`});break}return v},m=x=>{let v=`
      <html>
      <head>
        <style>
          body { font-family: Arial, sans-serif; padding: 40px; color: #1a1a1a; }
          h1 { color: #1E40AF; border-bottom: 2px solid #1E40AF; padding-bottom: 10px; }
          h2 { color: #1E40AF; margin-top: 30px; }
          table { width: 100%; border-collapse: collapse; margin: 20px 0; }
          th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
          th { background-color: #1E40AF; color: white; }
          tr:nth-child(even) { background-color: #f8f9fa; }
          .metric { display: inline-block; margin: 10px; padding: 20px; background: #f0f4ff; border-radius: 8px; }
          .metric-value { font-size: 28px; font-weight: bold; color: #1E40AF; }
          .metric-label { font-size: 14px; color: #666; }
          .footer { margin-top: 40px; text-align: center; color: #999; font-size: 12px; }
        </style>
      </head>
      <body>
        <h1> UDSM Research Intelligence Report</h1>
        <p>Generated on ${new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}</p>
    `;return(x==="analytics"||x==="full")&&(v+=`
        <h2> Key Performance Indicators</h2>
        <div>
          <div class="metric">
            <div class="metric-value">${_s.globalImpactIndex}</div>
            <div class="metric-label">Global Impact Index</div>
          </div>
          <div class="metric">
            <div class="metric-value">+${_s.hIndexGrowth}%</div>
            <div class="metric-label">H-Index Growth</div>
          </div>
          <div class="metric">
            <div class="metric-value">${_s.totalCitations.toLocaleString()}</div>
            <div class="metric-label">Total Citations</div>
          </div>
          <div class="metric">
            <div class="metric-value">${_s.openAccessPercentage}%</div>
            <div class="metric-label">Open Access Rate</div>
          </div>
        </div>
      `),(x==="publications"||x==="full")&&(v+=`
        <h2> Top Researchers</h2>
        <table>
          <tr><th>Researcher</th><th>Department</th><th>H-Index</th><th>Citations</th></tr>
          ${BC.slice(0,10).map(_=>`
            <tr>
              <td>${_.name}</td>
              <td>${_.department}</td>
              <td>${_.hIndex}</td>
              <td>${_.citations.toLocaleString()}</td>
            </tr>
          `).join("")}
        </table>
      `),(x==="collaborations"||x==="full")&&(v+=`
        <h2> Global Collaboration Partners</h2>
        <table>
          <tr><th>Country</th><th>Reads</th><th>Citations</th><th>Collaborations</th></tr>
          ${po.slice(0,10).map(_=>`
            <tr>
              <td>${_.flag} ${_.name}</td>
              <td>${_.reads.toLocaleString()}</td>
              <td>${_.citations.toLocaleString()}</td>
              <td>${_.collaborations}</td>
            </tr>
          `).join("")}
        </table>
      `),v+=`
        <div class="footer">
          <p>University of Dar es Salaam  Research Intelligence Platform</p>
          <p>This report was automatically generated by the UDSM Research Analytics System</p>
        </div>
      </body>
      </html>
    `,v},b=async()=>{o(!0),await new Promise(x=>setTimeout(x,1500));try{if(n==="csv"){const x=h(i),v=new Blob([x],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(v),E=document.createElement("a");E.href=_,E.download=`udsm_research_${i}_${new Date().toISOString().split("T")[0]}.csv`,E.click(),URL.revokeObjectURL(_)}else{const x=m(i),v=new Blob([x],{type:"text/html;charset=utf-8;"}),_=URL.createObjectURL(v),E=window.open(_,"_blank");E&&(E.onload=()=>{E.print()})}c(!0),u({title:"Export successful!",description:`Your ${i} report has been generated.`}),setTimeout(()=>{c(!1)},2e3)}catch{u({variant:"destructive",title:"Export failed",description:"There was an error generating your report."})}finally{o(!1)}};return p.jsx(cf,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(at.div,{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),p.jsx(at.div,{className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-50 w-full max-w-lg",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},children:p.jsxs("div",{className:"glass-panel p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-xl font-display font-bold text-foreground",children:"Export Research Data"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Download analytics as PDF or CSV"})]}),p.jsx(ut,{variant:"ghost",size:"icon",onClick:e,children:p.jsx(xo,{className:"w-4 h-4"})})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Export Format"}),p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsxs("button",{onClick:()=>r("pdf"),className:`p-4 rounded-lg border-2 transition-all flex items-center gap-3 ${n==="pdf"?"border-primary bg-primary/10":"border-border hover:border-primary/50"}`,children:[p.jsx(yo,{className:`w-5 h-5 ${n==="pdf"?"text-primary":"text-muted-foreground"}`}),p.jsxs("div",{className:"text-left",children:[p.jsx("p",{className:"font-medium text-sm",children:"PDF Report"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Formatted document"})]})]}),p.jsxs("button",{onClick:()=>r("csv"),className:`p-4 rounded-lg border-2 transition-all flex items-center gap-3 ${n==="csv"?"border-primary bg-primary/10":"border-border hover:border-primary/50"}`,children:[p.jsx(ole,{className:`w-5 h-5 ${n==="csv"?"text-primary":"text-muted-foreground"}`}),p.jsxs("div",{className:"text-left",children:[p.jsx("p",{className:"font-medium text-sm",children:"CSV File"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Spreadsheet data"})]})]})]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Report Content"}),p.jsx("div",{className:"space-y-2",children:d.map(x=>p.jsxs("button",{onClick:()=>s(x.id),className:`w-full p-3 rounded-lg border text-left transition-all ${i===x.id?"border-primary bg-primary/10":"border-border hover:border-primary/50"}`,children:[p.jsx("p",{className:"font-medium text-sm",children:x.label}),p.jsx("p",{className:"text-xs text-muted-foreground",children:x.description})]},x.id))})]}),p.jsxs(ut,{className:"w-full bg-gradient-to-r from-primary to-cyan hover:opacity-90",onClick:b,disabled:a,children:[a?p.jsx(bu,{className:"w-4 h-4 animate-spin mr-2"}):l?p.jsx(ty,{className:"w-4 h-4 mr-2"}):p.jsx(Xd,{className:"w-4 h-4 mr-2"}),a?"Generating...":l?"Exported!":"Export Report"]})]})})]})})}function o8e({dashboards:t,currentConfig:e,onLoadDashboard:n,onSaveDashboard:r,onDeleteDashboard:i,isLoading:s}){const[a,o]=M.useState(!1),[l,c]=M.useState(""),u=()=>{l.trim()&&(r(l.trim(),e),c(""),o(!1))};return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"glass-panel p-4",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("h3",{className:"font-display font-semibold text-foreground flex items-center gap-2",children:[p.jsx(ule,{className:"w-4 h-4"}),"Saved Views"]}),p.jsxs(ut,{onClick:()=>o(!0),size:"sm",className:"bg-gradient-to-r from-primary to-cyan hover:opacity-90",children:[p.jsx(yj,{className:"w-4 h-4 mr-1"}),"Save Current"]})]}),p.jsx(gl,{className:"h-[200px]",children:p.jsx("div",{className:"space-y-2",children:s?p.jsx("div",{className:"p-4 text-center text-muted-foreground text-sm",children:"Loading saved dashboards..."}):t.length===0?p.jsx("div",{className:"p-4 text-center text-muted-foreground text-sm",children:'No saved dashboards yet. Customize your view and click "Save Current" to save it.'}):t.map(d=>p.jsxs(at.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"group flex items-center justify-between p-3 rounded-lg bg-muted/30 hover:bg-muted/50 transition-colors",children:[p.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>n(d.config),children:[p.jsx("p",{className:"text-sm font-medium text-foreground",children:d.name}),p.jsxs("div",{className:"flex items-center gap-1 mt-1 text-xs text-muted-foreground",children:[p.jsx(F1,{className:"w-3 h-3"}),p.jsx("span",{children:Qg(new Date(d.updated_at),{addSuffix:!0})})]})]}),p.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[p.jsx(ut,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>n(d.config),children:p.jsx(gj,{className:"w-3 h-3"})}),p.jsx(ut,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>i(d.id),children:p.jsx(op,{className:"w-3 h-3 text-destructive"})})]})]},d.id))})})]}),p.jsx(Qv,{open:a,onOpenChange:o,children:p.jsxs(Sp,{className:"sm:max-w-md",children:[p.jsx(Ep,{children:p.jsx(Tp,{children:"Save Dashboard View"})}),p.jsx("div",{className:"py-4",children:p.jsx(sr,{placeholder:"Enter dashboard name...",value:l,onChange:d=>c(d.target.value),onKeyDown:d=>d.key==="Enter"&&u()})}),p.jsxs(Aie,{children:[p.jsx(ut,{variant:"ghost",onClick:()=>o(!1),children:"Cancel"}),p.jsx(ut,{onClick:u,disabled:!l.trim(),className:"bg-gradient-to-r from-primary to-cyan hover:opacity-90",children:"Save Dashboard"})]})]})})]})}function l8e(){const{user:t}=qr(),[e,n]=M.useState([]),[r,i]=M.useState(!1),s=M.useCallback(async()=>{if(!t)return;i(!0);const{data:c,error:u}=await ot.from("saved_dashboards").select("*").eq("user_id",t.id).order("updated_at",{ascending:!1});!u&&c&&n(c.map(d=>({...d,config:d.config||{}}))),i(!1)},[t]);M.useEffect(()=>{s()},[s]);const a=M.useCallback(async(c,u)=>{if(!t)return null;const{data:d,error:h}=await ot.from("saved_dashboards").insert({user_id:t.id,name:c,config:u}).select().single();if(!h&&d){const m={...d,config:d.config||{}};return n(b=>[m,...b]),d.id}return null},[t]),o=M.useCallback(async(c,u)=>{if(!t)return;const d={updated_at:new Date().toISOString()};u.name&&(d.name=u.name),u.config&&(d.config=u.config);const{error:h}=await ot.from("saved_dashboards").update(d).eq("id",c).eq("user_id",t.id);h||n(m=>m.map(b=>b.id===c?{...b,...u,updated_at:new Date().toISOString()}:b))},[t]),l=M.useCallback(async c=>{if(!t)return;const{error:u}=await ot.from("saved_dashboards").delete().eq("id",c).eq("user_id",t.id);u||n(d=>d.filter(h=>h.id!==c))},[t]);return{dashboards:e,isLoading:r,saveDashboard:a,updateDashboard:o,deleteDashboard:l,refreshDashboards:s}}function c8e(){const[t,e]=M.useState(null),[n,r]=M.useState(!0),{user:i}=qr(),s=M.useCallback(async()=>{if(!i){e(null),r(!1);return}r(!0);try{const{data:a,error:o}=await ot.from("researcher_publications").select("citations");if(o)throw o;const l=a?.length||0,c=a?.reduce((T,A)=>T+(A.citations||0),0)||0,{data:u,error:d}=await ot.from("profiles").select("h_index, updated_at");if(d)throw d;const h=u?.length||0,m=h>0?Math.round(u.reduce((T,A)=>T+(A.h_index||0),0)/h):0,b=new Date;b.setDate(b.getDate()-7);const x=u?.filter(T=>new Date(T.updated_at)>b).length||0,{data:v,error:_}=await ot.from("citation_snapshots").select("publication_id"),E=_?0:new Set(v?.map(T=>T.publication_id)).size;e({totalPublications:l,totalCitations:c,totalResearchers:h,avgHIndex:m,trendingPublications:E,recentActivity:x})}catch(a){console.error("Error fetching institutional stats:",a),e(null)}finally{r(!1)}},[i]);return M.useEffect(()=>{s()},[s]),{stats:t,isLoading:n,refetch:s,isAuthenticated:!!i}}function u8e(){const[t,e]=M.useState("globe"),[n,r]=M.useState(!1),[i,s]=M.useState(!1),[a,o]=M.useState(!1),{user:l}=qr(),{dashboards:c,isLoading:u,saveDashboard:d,deleteDashboard:h}=l8e(),{stats:m,isLoading:b,isAuthenticated:x}=c8e(),v=P=>{P.activeTab&&e(P.activeTab)},_=async(P,R)=>{await d(P,{...R,activeTab:t})},E=po.reduce((P,R)=>P+R.reads,0),T=po.reduce((P,R)=>P+R.citations,0),A=x&&m&&!b;return p.jsxs("div",{className:"min-h-screen bg-background",children:[p.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 left-1/4 w-[600px] h-[600px] bg-primary/5 rounded-full blur-[120px]"}),p.jsx("div",{className:"absolute bottom-0 right-1/4 w-[500px] h-[500px] bg-secondary/5 rounded-full blur-[100px]"})]}),p.jsx(a_e,{activeTab:t,setActiveTab:e,onOpenAuth:()=>r(!0),onOpenProfile:()=>s(!0),onOpenExport:()=>o(!0)}),p.jsx("main",{className:"relative pt-28 pb-12",children:p.jsx("div",{className:"container mx-auto px-4",children:p.jsxs(cf,{mode:"wait",children:[t==="globe"&&p.jsxs(at.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[p.jsx("div",{className:"mb-8",children:p.jsxs(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[p.jsxs("h1",{className:"font-display text-4xl md:text-5xl lg:text-6xl font-bold text-foreground mb-4",children:["Global Research"," ",p.jsx("span",{className:"text-gradient-primary",children:"Intelligence"})]}),p.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl",children:"Real-time visualization of UDSM's worldwide research impact, collaboration networks, and academic influence."})]})}),A&&p.jsx("div",{className:"mb-4",children:p.jsxs($i,{variant:"secondary",className:"mb-2",children:[p.jsx(sle,{className:"w-3 h-3 mr-1"}),"Live Institutional Data"]})}),p.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:(A?[{label:"Total Publications",value:m.totalPublications.toLocaleString(),icon:Oi,color:"primary"},{label:"Total Citations",value:m.totalCitations.toLocaleString(),icon:Ps,color:"secondary"},{label:"Researchers",value:m.totalResearchers.toLocaleString(),icon:pi,color:"cyan"},{label:"Avg H-Index",value:m.avgHIndex.toString(),icon:YN,color:"emerald"}]:[{label:"Countries Reached",value:po.length,icon:YN,color:"primary"},{label:"Global Reads",value:`${(E/1e3).toFixed(0)}K+`,icon:Oi,color:"cyan"},{label:"Total Citations",value:`${(T/1e3).toFixed(0)}K+`,icon:Ps,color:"secondary"},{label:"Partner Universities",value:"48",icon:pi,color:"emerald"}]).map((P,R)=>p.jsxs(at.div,{className:"glass-panel p-4 flex items-center gap-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1+R*.1},children:[p.jsx("div",{className:`p-2 rounded-lg bg-${P.color}/20`,children:p.jsx(P.icon,{className:`w-5 h-5 text-${P.color}`})}),p.jsxs("div",{children:[p.jsx("p",{className:"font-display font-bold text-xl text-foreground",children:P.value}),p.jsx("p",{className:"text-xs text-muted-foreground",children:P.label})]})]},P.label))}),p.jsxs(at.div,{className:"glass-panel p-4 mb-8",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2},children:[p.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"font-display font-semibold text-lg text-foreground",children:"Global Impact Map"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Interactive 3D visualization  Hover over points to explore"})]}),p.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-3 h-3 rounded-full bg-primary"}),p.jsx("span",{className:"text-muted-foreground",children:"Readership"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-3 h-3 rounded-full bg-secondary"}),p.jsx("span",{className:"text-muted-foreground",children:"UDSM Hub"})]})]})]}),p.jsx("div",{className:"h-[500px] lg:h-[600px] rounded-xl overflow-hidden bg-gradient-to-b from-background to-muted/20",children:p.jsx(NRe,{})})]}),p.jsxs(at.div,{className:"glass-panel p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[p.jsx("h2",{className:"font-display font-semibold text-lg text-foreground mb-4",children:"Top Countries by Research Engagement"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:po.slice(0,6).map((P,R)=>p.jsxs(at.div,{className:"flex items-center gap-4 p-4 rounded-xl bg-muted/30 hover:bg-muted/50 transition-colors",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5+R*.05},children:[p.jsx("span",{className:"text-3xl",children:P.flag}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"font-medium text-foreground",children:P.name}),p.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground mt-1",children:[p.jsxs("span",{children:[P.reads.toLocaleString()," reads"]}),p.jsxs("span",{children:[P.citations.toLocaleString()," citations"]})]})]}),p.jsx("div",{className:"text-right",children:p.jsxs("span",{className:"text-lg font-display font-bold text-primary",children:["#",R+1]})})]},P.code))})]})]},"globe"),t==="dashboard"&&p.jsxs(at.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"space-y-8",children:[p.jsxs("div",{children:[p.jsxs("h1",{className:"font-display text-3xl md:text-4xl font-bold text-foreground mb-2",children:["Research Analytics ",p.jsx("span",{className:"text-gradient-gold",children:"Dashboard"})]}),p.jsx("p",{className:"text-muted-foreground",children:"Comprehensive metrics and performance insights"})]}),l&&p.jsx(o8e,{dashboards:c,currentConfig:{activeTab:t},onLoadDashboard:v,onSaveDashboard:_,onDeleteDashboard:h,isLoading:u}),p.jsx(IRe,{}),p.jsx(HHe,{})]},"dashboard"),t==="network"&&p.jsxs(at.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[p.jsxs("div",{className:"mb-8",children:[p.jsxs("h1",{className:"font-display text-3xl md:text-4xl font-bold text-foreground mb-2",children:["Collaboration ",p.jsx("span",{className:"text-gradient-primary",children:"Network"})]}),p.jsx("p",{className:"text-muted-foreground",children:"Visualizing UDSM's global research partnerships"})]}),p.jsx(WHe,{})]},"network"),t==="predictions"&&p.jsxs(at.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[p.jsxs("div",{className:"mb-8",children:[p.jsxs("h1",{className:"font-display text-3xl md:text-4xl font-bold text-foreground mb-2",children:["Predictive ",p.jsx("span",{className:"text-gradient-gold",children:"Analytics"})]}),p.jsx("p",{className:"text-muted-foreground",children:"ML-powered forecasts and strategic recommendations"})]}),p.jsx(JHe,{})]},"predictions")]})})}),p.jsx("footer",{className:"border-t border-border py-8",children:p.jsx("div",{className:"container mx-auto px-4",children:p.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary to-cyan flex items-center justify-center",children:p.jsx("span",{className:"text-white text-xs font-bold",children:"U"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-medium text-foreground",children:"University of Dar es Salaam"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Global Research Intelligence Platform"})]})]}),p.jsx("p",{className:"text-xs text-muted-foreground text-center md:text-right",children:"Transforming UDSM from a data publisher into a data-driven, impact-oriented, internationally competitive research powerhouse."})]})})}),p.jsx(rWe,{}),p.jsx(zne,{isOpen:n,onClose:()=>r(!1)}),p.jsx(s8e,{isOpen:i,onClose:()=>s(!1)}),p.jsx(a8e,{isOpen:a,onClose:()=>o(!1)})]})}const wse=M.forwardRef(({className:t,...e},n)=>p.jsx("div",{className:"relative w-full overflow-auto",children:p.jsx("table",{ref:n,className:kt("w-full caption-bottom text-sm",t),...e})}));wse.displayName="Table";const _se=M.forwardRef(({className:t,...e},n)=>p.jsx("thead",{ref:n,className:kt("[&_tr]:border-b",t),...e}));_se.displayName="TableHeader";const Sse=M.forwardRef(({className:t,...e},n)=>p.jsx("tbody",{ref:n,className:kt("[&_tr:last-child]:border-0",t),...e}));Sse.displayName="TableBody";const d8e=M.forwardRef(({className:t,...e},n)=>p.jsx("tfoot",{ref:n,className:kt("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));d8e.displayName="TableFooter";const ux=M.forwardRef(({className:t,...e},n)=>p.jsx("tr",{ref:n,className:kt("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",t),...e}));ux.displayName="TableRow";const kh=M.forwardRef(({className:t,...e},n)=>p.jsx("th",{ref:n,className:kt("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));kh.displayName="TableHead";const nu=M.forwardRef(({className:t,...e},n)=>p.jsx("td",{ref:n,className:kt("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));nu.displayName="TableCell";const f8e=M.forwardRef(({className:t,...e},n)=>p.jsx("caption",{ref:n,className:kt("mt-4 text-sm text-muted-foreground",t),...e}));f8e.displayName="TableCaption";var lj=["Enter"," "],h8e=["ArrowDown","PageUp","Home"],Ese=["ArrowUp","PageDown","End"],p8e=[...h8e,...Ese],m8e={ltr:[...lj,"ArrowRight"],rtl:[...lj,"ArrowLeft"]},g8e={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Xw="Menu",[aw,v8e,y8e]=cw(Xw),[Bp,Tse]=cs(Xw,[y8e,lf,lM]),uM=lf(),Ase=lM(),[x8e,zp]=Bp(Xw),[b8e,Yw]=Bp(Xw),Mse=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:s,modal:a=!0}=t,o=uM(e),[l,c]=M.useState(null),u=M.useRef(!1),d=Wr(s),h=dy(i);return M.useEffect(()=>{const m=()=>{u.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>u.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),p.jsx(Nj,{...o,children:p.jsx(x8e,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:c,children:p.jsx(b8e,{scope:e,onClose:M.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:h,modal:a,children:r})})})};Mse.displayName=Xw;var w8e="MenuAnchor",zU=M.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=uM(n);return p.jsx(hw,{...i,...r,ref:e})});zU.displayName=w8e;var $U="MenuPortal",[_8e,Pse]=Bp($U,{forceMount:void 0}),Cse=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,s=zp($U,e);return p.jsx(_8e,{scope:e,forceMount:n,children:p.jsx(Wi,{present:n||s.open,children:p.jsx(ey,{asChild:!0,container:i,children:r})})})};Cse.displayName=$U;var vo="MenuContent",[S8e,VU]=Bp(vo),Rse=M.forwardRef((t,e)=>{const n=Pse(vo,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=zp(vo,t.__scopeMenu),a=Yw(vo,t.__scopeMenu);return p.jsx(aw.Provider,{scope:t.__scopeMenu,children:p.jsx(Wi,{present:r||s.open,children:p.jsx(aw.Slot,{scope:t.__scopeMenu,children:a.modal?p.jsx(E8e,{...i,ref:e}):p.jsx(T8e,{...i,ref:e})})})})}),E8e=M.forwardRef((t,e)=>{const n=zp(vo,t.__scopeMenu),r=M.useRef(null),i=tn(e,r);return M.useEffect(()=>{const s=r.current;if(s)return WT(s)},[]),p.jsx(HU,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Je(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),T8e=M.forwardRef((t,e)=>{const n=zp(vo,t.__scopeMenu);return p.jsx(HU,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),A8e=Kd("MenuContent.ScrollLock"),HU=M.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:m,disableOutsideScroll:b,...x}=t,v=zp(vo,n),_=Yw(vo,n),E=uM(n),T=Ase(n),A=v8e(n),[P,R]=M.useState(null),N=M.useRef(null),L=tn(e,N,v.onContentChange),I=M.useRef(0),j=M.useRef(""),B=M.useRef(0),H=M.useRef(null),J=M.useRef("right"),G=M.useRef(0),W=b?Sw:M.Fragment,K=b?{as:A8e,allowPinchZoom:!0}:void 0,te=V=>{const X=j.current+V,q=A().filter(he=>!he.disabled),Q=document.activeElement,ie=q.find(he=>he.ref.current===Q)?.textValue,ce=q.map(he=>he.textValue),ye=U8e(ce,X,ie),Ce=q.find(he=>he.textValue===ye)?.ref.current;(function he(De){j.current=De,window.clearTimeout(I.current),De!==""&&(I.current=window.setTimeout(()=>he(""),1e3))})(X),Ce&&setTimeout(()=>Ce.focus())};M.useEffect(()=>()=>window.clearTimeout(I.current),[]),HT();const z=M.useCallback(V=>J.current===H.current?.side&&B8e(V,H.current?.area),[]);return p.jsx(S8e,{scope:n,searchRef:j,onItemEnter:M.useCallback(V=>{z(V)&&V.preventDefault()},[z]),onItemLeave:M.useCallback(V=>{z(V)||(N.current?.focus(),R(null))},[z]),onTriggerLeave:M.useCallback(V=>{z(V)&&V.preventDefault()},[z]),pointerGraceTimerRef:B,onPointerGraceIntentChange:M.useCallback(V=>{H.current=V},[]),children:p.jsx(W,{...K,children:p.jsx(_w,{asChild:!0,trapped:i,onMountAutoFocus:Je(s,V=>{V.preventDefault(),N.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:p.jsx(Ap,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:m,children:p.jsx(tse,{asChild:!0,...T,dir:_.dir,orientation:"vertical",loop:r,currentTabStopId:P,onCurrentTabStopIdChange:R,onEntryFocus:Je(l,V=>{_.isUsingKeyboardRef.current||V.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(AT,{role:"menu","aria-orientation":"vertical","data-state":Gse(v.open),"data-radix-menu-content":"",dir:_.dir,...E,...x,ref:L,style:{outline:"none",...x.style},onKeyDown:Je(x.onKeyDown,V=>{const q=V.target.closest("[data-radix-menu-content]")===V.currentTarget,Q=V.ctrlKey||V.altKey||V.metaKey,ie=V.key.length===1;q&&(V.key==="Tab"&&V.preventDefault(),!Q&&ie&&te(V.key));const ce=N.current;if(V.target!==ce||!p8e.includes(V.key))return;V.preventDefault();const Ce=A().filter(he=>!he.disabled).map(he=>he.ref.current);Ese.includes(V.key)&&Ce.reverse(),j8e(Ce)}),onBlur:Je(t.onBlur,V=>{V.currentTarget.contains(V.target)||(window.clearTimeout(I.current),j.current="")}),onPointerMove:Je(t.onPointerMove,ow(V=>{const X=V.target,q=G.current!==V.clientX;if(V.currentTarget.contains(X)&&q){const Q=V.clientX>G.current?"right":"left";J.current=Q,G.current=V.clientX}}))})})})})})})});Rse.displayName=vo;var M8e="MenuGroup",WU=M.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(Pt.div,{role:"group",...r,ref:e})});WU.displayName=M8e;var P8e="MenuLabel",Ose=M.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(Pt.div,{...r,ref:e})});Ose.displayName=P8e;var gT="MenuItem",zq="menu.itemSelect",dM=M.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,s=M.useRef(null),a=Yw(gT,t.__scopeMenu),o=VU(gT,t.__scopeMenu),l=tn(e,s),c=M.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const h=new CustomEvent(zq,{bubbles:!0,cancelable:!0});d.addEventListener(zq,m=>r?.(m),{once:!0}),uj(d,h),h.defaultPrevented?c.current=!1:a.onClose()}};return p.jsx(Nse,{...i,ref:l,disabled:n,onClick:Je(t.onClick,u),onPointerDown:d=>{t.onPointerDown?.(d),c.current=!0},onPointerUp:Je(t.onPointerUp,d=>{c.current||d.currentTarget?.click()}),onKeyDown:Je(t.onKeyDown,d=>{const h=o.searchRef.current!=="";n||h&&d.key===" "||lj.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});dM.displayName=gT;var Nse=M.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=t,a=VU(gT,n),o=Ase(n),l=M.useRef(null),c=tn(e,l),[u,d]=M.useState(!1),[h,m]=M.useState("");return M.useEffect(()=>{const b=l.current;b&&m((b.textContent??"").trim())},[s.children]),p.jsx(aw.ItemSlot,{scope:n,disabled:r,textValue:i??h,children:p.jsx(nse,{asChild:!0,...o,focusable:!r,children:p.jsx(Pt.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:c,onPointerMove:Je(t.onPointerMove,ow(b=>{r?a.onItemLeave(b):(a.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Je(t.onPointerLeave,ow(b=>a.onItemLeave(b))),onFocus:Je(t.onFocus,()=>d(!0)),onBlur:Je(t.onBlur,()=>d(!1))})})})}),C8e="MenuCheckboxItem",Ise=M.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return p.jsx(Use,{scope:t.__scopeMenu,checked:n,children:p.jsx(dM,{role:"menuitemcheckbox","aria-checked":vT(n)?"mixed":n,...i,ref:e,"data-state":qU(n),onSelect:Je(i.onSelect,()=>r?.(vT(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Ise.displayName=C8e;var kse="MenuRadioGroup",[R8e,O8e]=Bp(kse,{value:void 0,onValueChange:()=>{}}),Dse=M.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,s=Wr(r);return p.jsx(R8e,{scope:t.__scopeMenu,value:n,onValueChange:s,children:p.jsx(WU,{...i,ref:e})})});Dse.displayName=kse;var jse="MenuRadioItem",Lse=M.forwardRef((t,e)=>{const{value:n,...r}=t,i=O8e(jse,t.__scopeMenu),s=n===i.value;return p.jsx(Use,{scope:t.__scopeMenu,checked:s,children:p.jsx(dM,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":qU(s),onSelect:Je(r.onSelect,()=>i.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});Lse.displayName=jse;var GU="MenuItemIndicator",[Use,N8e]=Bp(GU,{checked:!1}),Fse=M.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,s=N8e(GU,n);return p.jsx(Wi,{present:r||vT(s.checked)||s.checked===!0,children:p.jsx(Pt.span,{...i,ref:e,"data-state":qU(s.checked)})})});Fse.displayName=GU;var I8e="MenuSeparator",Bse=M.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(Pt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});Bse.displayName=I8e;var k8e="MenuArrow",zse=M.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=uM(n);return p.jsx(MT,{...i,...r,ref:e})});zse.displayName=k8e;var D8e="MenuSub",[oqe,$se]=Bp(D8e),dx="MenuSubTrigger",Vse=M.forwardRef((t,e)=>{const n=zp(dx,t.__scopeMenu),r=Yw(dx,t.__scopeMenu),i=$se(dx,t.__scopeMenu),s=VU(dx,t.__scopeMenu),a=M.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},u=M.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return M.useEffect(()=>u,[u]),M.useEffect(()=>{const d=o.current;return()=>{window.clearTimeout(d),l(null)}},[o,l]),p.jsx(zU,{asChild:!0,...c,children:p.jsx(Nse,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":Gse(n.open),...t,ref:yT(e,i.onTriggerChange),onClick:d=>{t.onClick?.(d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Je(t.onPointerMove,ow(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!a.current&&(s.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:Je(t.onPointerLeave,ow(d=>{u();const h=n.content?.getBoundingClientRect();if(h){const m=n.content?.dataset.side,b=m==="right",x=b?-5:5,v=h[b?"left":"right"],_=h[b?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+x,y:d.clientY},{x:v,y:h.top},{x:_,y:h.top},{x:_,y:h.bottom},{x:v,y:h.bottom}],side:m}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:Je(t.onKeyDown,d=>{const h=s.searchRef.current!=="";t.disabled||h&&d.key===" "||m8e[r.dir].includes(d.key)&&(n.onOpenChange(!0),n.content?.focus(),d.preventDefault())})})})});Vse.displayName=dx;var Hse="MenuSubContent",Wse=M.forwardRef((t,e)=>{const n=Pse(vo,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=zp(vo,t.__scopeMenu),a=Yw(vo,t.__scopeMenu),o=$se(Hse,t.__scopeMenu),l=M.useRef(null),c=tn(e,l);return p.jsx(aw.Provider,{scope:t.__scopeMenu,children:p.jsx(Wi,{present:r||s.open,children:p.jsx(aw.Slot,{scope:t.__scopeMenu,children:p.jsx(HU,{id:o.contentId,"aria-labelledby":o.triggerId,...i,ref:c,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{a.isUsingKeyboardRef.current&&l.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Je(t.onFocusOutside,u=>{u.target!==o.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:Je(t.onEscapeKeyDown,u=>{a.onClose(),u.preventDefault()}),onKeyDown:Je(t.onKeyDown,u=>{const d=u.currentTarget.contains(u.target),h=g8e[a.dir].includes(u.key);d&&h&&(s.onOpenChange(!1),o.trigger?.focus(),u.preventDefault())})})})})})});Wse.displayName=Hse;function Gse(t){return t?"open":"closed"}function vT(t){return t==="indeterminate"}function qU(t){return vT(t)?"indeterminate":t?"checked":"unchecked"}function j8e(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function L8e(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function U8e(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let a=L8e(t,Math.max(s,0));i.length===1&&(a=a.filter(c=>c!==n));const l=a.find(c=>c.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function F8e(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,a=e.length-1;s<e.length;a=s++){const o=e[s],l=e[a],c=o.x,u=o.y,d=l.x,h=l.y;u>r!=h>r&&n<(d-c)*(r-u)/(h-u)+c&&(i=!i)}return i}function B8e(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return F8e(n,e)}function ow(t){return e=>e.pointerType==="mouse"?t(e):void 0}var z8e=Mse,$8e=zU,V8e=Cse,H8e=Rse,W8e=WU,G8e=Ose,q8e=dM,K8e=Ise,X8e=Dse,Y8e=Lse,J8e=Fse,Q8e=Bse,Z8e=zse,eGe=Vse,tGe=Wse,fM="DropdownMenu",[nGe]=cs(fM,[Tse]),Qs=Tse(),[rGe,qse]=nGe(fM),Kse=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:a,modal:o=!0}=t,l=Qs(e),c=M.useRef(null),[u,d]=bl({prop:i,defaultProp:s??!1,onChange:a,caller:fM});return p.jsx(rGe,{scope:e,triggerId:go(),triggerRef:c,contentId:go(),open:u,onOpenChange:d,onOpenToggle:M.useCallback(()=>d(h=>!h),[d]),modal:o,children:p.jsx(z8e,{...l,open:u,onOpenChange:d,dir:r,modal:o,children:n})})};Kse.displayName=fM;var Xse="DropdownMenuTrigger",Yse=M.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,s=qse(Xse,n),a=Qs(n);return p.jsx($8e,{asChild:!0,...a,children:p.jsx(Pt.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:yT(e,s.triggerRef),onPointerDown:Je(t.onPointerDown,o=>{!r&&o.button===0&&o.ctrlKey===!1&&(s.onOpenToggle(),s.open||o.preventDefault())}),onKeyDown:Je(t.onKeyDown,o=>{r||(["Enter"," "].includes(o.key)&&s.onOpenToggle(),o.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});Yse.displayName=Xse;var iGe="DropdownMenuPortal",Jse=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Qs(e);return p.jsx(V8e,{...r,...n})};Jse.displayName=iGe;var Qse="DropdownMenuContent",Zse=M.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=qse(Qse,n),s=Qs(n),a=M.useRef(!1);return p.jsx(H8e,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:e,onCloseAutoFocus:Je(t.onCloseAutoFocus,o=>{a.current||i.triggerRef.current?.focus(),a.current=!1,o.preventDefault()}),onInteractOutside:Je(t.onInteractOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!i.modal||u)&&(a.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Zse.displayName=Qse;var sGe="DropdownMenuGroup",aGe=M.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qs(n);return p.jsx(W8e,{...i,...r,ref:e})});aGe.displayName=sGe;var oGe="DropdownMenuLabel",eae=M.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qs(n);return p.jsx(G8e,{...i,...r,ref:e})});eae.displayName=oGe;var lGe="DropdownMenuItem",tae=M.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qs(n);return p.jsx(q8e,{...i,...r,ref:e})});tae.displayName=lGe;var cGe="DropdownMenuCheckboxItem",nae=M.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qs(n);return p.jsx(K8e,{...i,...r,ref:e})});nae.displayName=cGe;var uGe="DropdownMenuRadioGroup",dGe=M.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qs(n);return p.jsx(X8e,{...i,...r,ref:e})});dGe.displayName=uGe;var fGe="DropdownMenuRadioItem",rae=M.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qs(n);return p.jsx(Y8e,{...i,...r,ref:e})});rae.displayName=fGe;var hGe="DropdownMenuItemIndicator",iae=M.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qs(n);return p.jsx(J8e,{...i,...r,ref:e})});iae.displayName=hGe;var pGe="DropdownMenuSeparator",sae=M.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qs(n);return p.jsx(Q8e,{...i,...r,ref:e})});sae.displayName=pGe;var mGe="DropdownMenuArrow",gGe=M.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qs(n);return p.jsx(Z8e,{...i,...r,ref:e})});gGe.displayName=mGe;var vGe="DropdownMenuSubTrigger",aae=M.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qs(n);return p.jsx(eGe,{...i,...r,ref:e})});aae.displayName=vGe;var yGe="DropdownMenuSubContent",oae=M.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qs(n);return p.jsx(tGe,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});oae.displayName=yGe;var xGe=Kse,bGe=Yse,wGe=Jse,lae=Zse,cae=eae,uae=tae,dae=nae,fae=rae,hae=iae,pae=sae,mae=aae,gae=oae;const _Ge=xGe,SGe=bGe,EGe=M.forwardRef(({className:t,inset:e,children:n,...r},i)=>p.jsxs(mae,{ref:i,className:kt("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",e&&"pl-8",t),...r,children:[n,p.jsx(tle,{className:"ml-auto h-4 w-4"})]}));EGe.displayName=mae.displayName;const TGe=M.forwardRef(({className:t,...e},n)=>p.jsx(gae,{ref:n,className:kt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));TGe.displayName=gae.displayName;const vae=M.forwardRef(({className:t,sideOffset:e=4,...n},r)=>p.jsx(wGe,{children:p.jsx(lae,{ref:r,sideOffset:e,className:kt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));vae.displayName=lae.displayName;const fx=M.forwardRef(({className:t,inset:e,...n},r)=>p.jsx(uae,{ref:r,className:kt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e&&"pl-8",t),...n}));fx.displayName=uae.displayName;const AGe=M.forwardRef(({className:t,children:e,checked:n,...r},i)=>p.jsxs(dae,{ref:i,className:kt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),checked:n,...r,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(hae,{children:p.jsx(ty,{className:"h-4 w-4"})})}),e]}));AGe.displayName=dae.displayName;const MGe=M.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(fae,{ref:r,className:kt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...n,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(hae,{children:p.jsx(rle,{className:"h-2 w-2 fill-current"})})}),e]}));MGe.displayName=fae.displayName;const PGe=M.forwardRef(({className:t,inset:e,...n},r)=>p.jsx(cae,{ref:r,className:kt("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));PGe.displayName=cae.displayName;const CGe=M.forwardRef(({className:t,...e},n)=>p.jsx(pae,{ref:n,className:kt("-mx-1 my-1 h-px bg-muted",t),...e}));CGe.displayName=pae.displayName;function RGe(){const[t,e]=M.useState([]),[n,r]=M.useState(!0),[i,s]=M.useState(""),{toast:a}=ga();M.useEffect(()=>{o()},[]);async function o(){r(!0);const{data:h,error:m}=await ot.from("profiles").select("*").order("created_at",{ascending:!1});if(m){a({variant:"destructive",title:"Error",description:"Failed to fetch users"}),r(!1);return}const{data:b,error:x}=await ot.from("user_roles").select("user_id, role");x&&console.error("Error fetching roles:",x);const v=(h||[]).map(_=>({..._,roles:b?.filter(E=>E.user_id===_.user_id).map(E=>E.role)||[]}));e(v),r(!1)}async function l(h,m){const{error:b}=await ot.from("user_roles").insert({user_id:h,role:m});if(b){b.code==="23505"?a({variant:"destructive",title:"Error",description:"User already has this role"}):a({variant:"destructive",title:"Error",description:"Failed to assign role"});return}a({title:"Success",description:`Role "${m}" assigned successfully`}),o()}async function c(h,m){const{error:b}=await ot.from("user_roles").delete().eq("user_id",h).eq("role",m);if(b){a({variant:"destructive",title:"Error",description:"Failed to remove role"});return}a({title:"Success",description:`Role "${m}" removed successfully`}),o()}const u=t.filter(h=>h.display_name?.toLowerCase().includes(i.toLowerCase())||h.email.toLowerCase().includes(i.toLowerCase())||h.department?.toLowerCase().includes(i.toLowerCase())),d={admin:"bg-destructive/20 text-destructive border-destructive/30",moderator:"bg-secondary/20 text-secondary border-secondary/30",researcher:"bg-primary/20 text-primary border-primary/30",user:"bg-muted text-muted-foreground border-muted"};return p.jsxs("div",{className:"space-y-6",children:[p.jsx("div",{className:"flex gap-4",children:p.jsxs("div",{className:"relative flex-1",children:[p.jsx(ap,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),p.jsx(sr,{placeholder:"Search by name, email, or department...",value:i,onChange:h=>s(h.target.value),className:"pl-10"})]})}),p.jsx("div",{className:"glass-panel overflow-hidden",children:p.jsxs(wse,{children:[p.jsx(_se,{children:p.jsxs(ux,{children:[p.jsx(kh,{children:"User"}),p.jsx(kh,{children:"Department"}),p.jsx(kh,{children:"Publications"}),p.jsx(kh,{children:"H-Index"}),p.jsx(kh,{children:"Roles"}),p.jsx(kh,{className:"w-[50px]"})]})}),p.jsx(Sse,{children:n?p.jsx(ux,{children:p.jsx(nu,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"Loading users..."})}):u.length===0?p.jsx(ux,{children:p.jsx(nu,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No users found"})}):u.map(h=>p.jsxs(ux,{children:[p.jsx(nu,{children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center",children:p.jsx(pi,{className:"w-4 h-4 text-primary"})}),p.jsxs("div",{children:[p.jsx("p",{className:"font-medium text-foreground",children:h.display_name||"Unknown"}),p.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[p.jsx(M9,{className:"w-3 h-3"}),h.email]})]})]})}),p.jsx(nu,{children:p.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[p.jsx(Kl,{className:"w-4 h-4"}),h.department||"Not set"]})}),p.jsx(nu,{children:p.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[p.jsx(Oi,{className:"w-4 h-4 text-muted-foreground"}),h.total_publications||0]})}),p.jsx(nu,{children:p.jsx("span",{className:"font-medium text-foreground",children:h.h_index||0})}),p.jsx(nu,{children:p.jsxs("div",{className:"flex flex-wrap gap-1",children:[h.roles.map(m=>p.jsx($i,{variant:"outline",className:`text-xs ${d[m]}`,children:m},m)),h.roles.length===0&&p.jsx("span",{className:"text-xs text-muted-foreground",children:"No roles"})]})}),p.jsx(nu,{children:p.jsxs(_Ge,{children:[p.jsx(SGe,{asChild:!0,children:p.jsx(ut,{variant:"ghost",size:"icon",className:"h-8 w-8",children:p.jsx(ale,{className:"w-4 h-4"})})}),p.jsxs(vae,{align:"end",children:[!h.roles.includes("admin")&&p.jsxs(fx,{onClick:()=>l(h.user_id,"admin"),children:[p.jsx(dw,{className:"w-4 h-4 mr-2"}),"Make Admin"]}),!h.roles.includes("moderator")&&p.jsxs(fx,{onClick:()=>l(h.user_id,"moderator"),children:[p.jsx($d,{className:"w-4 h-4 mr-2"}),"Make Moderator"]}),h.roles.includes("admin")&&p.jsxs(fx,{onClick:()=>c(h.user_id,"admin"),className:"text-destructive",children:[p.jsx(KF,{className:"w-4 h-4 mr-2"}),"Remove Admin"]}),h.roles.includes("moderator")&&p.jsxs(fx,{onClick:()=>c(h.user_id,"moderator"),className:"text-destructive",children:[p.jsx(KF,{className:"w-4 h-4 mr-2"}),"Remove Moderator"]})]})]})})]},h.id))})]})})]})}const OGe=[{month:"Jul",users:45,publications:89,citations:234},{month:"Aug",users:52,publications:102,citations:289},{month:"Sep",users:61,publications:98,citations:312},{month:"Oct",users:73,publications:125,citations:378},{month:"Nov",users:82,publications:134,citations:412},{month:"Dec",users:95,publications:156,citations:489},{month:"Jan",users:108,publications:178,citations:534}],WN=[{name:"Engineering",value:678,fill:"hsl(var(--primary))"},{name:"Health Sciences",value:523,fill:"hsl(var(--cyan))"},{name:"Natural Sciences",value:456,fill:"hsl(var(--secondary))"},{name:"Social Sciences",value:389,fill:"hsl(var(--emerald))"},{name:"Agriculture",value:234,fill:"hsl(var(--gold))"}],$q=[{quartile:"Q1",count:423,color:"hsl(var(--emerald))"},{quartile:"Q2",count:567,color:"hsl(var(--primary))"},{quartile:"Q3",count:389,color:"hsl(var(--secondary))"},{quartile:"Q4",count:156,color:"hsl(var(--muted-foreground))"}];function NGe(){const{user:t}=qr(),[e,n]=M.useState({totalUsers:0,totalPublications:0,avgHIndex:0}),[r,i]=M.useState([]),[s,a]=M.useState([]),[o,l]=M.useState([]),[c,u]=M.useState([]),[d,h]=M.useState(!0),{toast:m}=ga();M.useEffect(()=>{b()},[]);async function b(){h(!0),await Promise.all([x(),v(),_(),E(),T()]),h(!1)}async function x(){const{data:I}=await ot.from("profiles").select("h_index, total_publications, total_citations");if(I){const j=I.length,B=I.reduce((J,G)=>J+(G.total_publications||0),0),H=I.length>0?I.reduce((J,G)=>J+(G.h_index||0),0)/I.length:0;n({totalUsers:j,totalPublications:B,avgHIndex:Math.round(H*10)/10})}}async function v(){const{data:I}=await ot.from("profiles").select("id, user_id, display_name, department, h_index, total_citations, total_publications").order("h_index",{ascending:!1}).limit(10);I&&i(I)}async function _(){const{data:I}=await ot.from("profiles").select("id, display_name, updated_at").order("updated_at",{ascending:!1}).limit(5),{data:j}=await ot.from("researcher_publications").select("id, title, created_at, user_id").order("created_at",{ascending:!1}).limit(5),{data:B}=await ot.from("research_teams").select("id, name, created_at, owner_id").order("created_at",{ascending:!1}).limit(3),H=[];I?.forEach(J=>{H.push({id:`profile-${J.id}`,type:"profile_update",user_name:J.display_name||"Unknown",description:"Updated their profile",timestamp:J.updated_at})}),j?.forEach(J=>{H.push({id:`pub-${J.id}`,type:"publication_added",user_name:"Researcher",description:`Added publication: ${J.title.substring(0,40)}...`,timestamp:J.created_at})}),B?.forEach(J=>{H.push({id:`team-${J.id}`,type:"team_created",user_name:"Researcher",description:`Created team: ${J.name}`,timestamp:J.created_at})}),H.sort((J,G)=>new Date(G.timestamp).getTime()-new Date(J.timestamp).getTime()),a(H.slice(0,10))}async function E(){const{data:I}=await ot.from("researcher_publications").select("id, title, created_at, user_id").order("created_at",{ascending:!1}).limit(5),{data:j}=await ot.from("research_teams").select("id, name, created_at, owner_id").order("created_at",{ascending:!1}).limit(3),B=[];I?.forEach(H=>{B.push({id:H.id,type:"publication",title:H.title,user_name:"Researcher",created_at:H.created_at,status:"pending"})}),j?.forEach(H=>{B.push({id:H.id,type:"team",title:H.name,user_name:"Owner",created_at:H.created_at,status:"approved"})}),l(B)}async function T(){const{data:I}=await ot.from("audit_logs").select("*").order("created_at",{ascending:!1}).limit(20);I&&u(I)}async function A(I,j,B,H={}){t&&(await ot.from("audit_logs").insert({admin_user_id:t.id,action:I,target_type:j,target_id:B,details:H}),T())}async function P(I,j){const{error:B}=await ot.from("researcher_publications").delete().eq("id",I);B?m({variant:"destructive",title:"Error",description:"Failed to delete publication"}):(await A("delete_publication","publication",I,{title:j||"Unknown"}),m({title:"Success",description:"Publication deleted"}),l(H=>H.filter(J=>J.id!==I)))}async function R(I,j){const{error:B}=await ot.from("research_teams").delete().eq("id",I);B?m({variant:"destructive",title:"Error",description:"Failed to delete team"}):(await A("delete_team","team",I,{name:j||"Unknown"}),m({title:"Success",description:"Team deleted"}),l(H=>H.filter(J=>J.id!==I)))}const N={profile_update:pi,publication_added:Oi,team_created:Kl,chat_session:q_},L={profile_update:"text-primary",publication_added:"text-cyan",team_created:"text-secondary",chat_session:"text-emerald"};return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs(at.div,{className:"glass-panel p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[p.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[p.jsx("div",{className:"p-2 rounded-lg bg-primary/20",children:p.jsx(pi,{className:"w-5 h-5 text-primary"})}),p.jsx("span",{className:"text-sm text-muted-foreground",children:"Active Researchers"})]}),p.jsx("p",{className:"font-display text-3xl font-bold text-foreground",children:e.totalUsers||156}),p.jsx("p",{className:"text-xs text-emerald mt-1",children:"+12% from last month"})]}),p.jsxs(at.div,{className:"glass-panel p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[p.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[p.jsx("div",{className:"p-2 rounded-lg bg-cyan/20",children:p.jsx(Oi,{className:"w-5 h-5 text-cyan"})}),p.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Publications"})]}),p.jsx("p",{className:"font-display text-3xl font-bold text-foreground",children:e.totalPublications||4523}),p.jsx("p",{className:"text-xs text-emerald mt-1",children:"+8% from last month"})]}),p.jsxs(at.div,{className:"glass-panel p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[p.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[p.jsx("div",{className:"p-2 rounded-lg bg-secondary/20",children:p.jsx(yu,{className:"w-5 h-5 text-secondary"})}),p.jsx("span",{className:"text-sm text-muted-foreground",children:"Avg. H-Index"})]}),p.jsx("p",{className:"font-display text-3xl font-bold text-foreground",children:e.avgHIndex||18.4}),p.jsx("p",{className:"text-xs text-emerald mt-1",children:"+5% improvement"})]})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsxs(at.div,{className:"glass-panel p-6",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("h3",{className:"font-display font-semibold text-foreground flex items-center gap-2",children:[p.jsx(_9,{className:"w-5 h-5 text-gold"}),"Top Researchers"]}),p.jsx(ut,{variant:"ghost",size:"sm",onClick:v,children:p.jsx(mx,{className:"w-4 h-4"})})]}),p.jsx(gl,{className:"h-[300px]",children:p.jsx("div",{className:"space-y-3",children:r.length===0?p.jsx("p",{className:"text-muted-foreground text-sm text-center py-8",children:"No researchers found"}):r.map((I,j)=>p.jsxs(at.div,{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/30 hover:bg-muted/50 transition-colors",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*j},children:[p.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${j===0?"bg-gold/20 text-gold":j===1?"bg-muted text-muted-foreground":j===2?"bg-secondary/20 text-secondary":"bg-muted/50 text-muted-foreground"}`,children:j+1}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"font-medium text-foreground truncate",children:I.display_name||"Unknown"}),p.jsx("p",{className:"text-xs text-muted-foreground truncate",children:I.department||"No department"})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("p",{className:"font-bold text-foreground",children:I.h_index||0}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"H-Index"})]})]},I.id))})})]}),p.jsxs(at.div,{className:"glass-panel p-6",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("h3",{className:"font-display font-semibold text-foreground flex items-center gap-2",children:[p.jsx(q_,{className:"w-5 h-5 text-emerald"}),"Recent Activity"]}),p.jsx(ut,{variant:"ghost",size:"sm",onClick:_,children:p.jsx(mx,{className:"w-4 h-4"})})]}),p.jsx(gl,{className:"h-[300px]",children:p.jsx("div",{className:"space-y-3",children:s.length===0?p.jsx("p",{className:"text-muted-foreground text-sm text-center py-8",children:"No recent activity"}):s.map((I,j)=>{const B=N[I.type],H=L[I.type];return p.jsxs(at.div,{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/30",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*j},children:[p.jsx("div",{className:`p-2 rounded-lg bg-muted/50 ${H}`,children:p.jsx(B,{className:"w-4 h-4"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("p",{className:"text-sm text-foreground",children:[p.jsx("span",{className:"font-medium",children:I.user_name})," ",I.description]}),p.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1 mt-1",children:[p.jsx(F1,{className:"w-3 h-3"}),Qg(new Date(I.timestamp),{addSuffix:!0})]})]})]},I.id)})})})]})]}),p.jsxs(at.div,{className:"glass-panel p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("h3",{className:"font-display font-semibold text-foreground flex items-center gap-2",children:[p.jsx(vle,{className:"w-5 h-5 text-secondary"}),"Content Moderation"]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs($i,{variant:"outline",className:"text-emerald border-emerald/30",children:[o.filter(I=>I.status==="approved").length," Approved"]}),p.jsxs($i,{variant:"outline",className:"text-secondary border-secondary/30",children:[o.filter(I=>I.status==="pending").length," Pending"]})]})]}),p.jsx("div",{className:"space-y-3",children:o.length===0?p.jsx("p",{className:"text-muted-foreground text-sm text-center py-8",children:"No items to moderate"}):o.slice(0,5).map((I,j)=>p.jsxs(at.div,{className:"flex items-center gap-4 p-4 rounded-lg bg-muted/30 hover:bg-muted/50 transition-colors",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.05*j},children:[p.jsx("div",{className:`p-2 rounded-lg ${I.type==="publication"?"bg-cyan/20":I.type==="team"?"bg-secondary/20":"bg-primary/20"}`,children:I.type==="publication"?p.jsx(Oi,{className:"w-4 h-4 text-cyan"}):I.type==="team"?p.jsx(Kl,{className:"w-4 h-4 text-secondary"}):p.jsx(q_,{className:"w-4 h-4 text-primary"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"font-medium text-foreground truncate",children:I.title}),p.jsxs("p",{className:"text-xs text-muted-foreground",children:[I.type.charAt(0).toUpperCase()+I.type.slice(1)," "," ",Qg(new Date(I.created_at),{addSuffix:!0})]})]}),p.jsx($i,{variant:"outline",className:I.status==="approved"?"text-emerald border-emerald/30":I.status==="flagged"?"text-destructive border-destructive/30":"text-secondary border-secondary/30",children:I.status}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx(ut,{variant:"ghost",size:"icon",className:"h-8 w-8",children:p.jsx(S9,{className:"w-4 h-4"})}),p.jsx(ut,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:()=>{I.type==="publication"?P(I.id,I.title):I.type==="team"&&R(I.id,I.title)},children:p.jsx(op,{className:"w-4 h-4"})})]})]},I.id))})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"glass-panel p-6",children:[p.jsxs("h3",{className:"font-display font-semibold text-foreground mb-4 flex items-center gap-2",children:[p.jsx(Ps,{className:"w-5 h-5 text-primary"}),"Growth Trends"]}),p.jsx(yl,{width:"100%",height:250,children:p.jsxs(Gw,{data:OGe,children:[p.jsxs("defs",{children:[p.jsxs("linearGradient",{id:"colorUsers",x1:"0",y1:"0",x2:"0",y2:"1",children:[p.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),p.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]}),p.jsxs("linearGradient",{id:"colorPubs",x1:"0",y1:"0",x2:"0",y2:"1",children:[p.jsx("stop",{offset:"5%",stopColor:"hsl(var(--cyan))",stopOpacity:.3}),p.jsx("stop",{offset:"95%",stopColor:"hsl(var(--cyan))",stopOpacity:0})]})]}),p.jsx(Hv,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),p.jsx(_o,{dataKey:"month",stroke:"hsl(var(--muted-foreground))"}),p.jsx(So,{stroke:"hsl(var(--muted-foreground))"}),p.jsx(di,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),p.jsx(ls,{type:"monotone",dataKey:"users",stroke:"hsl(var(--primary))",fillOpacity:1,fill:"url(#colorUsers)",name:"Researchers"}),p.jsx(ls,{type:"monotone",dataKey:"publications",stroke:"hsl(var(--cyan))",fillOpacity:1,fill:"url(#colorPubs)",name:"Publications"})]})})]}),p.jsxs("div",{className:"glass-panel p-6",children:[p.jsxs("h3",{className:"font-display font-semibold text-foreground mb-4 flex items-center gap-2",children:[p.jsx(Kl,{className:"w-5 h-5 text-cyan"}),"Publications by Department"]}),p.jsx(yl,{width:"100%",height:250,children:p.jsxs(Bne,{children:[p.jsx(hc,{data:WN,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:2,dataKey:"value",children:WN.map((I,j)=>p.jsx(Av,{fill:I.fill},`cell-${j}`))}),p.jsx(di,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}})]})}),p.jsx("div",{className:"flex flex-wrap justify-center gap-3 mt-4",children:WN.map(I=>p.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[p.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:I.fill}}),p.jsx("span",{className:"text-muted-foreground",children:I.name})]},I.name))})]})]}),p.jsxs("div",{className:"glass-panel p-6",children:[p.jsxs("h3",{className:"font-display font-semibold text-foreground mb-4 flex items-center gap-2",children:[p.jsx(xu,{className:"w-5 h-5 text-secondary"}),"Journal Quartile Distribution"]}),p.jsx(yl,{width:"100%",height:200,children:p.jsxs(Fne,{data:$q,layout:"vertical",children:[p.jsx(Hv,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),p.jsx(_o,{type:"number",stroke:"hsl(var(--muted-foreground))"}),p.jsx(So,{dataKey:"quartile",type:"category",stroke:"hsl(var(--muted-foreground))"}),p.jsx(di,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),p.jsx(Ru,{dataKey:"count",radius:[0,4,4,0],children:$q.map((I,j)=>p.jsx(Av,{fill:I.color},`cell-${j}`))})]})})]}),p.jsxs(at.div,{className:"glass-panel p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("h3",{className:"font-display font-semibold text-foreground flex items-center gap-2",children:[p.jsx(yo,{className:"w-5 h-5 text-primary"}),"Admin Audit Log"]}),p.jsx(ut,{variant:"ghost",size:"sm",onClick:T,children:p.jsx(mx,{className:"w-4 h-4"})})]}),p.jsx(gl,{className:"h-[250px]",children:p.jsx("div",{className:"space-y-2",children:c.length===0?p.jsxs("div",{className:"text-center py-8",children:[p.jsx($d,{className:"w-10 h-10 text-muted-foreground mx-auto mb-2"}),p.jsx("p",{className:"text-muted-foreground text-sm",children:"No admin actions logged yet"}),p.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:"Actions like content deletion will appear here for accountability"})]}):c.map((I,j)=>p.jsxs(at.div,{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/30",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*j},children:[p.jsx("div",{className:`p-2 rounded-lg ${I.action.includes("delete")?"bg-destructive/20":"bg-primary/20"}`,children:I.action.includes("delete")?p.jsx(op,{className:"w-4 h-4 text-destructive"}):p.jsx(q_,{className:"w-4 h-4 text-primary"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"text-sm text-foreground font-medium",children:I.action.replace("_"," ").replace(/\b\w/g,B=>B.toUpperCase())}),p.jsxs("p",{className:"text-xs text-muted-foreground",children:[I.target_type,": ",I.details?.title||I.details?.name||I.target_id?.slice(0,8)]}),p.jsxs("p",{className:"text-xs text-muted-foreground/70 flex items-center gap-1 mt-1",children:[p.jsx(F1,{className:"w-3 h-3"}),Qg(new Date(I.created_at),{addSuffix:!0})]})]})]},I.id))})})]})]})}function IGe(){const[t,e]=M.useState(!1),[n,r]=M.useState("all"),{toast:i}=ga();async function s(o){e(!0);try{let l=[],c="",u=[];switch(o){case"researchers":const{data:v,error:_}=await ot.from("profiles").select("display_name, email, department, institution, h_index, total_citations, total_publications, orcid_id, created_at");if(_)throw _;l=v||[],u=["Name","Email","Department","Institution","H-Index","Citations","Publications","ORCID","Joined"],c=`researchers_report_${new Date().toISOString().split("T")[0]}.csv`;break;case"publications":const{data:E,error:T}=await ot.from("researcher_publications").select("title, journal, year, citations, quartile, doi, created_at");if(T)throw T;l=E||[],u=["Title","Journal","Year","Citations","Quartile","DOI","Added Date"],c=`publications_report_${new Date().toISOString().split("T")[0]}.csv`;break;case"departments":const{data:A,error:P}=await ot.from("profiles").select("department, h_index, total_citations, total_publications");if(P)throw P;const R=new Map;(A||[]).forEach(N=>{const L=N.department||"Unknown",I=R.get(L)||{count:0,avgHIndex:0,totalCitations:0,totalPubs:0};I.count++,I.avgHIndex+=N.h_index||0,I.totalCitations+=N.total_citations||0,I.totalPubs+=N.total_publications||0,R.set(L,I)}),l=Array.from(R.entries()).map(([N,L])=>({department:N,researchers:L.count,avg_h_index:Math.round(L.avgHIndex/L.count*10)/10,total_citations:L.totalCitations,total_publications:L.totalPubs})),u=["Department","Researchers","Avg H-Index","Total Citations","Total Publications"],c=`department_report_${new Date().toISOString().split("T")[0]}.csv`;break}const d=[u.join(",")];l.forEach(v=>{const _=Object.values(v).map(E=>{const T=String(E??"");return T.includes(",")?`"${T}"`:T});d.push(_.join(","))});const h=d.join(`
`),m=new Blob([h],{type:"text/csv;charset=utf-8;"}),b=URL.createObjectURL(m),x=document.createElement("a");x.href=b,x.download=c,x.click(),URL.revokeObjectURL(b),i({title:"Report Generated",description:`${c} has been downloaded`})}catch{i({variant:"destructive",title:"Error",description:"Failed to generate report"})}finally{e(!1)}}const a=[{id:"researchers",title:"Researchers Report",description:"Complete list of all registered researchers with their metrics",icon:pi,color:"primary"},{id:"publications",title:"Publications Report",description:"All publications with journal, citations, and quartile data",icon:Oi,color:"cyan"},{id:"departments",title:"Department Analysis",description:"Aggregated statistics by department",icon:Kl,color:"secondary"}];return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"glass-panel p-4 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(px,{className:"w-5 h-5 text-muted-foreground"}),p.jsx("span",{className:"text-sm text-foreground",children:"Report Period:"})]}),p.jsxs(bp,{value:n,onValueChange:r,children:[p.jsx(af,{className:"w-[200px]",children:p.jsx(wp,{placeholder:"Select period"})}),p.jsxs(of,{children:[p.jsx(Tr,{value:"all",children:"All Time"}),p.jsx(Tr,{value:"year",children:"Last Year"}),p.jsx(Tr,{value:"quarter",children:"Last Quarter"}),p.jsx(Tr,{value:"month",children:"Last Month"})]})]})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:a.map((o,l)=>p.jsxs(at.div,{className:"glass-panel p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.1},children:[p.jsx("div",{className:`w-12 h-12 rounded-xl bg-${o.color}/20 flex items-center justify-center mb-4`,children:p.jsx(o.icon,{className:`w-6 h-6 text-${o.color}`})}),p.jsx("h3",{className:"font-display font-semibold text-foreground mb-2",children:o.title}),p.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:o.description}),p.jsx(ut,{onClick:()=>s(o.id),disabled:t,className:"w-full bg-gradient-to-r from-primary to-cyan hover:opacity-90",children:t?p.jsxs(p.Fragment,{children:[p.jsx(bu,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating..."]}):p.jsxs(p.Fragment,{children:[p.jsx(Xd,{className:"w-4 h-4 mr-2"}),"Download CSV"]})})]},o.id))}),p.jsxs("div",{className:"glass-panel p-6",children:[p.jsxs("h3",{className:"font-display font-semibold text-foreground mb-4 flex items-center gap-2",children:[p.jsx(yo,{className:"w-5 h-5 text-primary"}),"Report Summary"]}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Reports are generated in CSV format for easy import into Excel, Google Sheets, or other data analysis tools. The data includes all available metrics from the platform's database."}),p.jsx("div",{className:"mt-4 p-4 rounded-lg bg-muted/30 border border-border",children:p.jsxs("p",{className:"text-xs text-muted-foreground",children:[p.jsx("strong",{children:"Note:"})," Reports are generated based on the current database state. For historical data or custom date ranges, please contact the system administrator."]})})]})]})}function kGe(){const{user:t,isLoading:e}=qr(),{isAdmin:n,isLoading:r}=AX(),i=oy(),[s,a]=M.useState({totalUsers:0,totalPublications:0,totalChatSessions:0,totalDashboards:0});if(M.useEffect(()=>{async function l(){if(!n)return;const[c,u,d,h]=await Promise.all([ot.from("profiles").select("id",{count:"exact",head:!0}),ot.from("researcher_publications").select("id",{count:"exact",head:!0}),ot.from("chat_history").select("id",{count:"exact",head:!0}),ot.from("saved_dashboards").select("id",{count:"exact",head:!0})]);a({totalUsers:c.count||0,totalPublications:u.count||0,totalChatSessions:d.count||0,totalDashboards:h.count||0})}l()},[n]),e||r)return p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsx("div",{className:"animate-pulse text-muted-foreground",children:"Loading..."})});if(!t)return p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx($d,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),p.jsx("h1",{className:"text-xl font-display font-bold text-foreground mb-2",children:"Authentication Required"}),p.jsx("p",{className:"text-muted-foreground mb-4",children:"Please sign in to access the admin dashboard."}),p.jsx(ut,{onClick:()=>i("/"),children:"Go to Home"})]})});if(!n)return p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx($d,{className:"w-16 h-16 text-destructive mx-auto mb-4"}),p.jsx("h1",{className:"text-xl font-display font-bold text-foreground mb-2",children:"Access Denied"}),p.jsx("p",{className:"text-muted-foreground mb-4",children:"You don't have permission to access the admin dashboard."}),p.jsx(ut,{onClick:()=>i("/"),children:"Go to Home"})]})});const o=[{label:"Total Researchers",value:s.totalUsers,icon:pi,color:"primary"},{label:"Publications",value:s.totalPublications,icon:Oi,color:"cyan"},{label:"AI Chat Sessions",value:s.totalChatSessions,icon:yo,color:"secondary"},{label:"Saved Dashboards",value:s.totalDashboards,icon:ov,color:"emerald"}];return p.jsxs("div",{className:"min-h-screen bg-background",children:[p.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 left-1/4 w-[600px] h-[600px] bg-primary/5 rounded-full blur-[120px]"}),p.jsx("div",{className:"absolute bottom-0 right-1/4 w-[500px] h-[500px] bg-secondary/5 rounded-full blur-[100px]"})]}),p.jsxs("div",{className:"relative container mx-auto px-4 py-8",children:[p.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[p.jsx(ut,{variant:"ghost",size:"icon",onClick:()=>i("/"),children:p.jsx(b9,{className:"w-5 h-5"})}),p.jsxs("div",{children:[p.jsxs("h1",{className:"font-display text-3xl font-bold text-foreground flex items-center gap-3",children:[p.jsx($d,{className:"w-8 h-8 text-primary"}),"Admin Dashboard"]}),p.jsx("p",{className:"text-muted-foreground",children:"University-wide research analytics and user management"})]})]}),p.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:o.map((l,c)=>p.jsx(at.div,{className:"glass-panel p-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:c*.1},children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:`p-2 rounded-lg bg-${l.color}/20`,children:p.jsx(l.icon,{className:`w-5 h-5 text-${l.color}`})}),p.jsxs("div",{children:[p.jsx("p",{className:"font-display font-bold text-2xl text-foreground",children:l.value}),p.jsx("p",{className:"text-xs text-muted-foreground",children:l.label})]})]})},l.label))}),p.jsxs(gse,{defaultValue:"analytics",className:"space-y-6",children:[p.jsxs(BU,{className:"glass-panel p-1",children:[p.jsxs(sv,{value:"analytics",className:"gap-2",children:[p.jsx(Ps,{className:"w-4 h-4"}),"Analytics"]}),p.jsxs(sv,{value:"users",className:"gap-2",children:[p.jsx(yle,{className:"w-4 h-4"}),"User Management"]}),p.jsxs(sv,{value:"reports",className:"gap-2",children:[p.jsx(Xd,{className:"w-4 h-4"}),"Reports"]})]}),p.jsx(av,{value:"analytics",children:p.jsx(NGe,{})}),p.jsx(av,{value:"users",children:p.jsx(RGe,{})}),p.jsx(av,{value:"reports",children:p.jsx(IGe,{})})]})]})]})}const DGe=[{id:"overview",label:"Overview",icon:ov},{id:"publications",label:"Publications",icon:Oi},{id:"search",label:"Search",icon:ap},{id:"teams",label:"Teams",icon:pi},{id:"citations",label:"Impact",icon:Ps},{id:"collaborations",label:"Network",icon:dw},{id:"orcid",label:"ORCID",icon:pj}];function jGe(){const{user:t,profile:e,isLoading:n}=qr(),r=oy(),[i,s]=M.useState("overview");if(M.useEffect(()=>{!n&&!t&&r("/")},[t,n,r]),n)return p.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:p.jsx("div",{className:"animate-pulse text-muted-foreground",children:"Loading..."})});if(!t||!e)return null;const a=e.display_name?.split(" ").map(l=>l[0]).join("").toUpperCase().slice(0,2)||"R",o=()=>{window.location.reload()};return p.jsxs("div",{className:"min-h-screen bg-background",children:[p.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 left-1/4 w-[600px] h-[600px] bg-primary/5 rounded-full blur-[120px]"}),p.jsx("div",{className:"absolute bottom-0 right-1/4 w-[500px] h-[500px] bg-secondary/5 rounded-full blur-[100px]"})]}),p.jsxs("div",{className:"relative",children:[p.jsx("header",{className:"sticky top-0 z-50 glass-panel m-4 px-6 py-4",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx(ut,{variant:"ghost",size:"icon",onClick:()=>r("/"),children:p.jsx(b9,{className:"w-5 h-5"})}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs(bw,{className:"h-10 w-10",children:[p.jsx(zT,{src:e.avatar_url||void 0}),p.jsx(ww,{className:"bg-gradient-to-br from-primary to-cyan text-primary-foreground",children:a})]}),p.jsxs("div",{children:[p.jsx("h1",{className:"font-display font-bold text-lg text-foreground",children:e.display_name||"Researcher Dashboard"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:e.institution||"Your research hub"})]})]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("div",{className:"hidden lg:flex items-center gap-4 mr-4",children:[p.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-primary/10",children:[p.jsx(yu,{className:"w-4 h-4 text-primary"}),p.jsxs("span",{className:"text-sm font-medium text-foreground",children:["H-Index: ",e.h_index||0]})]}),p.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-secondary/10",children:[p.jsx(Ps,{className:"w-4 h-4 text-secondary"}),p.jsxs("span",{className:"text-sm font-medium text-foreground",children:[e.total_citations?.toLocaleString()||0," Citations"]})]}),p.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-cyan/10",children:[p.jsx(Oi,{className:"w-4 h-4 text-cyan"}),p.jsxs("span",{className:"text-sm font-medium text-foreground",children:[e.total_publications||0," Papers"]})]})]}),p.jsx(PY,{})]})]})}),p.jsx("div",{className:"container mx-auto px-4 py-6",children:p.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[p.jsx("aside",{className:"lg:w-64 flex-shrink-0",children:p.jsx("div",{className:"glass-panel p-4 sticky top-28",children:p.jsx("nav",{className:"space-y-1",children:DGe.map(l=>p.jsxs("button",{onClick:()=>s(l.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors ${i===l.id?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted"}`,children:[p.jsx(l.icon,{className:"w-4 h-4"}),l.label]},l.id))})})}),p.jsx("main",{className:"flex-1 min-w-0",children:p.jsxs(at.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},children:[i==="overview"&&p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[p.jsx(b1,{icon:yu,label:"H-Index",value:e.h_index||0,trend:"+3 this year",color:"primary"}),p.jsx(b1,{icon:Ps,label:"Citations",value:e.total_citations?.toLocaleString()||"0",trend:"+128 this month",color:"secondary"}),p.jsx(b1,{icon:Oi,label:"Publications",value:e.total_publications||0,trend:"12 in Q1 journals",color:"cyan"}),p.jsx(b1,{icon:pi,label:"Co-Authors",value:"47",trend:"8 countries",color:"emerald"})]}),p.jsxs("div",{className:"glass-panel p-6",children:[p.jsxs("h3",{className:"font-semibold text-foreground flex items-center gap-2 mb-4",children:[p.jsx(Kl,{className:"w-4 h-4"}),"Affiliation"]}),p.jsxs("div",{className:"space-y-2 text-sm",children:[p.jsx("p",{className:"text-foreground",children:e.institution||"Not specified"}),p.jsx("p",{className:"text-muted-foreground",children:e.department||"Department not specified"}),e.orcid_id&&p.jsxs("a",{href:`https://orcid.org/${e.orcid_id}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-primary hover:underline",children:["ORCID: ",e.orcid_id]})]})]}),p.jsxs("div",{className:"glass-panel p-6",children:[p.jsxs("h3",{className:"font-semibold text-foreground mb-4 flex items-center gap-2",children:[p.jsx(Ps,{className:"w-4 h-4"}),"H-Index Growth"]}),p.jsx(_ie,{})]}),p.jsxs("div",{className:"glass-panel p-6",children:[p.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Biography"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:e.bio||"No biography added yet. Update your profile to add one."})]})]}),i==="publications"&&p.jsx("div",{className:"glass-panel p-6",children:p.jsx(bie,{})}),i==="search"&&p.jsx("div",{className:"glass-panel p-6",children:p.jsx($ie,{})}),i==="teams"&&p.jsx("div",{className:"glass-panel p-6",children:p.jsx(yse,{})}),i==="citations"&&p.jsx("div",{className:"glass-panel p-6",children:p.jsx(bse,{})}),i==="collaborations"&&p.jsx("div",{className:"glass-panel p-6",children:p.jsx(wie,{})}),i==="orcid"&&p.jsx("div",{className:"glass-panel p-6",children:p.jsx(Sie,{currentOrcidId:e.orcid_id,onSyncComplete:o})})]},i)})]})})]})]})}function b1({icon:t,label:e,value:n,trend:r,color:i}){const s={primary:"bg-primary/10 text-primary",secondary:"bg-secondary/10 text-secondary",cyan:"bg-cyan/10 text-cyan",emerald:"bg-emerald/10 text-emerald"};return p.jsxs(at.div,{className:"glass-panel p-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[p.jsx("div",{className:`w-8 h-8 rounded-lg ${s[i]} flex items-center justify-center mb-3`,children:p.jsx(t,{className:"w-4 h-4"})}),p.jsx("p",{className:"text-2xl font-bold text-foreground",children:n}),p.jsx("p",{className:"text-sm text-muted-foreground",children:e}),p.jsx("p",{className:"text-xs text-emerald mt-1",children:r})]})}var hM="Collapsible",[LGe]=cs(hM),[UGe,KU]=LGe(hM),yae=M.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:s,onOpenChange:a,...o}=t,[l,c]=bl({prop:r,defaultProp:i??!1,onChange:a,caller:hM});return p.jsx(UGe,{scope:n,disabled:s,contentId:go(),open:l,onOpenToggle:M.useCallback(()=>c(u=>!u),[c]),children:p.jsx(Pt.div,{"data-state":YU(l),"data-disabled":s?"":void 0,...o,ref:e})})});yae.displayName=hM;var xae="CollapsibleTrigger",bae=M.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,i=KU(xae,n);return p.jsx(Pt.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":YU(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:e,onClick:Je(t.onClick,i.onOpenToggle)})});bae.displayName=xae;var XU="CollapsibleContent",wae=M.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=KU(XU,t.__scopeCollapsible);return p.jsx(Wi,{present:n||i.open,children:({present:s})=>p.jsx(FGe,{...r,ref:e,present:s})})});wae.displayName=XU;var FGe=M.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:i,...s}=t,a=KU(XU,n),[o,l]=M.useState(r),c=M.useRef(null),u=tn(e,c),d=M.useRef(0),h=d.current,m=M.useRef(0),b=m.current,x=a.open||o,v=M.useRef(x),_=M.useRef(void 0);return M.useEffect(()=>{const E=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(E)},[]),Gr(()=>{const E=c.current;if(E){_.current=_.current||{transitionDuration:E.style.transitionDuration,animationName:E.style.animationName},E.style.transitionDuration="0s",E.style.animationName="none";const T=E.getBoundingClientRect();d.current=T.height,m.current=T.width,v.current||(E.style.transitionDuration=_.current.transitionDuration,E.style.animationName=_.current.animationName),l(r)}},[a.open,r]),p.jsx(Pt.div,{"data-state":YU(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!x,...s,ref:u,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":b?`${b}px`:void 0,...t.style},children:x&&i})});function YU(t){return t?"open":"closed"}var BGe=yae;const zGe=BGe,$Ge=bae,VGe=wae,Vq=[{path:"/",label:"Home"},{path:"/research",label:"Research Network"}];function HGe(){const[t,e]=M.useState(!1),[n,r]=M.useState(!1),{user:i}=qr(),s=oy(),a=ay();return p.jsxs(p.Fragment,{children:[p.jsx("header",{className:"fixed top-0 left-0 right-0 z-50",children:p.jsxs("div",{className:"glass-panel m-4 px-6 py-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs(at.div,{className:"flex items-center gap-3 cursor-pointer",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},onClick:()=>s("/"),children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-primary to-cyan flex items-center justify-center",children:p.jsx(xu,{className:"w-5 h-5 text-white"})}),p.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-secondary rounded-full animate-pulse"})]}),p.jsxs("div",{className:"hidden sm:block",children:[p.jsx("h1",{className:"font-display font-bold text-lg text-foreground",children:"UDSM Research"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Global Intelligence Platform"})]})]}),p.jsx("nav",{className:"hidden md:flex items-center gap-1",children:Vq.map(o=>p.jsx(sP,{to:o.path,className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${a.pathname===o.path?"bg-primary/20 text-primary":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,children:o.label},o.path))}),p.jsxs("div",{className:"flex items-center gap-3",children:[i?p.jsxs(p.Fragment,{children:[p.jsxs(ut,{variant:"outline",size:"sm",onClick:()=>s("/dashboard"),className:"hidden sm:flex gap-2",children:[p.jsx(ap,{className:"w-4 h-4"}),"My Dashboard"]}),p.jsx(jX,{onOpenProfile:()=>s("/dashboard")})]}):p.jsxs(ut,{onClick:()=>r(!0),className:"gap-2",children:[p.jsx(T9,{className:"w-4 h-4"}),p.jsx("span",{className:"hidden sm:inline",children:"Sign In"})]}),p.jsx(ut,{variant:"ghost",size:"icon",className:"md:hidden",onClick:()=>e(!t),children:t?p.jsx(xo,{className:"w-5 h-5"}):p.jsx(P9,{className:"w-5 h-5"})})]})]}),t&&p.jsx(at.div,{className:"md:hidden mt-4 pt-4 border-t border-border",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:p.jsxs("nav",{className:"flex flex-col gap-2",children:[Vq.map(o=>p.jsx(sP,{to:o.path,className:`px-4 py-2 rounded-lg text-sm font-medium ${a.pathname===o.path?"bg-primary/20 text-primary":"text-muted-foreground"}`,onClick:()=>e(!1),children:o.label},o.path)),i&&p.jsx(sP,{to:"/dashboard",className:"px-4 py-2 rounded-lg text-sm font-medium text-muted-foreground",onClick:()=>e(!1),children:"My Dashboard"})]})})]})}),p.jsx(zne,{isOpen:n,onClose:()=>r(!1)})]})}function WGe(){const[t,e]=M.useState([]),[n,r]=M.useState({}),[i,s]=M.useState(!0),[a,o]=M.useState(""),[l,c]=M.useState("all"),[u,d]=M.useState("all"),[h,m]=M.useState(null),[b,x]=M.useState(!1),[v,_]=M.useState("apa"),[E,T]=M.useState(!1),[A,P]=M.useState(!1),{toast:R}=ga();M.useEffect(()=>{N()},[]);async function N(){s(!0);const{data:W,error:K}=await ot.from("researcher_publications").select("*").order("year",{ascending:!1});if(K){R({variant:"destructive",title:"Error",description:"Failed to load publications"}),s(!1);return}e(W||[]);const te=[...new Set((W||[]).map(z=>z.user_id))];if(te.length>0){const{data:z}=await ot.from("profiles").select("user_id, display_name, institution").in("user_id",te),V={};z?.forEach(X=>{V[X.user_id]={display_name:X.display_name,institution:X.institution}}),r(V)}s(!1)}const L=t.filter(W=>{const K=W.title.toLowerCase().includes(a.toLowerCase())||W.journal?.toLowerCase().includes(a.toLowerCase())||W.abstract?.toLowerCase().includes(a.toLowerCase())||W.keywords?.some(V=>V.toLowerCase().includes(a.toLowerCase())),te=l==="all"||W.year?.toString()===l,z=u==="all"||W.quartile===u;return K&&te&&z}),I=[...new Set(t.map(W=>W.year).filter(Boolean))].sort((W,K)=>(K||0)-(W||0)),j=["Q1","Q2","Q3","Q4"];function B(W,K){const te=n[W.user_id]?.display_name||"Unknown Author",z=W.year||"n.d.",V=W.title,X=W.journal||"Unknown Journal";switch(K){case"apa":return`${te} (${z}). ${V}. *${X}*.${W.doi?` https://doi.org/${W.doi}`:""}`;case"mla":return`${te}. "${V}." *${X}*, ${z}.${W.doi?` doi:${W.doi}`:""}`;case"chicago":return`${te}. "${V}." ${X} (${z}).${W.doi?` https://doi.org/${W.doi}`:""}`;case"bibtex":return`@article{${te.split(" ")[0]?.toLowerCase()||"unknown"}${z},
  author = {${te}},
  title = {${V}},
  journal = {${X}},
  year = {${z}}${W.doi?`,
  doi = {${W.doi}}`:""}
}`;default:return""}}async function H(W){await navigator.clipboard.writeText(W),T(!0),setTimeout(()=>T(!1),2e3),R({title:"Citation copied",description:"Citation has been copied to your clipboard"})}function J(W){W.pdf_url?window.open(W.pdf_url,"_blank"):W.doi?window.open(`https://doi.org/${W.doi}`,"_blank"):R({variant:"destructive",title:"No download available",description:"This publication does not have a downloadable file"})}const G={Q1:"bg-emerald/20 text-emerald border-emerald/30",Q2:"bg-primary/20 text-primary border-primary/30",Q3:"bg-secondary/20 text-secondary border-secondary/30",Q4:"bg-muted text-muted-foreground border-muted"};return p.jsxs("div",{className:"min-h-screen bg-background",children:[p.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 left-1/4 w-[600px] h-[600px] bg-primary/5 rounded-full blur-[120px]"}),p.jsx("div",{className:"absolute bottom-0 right-1/4 w-[500px] h-[500px] bg-cyan/5 rounded-full blur-[100px]"})]}),p.jsx(HGe,{}),p.jsxs("main",{className:"relative container mx-auto px-4 py-8 pt-24",children:[p.jsxs(at.div,{className:"text-center mb-12",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[p.jsx("h1",{className:"font-display text-4xl md:text-5xl font-bold text-foreground mb-4",children:"Research Network"}),p.jsx("p",{className:"text-muted-foreground text-lg max-w-2xl mx-auto",children:"Discover, read, and cite cutting-edge research from UDSM scholars worldwide"})]}),p.jsx(at.div,{className:"glass-panel p-6 mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:p.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[p.jsxs("div",{className:"relative flex-1",children:[p.jsx(ap,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),p.jsx(sr,{placeholder:"Search publications by title, journal, abstract, or keywords...",value:a,onChange:W=>o(W.target.value),className:"pl-11 h-12 text-lg"})]}),p.jsxs(zGe,{open:A,onOpenChange:P,children:[p.jsx($Ge,{asChild:!0,children:p.jsxs(ut,{variant:"outline",className:"h-12 gap-2",children:[p.jsx(E9,{className:"w-4 h-4"}),"Filters",p.jsx(_T,{className:`w-4 h-4 transition-transform ${A?"rotate-180":""}`})]})}),p.jsx(VGe,{className:"mt-4",children:p.jsxs("div",{className:"flex flex-wrap gap-4",children:[p.jsxs(bp,{value:l,onValueChange:c,children:[p.jsxs(af,{className:"w-[140px]",children:[p.jsx(px,{className:"w-4 h-4 mr-2"}),p.jsx(wp,{placeholder:"Year"})]}),p.jsxs(of,{children:[p.jsx(Tr,{value:"all",children:"All Years"}),I.map(W=>p.jsx(Tr,{value:W.toString(),children:W},W))]})]}),p.jsxs(bp,{value:u,onValueChange:d,children:[p.jsxs(af,{className:"w-[140px]",children:[p.jsx(yu,{className:"w-4 h-4 mr-2"}),p.jsx(wp,{placeholder:"Quartile"})]}),p.jsxs(of,{children:[p.jsx(Tr,{value:"all",children:"All Quartiles"}),j.map(W=>p.jsx(Tr,{value:W,children:W},W))]})]}),(l!=="all"||u!=="all")&&p.jsxs(ut,{variant:"ghost",size:"sm",onClick:()=>{c("all"),d("all")},children:[p.jsx(xo,{className:"w-4 h-4 mr-1"}),"Clear filters"]})]})})]})]})}),p.jsx("div",{className:"flex items-center justify-between mb-6",children:p.jsxs("p",{className:"text-muted-foreground",children:[L.length," publication",L.length!==1?"s":""," found"]})}),p.jsx("div",{className:"grid gap-6",children:p.jsx(cf,{mode:"popLayout",children:i?p.jsx(at.div,{className:"text-center py-16",initial:{opacity:0},animate:{opacity:1},children:p.jsx("div",{className:"animate-pulse text-muted-foreground",children:"Loading publications..."})}):L.length===0?p.jsxs(at.div,{className:"text-center py-16",initial:{opacity:0},animate:{opacity:1},children:[p.jsx(Oi,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),p.jsx("h3",{className:"text-xl font-display font-bold text-foreground mb-2",children:"No publications found"}),p.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search or filters"})]}):L.map((W,K)=>p.jsx(at.div,{className:"glass-panel p-6 hover:bg-muted/50 transition-colors",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:K*.05},layout:!0,children:p.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start gap-4",children:[p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("h3",{className:"font-display font-semibold text-lg text-foreground mb-2 hover:text-primary cursor-pointer",onClick:()=>m(W),children:W.title}),p.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm text-muted-foreground mb-3",children:[p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(pi,{className:"w-4 h-4"}),n[W.user_id]?.display_name||"Unknown Author"]}),W.journal&&p.jsxs(p.Fragment,{children:[p.jsx("span",{children:""}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(yo,{className:"w-4 h-4"}),W.journal]})]}),W.year&&p.jsxs(p.Fragment,{children:[p.jsx("span",{children:""}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(px,{className:"w-4 h-4"}),W.year]})]})]}),W.abstract&&p.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:W.abstract}),W.keywords&&W.keywords.length>0&&p.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[W.keywords.slice(0,5).map((te,z)=>p.jsx($i,{variant:"outline",className:"text-xs",children:te},z)),W.keywords.length>5&&p.jsxs($i,{variant:"outline",className:"text-xs",children:["+",W.keywords.length-5," more"]})]}),p.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[W.quartile&&p.jsx($i,{variant:"outline",className:G[W.quartile],children:W.quartile}),W.citations!==null&&W.citations>0&&p.jsxs("span",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[p.jsx(ZM,{className:"w-4 h-4"}),W.citations," citations"]}),W.doi&&p.jsxs("a",{href:`https://doi.org/${W.doi}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline flex items-center gap-1",children:[p.jsx(xu,{className:"w-4 h-4"}),"DOI"]})]})]}),p.jsxs("div",{className:"flex lg:flex-col gap-2 shrink-0",children:[p.jsxs(ut,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>m(W),children:[p.jsx(Dx,{className:"w-4 h-4"}),"View"]}),p.jsxs(ut,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>J(W),children:[p.jsx(Xd,{className:"w-4 h-4"}),"Download"]}),p.jsxs(ut,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>{m(W),x(!0)},children:[p.jsx(ZM,{className:"w-4 h-4"}),"Cite"]})]})]})},W.id))})})]}),p.jsx(Qv,{open:!!h&&!b,onOpenChange:W=>!W&&m(null),children:p.jsxs(Sp,{className:"max-w-3xl max-h-[90vh] overflow-hidden",children:[p.jsx(Ep,{children:p.jsx(Tp,{className:"font-display text-xl pr-8",children:h?.title})}),p.jsx(gl,{className:"max-h-[70vh] pr-4",children:p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-muted-foreground",children:[p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(pi,{className:"w-4 h-4"}),h&&n[h.user_id]?.display_name]}),h?.journal&&p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(yo,{className:"w-4 h-4"}),h.journal]}),h?.year&&p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(px,{className:"w-4 h-4"}),h.year]})]}),p.jsxs("div",{className:"flex flex-wrap gap-2",children:[h?.quartile&&p.jsxs($i,{variant:"outline",className:G[h.quartile],children:[h.quartile," Journal"]}),h?.citations!=null&&p.jsxs($i,{variant:"outline",children:[h.citations," Citations"]})]}),h?.abstract&&p.jsxs("div",{children:[p.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Abstract"}),p.jsx("p",{className:"text-muted-foreground leading-relaxed",children:h.abstract})]}),h?.co_authors&&h.co_authors.length>0&&p.jsxs("div",{children:[p.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Co-Authors"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:h.co_authors.map((W,K)=>p.jsx($i,{variant:"secondary",children:W},K))})]}),h?.keywords&&h.keywords.length>0&&p.jsxs("div",{children:[p.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Keywords"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:h.keywords.map((W,K)=>p.jsx($i,{variant:"outline",children:W},K))})]}),h?.doi&&p.jsxs("div",{children:[p.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"DOI"}),p.jsxs("a",{href:`https://doi.org/${h.doi}`,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:["https://doi.org/",h.doi]})]}),p.jsxs("div",{className:"flex gap-3 pt-4 border-t border-border",children:[p.jsxs(ut,{className:"gap-2",onClick:()=>h&&J(h),children:[p.jsx(Xd,{className:"w-4 h-4"}),"Download PDF"]}),p.jsxs(ut,{variant:"outline",className:"gap-2",onClick:()=>x(!0),children:[p.jsx(ZM,{className:"w-4 h-4"}),"Generate Citation"]})]})]})})]})}),p.jsx(Qv,{open:b,onOpenChange:x,children:p.jsxs(Sp,{className:"max-w-lg",children:[p.jsx(Ep,{children:p.jsx(Tp,{className:"font-display",children:"Generate Citation"})}),p.jsxs("div",{className:"space-y-4",children:[p.jsx("div",{className:"flex gap-2",children:["apa","mla","chicago","bibtex"].map(W=>p.jsx(ut,{variant:v===W?"default":"outline",size:"sm",onClick:()=>_(W),children:W.toUpperCase()},W))}),p.jsxs("div",{className:"relative",children:[p.jsx("pre",{className:"glass-panel p-4 text-sm text-foreground whitespace-pre-wrap font-mono overflow-x-auto",children:h&&B(h,v)}),p.jsx(ut,{size:"sm",className:"absolute top-2 right-2 gap-1",onClick:()=>h&&H(B(h,v)),children:E?p.jsxs(p.Fragment,{children:[p.jsx(ty,{className:"w-4 h-4"}),"Copied"]}):p.jsxs(p.Fragment,{children:[p.jsx(ile,{className:"w-4 h-4"}),"Copy"]})})]})]})]})})]})}const GGe=()=>{const t=ay();return M.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),p.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),p.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),p.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},qGe=new zde,KGe=()=>p.jsx(Vde,{client:qGe,children:p.jsx(Mme,{children:p.jsxs(vde,{children:[p.jsx(tce,{}),p.jsx(Ice,{}),p.jsx($fe,{basename:"/udsm-research-impact/",children:p.jsxs(Dfe,{children:[p.jsx(Tg,{path:"/",element:p.jsx(u8e,{})}),p.jsx(Tg,{path:"/dashboard",element:p.jsx(jGe,{})}),p.jsx(Tg,{path:"/admin",element:p.jsx(kGe,{})}),p.jsx(Tg,{path:"/research",element:p.jsx(WGe,{})}),p.jsx(Tg,{path:"*",element:p.jsx(GGe,{})})]})})]})})});Wq.createRoot(document.getElementById("root")).render(p.jsx(KGe,{}));
