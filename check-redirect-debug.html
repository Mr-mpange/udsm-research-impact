<!DOCTYPE html>
<html>
<head>
    <title>Check Last Redirect</title>
</head>
<body>
    <h1>Redirect Debug Info</h1>
    <div id="output"></div>
    
    <script>
        const lastRedirect = localStorage.getItem('lastRedirect');
        const output = document.getElementById('output');
        
        if (lastRedirect) {
            const info = JSON.parse(lastRedirect);
            output.innerHTML = `
                <h2>Last Redirect Info:</h2>
                <pre>${JSON.stringify(info, null, 2)}</pre>
                <p><strong>Intended URL:</strong> ${info.url}</p>
                <p><strong>Current URL:</strong> ${window.location.pathname}</p>
                <p><strong>Roles:</strong> ${info.roles?.join(', ')}</p>
                <p><strong>Is Admin:</strong> ${info.isAdmin}</p>
                <p><strong>Is Moderator:</strong> ${info.isModerator}</p>
                <p><strong>Match:</strong> ${info.url === window.location.pathname ? '✅ YES' : '❌ NO - REDIRECT FAILED'}</p>
            `;
        } else {
            output.innerHTML = '<p>No redirect info found. Please sign in first.</p>';
        }
    </script>
</body>
</html>
